{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"FastAPI-Easy \u6587\u6863\u4e2d\u5fc3","text":"<p>\u6b22\u8fce\u6765\u5230 FastAPI-Easy \u9879\u76ee\u7684\u6587\u6863\u4e2d\u5fc3\uff01\u8fd9\u91cc\u6c47\u96c6\u4e86\u4ece\u5165\u95e8\u6559\u7a0b\u5230\u6df1\u5ea6\u8bb2\u89e3\u7684\u6240\u6709\u8d44\u6e90\u3002</p>"},{"location":"#_1","title":"\ud83d\udcda \u6587\u6863\u7ed3\u6784","text":"<p>\u6211\u4eec\u91c7\u7528 Di\u00e1taxis \u6846\u67b6\u5c06\u6587\u6863\u5206\u4e3a\u56db\u5927\u7c7b\uff1a</p>"},{"location":"#tutorial","title":"\ud83d\udcd6 \u6559\u7a0b (Tutorial)","text":"<p>\u9002\u5408\u65b0\u624b\uff0c\u624b\u628a\u624b\u6559\u4f60\u4ece\u96f6\u5f00\u59cb\uff1a</p> <ul> <li>5\u5206\u949f\u5feb\u901f\u4e0a\u624b - \u8fd0\u884c\u4f60\u7684\u7b2c\u4e00\u4e2a CRUD API</li> <li>\u6570\u636e\u5e93\u96c6\u6210 - \u8fde\u63a5\u771f\u5b9e\u6570\u636e\u5e93</li> <li>\u5b8c\u6574\u793a\u4f8b - \u7535\u5546 API \u5b8c\u6574\u5b9e\u73b0</li> </ul>"},{"location":"#guides","title":"\ud83d\udcd6 \u6307\u5357 (Guides)","text":"<p>\u89e3\u51b3\u5177\u4f53\u95ee\u9898\u7684\u5b9e\u7528\u6307\u5357\uff1a</p> <ul> <li>\u67e5\u8be2\u6307\u5357 - \u641c\u7d22\u3001\u8fc7\u6ee4\u4e0e\u6392\u5e8f</li> <li>\u6743\u9650\u63a7\u5236 - \u4fdd\u62a4\u4f60\u7684 API</li> <li>\u5ba1\u8ba1\u65e5\u5fd7 - \u8ffd\u8e2a\u6240\u6709\u64cd\u4f5c</li> <li>\u9519\u8bef\u5904\u7406 - \u4f18\u96c5\u5730\u5904\u7406\u5f02\u5e38</li> <li>\u8f6f\u5220\u9664 - \u903b\u8f91\u5220\u9664\u6570\u636e</li> <li>\u6279\u91cf\u64cd\u4f5c - \u63d0\u9ad8\u6548\u7387</li> <li>\u6570\u636e\u5e93\u8fc1\u79fb - \u7ba1\u7406 Schema \u53d8\u66f4</li> <li>\u6700\u4f73\u5b9e\u8df5 - \u751f\u4ea7\u73af\u5883\u5efa\u8bae</li> <li>\u6545\u969c\u6392\u9664 - \u5e38\u89c1\u95ee\u9898\u89e3\u51b3</li> <li>GraphQL \u652f\u6301 - \u96c6\u6210 GraphQL</li> <li>WebSocket \u652f\u6301 - \u5b9e\u65f6\u901a\u4fe1</li> </ul>"},{"location":"#adapters","title":"\ud83d\udd0c \u9002\u914d\u5668 (Adapters)","text":"<p>\u6570\u636e\u5e93\u652f\u6301\u8be6\u89e3\uff1a</p> <ul> <li>\u9002\u914d\u5668\u6982\u89c8 - \u5982\u4f55\u9009\u62e9\u9002\u914d\u5668</li> <li>SQLAlchemy - \u6700\u6d41\u884c\u7684 ORM</li> <li>Tortoise ORM - \u7c7b\u4f3c Django \u7684\u5f02\u6b65 ORM</li> <li>MongoDB - NoSQL \u6570\u636e\u5e93</li> <li>SQLModel - FastAPI \u4f5c\u8005\u63a8\u8350</li> </ul>"},{"location":"#reference","title":"\ud83d\udcd8 \u53c2\u8003\u624b\u518c (Reference)","text":"<p>\u6280\u672f\u7ec6\u8282\u67e5\u8be2\uff1a</p> <ul> <li>\u914d\u7f6e\u53c2\u6570 - CRUDConfig \u5b8c\u6574\u53c2\u6570</li> <li>\u94a9\u5b50\u7cfb\u7edf - \u751f\u547d\u5468\u671f\u94a9\u5b50\u8be6\u89e3</li> <li>\u67b6\u6784\u8bbe\u8ba1 - \u6df1\u5165\u7406\u89e3\u5185\u90e8\u67b6\u6784</li> <li>\u6570\u636e\u6d41 - \u4ece\u8bf7\u6c42\u5230\u54cd\u5e94\u7684\u5b8c\u6574\u6d41\u7a0b</li> <li>CLI \u5de5\u5177 - \u547d\u4ee4\u884c\u5de5\u5177</li> </ul>"},{"location":"#security","title":"\ud83d\udd12 \u5b89\u5168\u6a21\u5757 (Security)","text":"<p>\u4f01\u4e1a\u7ea7\u5b89\u5168\u7279\u6027\uff1a</p> <ul> <li>\u5b89\u5168\u6982\u89c8 - \u5b89\u5168\u6a21\u5757\u5bfc\u822a</li> <li>\u8ba4\u8bc1 - JWT \u8ba4\u8bc1</li> <li>\u6743\u9650\u63a7\u5236 - \u9ad8\u7ea7\u6743\u9650\u7cfb\u7edf</li> <li>\u5ba1\u8ba1\u65e5\u5fd7 - \u6df1\u5165\u5ba1\u8ba1\u529f\u80fd</li> <li>\u5bc6\u7801\u4e0e\u901f\u7387\u9650\u5236 - \u5b89\u5168\u6700\u4f73\u5b9e\u8df5</li> <li>\u66f4\u591a\u9ad8\u7ea7\u4e3b\u9898...</li> </ul>"},{"location":"#development","title":"\ud83d\udee0\ufe0f \u5f00\u53d1\u6587\u6863 (Development)","text":"<p>\u8d21\u732e\u8005\u6307\u5357\uff1a</p> <ul> <li>\u8d21\u732e\u6307\u5357 - \u5982\u4f55\u53c2\u4e0e\u9879\u76ee</li> <li>\u6d4b\u8bd5\u6307\u5357 - \u7f16\u5199\u548c\u8fd0\u884c\u6d4b\u8bd5</li> </ul>"},{"location":"#_2","title":"\ud83c\udfaf \u5feb\u901f\u5bfc\u822a","text":""},{"location":"#_3","title":"\u6211\u60f3...","text":"<p>\u5feb\u901f\u5f00\u59cb\u4f7f\u7528\u5e94\u7528</p> <p>\u2192 \u5feb\u901f\u5f00\u59cb</p> <p>\u8fde\u63a5\u6570\u636e\u5e93</p> <p>\u2192 \u6570\u636e\u5e93\u96c6\u6210</p> <p>\u5b9e\u73b0\u641c\u7d22\u3001\u8fc7\u6ee4\u548c\u6392\u5e8f</p> <p>\u2192 \u67e5\u8be2\u6307\u5357</p> <p>\u4e86\u89e3\u67b6\u6784\u8bbe\u8ba1</p> <p>\u2192 \u67b6\u6784\u8bbe\u8ba1</p> <p>\u67e5\u770b\u5b8c\u6574\u793a\u4f8b</p> <p>\u2192 \u5b8c\u6574\u793a\u4f8b</p> <p>\u4fdd\u62a4\u6211\u7684 API</p> <p>\u2192 \u6743\u9650\u63a7\u5236 | \u5b89\u5168\u6a21\u5757</p>"},{"location":"#_4","title":"\ud83d\udcd6 \u63a8\u8350\u9605\u8bfb\u987a\u5e8f","text":""},{"location":"#30","title":"\u521d\u5b66\u8005\uff0830 \u5206\u949f\uff09","text":"<ol> <li>\u5feb\u901f\u5f00\u59cb</li> <li>\u6570\u636e\u5e93\u96c6\u6210</li> <li>\u67e5\u8be2\u6307\u5357</li> </ol>"},{"location":"#1","title":"\u8fdb\u9636\u5f00\u53d1\u8005\uff081 \u5c0f\u65f6\uff09","text":"<ol> <li>\u5b8c\u6574\u793a\u4f8b</li> <li>\u57fa\u7840\u6743\u9650\u63a7\u5236</li> <li>\u9519\u8bef\u5904\u7406</li> <li>\u6700\u4f73\u5b9e\u8df5</li> </ol>"},{"location":"#2","title":"\u67b6\u6784\u5e08\uff082 \u5c0f\u65f6\uff09","text":"<ol> <li>\u67b6\u6784\u8bbe\u8ba1</li> <li>\u6570\u636e\u6d41\u8bb2\u89e3</li> <li>\u914d\u7f6e\u8be6\u89e3</li> <li>\u94a9\u5b50\u7cfb\u7edf</li> </ol>"},{"location":"#_5","title":"\ud83d\udca1 \u6838\u5fc3\u6982\u5ff5","text":""},{"location":"#router","title":"Router (\u8def\u7531\u5668)","text":"<p><code>CRUDRouter</code> - \u81ea\u52a8\u751f\u6210 CRUD \u8def\u7531\u7684\u6838\u5fc3\u7c7b\u3002</p>"},{"location":"#adapter","title":"Adapter (\u9002\u914d\u5668)","text":"<p>\u6570\u636e\u5e93\u9002\u914d\u5c42\uff0c\u8d1f\u8d23\u8fde\u63a5\u5177\u4f53\u7684 ORM\uff08\u5982 SQLAlchemy, Tortoise\uff09\u3002</p>"},{"location":"#schema","title":"Schema (\u6a21\u5f0f)","text":"<p>Pydantic \u6570\u636e\u6a21\u578b\uff0c\u5b9a\u4e49 API \u7684\u8bf7\u6c42\u548c\u54cd\u5e94\u683c\u5f0f\u3002</p>"},{"location":"#config","title":"Config (\u914d\u7f6e)","text":"<p><code>CRUDConfig</code> \u5bf9\u8c61\uff0c\u7528\u4e8e\u96c6\u4e2d\u7ba1\u7406\u8def\u7531\u7684\u884c\u4e3a\u914d\u7f6e\u3002</p>"},{"location":"#hook","title":"Hook (\u94a9\u5b50)","text":"<p>\u751f\u547d\u5468\u671f\u94a9\u5b50\uff0c\u5141\u8bb8\u5728 CRUD \u64cd\u4f5c\u524d\u540e\u63d2\u5165\u81ea\u5b9a\u4e49\u903b\u8f91\u3002</p>"},{"location":"#_6","title":"\ud83d\uddc4\ufe0f \u652f\u6301\u7684\u6570\u636e\u5e93","text":"ORM \u6570\u636e\u5e93 \u7c7b\u578b SQLAlchemy PostgreSQL\u3001MySQL\u3001SQLite\u3001Oracle\u3001SQL Server \u5f02\u6b65 Tortoise PostgreSQL\u3001MySQL\u3001SQLite \u5f02\u6b65 MongoDB MongoDB (Motor) \u5f02\u6b65 SQLModel PostgreSQL\u3001MySQL\u3001SQLite\u3001Oracle \u5f02\u6b65 <p>\u8be6\u89c1 \u9002\u914d\u5668\u6982\u89c8</p>"},{"location":"#_7","title":"\ud83c\udd98 \u5e38\u89c1\u95ee\u9898","text":"<p>Q: \u652f\u6301\u54ea\u4e9b\u6570\u636e\u5e93\uff1f</p> <p>A: \u652f\u6301 SQLite\u3001PostgreSQL\u3001MySQL\u3001MongoDB \u7b49\u3002\u8be6\u89c1 \u9002\u914d\u5668\u6982\u89c8</p> <p>Q: \u5982\u4f55\u4f7f\u7528\u641c\u7d22\u529f\u80fd\uff1f</p> <p>A: \u8be6\u89c1 \u67e5\u8be2\u6307\u5357</p> <p>Q: \u6709\u5b8c\u6574\u7684\u9879\u76ee\u793a\u4f8b\u5417\uff1f</p> <p>A: \u6709\uff0c\u8be6\u89c1 \u5b8c\u6574\u793a\u4f8b</p> <p>Q: \u5982\u4f55\u8d21\u732e\u4ee3\u7801\uff1f</p> <p>A: \u8be6\u89c1 \u8d21\u732e\u6307\u5357</p>"},{"location":"#_8","title":"\ud83d\udcca \u6587\u6863\u7edf\u8ba1","text":"<ul> <li>\u6559\u7a0b: 3 \u4efd</li> <li>\u6307\u5357: 11 \u4efd</li> <li>\u9002\u914d\u5668: 5 \u4efd</li> <li>\u53c2\u8003: 5 \u4efd</li> <li>\u5b89\u5168: 10 \u4efd</li> <li>\u5f00\u53d1: 2 \u4efd</li> <li>\u603b\u8ba1: 36 \u4efd\u6d3b\u8dc3\u6587\u6863</li> </ul>"},{"location":"#_9","title":"\ud83d\udcc4 \u6587\u6863\u7248\u672c","text":"<ul> <li>\u6700\u540e\u66f4\u65b0: 2025-11-29</li> <li>\u91cd\u6784\u72b6\u6001: \u2705 \u5df2\u5b8c\u6210</li> </ul> <p>\u5f00\u59cb\u5b66\u4e60: \u5feb\u901f\u5f00\u59cb \u2192</p>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/","title":"FastAPI-Easy \u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e7\u00bc\u00ba\u00e5\u00a4\u00b1\u00e5\u02c6\u2020\u00e6\u00e6\u0160\u00a5\u00e5\u2018\u0160","text":"<p>\u00e7\u201d\u0178\u00e6\u02c6\u00e6\u2014\u00b6\u00e9\u2014\u00b4: 2025-11-29  </p> <p>\u00e5\u02c6\u2020\u00e6\u00e7\u2030\u02c6\u00e6\u0153\u00ac: v0.1.3  </p> <p>\u00e5\u02c6\u2020\u00e6\u00e8\u0152\u0192\u00e5\u203a\u00b4: \u00e4\u00bb\u00a3\u00e7\u00a0\u00e5\u00ae\u00e7\u00b0 vs \u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e8\u00a6\u2020\u00e7\u203a\u2013</p>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#gys-e-e","title":"\u011f\u0178\u201c\u0160 \u00e6\u2030\u00a7\u00e8\u00a1\u0152\u00e6\u2018\u02dc\u00e8\u00a6","text":"<p>\u00e7\u00bb\u00e8\u00bf\u2021\u00e5\u2026\u00a8\u00e9\u00a2\u00e4\u00bb\u00a3\u00e7\u00a0\u00e5\u00ae\u00a1\u00e6\u0178\u00a5\u00e5\u2019\u0152\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e5\u00af\u00b9\u00e6\u00af\u201d\u00ef\u00bc\u0152\u00e5\u2018\u00e7\u00b0 FastAPI-Easy \u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e5\u00ad\u02dc\u00e5\u0153\u00a8\u00e4\u00bb\u00a5\u00e4\u00b8\u2039\u00e4\u00b8\u00bb\u00e8\u00a6\u00e9\u2014\u00ae\u00e9\u00a2\u02dc\u00ef\u00bc\u0161</p>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#a3eac","title":"\u00e5\u2026\u00b3\u00e9\u201d\u00ae\u00e5\u2018\u00e7\u00b0","text":"<ol> <li> <p>\u00e2\u0153\u2026 \u00e6\u00a0\u00b8\u00e5\u00bf\u0192 CRUD \u00e5\u0160\u0178\u00e8\u0192\u00bd - \u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00ef\u00bc\u0152\u00e6\u00e8\u00bf\u00b0\u00e6\u00b8\u2026\u00e6\u2122\u00b0</p> </li> <li> <p>\u00e2\u0161\u00a0\u00ef\u00b8 \u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e6\u00a8\u00a1\u00e5\u2014 - \u00e5\u00ae\u00e7\u00b0\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e4\u00bd\u2020\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e6\u00e8\u00bf\u00b0\u00e4\u00b8\u00e8\u00b6\u00b3\u00ef\u00bc\u0152README \u00e4\u00b8\u00ad\u00e6\u0153\u00aa\u00e6\u00e5\u0160</p> </li> <li> <p>\u00e2\u0161\u00a0\u00ef\u00b8 \u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u0160\u0178\u00e8\u0192\u00bd - \u00e5\u00ae\u00e7\u00b0\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e4\u00bd\u2020 README \u00e6\u00e8\u00bf\u00b0\u00e8\u00bf\u2021\u00e4\u00ba\u00e7\u00ae\u20ac\u00e5\u2022</p> </li> <li> <p>\u00e2\u0161\u00a0\u00ef\u00b8 \u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u201d\u00af\u00e6\u0152 - \u00e5\u00b7\u00b2\u00e5\u00ae\u00e7\u00b0\u00e4\u00bd\u2020\u00e5\u00ae\u0152\u00e5\u2026\u00a8\u00e6\u0153\u00aa\u00e5\u0153\u00a8 README \u00e4\u00b8\u00ad\u00e6\u00e5\u0160</p> </li> <li> <p>\u00e2\u0161\u00a0\u00ef\u00b8 \u00e9\u00ab\u02dc\u00e7\u00ba\u00a7\u00e7\u2030\u00b9\u00e6\u20ac\u00a7 - GraphQL\u00e3\u20acWebSocket \u00e5\u00b7\u00b2\u00e5\u00ae\u00e7\u00b0\u00e4\u00bd\u2020 README \u00e6\u00e8\u00bf\u00b0\u00e4\u00b8\u00e8\u00b6\u00b3</p> </li> <li> <p>\u00e2\u0152 \u00e7\u2030\u02c6\u00e6\u0153\u00ac\u00e4\u00b8\u00e4\u00b8\u20ac\u00e8\u2021\u00b4 - setup.py (v0.1.3) vs init.py (v0.1.0)</p> </li> </ol>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#aaoe-a14","title":"\u00e5\u00ae\u0152\u00e6\u02c6\u00e5\u00ba\u00a6\u00e8\u00af\u201e\u00e4\u00bc\u00b0","text":"<p>| \u00e6\u00a8\u00a1\u00e5\u2014 | \u00e5\u00ae\u00e7\u00b0\u00e5\u00ae\u0152\u00e6\u02c6\u00e5\u00ba\u00a6 | \u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e5\u00ae\u0152\u00e6\u02c6\u00e5\u00ba\u00a6 | README \u00e8\u00a6\u2020\u00e7\u203a\u2013 | \u00e5\u00b7\u00ae\u00e8\u00b7 |</p> <p>|------|-----------|-----------|------------|------|</p> <p>| \u00e6\u00a0\u00b8\u00e5\u00bf\u0192 CRUD | 100% | 95% | 90% | \u00e5\u00b0 |</p> <p>| \u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e9\u20ac\u201a\u00e9\u2026\u00e5\u2122\u00a8 | 100% | 90% | 80% | \u00e4\u00b8\u00ad |</p> <p>| \u00e6\u0153\u00e7\u00b4\u00a2/\u00e8\u00bf\u2021\u00e6\u00bb\u00a4/\u00e6\u2019\u00e5\u00ba | 100% | 90% | 85% | \u00e5\u00b0 |</p> <p>| \u00e5\u02c6\u2020\u00e9\u00a1\u00b5 | 100% | 85% | 80% | \u00e5\u00b0 |</p> <p>| \u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4 | 100% | 90% | 70% | \u00e4\u00b8\u00ad |</p> <p>| \u00e6\u2030\u00b9\u00e9\u2021\u00e6\u201c\u00e4\u00bd\u0153 | 100% | 85% | 60% | \u00e4\u00b8\u00ad |</p> <p>| \u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e6\u00a8\u00a1\u00e5\u2014 | 100% | 80% | 15% | \u00e5\u00b7\u00a8\u00e5\u00a4\u00a7 |</p> <p>| \u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u00bc\u2022\u00e6\u201c | 120% | 85% | 40% | \u00e5\u00a4\u00a7 |</p> <p>| \u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7 | 100% | 0% | 0% | \u00e6\u00e5\u00a4\u00a7 |</p> <p>| GraphQL | 100% | 70% | 20% | \u00e5\u00a4\u00a7 |</p> <p>| WebSocket | 100% | 70% | 20% | \u00e5\u00a4\u00a7 |</p> <p>| \u00e6\u0192\u00e9\u2122\u00e6\u00a7\u00e5\u02c6\u00b6 | 100% | 75% | 50% | \u00e4\u00b8\u00ad |</p> <p>| \u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014 | 100% | 75% | 50% | \u00e4\u00b8\u00ad |</p>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#gy-e-ca","title":"\u011f\u0178\u201d \u00e8\u00af\u00a6\u00e7\u00bb\u2020\u00e5\u02c6\u2020\u00e6","text":""},{"location":"DOCUMENTATION_GAP_ANALYSIS/#1-aa-a-acsc14oa","title":"1. \u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e6\u00a8\u00a1\u00e5\u2014 - \u00e6\u0153\u20ac\u00e5\u00a4\u00a7\u00e7\u0161\u201e\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e7\u00bc\u00ba\u00e5\u00a4\u00b1","text":""},{"location":"DOCUMENTATION_GAP_ANALYSIS/#a2accsasye12i14100-ai14","title":"\u00e5\u00b7\u00b2\u00e5\u00ae\u00e7\u00b0\u00e7\u0161\u201e\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00ef\u00bc\u02c6100% \u00e5\u00ae\u0152\u00e6\u02c6\u00ef\u00bc\u2030","text":"<p>\u00e8\u00ae\u00a4\u00e8\u00af\u00e7\u00b3\u00bb\u00e7\u00bb\u0178:</p> <ul> <li> <p>\u00e2\u0153\u2026 JWT \u00e8\u00ae\u00a4\u00e8\u00af (<code>JWTAuth</code>)</p> </li> <li> <p>\u00e2\u0153\u2026 Token \u00e7\u201d\u0178\u00e6\u02c6\u00e5\u2019\u0152\u00e9\u00aa\u0152\u00e8\u00af</p> </li> <li> <p>\u00e2\u0153\u2026 Token \u00e5\u02c6\u00b7\u00e6\u2013\u00b0\u00e6\u0153\u00ba\u00e5\u02c6\u00b6</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e5\u00af\u2020\u00e7\u00a0\u00e5\u201c\u02c6\u00e5\u00b8\u0152\u00e5\u2019\u0152\u00e9\u00aa\u0152\u00e8\u00af (<code>PasswordManager</code>)</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e7\u2122\u00bb\u00e5\u00bd\u2022\u00e5\u00b0\u00e8\u00af\u2022\u00e8\u00bf\u00bd\u00e8\u00b8\u00aa (<code>LoginAttemptTracker</code>)</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e8\u00b4\u00a6\u00e6\u02c6\u00b7\u00e9\u201d\u00e5\u00ae\u0161\u00e6\u0153\u00ba\u00e5\u02c6\u00b6</p> </li> </ul> <p>\u00e6\u0192\u00e9\u2122\u00e7\u00b3\u00bb\u00e7\u00bb\u0178:</p> <ul> <li> <p>\u00e2\u0153\u2026 \u00e5\u0178\u00ba\u00e4\u00ba\u00e8\u00a7\u2019\u00e8\u2030\u00b2\u00e7\u0161\u201e\u00e8\u00ae\u00bf\u00e9\u2014\u00ae\u00e6\u00a7\u00e5\u02c6\u00b6 (RBAC)</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e5\u0178\u00ba\u00e4\u00ba\u00e5\u00b1\u00e6\u20ac\u00a7\u00e7\u0161\u201e\u00e8\u00ae\u00bf\u00e9\u2014\u00ae\u00e6\u00a7\u00e5\u02c6\u00b6 (ABAC)</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e6\u0192\u00e9\u2122\u00e5\u00bc\u2022\u00e6\u201c (<code>PermissionEngine</code>)</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e6\u0192\u00e9\u2122\u00e5\u0160\u00a0\u00e8\u00bd\u00bd\u00e5\u2122\u00a8 (4\u00e7\u00a7: Static, Database, Cached, LRUCached)</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e8\u00b5\u201e\u00e6\u00ba\u00e6\u0192\u00e9\u2122\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\u00e5\u2122\u00a8 (4\u00e7\u00a7: Static, Database, Cached)</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e7\u203a\u2018\u00e6\u00a7\u00e5\u2019\u0152\u00e6\u0152\u2021\u00e6\u00a0\u2021 (<code>MonitoredPermissionEngine</code>)</p> </li> </ul> <p>\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e7\u00b3\u00bb\u00e7\u00bb\u0178:</p> <ul> <li> <p>\u00e2\u0153\u2026 \u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014 (<code>AuditLogger</code>)</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e5\u00ad\u02dc\u00e5\u201a\u00a8 (Memory, Database)</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e4\u00ba\u2039\u00e4\u00bb\u00b6\u00e7\u00b1\u00bb\u00e5\u2039\u00e5\u00ae\u0161\u00e4\u00b9\u2030 (10+ \u00e7\u00a7)</p> </li> </ul> <p>\u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u201d\u00af\u00e6\u0152 \u00e2\u00ad \u00e5\u00ae\u0152\u00e5\u2026\u00a8\u00e6\u0153\u00aa\u00e5\u0153\u00a8 README \u00e6\u00e5\u0160:</p> <ul> <li> <p>\u00e2\u0153\u2026 \u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e4\u00b8\u0160\u00e4\u00b8\u2039\u00e6\u2013\u2021 (<code>TenantContext</code>)</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u0192\u00e9\u2122\u00e5\u0160\u00a0\u00e8\u00bd\u00bd\u00e5\u2122\u00a8 (<code>MultiTenantPermissionLoader</code>)</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e8\u00b5\u201e\u00e6\u00ba\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\u00e5\u2122\u00a8 (<code>MultiTenantResourceChecker</code>)</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e9\u0161\u201d\u00e7\u00a6\u00bb\u00e4\u00b8\u00ad\u00e9\u2014\u00b4\u00e4\u00bb\u00b6 (<code>TenantIsolationMiddleware</code>)</p> </li> </ul> <p>\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e9\u2026\u00e7\u00bd\u00ae:</p> <ul> <li> <p>\u00e2\u0153\u2026 \u00e7\u00bb\u0178\u00e4\u00b8\u20ac\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e9\u2026\u00e7\u00bd\u00ae (<code>SecurityConfig</code>)</p> </li> <li> <p>\u00e2\u0153\u2026 LRU \u00e7\u00bc\u201c\u00e5\u00ad\u02dc\u00e6\u201d\u00af\u00e6\u0152</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e9\u20ac\u0178\u00e7\u2021\u00e9\u2122\u00e5\u02c6\u00b6</p> </li> </ul> <p>\u00e8\u00a3\u2026\u00e9\u00a5\u00b0\u00e5\u2122\u00a8\u00e5\u2019\u0152\u00e9\u203a\u2020\u00e6\u02c6:</p> <ul> <li> <p>\u00e2\u0153\u2026 <code>@require_role</code> - \u00e8\u00a7\u2019\u00e8\u2030\u00b2\u00e6\u00a3\u20ac\u00e6\u0178\u00a5</p> </li> <li> <p>\u00e2\u0153\u2026 <code>@require_permission</code> - \u00e6\u0192\u00e9\u2122\u00e6\u00a3\u20ac\u00e6\u0178\u00a5</p> </li> <li> <p>\u00e2\u0153\u2026 <code>@require_all_roles</code> - \u00e5\u00a4\u0161\u00e8\u00a7\u2019\u00e8\u2030\u00b2\u00e6\u00a3\u20ac\u00e6\u0178\u00a5</p> </li> <li> <p>\u00e2\u0153\u2026 <code>@require_all_permissions</code> - \u00e5\u00a4\u0161\u00e6\u0192\u00e9\u2122\u00e6\u00a3\u20ac\u00e6\u0178\u00a5</p> </li> <li> <p>\u00e2\u0153\u2026 <code>get_current_user</code> - \u00e8\u00b7\u00e5\u2013\u00e5\u00bd\u201c\u00e5\u2030\u00e7\u201d\u00a8\u00e6\u02c6\u00b7</p> </li> <li> <p>\u00e2\u0153\u2026 <code>ProtectedCRUDRouter</code> - \u00e5\u2014\u00e4\u00bf\u00e6\u0160\u00a4\u00e7\u0161\u201e CRUD \u00e8\u00b7\u00af\u00e7\u201d\u00b1</p> </li> </ul> <p>\u00e5\u00bc\u201a\u00e5\u00b8\u00b8\u00e7\u00b3\u00bb\u00e7\u00bb\u0178:</p> <ul> <li> <p>\u00e2\u0153\u2026 9 \u00e7\u00a7\u00e4\u00b8\u201c\u00e7\u201d\u00a8\u00e5\u00bc\u201a\u00e5\u00b8\u00b8\u00e7\u00b1\u00bb\u00e5\u2039</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e7\u00bb\u201c\u00e6\u201e\u00e5\u0152\u2013\u00e9\u201d\u2122\u00e8\u00af\u00af\u00e5\u201c\u00e5\u00ba\u201d</p> </li> </ul>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#readme-a-csei1415-eci14","title":"README \u00e4\u00b8\u00ad\u00e7\u0161\u201e\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u02c615% \u00e8\u00a6\u2020\u00e7\u203a\u2013\u00ef\u00bc\u2030","text":"<pre><code># \u00e5\u00bd\u201c\u00e5\u2030 README \u00e4\u00b8\u00ad\u00e5\u2026\u00b3\u00e4\u00ba\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e7\u0161\u201e\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\n\n- \u00e2\u0153\u2026 **\u00e6\u0192\u00e9\u2122\u00e6\u00a7\u00e5\u02c6\u00b6** - \u00e7\u00b5\u00e6\u00b4\u00bb\u00e7\u0161\u201e\u00e6\u0192\u00e9\u2122\u00e9\u2026\u00e7\u00bd\u00ae\u00ef\u00bc\u02c6\u00e7\u00ac\u00ac 33 \u00e8\u00a1\u0152\u00ef\u00bc\u2030\n\n- \u00e2\u0153\u2026 **\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014** - \u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00e6\u201c\u00e4\u00bd\u0153\u00e5\u2020\u00e5\u00b2\u00ef\u00bc\u02c6\u00e7\u00ac\u00ac 34 \u00e8\u00a1\u0152\u00ef\u00bc\u2030\n\n\n\n# \u00e5\u00ae\u0152\u00e5\u2026\u00a8\u00e7\u00bc\u00ba\u00e5\u00a4\u00b1\u00e7\u0161\u201e\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\n\n- \u00e2\u0152 JWT \u00e8\u00ae\u00a4\u00e8\u00af\u00e7\u00b3\u00bb\u00e7\u00bb\u0178\n\n- \u00e2\u0152 \u00e5\u00af\u2020\u00e7\u00a0\u00e7\u00ae\u00a1\u00e7\u2020\u00e5\u2019\u0152\u00e5\u00ae\u2030\u00e5\u2026\u00a8\n\n- \u00e2\u0152 \u00e7\u2122\u00bb\u00e5\u00bd\u2022\u00e5\u00b0\u00e8\u00af\u2022\u00e8\u00bf\u00bd\u00e8\u00b8\u00aa\u00e5\u2019\u0152\u00e8\u00b4\u00a6\u00e6\u02c6\u00b7\u00e9\u201d\u00e5\u00ae\u0161\n\n- \u00e2\u0152 \u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u201d\u00af\u00e6\u0152\n\n- \u00e2\u0152 \u00e6\u0192\u00e9\u2122\u00e5\u00bc\u2022\u00e6\u201c\u00e5\u2019\u0152\u00e5\u0160\u00a0\u00e8\u00bd\u00bd\u00e5\u2122\u00a8\n\n- \u00e2\u0152 \u00e8\u00b5\u201e\u00e6\u00ba\u00e6\u0192\u00e9\u2122\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\n\n- \u00e2\u0152 \u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e5\u00ad\u02dc\u00e5\u201a\u00a8\u00e9\u20ac\u2030\u00e9\u00a1\u00b9\n\n- \u00e2\u0152 \u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e8\u00a3\u2026\u00e9\u00a5\u00b0\u00e5\u2122\u00a8\n\n- \u00e2\u0152 \u00e7\u203a\u2018\u00e6\u00a7\u00e5\u2019\u0152\u00e6\u0152\u2021\u00e6\u00a0\u2021\n</code></pre>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#aoecs-readme","title":"\u00e5\u00bb\u00ba\u00e8\u00ae\u00ae\u00e7\u0161\u201e README \u00e6\u203a\u00b4\u00e6\u2013\u00b0","text":"<p>\u00e5\u0153\u00a8\"\u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e7\u2030\u00b9\u00e6\u20ac\u00a7\"\u00e9\u0192\u00a8\u00e5\u02c6\u2020\u00e6\u00b7\u00bb\u00e5\u0160\u00a0:</p> <pre><code>**\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e5\u0160\u0178\u00e8\u0192\u00bd** \u00e2\u00ad **\u00e4\u00bc\u00e4\u00b8\u0161\u00e7\u00ba\u00a7**:\n\n- \u00e2\u0153\u2026 **JWT \u00e8\u00ae\u00a4\u00e8\u00af** - Token \u00e7\u201d\u0178\u00e6\u02c6\u00e3\u20ac\u00e9\u00aa\u0152\u00e8\u00af\u00e3\u20ac\u00e5\u02c6\u00b7\u00e6\u2013\u00b0\n\n- \u00e2\u0153\u2026 **\u00e5\u00af\u2020\u00e7\u00a0\u00e5\u00ae\u2030\u00e5\u2026\u00a8** - Bcrypt \u00e5\u201c\u02c6\u00e5\u00b8\u0152\u00e3\u20ac\u00e5\u00bc\u00ba\u00e5\u00ba\u00a6\u00e9\u00aa\u0152\u00e8\u00af\n\n- \u00e2\u0153\u2026 **\u00e7\u2122\u00bb\u00e5\u00bd\u2022\u00e4\u00bf\u00e6\u0160\u00a4** - \u00e5\u00b0\u00e8\u00af\u2022\u00e8\u00bf\u00bd\u00e8\u00b8\u00aa\u00e3\u20ac\u00e8\u00b4\u00a6\u00e6\u02c6\u00b7\u00e9\u201d\u00e5\u00ae\u0161\u00e3\u20ac\u00e9\u20ac\u0178\u00e7\u2021\u00e9\u2122\u00e5\u02c6\u00b6\n\n- \u00e2\u0153\u2026 **RBAC/ABAC** - \u00e5\u0178\u00ba\u00e4\u00ba\u00e8\u00a7\u2019\u00e8\u2030\u00b2\u00e5\u2019\u0152\u00e5\u00b1\u00e6\u20ac\u00a7\u00e7\u0161\u201e\u00e6\u0192\u00e9\u2122\u00e6\u00a7\u00e5\u02c6\u00b6\n\n- \u00e2\u0153\u2026 **\u00e6\u0192\u00e9\u2122\u00e5\u00bc\u2022\u00e6\u201c** - \u00e7\u00b5\u00e6\u00b4\u00bb\u00e7\u0161\u201e\u00e6\u0192\u00e9\u2122\u00e5\u0160\u00a0\u00e8\u00bd\u00bd\u00e5\u2019\u0152\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\n\n- \u00e2\u0153\u2026 **\u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u201d\u00af\u00e6\u0152** - \u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e9\u0161\u201d\u00e7\u00a6\u00bb\u00e3\u20ac\u00e4\u00b8\u0160\u00e4\u00b8\u2039\u00e6\u2013\u2021\u00e7\u00ae\u00a1\u00e7\u2020\n\n- \u00e2\u0153\u2026 **\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014** - \u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u0161\u201e\u00e6\u201c\u00e4\u00bd\u0153\u00e8\u00bf\u00bd\u00e8\u00b8\u00aa\u00e5\u2019\u0152\u00e5\u00ad\u02dc\u00e5\u201a\u00a8\n\n- \u00e2\u0153\u2026 **\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e8\u00a3\u2026\u00e9\u00a5\u00b0\u00e5\u2122\u00a8** - \u00e7\u00ae\u20ac\u00e5\u2022\u00e6\u02dc\u201c\u00e7\u201d\u00a8\u00e7\u0161\u201e\u00e8\u00b7\u00af\u00e7\u201d\u00b1\u00e4\u00bf\u00e6\u0160\u00a4\n</code></pre> <p>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e6\u00bc\u201d\u00e7\u00a4\u00ba:</p> <pre><code>### 7. JWT \u00e8\u00ae\u00a4\u00e8\u00af \u00e2\u00ad **\u00e6\u2013\u00b0\u00e5\u00a2**\n\n\n\n```python\n\nfrom fastapi_easy.security import JWTAuth, require_role\n\n\n\n# \u00e5\u02c6\u00e5\u00a7\u2039\u00e5\u0152\u2013 JWT \u00e8\u00ae\u00a4\u00e8\u00af\n\njwt_auth = JWTAuth(\n\n    secret_key=\"your-secret-key\",\n\n    algorithm=\"HS256\",\n\n    access_token_expire_minutes=30\n\n)\n\n\n\n# \u00e7\u201d\u0178\u00e6\u02c6 Token\n\ntoken = jwt_auth.create_access_token(\n\n    user_id=\"user123\",\n\n    roles=[\"admin\"],\n\n    permissions=[\"read:users\", \"write:users\"]\n\n)\n\n\n\n# \u00e4\u00bf\u00e6\u0160\u00a4\u00e8\u00b7\u00af\u00e7\u201d\u00b1\n\n@app.get(\"/admin\")\n\n@require_role(\"admin\")\n\nasync def admin_only():\n\n    return {\"message\": \"Admin access granted\"}\n</code></pre>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#8-ascy-a-a","title":"8. \u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u201d\u00af\u00e6\u0152 \u00e2\u00ad \u00e6\u2013\u00b0\u00e5\u00a2","text":"<pre><code>from fastapi_easy.security import (\n\n    MultiTenantPermissionLoader,\n\n    TenantIsolationMiddleware\n\n)\n\n\n\n# \u00e9\u2026\u00e7\u00bd\u00ae\u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\n\nloader = MultiTenantPermissionLoader(base_loader)\n\nmiddleware = TenantIsolationMiddleware(app, tenant_header=\"X-Tenant-ID\")\n\nmiddleware.register_loader(loader)\n\n\n\n# \u00e8\u00af\u00b7\u00e6\u00b1\u201a\u00e6\u2014\u00b6\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e9\u0161\u201d\u00e7\u00a6\u00bb\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\n\n# GET /api/users\n\n# Header: X-Tenant-ID: tenant-123\n</code></pre> <pre><code>---\n\n\n\n### 2. \u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u00bc\u2022\u00e6\u201c - \u00e6\u00e8\u00bf\u00b0\u00e8\u00bf\u2021\u00e4\u00ba\u00e7\u00ae\u20ac\u00e5\u2022\n\n\n\n#### \u00e5\u00b7\u00b2\u00e5\u00ae\u00e7\u00b0\u00e7\u0161\u201e\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00ef\u00bc\u02c6120% \u00e5\u00ae\u0152\u00e6\u02c6 - \u00e8\u00b6\u2026\u00e5\u2021\u00ba\u00e8\u00ae\u00be\u00e8\u00ae\u00a1\u00ef\u00bc\u2030\n\n\n\n**\u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e5\u00bc\u2022\u00e6\u201c**:\n\n- \u00e2\u0153\u2026 Schema \u00e6\u00a3\u20ac\u00e6\u00b5\u2039\u00e5\u2122\u00a8 (`detector.py`)\n\n- \u00e2\u0153\u2026 SQL \u00e7\u201d\u0178\u00e6\u02c6\u00e5\u2122\u00a8 (`generator.py`)\n\n- \u00e2\u0153\u2026 \u00e9\u00a3\u00e9\u2122\u00a9\u00e8\u00af\u201e\u00e4\u00bc\u00b0\u00e5\u00bc\u2022\u00e6\u201c (`risk_engine.py`)\n\n- \u00e2\u0153\u2026 \u00e8\u00bf\u00e7\u00a7\u00bb\u00e6\u2030\u00a7\u00e8\u00a1\u0152\u00e5\u2122\u00a8 (`executor.py`)\n\n- \u00e2\u0153\u2026 \u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u00ad\u02dc\u00e5\u201a\u00a8 (`storage.py`)\n\n- \u00e2\u0153\u2026 \u00e4\u00b8\u00bb\u00e5\u00bc\u2022\u00e6\u201c (`engine.py`)\n\n\n\n**\u00e9\u00ab\u02dc\u00e7\u00ba\u00a7\u00e7\u2030\u00b9\u00e6\u20ac\u00a7**:\n\n- \u00e2\u0153\u2026 \u00e5\u02c6\u2020\u00e5\u00b8\u0192\u00e5\u00bc\u00e9\u201d (PostgreSQL, MySQL, SQLite, File)\n\n- \u00e2\u0153\u2026 Schema \u00e7\u00bc\u201c\u00e5\u00ad\u02dc (Redis + File)\n\n- \u00e2\u0153\u2026 Hook \u00e7\u00b3\u00bb\u00e7\u00bb\u0178 (\u00e4\u00bc\u02dc\u00e5\u2026\u02c6\u00e7\u00ba\u00a7\u00e3\u20ac\u00e8\u00b6\u2026\u00e6\u2014\u00b6\u00e3\u20ac\u00e9\u201d\u2122\u00e8\u00af\u00af\u00e9\u0161\u201d\u00e7\u00a6\u00bb)\n\n- \u00e2\u0153\u2026 CLI \u00e5\u00b7\u00a5\u00e5\u2026\u00b7 (6\u00e4\u00b8\u00aa\u00e5\u2018\u00bd\u00e4\u00bb\u00a4)\n\n- \u00e2\u0153\u2026 \u00e7\u00b1\u00bb\u00e5\u2039\u00e6\u00af\u201d\u00e8\u00be\u0192\u00e5\u2122\u00a8 (`TypeComparator`)\n\n- \u00e2\u0153\u2026 Checkpoint \u00e6\u0153\u00ba\u00e5\u02c6\u00b6 (\u00e6\u2013\u00ad\u00e7\u201a\u00b9\u00e7\u00bb\u00ad\u00e4\u00bc\u00a0)\n\n- \u00e2\u0153\u2026 SQLite \u00e5\u00a4\u2013\u00e9\u201d\u00ae\u00e5\u00a4\u201e\u00e7\u2020\n\n- \u00e2\u0153\u2026 \u00e7\u00a3\u00e7\u203a\u02dc\u00e7\u00a9\u00ba\u00e9\u2014\u00b4\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\n\n\n\n**\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e6\u00a8\u00a1\u00e5\u00bc**:\n\n- \u00e2\u0153\u2026 Safe - \u00e5\u00aa\u00e6\u2030\u00a7\u00e8\u00a1\u0152\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e6\u201c\u00e4\u00bd\u0153\n\n- \u00e2\u0153\u2026 Auto - \u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e6\u2030\u00a7\u00e8\u00a1\u0152\u00e4\u00bd\u00e9\u00a3\u00e9\u2122\u00a9\u00e6\u201c\u00e4\u00bd\u0153\n\n- \u00e2\u0153\u2026 Aggressive - \u00e6\u2030\u00a7\u00e8\u00a1\u0152\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e6\u201c\u00e4\u00bd\u0153\n\n- \u00e2\u0153\u2026 Dry-run - \u00e9\u00a2\u201e\u00e8\u00a7\u02c6\u00e6\u00a8\u00a1\u00e5\u00bc\n\n\n\n**\u00e5\u00ba\u201d\u00e7\u201d\u00a8\u00e9\u203a\u2020\u00e6\u02c6**:\n\n- \u00e2\u0153\u2026 `FastAPIEasy` \u00e7\u00b1\u00bb - \u00e9\u203a\u00b6\u00e9\u2026\u00e7\u00bd\u00ae\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\n\n- \u00e2\u0153\u2026 \u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e8\u00bf\u00e7\u00a7\u00bb\u00e6\u00a3\u20ac\u00e6\u00b5\u2039\u00e5\u2019\u0152\u00e5\u00ba\u201d\u00e7\u201d\u00a8\n\n- \u00e2\u0153\u2026 \u00e7\u201d\u0178\u00e5\u2018\u00bd\u00e5\u2018\u00a8\u00e6\u0153\u0178\u00e7\u00ae\u00a1\u00e7\u2020\n\n\n\n#### README \u00e4\u00b8\u00ad\u00e7\u0161\u201e\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u02c640% \u00e8\u00a6\u2020\u00e7\u203a\u2013\u00ef\u00bc\u2030\n\n\n\n```markdown\n\n# \u00e5\u00bd\u201c\u00e5\u2030 README \u00e4\u00b8\u00ad\u00e7\u0161\u201e\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u02c6\u00e7\u00ac\u00ac 37-44 \u00e8\u00a1\u0152\u00ef\u00bc\u2030\u00ef\u00bc\u0161\n\n**\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u0160\u0178\u00e8\u0192\u00bd** \u00e2\u00ad **\u00e6\u2013\u00b0\u00e5\u00a2**:\n\n- \u00e2\u0153\u2026 **\u00e8\u2021\u00aa\u00e5\u0160\u00a8 Schema \u00e6\u00a3\u20ac\u00e6\u00b5\u2039** - \u00e5\u00af\u00e5\u0160\u00a8\u00e6\u2014\u00b6\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e6\u00a3\u20ac\u00e6\u00b5\u2039\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e5\u02dc\u00e6\u203a\u00b4\n\n- \u00e2\u0153\u2026 **\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e8\u00bf\u00e7\u00a7\u00bb\u00e7\u201d\u0178\u00e6\u02c6** - \u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e7\u201d\u0178\u00e6\u02c6\u00e8\u00bf\u00e7\u00a7\u00bb\u00e8\u201e\u0161\u00e6\u0153\u00ac\n\n- \u00e2\u0153\u2026 **\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u00ba\u201d\u00e7\u201d\u00a8** - \u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e5\u00ba\u201d\u00e7\u201d\u00a8\u00e8\u00bf\u00e7\u00a7\u00bb\n\n- \u00e2\u0153\u2026 **\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e8\u00bf\u00e7\u00a7\u00bb\u00e6\u00a8\u00a1\u00e5\u00bc** - Safe/Auto/Aggressive \u00e4\u00b8\u2030\u00e7\u00a7\u00e6\u00a8\u00a1\u00e5\u00bc\n\n- \u00e2\u0153\u2026 **\u00e5\u203a\u00e6\u00bb\u0161\u00e6\u201d\u00af\u00e6\u0152** - \u00e6\u201d\u00af\u00e6\u0152\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u203a\u00e6\u00bb\u0161\n\n- \u00e2\u0153\u2026 **\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u2020\u00e5\u00b2** - \u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u0161\u201e\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u2020\u00e5\u00b2\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\n\n- \u00e2\u0153\u2026 **CLI \u00e5\u00b7\u00a5\u00e5\u2026\u00b7** - \u00e5\u2018\u00bd\u00e4\u00bb\u00a4\u00e8\u00a1\u0152\u00e7\u00ae\u00a1\u00e7\u2020\u00e8\u00bf\u00e7\u00a7\u00bb\n\n\n\n# \u00e5\u00ae\u0152\u00e5\u2026\u00a8\u00e7\u00bc\u00ba\u00e5\u00a4\u00b1\u00e7\u0161\u201e\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\n\n- \u00e2\u0152 \u00e5\u02c6\u2020\u00e5\u00b8\u0192\u00e5\u00bc\u00e9\u201d\u00e6\u0153\u00ba\u00e5\u02c6\u00b6\n\n- \u00e2\u0152 Schema \u00e7\u00bc\u201c\u00e5\u00ad\u02dc\n\n- \u00e2\u0152 Hook \u00e7\u00b3\u00bb\u00e7\u00bb\u0178\n\n- \u00e2\u0152 \u00e7\u00b1\u00bb\u00e5\u2039\u00e6\u00af\u201d\u00e8\u00be\u0192\u00e5\u2122\u00a8\n\n- \u00e2\u0152 Checkpoint \u00e6\u0153\u00ba\u00e5\u02c6\u00b6\n\n- \u00e2\u0152 SQLite \u00e7\u2030\u00b9\u00e6\u00ae\u0160\u00e5\u00a4\u201e\u00e7\u2020\n\n- \u00e2\u0152 \u00e7\u00a3\u00e7\u203a\u02dc\u00e7\u00a9\u00ba\u00e9\u2014\u00b4\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\n\n- \u00e2\u0152 \u00e9\u00a3\u00e9\u2122\u00a9\u00e8\u00af\u201e\u00e4\u00bc\u00b0\u00e5\u00bc\u2022\u00e6\u201c\n\n- \u00e2\u0152 FastAPIEasy \u00e9\u203a\u00b6\u00e9\u2026\u00e7\u00bd\u00ae\u00e9\u203a\u2020\u00e6\u02c6\n</code></pre>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#aoecs-readme_1","title":"\u00e5\u00bb\u00ba\u00e8\u00ae\u00ae\u00e7\u0161\u201e README \u00e6\u203a\u00b4\u00e6\u2013\u00b0","text":"<p>\u00e6\u2030\u00a9\u00e5\u00b1\u2022\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e6\u00e8\u00bf\u00b0:</p> <pre><code>**\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u0160\u0178\u00e8\u0192\u00bd** \u00e2\u00ad **\u00e4\u00bc\u00e4\u00b8\u0161\u00e7\u00ba\u00a7**:\n\n- \u00e2\u0153\u2026 **\u00e8\u2021\u00aa\u00e5\u0160\u00a8 Schema \u00e6\u00a3\u20ac\u00e6\u00b5\u2039** - \u00e5\u00af\u00e5\u0160\u00a8\u00e6\u2014\u00b6\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e6\u00a3\u20ac\u00e6\u00b5\u2039\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e5\u02dc\u00e6\u203a\u00b4\n\n- \u00e2\u0153\u2026 **\u00e6\u2122\u00ba\u00e8\u0192\u00bd SQL \u00e7\u201d\u0178\u00e6\u02c6** - \u00e8\u00b7\u00a8\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e6\u2013\u00b9\u00e8\u00a8\u20ac\u00e6\u201d\u00af\u00e6\u0152\n\n- \u00e2\u0153\u2026 **\u00e9\u00a3\u00e9\u2122\u00a9\u00e8\u00af\u201e\u00e4\u00bc\u00b0\u00e5\u00bc\u2022\u00e6\u201c** - \u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e8\u00af\u201e\u00e4\u00bc\u00b0\u00e8\u00bf\u00e7\u00a7\u00bb\u00e9\u00a3\u00e9\u2122\u00a9\u00e7\u00ad\u2030\u00e7\u00ba\u00a7\n\n- \u00e2\u0153\u2026 **\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e8\u00bf\u00e7\u00a7\u00bb\u00e6\u00a8\u00a1\u00e5\u00bc** - Safe/Auto/Aggressive/Dry-run \u00e5\u203a\u203a\u00e7\u00a7\u00e6\u00a8\u00a1\u00e5\u00bc\n\n- \u00e2\u0153\u2026 **\u00e5\u02c6\u2020\u00e5\u00b8\u0192\u00e5\u00bc\u00e9\u201d** - \u00e6\u201d\u00af\u00e6\u0152 PostgreSQL\u00e3\u20acMySQL\u00e3\u20acSQLite\u00e3\u20ac\u00e6\u2013\u2021\u00e4\u00bb\u00b6\u00e9\u201d\n\n- \u00e2\u0153\u2026 **Schema \u00e7\u00bc\u201c\u00e5\u00ad\u02dc** - Redis + \u00e6\u2013\u2021\u00e4\u00bb\u00b6\u00e5\u0152\u00e6\u00a8\u00a1\u00e5\u00bc\u00e7\u00bc\u201c\u00e5\u00ad\u02dc\n\n- \u00e2\u0153\u2026 **Hook \u00e7\u00b3\u00bb\u00e7\u00bb\u0178** - \u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u2030\u00e5\u00e9\u2019\u00a9\u00e5\u00ad\u00ef\u00bc\u0152\u00e6\u201d\u00af\u00e6\u0152\u00e4\u00bc\u02dc\u00e5\u2026\u02c6\u00e7\u00ba\u00a7\u00e5\u2019\u0152\u00e8\u00b6\u2026\u00e6\u2014\u00b6\n\n- \u00e2\u0153\u2026 **\u00e5\u203a\u00e6\u00bb\u0161\u00e6\u201d\u00af\u00e6\u0152** - \u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u0161\u201e\u00e5\u203a\u00e6\u00bb\u0161\u00e5\u0160\u0178\u00e8\u0192\u00bd\n\n- \u00e2\u0153\u2026 **Checkpoint \u00e6\u0153\u00ba\u00e5\u02c6\u00b6** - \u00e6\u2013\u00ad\u00e7\u201a\u00b9\u00e7\u00bb\u00ad\u00e4\u00bc\u00a0\u00ef\u00bc\u0152\u00e5\u00a4\u00b1\u00e8\u00b4\u00a5\u00e6\u00a2\u00e5\u00a4\n\n- \u00e2\u0153\u2026 **SQLite \u00e4\u00bc\u02dc\u00e5\u0152\u2013** - Copy-Swap \u00e6\u00a8\u00a1\u00e5\u00bc\u00ef\u00bc\u0152\u00e5\u00a4\u2013\u00e9\u201d\u00ae\u00e5\u00a4\u201e\u00e7\u2020\n\n- \u00e2\u0153\u2026 **\u00e7\u00a3\u00e7\u203a\u02dc\u00e6\u00a3\u20ac\u00e6\u0178\u00a5** - \u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\u00e5\u00af\u00e7\u201d\u00a8\u00e7\u00a9\u00ba\u00e9\u2014\u00b4\n\n- \u00e2\u0153\u2026 **\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u2020\u00e5\u00b2** - \u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u0161\u201e\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u2020\u00e5\u00b2\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\n\n- \u00e2\u0153\u2026 **CLI \u00e5\u00b7\u00a5\u00e5\u2026\u00b7** - 6\u00e4\u00b8\u00aa\u00e5\u2018\u00bd\u00e4\u00bb\u00a4\u00e8\u00a1\u0152\u00e5\u00b7\u00a5\u00e5\u2026\u00b7\n\n- \u00e2\u0153\u2026 **\u00e9\u203a\u00b6\u00e9\u2026\u00e7\u00bd\u00ae\u00e9\u203a\u2020\u00e6\u02c6** - FastAPIEasy \u00e7\u00b1\u00bb\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e5\u00a4\u201e\u00e7\u2020\n</code></pre> <p>\u00e6\u203a\u00b4\u00e6\u2013\u00b0\u00e7\u00a4\u00ba\u00e4\u00be\u2039\u00e4\u00bb\u00a3\u00e7\u00a0:</p> <pre><code>### 5. \u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e8\u00bf\u00e7\u00a7\u00bb \u00e2\u00ad **\u00e4\u00bc\u00e4\u00b8\u0161\u00e7\u00ba\u00a7**\n\n\n\n```python\n\nfrom fastapi_easy import FastAPIEasy\n\nfrom fastapi_easy.migrations import MigrationHooks\n\n\n\n# \u00e6\u2013\u00b9\u00e5\u00bc 1: \u00e9\u203a\u00b6\u00e9\u2026\u00e7\u00bd\u00ae\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\n\napp = FastAPIEasy(\n\n    database_url=\"postgresql://localhost/mydb\",\n\n    models=[User, Product, Order],\n\n    migration_mode=\"safe\"  # safe/auto/aggressive/dry_run\n\n)\n\n\n\n# \u00e6\u2013\u00b9\u00e5\u00bc 2: \u00e4\u00bd\u00bf\u00e7\u201d\u00a8 Hook \u00e8\u2021\u00aa\u00e5\u00ae\u0161\u00e4\u00b9\u2030\n\nhooks = MigrationHooks()\n\n\n\n@hooks.before_migration\n\nasync def backup_database(context):\n\n    # \u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u2030\u00e5\u00a4\u2021\u00e4\u00bb\u00bd\n\n    await create_backup()\n\n\n\n@hooks.after_migration\n\nasync def notify_team(context):\n\n    # \u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u00e9\u20ac\u0161\u00e7\u0178\u00a5\n\n    await send_notification()\n\n\n\napp = FastAPIEasy(\n\n    database_url=\"postgresql://localhost/mydb\",\n\n    models=[User, Product],\n\n    migration_mode=\"auto\",\n\n    migration_hooks=hooks\n\n)\n\n\n\n# CLI \u00e5\u00b7\u00a5\u00e5\u2026\u00b7\n\n# fastapi-easy migrate plan      # \u00e6\u0178\u00a5\u00e7\u0153\u2039\u00e5\u00be\u2026\u00e6\u2030\u00a7\u00e8\u00a1\u0152\u00e7\u0161\u201e\u00e8\u00bf\u00e7\u00a7\u00bb\n\n# fastapi-easy migrate apply     # \u00e5\u00ba\u201d\u00e7\u201d\u00a8\u00e8\u00bf\u00e7\u00a7\u00bb\n\n# fastapi-easy migrate rollback  # \u00e5\u203a\u00e6\u00bb\u0161\u00e8\u00bf\u00e7\u00a7\u00bb\n\n# fastapi-easy migrate status    # \u00e6\u0178\u00a5\u00e7\u0153\u2039\u00e8\u00bf\u00e7\u00a7\u00bb\u00e7\u0160\u00b6\u00e6\u20ac\n\n# fastapi-easy migrate history   # \u00e6\u0178\u00a5\u00e7\u0153\u2039\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u2020\u00e5\u00b2\n\n# fastapi-easy migrate clean     # \u00e6\u00b8\u2026\u00e7\u2020\u00e8\u00bf\u00e7\u00a7\u00bb\u00e9\u201d\n</code></pre> <pre><code>---\n\n\n\n### 3. \u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u201d\u00af\u00e6\u0152 - \u00e5\u00ae\u0152\u00e5\u2026\u00a8\u00e6\u0153\u00aa\u00e6\u00e5\u0160\n\n\n\n#### \u00e5\u00b7\u00b2\u00e5\u00ae\u00e7\u00b0\u00e7\u0161\u201e\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00ef\u00bc\u02c6100% \u00e5\u00ae\u0152\u00e6\u02c6\u00ef\u00bc\u2030\n\n\n\n- \u00e2\u0153\u2026 `TenantContext` - \u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e4\u00b8\u0160\u00e4\u00b8\u2039\u00e6\u2013\u2021\u00e7\u00ae\u00a1\u00e7\u2020\n\n- \u00e2\u0153\u2026 `MultiTenantPermissionLoader` - \u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u0192\u00e9\u2122\u00e5\u0160\u00a0\u00e8\u00bd\u00bd\n\n- \u00e2\u0153\u2026 `MultiTenantResourceChecker` - \u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e8\u00b5\u201e\u00e6\u00ba\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\n\n- \u00e2\u0153\u2026 `TenantIsolationMiddleware` - \u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e9\u0161\u201d\u00e7\u00a6\u00bb\u00e4\u00b8\u00ad\u00e9\u2014\u00b4\u00e4\u00bb\u00b6\n\n\n\n#### README \u00e4\u00b8\u00ad\u00e7\u0161\u201e\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u02c60% \u00e8\u00a6\u2020\u00e7\u203a\u2013\u00ef\u00bc\u2030\n\n\n\n**\u00e5\u00ae\u0152\u00e5\u2026\u00a8\u00e6\u0153\u00aa\u00e6\u00e5\u0160**\n\n\n\n#### \u00e5\u00bb\u00ba\u00e8\u00ae\u00ae\u00e7\u0161\u201e README \u00e6\u203a\u00b4\u00e6\u2013\u00b0\n\n\n\n**\u00e5\u0153\u00a8\"\u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e7\u2030\u00b9\u00e6\u20ac\u00a7\"\u00e9\u0192\u00a8\u00e5\u02c6\u2020\u00e6\u00b7\u00bb\u00e5\u0160\u00a0**:\n\n\n\n```markdown\n\n**\u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u201d\u00af\u00e6\u0152** \u00e2\u00ad **\u00e6\u2013\u00b0\u00e5\u00a2**:\n\n- \u00e2\u0153\u2026 **\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e9\u0161\u201d\u00e7\u00a6\u00bb** - \u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e9\u0161\u201d\u00e7\u00a6\u00bb\u00e4\u00b8\u00e5\u0152\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e7\u0161\u201e\u00e6\u2022\u00b0\u00e6\u00ae\n\n- \u00e2\u0153\u2026 **\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e4\u00b8\u0160\u00e4\u00b8\u2039\u00e6\u2013\u2021** - \u00e8\u00af\u00b7\u00e6\u00b1\u201a\u00e7\u00ba\u00a7\u00e5\u02c6\u00ab\u00e7\u0161\u201e\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e4\u00b8\u0160\u00e4\u00b8\u2039\u00e6\u2013\u2021\u00e7\u00ae\u00a1\u00e7\u2020\n\n- \u00e2\u0153\u2026 **\u00e6\u0192\u00e9\u2122\u00e9\u0161\u201d\u00e7\u00a6\u00bb** - \u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e7\u00ba\u00a7\u00e5\u02c6\u00ab\u00e7\u0161\u201e\u00e6\u0192\u00e9\u2122\u00e5\u0160\u00a0\u00e8\u00bd\u00bd\u00e5\u2019\u0152\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\n\n- \u00e2\u0153\u2026 **\u00e4\u00b8\u00ad\u00e9\u2014\u00b4\u00e4\u00bb\u00b6\u00e6\u201d\u00af\u00e6\u0152** - \u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e4\u00bb\u00e8\u00af\u00b7\u00e6\u00b1\u201a\u00e5\u00a4\u00b4\u00e6\u00e5\u2013\u00e7\u00a7\u0178\u00e6\u02c6\u00b7 ID\n</code></pre> <p>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e6\u00bc\u201d\u00e7\u00a4\u00ba:</p> <pre><code>### 9. \u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u201d\u00af\u00e6\u0152 \u00e2\u00ad **\u00e6\u2013\u00b0\u00e5\u00a2**\n\n\n\n```python\n\nfrom fastapi_easy.security import (\n\n    MultiTenantPermissionLoader,\n\n    MultiTenantResourceChecker,\n\n    TenantIsolationMiddleware\n\n)\n\n\n\n# \u00e9\u2026\u00e7\u00bd\u00ae\u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u0192\u00e9\u2122\n\nloader = MultiTenantPermissionLoader(base_loader)\n\nchecker = MultiTenantResourceChecker(base_checker)\n\n\n\n# \u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e4\u00b8\u00ad\u00e9\u2014\u00b4\u00e4\u00bb\u00b6\n\nmiddleware = TenantIsolationMiddleware(\n\n    app,\n\n    tenant_header=\"X-Tenant-ID\"\n\n)\n\nmiddleware.register_loader(loader)\n\nmiddleware.register_checker(checker)\n\n\n\n# \u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e6\u2014\u00b6\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e9\u0161\u201d\u00e7\u00a6\u00bb\n\n# \u00e8\u00af\u00b7\u00e6\u00b1\u201a 1: Header: X-Tenant-ID: tenant-a\n\n# \u00e8\u00af\u00b7\u00e6\u00b1\u201a 2: Header: X-Tenant-ID: tenant-b\n\n# \u00e6\u2022\u00b0\u00e6\u00ae\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e9\u0161\u201d\u00e7\u00a6\u00bb\u00ef\u00bc\u0152\u00e4\u00ba\u2019\u00e4\u00b8\u00e5\u00bd\u00b1\u00e5\u201c\n</code></pre> <pre><code>---\n\n\n\n### 4. GraphQL \u00e5\u2019\u0152 WebSocket - \u00e6\u00e8\u00bf\u00b0\u00e4\u00b8\u00e8\u00b6\u00b3\n\n\n\n#### \u00e5\u00b7\u00b2\u00e5\u00ae\u00e7\u00b0\u00e7\u0161\u201e\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00ef\u00bc\u02c6100% \u00e5\u00ae\u0152\u00e6\u02c6\u00ef\u00bc\u2030\n\n\n\n**GraphQL**:\n\n- \u00e2\u0153\u2026 GraphQL \u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e6\u201d\u00af\u00e6\u0152\n\n- \u00e2\u0153\u2026 GraphQL \u00e5\u02dc\u00e6\u203a\u00b4\u00e6\u201d\u00af\u00e6\u0152\n\n- \u00e2\u0153\u2026 \u00e8\u2021\u00aa\u00e5\u0160\u00a8 Schema \u00e7\u201d\u0178\u00e6\u02c6\n\n- \u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u0161\u201e GraphQL \u00e9\u203a\u2020\u00e6\u02c6\n\n\n\n**WebSocket**:\n\n- \u00e2\u0153\u2026 \u00e5\u00ae\u00e6\u2014\u00b6\u00e9\u20ac\u0161\u00e4\u00bf\u00a1\n\n- \u00e2\u0153\u2026 \u00e6\u02c6\u00bf\u00e9\u2014\u00b4\u00e7\u00ae\u00a1\u00e7\u2020\n\n- \u00e2\u0153\u2026 \u00e6\u00b6\u02c6\u00e6\u00af\u00e8\u00b7\u00af\u00e7\u201d\u00b1\n\n- \u00e2\u0153\u2026 \u00e8\u00bf\u00e6\u00a5\u00e7\u00ae\u00a1\u00e7\u2020\n\n\n\n#### README \u00e4\u00b8\u00ad\u00e7\u0161\u201e\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u02c620% \u00e8\u00a6\u2020\u00e7\u203a\u2013\u00ef\u00bc\u2030\n\n\n\n```markdown\n\n# \u00e5\u00bd\u201c\u00e5\u2030 README\u00ef\u00bc\u02c6\u00e7\u00ac\u00ac 49 \u00e8\u00a1\u0152\u00ef\u00bc\u2030\u00ef\u00bc\u0161\n\n- \u00e2\u0153\u2026 **\u00e5\u00a4\u0161 ORM \u00e6\u201d\u00af\u00e6\u0152** - SQLAlchemy\u00e3\u20acTortoise\u00e3\u20acMongoDB\u00e3\u20acSQLModel\u00ef\u00bc\u02c64 \u00e7\u00a7\u00ef\u00bc\u2030\n\n\n\n# \u00e5\u00ae\u0152\u00e5\u2026\u00a8\u00e7\u00bc\u00ba\u00e5\u00a4\u00b1\u00ef\u00bc\u0161\n\n- \u00e2\u0152 GraphQL \u00e6\u201d\u00af\u00e6\u0152\u00e7\u0161\u201e\u00e8\u00af\u00a6\u00e7\u00bb\u2020\u00e8\u00af\u00b4\u00e6\u02dc\n\n- \u00e2\u0152 WebSocket \u00e6\u201d\u00af\u00e6\u0152\u00e7\u0161\u201e\u00e8\u00af\u00a6\u00e7\u00bb\u2020\u00e8\u00af\u00b4\u00e6\u02dc\n\n- \u00e2\u0152 \u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e7\u00a4\u00ba\u00e4\u00be\u2039\n</code></pre>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#aoecs-readme_2","title":"\u00e5\u00bb\u00ba\u00e8\u00ae\u00ae\u00e7\u0161\u201e README \u00e6\u203a\u00b4\u00e6\u2013\u00b0","text":"<p>\u00e5\u0153\u00a8\"\u00e6\u2030\u00a9\u00e5\u00b1\u2022\u00e5\u0160\u0178\u00e8\u0192\u00bd\"\u00e9\u0192\u00a8\u00e5\u02c6\u2020\u00e6\u00b7\u00bb\u00e5\u0160\u00a0:</p> <pre><code>**\u00e6\u2030\u00a9\u00e5\u00b1\u2022\u00e5\u0160\u0178\u00e8\u0192\u00bd**:\n\n- \u00e2\u0153\u2026 **GraphQL \u00e6\u201d\u00af\u00e6\u0152** - \u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u0161\u201e GraphQL \u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e5\u2019\u0152\u00e5\u02dc\u00e6\u203a\u00b4\n\n- \u00e2\u0153\u2026 **WebSocket \u00e6\u201d\u00af\u00e6\u0152** - \u00e5\u00ae\u00e6\u2014\u00b6\u00e9\u20ac\u0161\u00e4\u00bf\u00a1\u00e3\u20ac\u00e6\u02c6\u00bf\u00e9\u2014\u00b4\u00e7\u00ae\u00a1\u00e7\u2020\n\n- \u00e2\u0153\u2026 **CLI \u00e5\u00b7\u00a5\u00e5\u2026\u00b7** - \u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e5\u02c6\u00e5\u00a7\u2039\u00e5\u0152\u2013\u00e3\u20ac\u00e4\u00bb\u00a3\u00e7\u00a0\u00e7\u201d\u0178\u00e6\u02c6\n</code></pre> <p>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e6\u00bc\u201d\u00e7\u00a4\u00ba:</p> <pre><code>### 10. GraphQL \u00e6\u201d\u00af\u00e6\u0152 \u00e2\u00ad **\u00e6\u2013\u00b0\u00e5\u00a2**\n\n\n\n```python\n\nfrom fastapi_easy.graphql import create_graphql_router\n\n\n\n# \u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e7\u201d\u0178\u00e6\u02c6 GraphQL Schema\n\ngraphql_router = create_graphql_router(\n\n    models=[User, Product],\n\n    adapter=adapter\n\n)\n\n\n\napp.include_router(graphql_router, prefix=\"/graphql\")\n\n\n\n# \u00e6\u201d\u00af\u00e6\u0152\u00e7\u0161\u201e\u00e6\u201c\u00e4\u00bd\u0153\u00ef\u00bc\u0161\n\n# query { users { id name email } }\n\n# mutation { createUser(name: \"John\") { id } }\n</code></pre>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#11-websocket-a-a","title":"11. WebSocket \u00e6\u201d\u00af\u00e6\u0152 \u00e2\u00ad \u00e6\u2013\u00b0\u00e5\u00a2","text":"<pre><code>from fastapi_easy.websocket import WebSocketManager\n\n\n\n# \u00e5\u02c6\u203a\u00e5\u00bb\u00ba WebSocket \u00e7\u00ae\u00a1\u00e7\u2020\u00e5\u2122\u00a8\n\nws_manager = WebSocketManager()\n\n\n\n@app.websocket(\"/ws/{room_id}\")\n\nasync def websocket_endpoint(websocket: WebSocket, room_id: str):\n\n    await ws_manager.connect(websocket, room_id)\n\n    # \u00e5\u00ae\u00e6\u2014\u00b6\u00e6\u00b6\u02c6\u00e6\u00af\u00e5\u00b9\u00bf\u00e6\u2019\u00ad\n\n    await ws_manager.broadcast(room_id, {\"message\": \"Hello\"})\n</code></pre> <pre><code>---\n\n\n\n### 5. \u00e5\u2026\u00b6\u00e4\u00bb\u2013\u00e5\u2018\u00e7\u00b0\u00e7\u0161\u201e\u00e9\u2014\u00ae\u00e9\u00a2\u02dc\n\n\n\n#### 5.1 \u00e7\u2030\u02c6\u00e6\u0153\u00ac\u00e4\u00b8\u00e4\u00b8\u20ac\u00e8\u2021\u00b4\n\n\n\n```python\n\n# setup.py (\u00e7\u00ac\u00ac 10 \u00e8\u00a1\u0152)\n\nversion=\"0.1.3\"\n\n\n\n# src/fastapi_easy/__init__.py (\u00e7\u00ac\u00ac 11 \u00e8\u00a1\u0152)\n\n__version__ = \"0.1.0\"\n</code></pre> <p>\u00e5\u00bb\u00ba\u00e8\u00ae\u00ae: \u00e7\u00bb\u0178\u00e4\u00b8\u20ac\u00e7\u2030\u02c6\u00e6\u0153\u00ac\u00e5\u00b7\u00e4\u00b8\u00ba <code>0.1.3</code></p>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#52-readme-a-csac-coa34a-a","title":"5.2 README \u00e4\u00b8\u00ad\u00e7\u0161\u201e\u00e4\u00bb\u00a3\u00e7\u00a0\u00e7\u00a4\u00ba\u00e4\u00be\u2039\u00e4\u00b8\u00e5\u00ae\u0152\u00e6\u2022\u00b4","text":"<p>\u00e7\u00ac\u00ac 95-101 \u00e8\u00a1\u0152\u00e7\u0161\u201e\u00e4\u00bb\u00a3\u00e7\u00a0\u00e7\u00a4\u00ba\u00e4\u00be\u2039\u00e8\u00a2\u00ab\u00e6\u02c6\u00aa\u00e6\u2013\u00ad:</p> <pre><code>async def get_db():\n\n# GET    /itemdb/{item_id}    - \u00e8\u00b7\u00e5\u2013\u00e5\u2022\u00e4\u00b8\u00aa\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\n\n# POST   /itemdb              - \u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\n\n# PUT    /itemdb/{item_id}    - \u00e6\u203a\u00b4\u00e6\u2013\u00b0\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\n\n# DELETE /itemdb/{item_id}    - \u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\n\n# DELETE /itemdb              - \u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\n</code></pre> <p>\u00e5\u00ba\u201d\u00e8\u00af\u00a5\u00e6\u02dc\u00af:</p> <pre><code>async def get_db():\n\n    async with AsyncSessionLocal() as session:\n\n        yield session\n\n\n\n# 4. \u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e5\u00ba\u201d\u00e7\u201d\u00a8\n\napp = FastAPI()\n\n\n\n# 5. \u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e8\u00b7\u00af\u00e7\u201d\u00b1\n\nrouter = CRUDRouter(\n\n    schema=Item,\n\n    adapter=SQLAlchemyAdapter(ItemDB, get_db),\n\n    prefix=\"/items\"\n\n)\n\n\n\napp.include_router(router)\n\n\n\n# \u00e7\u201d\u0178\u00e6\u02c6\u00e7\u0161\u201e\u00e8\u00b7\u00af\u00e7\u201d\u00b1\u00ef\u00bc\u0161\n\n# GET    /items               - \u00e8\u00b7\u00e5\u2013\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\n\n# GET    /items/{item_id}     - \u00e8\u00b7\u00e5\u2013\u00e5\u2022\u00e4\u00b8\u00aa\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\n\n# POST   /items               - \u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\n\n# PUT    /items/{item_id}     - \u00e6\u203a\u00b4\u00e6\u2013\u00b0\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\n\n# DELETE /items/{item_id}     - \u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\n\n# DELETE /items               - \u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\n</code></pre>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#53-1ea12asye12c14aea","title":"5.3 \u00e6\u2030\u00b9\u00e9\u2021\u00e6\u201c\u00e4\u00bd\u0153\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e7\u00bc\u2013\u00e5\u00b7\u00e9\u2021\u00e5\u00a4","text":"<p>\u00e7\u00ac\u00ac 251-264 \u00e8\u00a1\u0152\u00e5\u2019\u0152\u00e7\u00ac\u00ac 266-285 \u00e8\u00a1\u0152\u00e9\u0192\u00bd\u00e6\u00a0\u2021\u00e8\u00ae\u00b0\u00e4\u00b8\u00ba\"6\":</p> <pre><code>### 6. \u00e6\u2030\u00b9\u00e9\u2021\u00e6\u201c\u00e4\u00bd\u0153  # \u00e7\u00ac\u00ac 251 \u00e8\u00a1\u0152\n\n\n\n### 6. \u00e6\u0192\u00e9\u2122\u00e6\u00a7\u00e5\u02c6\u00b6  # \u00e7\u00ac\u00ac 266 \u00e8\u00a1\u0152\n</code></pre> <p>\u00e5\u00ba\u201d\u00e8\u00af\u00a5\u00e6\u201d\u00b9\u00e4\u00b8\u00ba:</p> <pre><code>### 6. \u00e6\u2030\u00b9\u00e9\u2021\u00e6\u201c\u00e4\u00bd\u0153\n\n\n\n### 7. \u00e6\u0192\u00e9\u2122\u00e6\u00a7\u00e5\u02c6\u00b6\n</code></pre>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#54-e34a-a-e","title":"5.4 \u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e9\u201c\u00be\u00e6\u00a5\u00e4\u00b8\u00e4\u00b8\u20ac\u00e8\u2021\u00b4","text":"<p>README \u00e4\u00b8\u00ad\u00e7\u0161\u201e\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e9\u201c\u00be\u00e6\u00a5:</p> <pre><code># \u00e7\u00ac\u00ac 14 \u00e8\u00a1\u0152\n\n**\u011f\u0178\u2018\u2030 [\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e6\u0152\u2021\u00e5\u2014](docs/usage/INDEX.md)**\n\n\n\n# \u00e4\u00bd\u2020\u00e5\u00ae\u00e9\u2122\u2026\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e7\u00bb\u201c\u00e6\u201e\u00e6\u02dc\u00af\u00ef\u00bc\u0161\n\ndocs/\n\n  \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac tutorial/\n\n  \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac guides/\n\n  \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac adapters/\n\n  \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac reference/\n\n  \u00e2\u201d\u201d\u00e2\u201d\u20ac\u00e2\u201d\u20ac security/\n</code></pre> <p>\u00e5\u00bb\u00ba\u00e8\u00ae\u00ae: \u00e6\u203a\u00b4\u00e6\u2013\u00b0\u00e9\u201c\u00be\u00e6\u00a5\u00e4\u00b8\u00ba <code>docs/index.md</code></p>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#gy-a14-acoaoe","title":"\u011f\u0178\u201c \u00e4\u00bc\u02dc\u00e5\u2026\u02c6\u00e7\u00ba\u00a7\u00e5\u00bb\u00ba\u00e8\u00ae\u00ae","text":""},{"location":"DOCUMENTATION_GAP_ANALYSIS/#p0-ca3aai14a12ac-cei14","title":"P0 - \u00e7\u00ab\u2039\u00e5\u00b3\u00e4\u00bf\u00ae\u00e5\u00a4\u00ef\u00bc\u02c6\u00e5\u00bd\u00b1\u00e5\u201c\u00e7\u201d\u00a8\u00e6\u02c6\u00b7\u00e7\u2020\u00e8\u00a7\u00a3\u00ef\u00bc\u2030","text":"<ol> <li> <p>\u00e4\u00bf\u00ae\u00e5\u00a4\u00e7\u2030\u02c6\u00e6\u0153\u00ac\u00e4\u00b8\u00e4\u00b8\u20ac\u00e8\u2021\u00b4 - \u00e7\u00bb\u0178\u00e4\u00b8\u20ac\u00e4\u00b8\u00ba v0.1.3</p> </li> <li> <p>\u00e4\u00bf\u00ae\u00e5\u00a4 README \u00e4\u00bb\u00a3\u00e7\u00a0\u00e7\u00a4\u00ba\u00e4\u00be\u2039 - \u00e8\u00a1\u00a5\u00e5\u2026\u00a8\u00e7\u00ac\u00ac 95-101 \u00e8\u00a1\u0152</p> </li> <li> <p>\u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e7\u00bc\u2013\u00e5\u00b7 - \u00e6\u2030\u00b9\u00e9\u2021\u00e6\u201c\u00e4\u00bd\u0153\u00e5\u2019\u0152\u00e6\u0192\u00e9\u2122\u00e6\u00a7\u00e5\u02c6\u00b6</p> </li> <li> <p>\u00e4\u00bf\u00ae\u00e5\u00a4\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e9\u201c\u00be\u00e6\u00a5 - \u00e6\u203a\u00b4\u00e6\u2013\u00b0\u00e4\u00b8\u00ba\u00e6\u00ad\u00a3\u00e7\u00a1\u00ae\u00e8\u00b7\u00af\u00e5\u00be\u201e</p> </li> </ol>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#p1-e-a14-acoi14eeasye12c14oai14","title":"P1 - \u00e9\u00ab\u02dc\u00e4\u00bc\u02dc\u00e5\u2026\u02c6\u00e7\u00ba\u00a7\u00ef\u00bc\u02c6\u00e9\u2021\u00e8\u00a6\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e7\u00bc\u00ba\u00e5\u00a4\u00b1\u00ef\u00bc\u2030","text":"<ol> <li> <p>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e6\u00a8\u00a1\u00e5\u2014\u00e6\u00e8\u00bf\u00b0 - \u00e5\u0153\u00a8 README \u00e4\u00b8\u00ad\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u0161\u201e\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e8\u00af\u00b4\u00e6\u02dc</p> </li> <li> <p>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u201d\u00af\u00e6\u0152\u00e6\u00e8\u00bf\u00b0 - \u00e8\u00bf\u2122\u00e6\u02dc\u00af\u00e4\u00b8\u20ac\u00e4\u00b8\u00aa\u00e9\u2021\u00e8\u00a6\u00e7\u0161\u201e\u00e4\u00bc\u00e4\u00b8\u0161\u00e7\u00ba\u00a7\u00e5\u0160\u0178\u00e8\u0192\u00bd</p> </li> <li> <p>\u00e6\u2030\u00a9\u00e5\u00b1\u2022\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e6\u00e8\u00bf\u00b0 - \u00e7\u00aa\u00e5\u2021\u00ba\u00e9\u00ab\u02dc\u00e7\u00ba\u00a7\u00e7\u2030\u00b9\u00e6\u20ac\u00a7</p> </li> </ol>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#p2-a-a14-acoi14aa14oe-i14","title":"P2 - \u00e4\u00b8\u00ad\u00e4\u00bc\u02dc\u00e5\u2026\u02c6\u00e7\u00ba\u00a7\u00ef\u00bc\u02c6\u00e5\u00a2\u00e5\u00bc\u00ba\u00e8\u00af\u00b4\u00e6\u02dc\u00ef\u00bc\u2030","text":"<ol> <li> <p>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0 GraphQL \u00e5\u2019\u0152 WebSocket \u00e7\u00a4\u00ba\u00e4\u00be\u2039 - \u00e6\u00e4\u00be\u203a\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e7\u00a4\u00ba\u00e4\u00be\u2039</p> </li> <li> <p>\u00e6\u203a\u00b4\u00e6\u2013\u00b0\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e7\u00a4\u00ba\u00e4\u00be\u2039 - \u00e5\u00b1\u2022\u00e7\u00a4\u00ba Hook \u00e5\u2019\u0152 CLI \u00e4\u00bd\u00bf\u00e7\u201d\u00a8</p> </li> <li> <p>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e7\u00a4\u00ba\u00e4\u00be\u2039 - JWT\u00e3\u20ac\u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e7\u00ad\u2030</p> </li> </ol>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#p3-a12a14-acoi14a14-ai14","title":"P3 - \u00e4\u00bd\u00e4\u00bc\u02dc\u00e5\u2026\u02c6\u00e7\u00ba\u00a7\u00ef\u00bc\u02c6\u00e4\u00bc\u02dc\u00e5\u0152\u2013\u00ef\u00bc\u2030","text":"<ol> <li> <p>\u00e7\u00bb\u0178\u00e4\u00b8\u20ac\u00e6\u0153\u00af\u00e8\u00af\u00ad - Backend vs Adapter</p> </li> <li> <p>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e6\u20ac\u00a7\u00e8\u0192\u00bd\u00e6\u0152\u2021\u00e6\u00a0\u2021 - \u00e6\u203a\u00b4\u00e6\u2013\u00b0\u00e6\u20ac\u00a7\u00e8\u0192\u00bd\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e6\u2022\u00b0\u00e6\u00ae</p> </li> <li> <p>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e6\u203a\u00b4\u00e5\u00a4\u0161\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u00a4\u00ba\u00e4\u00be\u2039 - \u00e5\u00ae\u00e9\u2122\u2026\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e6\u00a1\u02c6\u00e4\u00be\u2039</p> </li> </ol>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#gy-aoecs-readme-ce","title":"\u011f\u0178\u00af \u00e5\u00bb\u00ba\u00e8\u00ae\u00ae\u00e7\u0161\u201e README \u00e7\u00bb\u201c\u00e6\u201e\u00e8\u00b0\u0192\u00e6\u2022\u00b4","text":""},{"location":"DOCUMENTATION_GAP_ANALYSIS/#a12ac","title":"\u00e5\u00bd\u201c\u00e5\u2030\u00e7\u00bb\u201c\u00e6\u201e","text":"<pre><code>1. \u00e7\u00ae\u20ac\u00e4\u00bb\u2039\n\n2. \u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e7\u2030\u00b9\u00e6\u20ac\u00a7 (CRUD + \u00e8\u00bf\u00e7\u00a7\u00bb)\n\n3. \u00e5\u00bf\u00ab\u00e9\u20ac\u0178\u00e5\u00bc\u20ac\u00e5\u00a7\u2039\n\n4. \u00e4\u00bb\u00a3\u00e7\u00a0\u00e9\u2021\u00e5\u00af\u00b9\u00e6\u00af\u201d\n\n5. \u00e6\u201d\u00af\u00e6\u0152\u00e7\u0161\u201e\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\n\n6. \u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e6\u00bc\u201d\u00e7\u00a4\u00ba (6\u00e4\u00b8\u00aa)\n\n7. \u00e6\u2013\u2021\u00e6\u00a1\u00a3\n\n8. \u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u00a4\u00ba\u00e4\u00be\u2039\n\n9. \u00e6\u00a8\u00e8\u00e9\u02dc\u2026\u00e8\u00af\u00bb\u00e9\u00a1\u00ba\u00e5\u00ba\n\n10. \u00e6\u20ac\u00a7\u00e8\u0192\u00bd\u00e6\u0152\u2021\u00e6\u00a0\u2021\n\n11. \u00e4\u00be\u00e8\u00b5\u2013\n\n12. \u00e8\u00b4\u00a1\u00e7\u0152\u00ae\n\n13. \u00e8\u00ae\u00b8\u00e5\u00af\u00e8\u00af\n\n14. \u00e8\u201d\u00e7\u00b3\u00bb\u00e6\u2013\u00b9\u00e5\u00bc\n</code></pre>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#aoecsc","title":"\u00e5\u00bb\u00ba\u00e8\u00ae\u00ae\u00e7\u0161\u201e\u00e6\u2013\u00b0\u00e7\u00bb\u201c\u00e6\u201e","text":"<pre><code>1. \u00e7\u00ae\u20ac\u00e4\u00bb\u2039\n\n2. \u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e7\u2030\u00b9\u00e6\u20ac\u00a7\n\n   - CRUD \u00e5\u0160\u0178\u00e8\u0192\u00bd\n\n   - \u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u0160\u0178\u00e8\u0192\u00bd \u00e2\u00ad \u00e6\u2030\u00a9\u00e5\u00b1\u2022\n\n   - \u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e5\u0160\u0178\u00e8\u0192\u00bd \u00e2\u00ad \u00e6\u2013\u00b0\u00e5\u00a2\n\n   - \u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u201d\u00af\u00e6\u0152 \u00e2\u00ad \u00e6\u2013\u00b0\u00e5\u00a2\n\n   - \u00e6\u2030\u00a9\u00e5\u00b1\u2022\u00e5\u0160\u0178\u00e8\u0192\u00bd (GraphQL, WebSocket)\n\n3. \u00e5\u00bf\u00ab\u00e9\u20ac\u0178\u00e5\u00bc\u20ac\u00e5\u00a7\u2039\n\n4. \u00e4\u00bb\u00a3\u00e7\u00a0\u00e9\u2021\u00e5\u00af\u00b9\u00e6\u00af\u201d\n\n5. \u00e6\u201d\u00af\u00e6\u0152\u00e7\u0161\u201e\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\n\n6. \u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e6\u00bc\u201d\u00e7\u00a4\u00ba (11\u00e4\u00b8\u00aa)\n\n   1. \u00e6\u0153\u00e7\u00b4\u00a2\u00e5\u2019\u0152\u00e8\u00bf\u2021\u00e6\u00bb\u00a4\n\n   2. \u00e6\u2019\u00e5\u00ba\n\n   3. \u00e5\u02c6\u2020\u00e9\u00a1\u00b5\n\n   4. \u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\n\n   5. \u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e8\u00bf\u00e7\u00a7\u00bb \u00e2\u00ad \u00e6\u2030\u00a9\u00e5\u00b1\u2022\n\n   6. \u00e6\u2030\u00b9\u00e9\u2021\u00e6\u201c\u00e4\u00bd\u0153\n\n   7. JWT \u00e8\u00ae\u00a4\u00e8\u00af \u00e2\u00ad \u00e6\u2013\u00b0\u00e5\u00a2\n\n   8. \u00e6\u0192\u00e9\u2122\u00e6\u00a7\u00e5\u02c6\u00b6 \u00e2\u00ad \u00e6\u2030\u00a9\u00e5\u00b1\u2022\n\n   9. \u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u201d\u00af\u00e6\u0152 \u00e2\u00ad \u00e6\u2013\u00b0\u00e5\u00a2\n\n   10. GraphQL \u00e6\u201d\u00af\u00e6\u0152 \u00e2\u00ad \u00e6\u2013\u00b0\u00e5\u00a2\n\n   11. WebSocket \u00e6\u201d\u00af\u00e6\u0152 \u00e2\u00ad \u00e6\u2013\u00b0\u00e5\u00a2\n\n7. \u00e6\u2013\u2021\u00e6\u00a1\u00a3\n\n8. \u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u00a4\u00ba\u00e4\u00be\u2039\n\n9. \u00e6\u00a8\u00e8\u00e9\u02dc\u2026\u00e8\u00af\u00bb\u00e9\u00a1\u00ba\u00e5\u00ba\n\n10. \u00e6\u20ac\u00a7\u00e8\u0192\u00bd\u00e6\u0152\u2021\u00e6\u00a0\u2021\n\n11. \u00e4\u00be\u00e8\u00b5\u2013\n\n12. \u00e8\u00b4\u00a1\u00e7\u0152\u00ae\n\n13. \u00e8\u00ae\u00b8\u00e5\u00af\u00e8\u00af\n\n14. \u00e8\u201d\u00e7\u00b3\u00bb\u00e6\u2013\u00b9\u00e5\u00bc\n</code></pre>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#gys-cye","title":"\u011f\u0178\u201c\u0160 \u00e7\u00bb\u0178\u00e8\u00ae\u00a1\u00e6\u2022\u00b0\u00e6\u00ae","text":""},{"location":"DOCUMENTATION_GAP_ANALYSIS/#asye12accye","title":"\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e5\u00ae\u00e7\u00b0\u00e7\u00bb\u0178\u00e8\u00ae\u00a1","text":"<ul> <li> <p>\u00e6\u20ac\u00bb\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e6\u2022\u00b0: 60+</p> </li> <li> <p>\u00e5\u00b7\u00b2\u00e5\u00ae\u00e7\u00b0: 60+ (100%)</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e8\u00a6\u2020\u00e7\u203a\u2013: 45 (75%)</p> </li> <li> <p>README \u00e8\u00a6\u2020\u00e7\u203a\u2013: 25 (42%)</p> </li> </ul>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#ac-cye","title":"\u00e4\u00bb\u00a3\u00e7\u00a0\u00e7\u00bb\u0178\u00e8\u00ae\u00a1","text":"<ul> <li> <p>\u00e7\u201d\u0178\u00e4\u00ba\u00a7\u00e4\u00bb\u00a3\u00e7\u00a0: 15,000+ \u00e8\u00a1\u0152</p> </li> <li> <p>\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e4\u00bb\u00a3\u00e7\u00a0: 10,000+ \u00e8\u00a1\u0152</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3: 36 \u00e4\u00bb\u00bd\u00e6\u00b4\u00bb\u00e8\u00b7\u0192\u00e6\u2013\u2021\u00e6\u00a1\u00a3</p> </li> <li> <p>\u00e7\u00a4\u00ba\u00e4\u00be\u2039: 16 \u00e4\u00b8\u00aa\u00e7\u00a4\u00ba\u00e4\u00be\u2039\u00e6\u2013\u2021\u00e4\u00bb\u00b6</p> </li> </ul>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#c14oacye","title":"\u00e7\u00bc\u00ba\u00e5\u00a4\u00b1\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e7\u00bb\u0178\u00e8\u00ae\u00a1","text":"<ul> <li> <p>\u00e5\u00ae\u0152\u00e5\u2026\u00a8\u00e7\u00bc\u00ba\u00e5\u00a4\u00b1: 15 \u00e4\u00b8\u00aa\u00e5\u0160\u0178\u00e8\u0192\u00bd</p> </li> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00e4\u00b8\u00e8\u00b6\u00b3: 12 \u00e4\u00b8\u00aa\u00e5\u0160\u0178\u00e8\u0192\u00bd</p> </li> <li> <p>\u00e7\u00a4\u00ba\u00e4\u00be\u2039\u00e7\u00bc\u00ba\u00e5\u00a4\u00b1: 8 \u00e4\u00b8\u00aa\u00e5\u0160\u0178\u00e8\u0192\u00bd</p> </li> </ul>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#gy-c","title":"\u011f\u0178\u00af \u00e6\u20ac\u00bb\u00e7\u00bb\u201c","text":""},{"location":"DOCUMENTATION_GAP_ANALYSIS/#a-eee","title":"\u00e4\u00b8\u00bb\u00e8\u00a6\u00e9\u2014\u00ae\u00e9\u00a2\u02dc","text":"<ol> <li> <p>\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e6\u00a8\u00a1\u00e5\u2014 - \u00e5\u00ae\u00e7\u00b0\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e4\u00bd\u2020 README \u00e5\u2021\u00a0\u00e4\u00b9\u00e6\u0153\u00aa\u00e6\u00e5\u0160\u00ef\u00bc\u02c685% \u00e7\u00bc\u00ba\u00e5\u00a4\u00b1\u00ef\u00bc\u2030</p> </li> <li> <p>\u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u201d\u00af\u00e6\u0152 - \u00e5\u00ae\u0152\u00e5\u2026\u00a8\u00e6\u0153\u00aa\u00e5\u0153\u00a8 README \u00e4\u00b8\u00ad\u00e6\u00e5\u0160\u00ef\u00bc\u02c6100% \u00e7\u00bc\u00ba\u00e5\u00a4\u00b1\u00ef\u00bc\u2030</p> </li> <li> <p>\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u00bc\u2022\u00e6\u201c - \u00e9\u00ab\u02dc\u00e7\u00ba\u00a7\u00e7\u2030\u00b9\u00e6\u20ac\u00a7\u00e6\u00e8\u00bf\u00b0\u00e4\u00b8\u00e8\u00b6\u00b3\u00ef\u00bc\u02c660% \u00e7\u00bc\u00ba\u00e5\u00a4\u00b1\u00ef\u00bc\u2030</p> </li> <li> <p>GraphQL/WebSocket - \u00e7\u00bc\u00ba\u00e5\u00b0\u2018\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e7\u00a4\u00ba\u00e4\u00be\u2039\u00ef\u00bc\u02c680% \u00e7\u00bc\u00ba\u00e5\u00a4\u00b1\u00ef\u00bc\u2030</p> </li> <li> <p>\u00e7\u2030\u02c6\u00e6\u0153\u00ac\u00e4\u00b8\u00e4\u00b8\u20ac\u00e8\u2021\u00b4 - \u00e9\u0153\u20ac\u00e8\u00a6\u00e7\u00ab\u2039\u00e5\u00b3\u00e4\u00bf\u00ae\u00e5\u00a4</p> </li> </ol>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#aoeeas","title":"\u00e5\u00bb\u00ba\u00e8\u00ae\u00ae\u00e8\u00a1\u0152\u00e5\u0160\u00a8","text":"<p>\u00e7\u00ab\u2039\u00e5\u00b3\u00e8\u00a1\u0152\u00e5\u0160\u00a8\u00ef\u00bc\u02c61-2 \u00e5\u00b0\u00e6\u2014\u00b6\u00ef\u00bc\u2030:</p> <ol> <li> <p>\u00e4\u00bf\u00ae\u00e5\u00a4\u00e7\u2030\u02c6\u00e6\u0153\u00ac\u00e5\u00b7</p> </li> <li> <p>\u00e4\u00bf\u00ae\u00e5\u00a4\u00e4\u00bb\u00a3\u00e7\u00a0\u00e7\u00a4\u00ba\u00e4\u00be\u2039</p> </li> <li> <p>\u00e4\u00bf\u00ae\u00e5\u00a4\u00e7\u00bc\u2013\u00e5\u00b7\u00e5\u2019\u0152\u00e9\u201c\u00be\u00e6\u00a5</p> </li> </ol> <p>\u00e7\u0178\u00ad\u00e6\u0153\u0178\u00e7\u203a\u00ae\u00e6\u00a0\u2021\u00ef\u00bc\u02c61-2 \u00e5\u00a4\u00a9\u00ef\u00bc\u2030:</p> <ol> <li> <p>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e6\u00a8\u00a1\u00e5\u2014\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e6\u00e8\u00bf\u00b0</p> </li> <li> <p>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u201d\u00af\u00e6\u0152\u00e8\u00af\u00b4\u00e6\u02dc</p> </li> <li> <p>\u00e6\u2030\u00a9\u00e5\u00b1\u2022\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e6\u00e8\u00bf\u00b0</p> </li> <li> <p>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e7\u00a4\u00ba\u00e4\u00be\u2039</p> </li> </ol> <p>\u00e9\u2022\u00bf\u00e6\u0153\u0178\u00e4\u00bc\u02dc\u00e5\u0152\u2013\u00ef\u00bc\u02c61 \u00e5\u2018\u00a8\u00ef\u00bc\u2030:</p> <ol> <li> <p>\u00e9\u2021\u00e6\u201e README \u00e7\u00bb\u201c\u00e6\u201e</p> </li> <li> <p>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e6\u203a\u00b4\u00e5\u00a4\u0161\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u00a4\u00ba\u00e4\u00be\u2039</p> </li> <li> <p>\u00e6\u203a\u00b4\u00e6\u2013\u00b0\u00e6\u20ac\u00a7\u00e8\u0192\u00bd\u00e6\u0152\u2021\u00e6\u00a0\u2021</p> </li> <li> <p>\u00e5\u00ae\u0152\u00e5\u2013\u201e\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e6\u2013\u2021\u00e6\u00a1\u00a3</p> </li> </ol>"},{"location":"DOCUMENTATION_GAP_ANALYSIS/#gy-etma12i14sa-asye12-a","title":"\u011f\u0178\u201c\u0152 \u00e9\u2122\u201e\u00e5\u00bd\u2022\u00ef\u00bc\u0161\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e6\u00b8\u2026\u00e5\u2022","text":""},{"location":"DOCUMENTATION_GAP_ANALYSIS/#a2aca12-readme-aascsasye12","title":"\u00e5\u00b7\u00b2\u00e5\u00ae\u00e7\u00b0\u00e4\u00bd\u2020 README \u00e6\u0153\u00aa\u00e6\u00e5\u0160\u00e7\u0161\u201e\u00e5\u0160\u0178\u00e8\u0192\u00bd","text":"<ol> <li> <p>\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e6\u00a8\u00a1\u00e5\u2014 (15 \u00e4\u00b8\u00aa\u00e5\u00ad\u00e5\u0160\u0178\u00e8\u0192\u00bd)</p> </li> <li> <p>JWT \u00e8\u00ae\u00a4\u00e8\u00af</p> </li> <li> <p>\u00e5\u00af\u2020\u00e7\u00a0\u00e7\u00ae\u00a1\u00e7\u2020</p> </li> <li> <p>\u00e7\u2122\u00bb\u00e5\u00bd\u2022\u00e4\u00bf\u00e6\u0160\u00a4</p> </li> <li> <p>\u00e6\u0192\u00e9\u2122\u00e5\u00bc\u2022\u00e6\u201c</p> </li> <li> <p>\u00e6\u0192\u00e9\u2122\u00e5\u0160\u00a0\u00e8\u00bd\u00bd\u00e5\u2122\u00a8 (4\u00e7\u00a7)</p> </li> <li> <p>\u00e8\u00b5\u201e\u00e6\u00ba\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\u00e5\u2122\u00a8 (4\u00e7\u00a7)</p> </li> <li> <p>\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e5\u00ad\u02dc\u00e5\u201a\u00a8 (2\u00e7\u00a7)</p> </li> <li> <p>\u00e7\u203a\u2018\u00e6\u00a7\u00e6\u0152\u2021\u00e6\u00a0\u2021</p> </li> <li> <p>\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e8\u00a3\u2026\u00e9\u00a5\u00b0\u00e5\u2122\u00a8 (4\u00e7\u00a7)</p> </li> <li> <p>\u00e5\u00bc\u201a\u00e5\u00b8\u00b8\u00e7\u00b3\u00bb\u00e7\u00bb\u0178 (9\u00e7\u00a7)</p> </li> <li> <p>\u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u201d\u00af\u00e6\u0152 (4 \u00e4\u00b8\u00aa\u00e5\u00ad\u00e5\u0160\u0178\u00e8\u0192\u00bd)</p> </li> <li> <p>\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e4\u00b8\u0160\u00e4\u00b8\u2039\u00e6\u2013\u2021</p> </li> <li> <p>\u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u0192\u00e9\u2122\u00e5\u0160\u00a0\u00e8\u00bd\u00bd</p> </li> <li> <p>\u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e8\u00b5\u201e\u00e6\u00ba\u00e6\u00a3\u20ac\u00e6\u0178\u00a5</p> </li> <li> <p>\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e9\u0161\u201d\u00e7\u00a6\u00bb\u00e4\u00b8\u00ad\u00e9\u2014\u00b4\u00e4\u00bb\u00b6</p> </li> <li> <p>\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u00bc\u2022\u00e6\u201c\u00e9\u00ab\u02dc\u00e7\u00ba\u00a7\u00e7\u2030\u00b9\u00e6\u20ac\u00a7 (8 \u00e4\u00b8\u00aa\u00e5\u00ad\u00e5\u0160\u0178\u00e8\u0192\u00bd)</p> </li> <li> <p>\u00e5\u02c6\u2020\u00e5\u00b8\u0192\u00e5\u00bc\u00e9\u201d (4\u00e7\u00a7)</p> </li> <li> <p>Schema \u00e7\u00bc\u201c\u00e5\u00ad\u02dc (2\u00e7\u00a7)</p> </li> <li> <p>Hook \u00e7\u00b3\u00bb\u00e7\u00bb\u0178</p> </li> <li> <p>\u00e7\u00b1\u00bb\u00e5\u2039\u00e6\u00af\u201d\u00e8\u00be\u0192\u00e5\u2122\u00a8</p> </li> <li> <p>Checkpoint \u00e6\u0153\u00ba\u00e5\u02c6\u00b6</p> </li> <li> <p>SQLite \u00e4\u00bc\u02dc\u00e5\u0152\u2013</p> </li> <li> <p>\u00e7\u00a3\u00e7\u203a\u02dc\u00e6\u00a3\u20ac\u00e6\u0178\u00a5</p> </li> <li> <p>\u00e9\u00a3\u00e9\u2122\u00a9\u00e8\u00af\u201e\u00e4\u00bc\u00b0</p> </li> <li> <p>\u00e6\u2030\u00a9\u00e5\u00b1\u2022\u00e5\u0160\u0178\u00e8\u0192\u00bd (3 \u00e4\u00b8\u00aa\u00e5\u00ad\u00e5\u0160\u0178\u00e8\u0192\u00bd)</p> </li> <li> <p>GraphQL \u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e6\u201d\u00af\u00e6\u0152</p> </li> <li> <p>WebSocket \u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e6\u201d\u00af\u00e6\u0152</p> </li> <li> <p>CLI \u00e5\u00b7\u00a5\u00e5\u2026\u00b7 (6\u00e4\u00b8\u00aa\u00e5\u2018\u00bd\u00e4\u00bb\u00a4)</p> </li> </ol> <p>\u00e6\u20ac\u00bb\u00e8\u00ae\u00a1: 30+ \u00e4\u00b8\u00aa\u00e5\u00ad\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e6\u0153\u00aa\u00e5\u0153\u00a8 README \u00e4\u00b8\u00ad\u00e5\u2026\u2026\u00e5\u02c6\u2020\u00e6\u00e8\u00bf\u00b0</p> <p>\u00e6\u0160\u00a5\u00e5\u2018\u0160\u00e7\u00bb\u201c\u00e6\u0178</p>"},{"location":"FEATURES/","title":"FastAPI-Easy \u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e6\u00b8\u2026\u00e5\u2022","text":"<p>\u00e6\u0153\u00ac\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e5\u02c6\u2014\u00e5\u2021\u00ba FastAPI-Easy \u00e5\u00ba\u201c\u00e7\u0161\u201e\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e5\u00ae\u00e7\u00b0\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e5\u0160\u00e5\u2026\u00b6\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e4\u00bd\u00e7\u00bd\u00ae\u00e3\u20ac\u201a</p> <p>\u00e8\u00af\u00b4\u00e6\u02dc: \u00e2\u0153\u2026 = \u00e5\u00b7\u00b2\u00e5\u00ae\u0152\u00e6\u02c6 | \u00e2\u00b3 = \u00e5\u00be\u2026\u00e5\u0160 | \u011f\u0178\u201c = \u00e9\u0153\u20ac\u00e8\u00a6\u00e6\u2013\u2021\u00e6\u00a1\u00a3</p>"},{"location":"FEATURES/#aasye12","title":"\u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e5\u0160\u0178\u00e8\u0192\u00bd","text":""},{"location":"FEATURES/#1-crudrouteri14a-ci14","title":"1. CRUDRouter\u00ef\u00bc\u02c6\u00e4\u00b8\u00bb\u00e7\u00b1\u00bb\u00ef\u00bc\u2030","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e7\u201d\u0178\u00e6\u02c6 CRUD \u00e8\u00b7\u00af\u00e7\u201d\u00b1\u00e7\u0161\u201e\u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e7\u00b1\u00bb</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u016101-quick-start.md, 07-architecture.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/core/crud_router.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#2-crud-a12i146-ci14","title":"2. CRUD \u00e6\u201c\u00e4\u00bd\u0153\u00ef\u00bc\u02c66 \u00e7\u00a7\u00ef\u00bc\u2030","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161GetAll\u00e3\u20acGetOne\u00e3\u20acCreate\u00e3\u20acUpdate\u00e3\u20acDeleteOne\u00e3\u20acDeleteAll</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u016101-quick-start.md, 07-architecture.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/operations/</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#3-orm-eeatm","title":"3. ORM \u00e9\u20ac\u201a\u00e9\u2026\u00e5\u2122\u00a8","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\u00e6\u201d\u00af\u00e6\u0152 SQLAlchemy\u00e3\u20acTortoise\u00e3\u20acMongoDB\u00e3\u20acSQLModel\u00ef\u00bc\u02c64 \u00e7\u00a7 ORM\u00ef\u00bc\u2030</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u0161../adapters/index.md, 07-architecture.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/backends/</code>, <code>src/fastapi_easy/core/adapters.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#4-ec3cy","title":"4. \u00e8\u00bf\u2021\u00e6\u00bb\u00a4\u00e7\u00b3\u00bb\u00e7\u00bb\u0178","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u01619 \u00e7\u00a7\u00e8\u00bf\u2021\u00e6\u00bb\u00a4\u00e6\u201c\u00e4\u00bd\u0153\u00e7\u00ac\u00a6\u00ef\u00bc\u02c6eq, ne, gt, gte, lt, lte, like, in, between\u00ef\u00bc\u2030</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u0161querying.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/utils/filters.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#5-aoc3cy","title":"5. \u00e6\u2019\u00e5\u00ba\u00e7\u00b3\u00bb\u00e7\u00bb\u0178","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\u00e5\u2021\u00e5\u00ba\u00e3\u20ac\u00e9\u2122\u00e5\u00ba\u00e3\u20ac\u00e5\u00a4\u0161\u00e5\u00ad\u2014\u00e6\u00ae\u00b5\u00e6\u2019\u00e5\u00ba</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u0161querying.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/utils/sorters.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#6-aec3cy","title":"6. \u00e5\u02c6\u2020\u00e9\u00a1\u00b5\u00e7\u00b3\u00bb\u00e7\u00bb\u0178","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161Skip/Limit \u00e5\u02c6\u2020\u00e9\u00a1\u00b5</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u016103-data-flow.md, ../tutorial/03-complete-example.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/utils/pagination.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#e-coasye12","title":"\u00e9\u00ab\u02dc\u00e7\u00ba\u00a7\u00e5\u0160\u0178\u00e8\u0192\u00bd","text":""},{"location":"FEATURES/#7-e12-a-etm","title":"7. \u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\u00e6\u00a0\u2021\u00e8\u00ae\u00b0\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e8\u20ac\u0152\u00e4\u00b8\u00e6\u02dc\u00af\u00e6\u00b0\u00b8\u00e4\u00b9\u2026\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00ef\u00bc\u0152\u00e6\u201d\u00af\u00e6\u0152\u00e6\u00a2\u00e5\u00a4</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u0161soft-delete.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/core/soft_delete.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#8-1ea12","title":"8. \u00e6\u2030\u00b9\u00e9\u2021\u00e6\u201c\u00e4\u00bd\u0153","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\u00e6\u2030\u00b9\u00e9\u2021\u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e3\u20ac\u00e6\u203a\u00b4\u00e6\u2013\u00b0\u00e3\u20ac\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00ef\u00bc\u0152\u00e6\u201d\u00af\u00e6\u0152\u00e4\u00ba\u2039\u00e5\u0160\u00a1</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u0161bulk-operations.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/core/bulk_operations.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#9-etma","title":"9. \u00e6\u0192\u00e9\u2122\u00e6\u00a7\u00e5\u02c6\u00b6","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161RBAC\u00ef\u00bc\u02c6\u00e5\u0178\u00ba\u00e4\u00ba\u00e8\u00a7\u2019\u00e8\u2030\u00b2\u00ef\u00bc\u2030\u00e5\u2019\u0152 ABAC\u00ef\u00bc\u02c6\u00e5\u0178\u00ba\u00e4\u00ba\u00e5\u00b1\u00e6\u20ac\u00a7\u00ef\u00bc\u2030</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u016112-permissions.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/core/permissions.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#10-aea","title":"10. \u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e6\u201c\u00e4\u00bd\u0153\u00ef\u00bc\u0152\u00e8\u00bf\u00bd\u00e8\u00b8\u00aa\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u02dc\u00e5\u0152\u2013</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u016113-audit-logging.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/core/audit_log.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#11-eac3cy","title":"11. \u00e9\u2019\u00a9\u00e5\u00ad\u00e7\u00b3\u00bb\u00e7\u00bb\u0178","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161before/after \u00e9\u2019\u00a9\u00e5\u00ad\u00ef\u00bc\u0152\u00e6\u201d\u00af\u00e6\u0152\u00e8\u2021\u00aa\u00e5\u00ae\u0161\u00e4\u00b9\u2030\u00e9\u20ac\u00bb\u00e8\u00be\u2018</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u016107-architecture.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/core/hooks.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#12-etme-ac","title":"12. \u00e9\u201d\u2122\u00e8\u00af\u00af\u00e5\u00a4\u201e\u00e7\u2020","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\u00e7\u00bb\u201c\u00e6\u201e\u00e5\u0152\u2013\u00e9\u201d\u2122\u00e8\u00af\u00af\u00ef\u00bc\u0152\u00e8\u2021\u00aa\u00e5\u00ae\u0161\u00e4\u00b9\u2030\u00e9\u201d\u2122\u00e8\u00af\u00af\u00e7\u00b1\u00bb\u00e5\u2039</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u016109-error-handling.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/core/errors.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#c3cyasye12","title":"\u00e7\u00b3\u00bb\u00e7\u00bb\u0178\u00e5\u0160\u0178\u00e8\u0192\u00bd","text":""},{"location":"FEATURES/#13-ec12c3cy","title":"13. \u00e9\u2026\u00e7\u00bd\u00ae\u00e7\u00b3\u00bb\u00e7\u00bb\u0178","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\u00e9\u203a\u2020\u00e4\u00b8\u00ad\u00e9\u2026\u00e7\u00bd\u00ae\u00ef\u00bc\u0152\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e5\u00bc\u20ac\u00e5\u2026\u00b3</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u016114-configuration.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/core/config.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#14-aao-14a14aatm","title":"14. \u00e5\u201c\u00e5\u00ba\u201d\u00e6\u00a0\u00bc\u00e5\u00bc\u00e5\u0152\u2013\u00e5\u2122\u00a8","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161JSON\u00e3\u20ac\u00e5\u02c6\u2020\u00e9\u00a1\u00b5\u00e3\u20ac\u00e4\u00bf\u00a1\u00e5\u00b0\u00e6\u00a0\u00bc\u00e5\u00bc\u00ef\u00bc\u0152\u00e8\u2021\u00aa\u00e5\u00ae\u0161\u00e4\u00b9\u2030\u00e6\u00a0\u00bc\u00e5\u00bc</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u016114-configuration.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/core/formatters.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#15-ac3cy","title":"15. \u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00e7\u00b3\u00bb\u00e7\u00bb\u0178","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\u00e7\u00bb\u201c\u00e6\u201e\u00e5\u0152\u2013\u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00ef\u00bc\u0152JSON \u00e6\u00a0\u00bc\u00e5\u00bc\u00ef\u00bc\u0152\u00e5\u00a4\u0161\u00e7\u00ba\u00a7\u00e5\u02c6\u00ab</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u0161best-practices.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/core/logger.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#16-e34aeae","title":"16. \u00e8\u00be\u201c\u00e5\u2026\u00a5\u00e9\u00aa\u0152\u00e8\u00af","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\u00e5\u00ad\u2014\u00e6\u00ae\u00b5\u00e9\u00aa\u0152\u00e8\u00af\u00ef\u00bc\u0152SQL \u00e6\u00b3\u00a8\u00e5\u2026\u00a5\u00e9\u02dc\u00b2\u00e6\u0160\u00a4</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u016109-error-handling.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/core/validators.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#17-caasa1","title":"17. \u00e7\u00b1\u00bb\u00e5\u2039\u00e5\u00ae\u0161\u00e4\u00b9\u2030","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\u00e7\u00b1\u00bb\u00e5\u2039\u00e5\u02c6\u00ab\u00e5\u00e3\u20ac\u00e5\u00e8\u00ae\u00ae\u00e5\u00ae\u0161\u00e4\u00b9\u2030\u00ef\u00bc\u0152IDE \u00e6\u201d\u00af\u00e6\u0152</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u016107-architecture.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/core/types.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#18-a-e-ac3cy","title":"18. \u00e4\u00b8\u00ad\u00e9\u2014\u00b4\u00e4\u00bb\u00b6\u00e7\u00b3\u00bb\u00e7\u00bb\u0178","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\u00e9\u201d\u2122\u00e8\u00af\u00af\u00e5\u00a4\u201e\u00e7\u2020\u00e3\u20ac\u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00e3\u20ac\u00e7\u203a\u2018\u00e6\u00a7\u00e4\u00b8\u00ad\u00e9\u2014\u00b4\u00e4\u00bb\u00b6</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u0161best-practices.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/middleware/</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#19-c14a","title":"19. \u00e7\u00bc\u201c\u00e5\u00ad\u02dc\u00e6\u201d\u00af\u00e6\u0152","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\u00e5\u2020\u2026\u00e5\u00ad\u02dc\u00e7\u00bc\u201c\u00e5\u00ad\u02dc\u00ef\u00bc\u0152TTL \u00e6\u201d\u00af\u00e6\u0152\u00ef\u00bc\u0152\u00e8\u00a3\u2026\u00e9\u00a5\u00b0\u00e5\u2122\u00a8</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u016114-configuration.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/core/cache.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#20-eycetma","title":"20. \u00e9\u20ac\u0178\u00e7\u2021\u00e9\u2122\u00e5\u02c6\u00b6","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\u00e6\u00bb\u2018\u00e5\u0160\u00a8\u00e7\u00aa\u2014\u00e5\u00a3\u00e7\u00ae\u2014\u00e6\u00b3\u2022\u00ef\u00bc\u0152\u00e5\u2020\u2026\u00e5\u00ad\u02dc\u00e5\u00e7\u00ab\u00af</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u016114-configuration.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/core/rate_limit.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#aasye12_1","title":"\u00e6\u2030\u00a9\u00e5\u00b1\u2022\u00e5\u0160\u0178\u00e8\u0192\u00bd","text":""},{"location":"FEATURES/#21-graphql","title":"21. GraphQL \u00e6\u201d\u00af\u00e6\u0152","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161GraphQL \u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e3\u20ac\u00e5\u02dc\u00e6\u203a\u00b4\u00e3\u20ac\u00e8\u2021\u00aa\u00e5\u0160\u00a8 schema</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u016118-graphql.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/graphql.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#22-websocket","title":"22. WebSocket \u00e6\u201d\u00af\u00e6\u0152","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\u00e5\u00ae\u00e6\u2014\u00b6\u00e9\u20ac\u0161\u00e4\u00bf\u00a1\u00ef\u00bc\u0152\u00e6\u02c6\u00bf\u00e9\u2014\u00b4\u00e7\u00ae\u00a1\u00e7\u2020\u00ef\u00bc\u0152\u00e6\u00b6\u02c6\u00e6\u00af\u00e8\u00b7\u00af\u00e7\u201d\u00b1</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u016119-websocket.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/websocket.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#23-cli-aa","title":"23. CLI \u00e5\u00b7\u00a5\u00e5\u2026\u00b7","text":"<ul> <li> <p>\u00e6\u00e8\u00bf\u00b0\u00ef\u00bc\u0161\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e5\u02c6\u00e5\u00a7\u2039\u00e5\u0152\u2013\u00e3\u20ac\u00e4\u00bb\u00a3\u00e7\u00a0\u00e7\u201d\u0178\u00e6\u02c6\u00e3\u20ac\u00e7\u2030\u02c6\u00e6\u0153\u00ac\u00e6\u0178\u00a5\u00e7\u0153\u2039</p> </li> <li> <p>\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u016120-cli.md</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u0161<code>src/fastapi_easy/cli.py</code></p> </li> <li> <p>\u00e7\u0160\u00b6\u00e6\u20ac\u00ef\u00bc\u0161\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4</p> </li> </ul>"},{"location":"FEATURES/#asye12ecc","title":"\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e8\u00a6\u2020\u00e7\u203a\u2013\u00e6\u20ac\u00bb\u00e7\u00bb\u201c","text":"<p>| \u00e7\u00b1\u00bb\u00e5\u02c6\u00ab | \u00e6\u2022\u00b0\u00e9\u2021 | \u00e5\u00ae\u0152\u00e6\u02c6 | \u00e5\u00be\u2026\u00e5\u0160 |</p> <p>|------|------|------|------|</p> <p>| \u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e5\u0160\u0178\u00e8\u0192\u00bd | 6 | \u00e2\u0153\u2026 6 | \u00e2\u00b3 0 |</p> <p>| \u00e9\u00ab\u02dc\u00e7\u00ba\u00a7\u00e5\u0160\u0178\u00e8\u0192\u00bd | 6 | \u00e2\u0153\u2026 6 | \u00e2\u00b3 0 |</p> <p>| \u00e7\u00b3\u00bb\u00e7\u00bb\u0178\u00e5\u0160\u0178\u00e8\u0192\u00bd | 8 | \u00e2\u0153\u2026 8 | \u00e2\u00b3 0 |</p> <p>| \u00e6\u2030\u00a9\u00e5\u00b1\u2022\u00e5\u0160\u0178\u00e8\u0192\u00bd | 3 | \u00e2\u0153\u2026 3 | \u00e2\u00b3 0 |</p> <p>| \u00e6\u20ac\u00bb\u00e8\u00ae\u00a1 | 23 | \u00e2\u0153\u2026 23 | \u00e2\u00b3 0 |</p>"},{"location":"FEATURES/#ec","title":"\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e8\u00a6\u2020\u00e7\u203a\u2013","text":"<ul> <li> <p>\u00e2\u0153\u2026 \u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e9\u0192\u00bd\u00e6\u0153\u2030\u00e6\u2013\u2021\u00e6\u00a1\u00a3</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e9\u00ab\u02dc\u00e7\u00ba\u00a7\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e9\u0192\u00bd\u00e6\u0153\u2030\u00e6\u2013\u2021\u00e6\u00a1\u00a3</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e7\u00b3\u00bb\u00e7\u00bb\u0178\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e9\u0192\u00bd\u00e6\u0153\u2030\u00e6\u2013\u2021\u00e6\u00a1\u00a3</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e6\u2030\u00a9\u00e5\u00b1\u2022\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e9\u0192\u00bd\u00e6\u0153\u2030\u00e8\u00af\u00a6\u00e7\u00bb\u2020\u00e6\u2013\u2021\u00e6\u00a1\u00a3</p> </li> </ul>"},{"location":"FEATURES/#acs","title":"\u00e5\u00ae\u0152\u00e6\u02c6\u00e7\u0160\u00b6\u00e6\u20ac","text":"<p>\u00e2\u0153\u2026 \u00e6\u2030\u20ac\u00e6\u0153\u2030 23 \u00e4\u00b8\u00aa\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e9\u0192\u00bd\u00e5\u00b7\u00b2\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e5\u00ae\u00e7\u00b0\u00e5\u00b9\u00b6\u00e6\u0153\u2030\u00e8\u00af\u00a6\u00e7\u00bb\u2020\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e8\u00af\u00b4\u00e6\u02dc\u00e3\u20ac\u201a</p>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/","title":"FastAPI-Easy \u6587\u6863\u95ee\u9898\u603b\u7ed3","text":"<p>\u5206\u6790\u65f6\u95f4: 2025-11-29 \u5f53\u524d\u7248\u672c: v0.1.3</p>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#_1","title":"\ud83c\udfaf \u6838\u5fc3\u53d1\u73b0","text":"<p>\u4f60\u7684\u9879\u76ee\u6709 \u5927\u91cf\u5df2\u5b9e\u73b0\u7684\u9ad8\u7ea7\u529f\u80fd\u6ca1\u6709\u5728 README \u4e2d\u4f53\u73b0\uff0c\u5bfc\u81f4\u7528\u6237\u65e0\u6cd5\u4e86\u89e3\u9879\u76ee\u7684\u771f\u5b9e\u80fd\u529b\u3002</p>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#_2","title":"\u274c \u4e3b\u8981\u95ee\u9898","text":""},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#1-","title":"1. \u5b89\u5168\u6a21\u5757 - \u6700\u4e25\u91cd\u7684\u7f3a\u5931","text":"<p>\u5df2\u5b9e\u73b0\uff08100% \u5b8c\u6210\uff09: - \u2705 JWT \u8ba4\u8bc1\u7cfb\u7edf\uff08Token \u751f\u6210\u3001\u9a8c\u8bc1\u3001\u5237\u65b0\uff09 - \u2705 \u5bc6\u7801\u7ba1\u7406\uff08Bcrypt \u54c8\u5e0c\u3001\u5f3a\u5ea6\u9a8c\u8bc1\uff09 - \u2705 \u767b\u5f55\u4fdd\u62a4\uff08\u5c1d\u8bd5\u8ffd\u8e2a\u3001\u8d26\u6237\u9501\u5b9a\u3001\u901f\u7387\u9650\u5236\uff09 - \u2705 RBAC/ABAC \u6743\u9650\u7cfb\u7edf - \u2705 \u6743\u9650\u5f15\u64ce\uff084\u79cd\u52a0\u8f7d\u5668\u30014\u79cd\u68c0\u67e5\u5668\uff09 - \u2705 \u5ba1\u8ba1\u65e5\u5fd7\uff08\u5b8c\u6574\u7684\u64cd\u4f5c\u8ffd\u8e2a\uff09 - \u2705 \u5b89\u5168\u88c5\u9970\u5668\uff08<code>@require_role</code>, <code>@require_permission</code> \u7b49\uff09 - \u2705 \u76d1\u63a7\u548c\u6307\u6807</p> <p>README \u4e2d\u7684\u63cf\u8ff0: <pre><code>- \u2705 **\u6743\u9650\u63a7\u5236** - \u7075\u6d3b\u7684\u6743\u9650\u914d\u7f6e\n- \u2705 **\u5ba1\u8ba1\u65e5\u5fd7** - \u81ea\u52a8\u8bb0\u5f55\u64cd\u4f5c\u5386\u53f2\n</code></pre></p> <p>\u7f3a\u5931\u7387: 85% \ud83d\udd34</p>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#2-","title":"2. \u591a\u79df\u6237\u652f\u6301 - \u5b8c\u5168\u672a\u63d0\u53ca","text":"<p>\u5df2\u5b9e\u73b0\uff08100% \u5b8c\u6210\uff09: - \u2705 \u79df\u6237\u4e0a\u4e0b\u6587\u7ba1\u7406 - \u2705 \u591a\u79df\u6237\u6743\u9650\u52a0\u8f7d\u5668 - \u2705 \u591a\u79df\u6237\u8d44\u6e90\u68c0\u67e5\u5668 - \u2705 \u79df\u6237\u9694\u79bb\u4e2d\u95f4\u4ef6</p> <p>README \u4e2d\u7684\u63cf\u8ff0: \u65e0 \u274c</p> <p>\u7f3a\u5931\u7387: 100% \ud83d\udd34</p>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#3-","title":"3. \u6570\u636e\u5e93\u8fc1\u79fb - \u9ad8\u7ea7\u7279\u6027\u63cf\u8ff0\u4e0d\u8db3","text":"<p>\u5df2\u5b9e\u73b0\uff08120% \u5b8c\u6210 - \u8d85\u51fa\u8bbe\u8ba1\uff09: - \u2705 \u57fa\u7840\u529f\u80fd\uff08\u68c0\u6d4b\u3001\u751f\u6210\u3001\u5e94\u7528\u3001\u56de\u6eda\uff09 - \u2705 \u5206\u5e03\u5f0f\u9501\uff08PostgreSQL\u3001MySQL\u3001SQLite\u3001\u6587\u4ef6\u9501\uff09 - \u2705 Schema \u7f13\u5b58\uff08Redis + \u6587\u4ef6\u53cc\u6a21\u5f0f\uff09 - \u2705 Hook \u7cfb\u7edf\uff08\u4f18\u5148\u7ea7\u3001\u8d85\u65f6\u3001\u9519\u8bef\u9694\u79bb\uff09 - \u2705 \u7c7b\u578b\u6bd4\u8f83\u5668 - \u2705 Checkpoint \u673a\u5236\uff08\u65ad\u70b9\u7eed\u4f20\uff09 - \u2705 SQLite \u4f18\u5316\uff08Copy-Swap\u3001\u5916\u952e\u5904\u7406\uff09 - \u2705 \u78c1\u76d8\u7a7a\u95f4\u68c0\u67e5 - \u2705 \u98ce\u9669\u8bc4\u4f30\u5f15\u64ce - \u2705 CLI \u5de5\u5177\uff086\u4e2a\u547d\u4ee4\uff09 - \u2705 FastAPIEasy \u96f6\u914d\u7f6e\u96c6\u6210</p> <p>README \u4e2d\u7684\u63cf\u8ff0: <pre><code>- \u2705 **\u81ea\u52a8 Schema \u68c0\u6d4b**\n- \u2705 **\u81ea\u52a8\u8fc1\u79fb\u751f\u6210**\n- \u2705 **\u81ea\u52a8\u8fc1\u79fb\u5e94\u7528**\n- \u2705 **\u5b89\u5168\u8fc1\u79fb\u6a21\u5f0f**\n- \u2705 **\u56de\u6eda\u652f\u6301**\n- \u2705 **\u8fc1\u79fb\u5386\u53f2**\n- \u2705 **CLI \u5de5\u5177**\n</code></pre></p> <p>\u7f3a\u5931\u7387: 60% \ud83d\udfe1</p>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#4-graphql-websocket-","title":"4. GraphQL \u548c WebSocket - \u7f3a\u5c11\u793a\u4f8b","text":"<p>\u5df2\u5b9e\u73b0\uff08100% \u5b8c\u6210\uff09: - \u2705 GraphQL \u67e5\u8be2\u548c\u53d8\u66f4 - \u2705 \u81ea\u52a8 Schema \u751f\u6210 - \u2705 WebSocket \u5b9e\u65f6\u901a\u4fe1 - \u2705 \u623f\u95f4\u7ba1\u7406\u548c\u6d88\u606f\u8def\u7531</p> <p>README \u4e2d\u7684\u63cf\u8ff0: \u4ec5\u5728\u6587\u6863\u94fe\u63a5\u4e2d\u63d0\u53ca\uff0c\u65e0\u793a\u4f8b</p> <p>\u7f3a\u5931\u7387: 80% \ud83d\udfe1</p>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#5-","title":"5. \u7248\u672c\u4e0d\u4e00\u81f4 - \u9700\u8981\u7acb\u5373\u4fee\u590d","text":"<pre><code># setup.py\nversion=\"0.1.3\"\n\n# src/fastapi_easy/__init__.py\n__version__ = \"0.1.0\"\n</code></pre>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#6-readme","title":"6. README \u4ee3\u7801\u793a\u4f8b\u4e0d\u5b8c\u6574","text":"<p>\u7b2c 95-101 \u884c\u7684\u4ee3\u7801\u88ab\u622a\u65ad:</p> <pre><code>async def get_db():\n# GET    /itemdb/{item_id}    - \u83b7\u53d6\u5355\u4e2a\u9879\u76ee\n# POST   /itemdb              - \u521b\u5efa\u9879\u76ee\n</code></pre> <p>\u5e94\u8be5\u662f\u5b8c\u6574\u7684\u51fd\u6570\u5b9e\u73b0\u548c\u8def\u7531\u8bf4\u660e\u3002</p>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#7","title":"7. \u529f\u80fd\u7f16\u53f7\u91cd\u590d","text":"<p>\u7b2c 251 \u884c\u548c\u7b2c 266 \u884c\u90fd\u6807\u8bb0\u4e3a \"6\"\uff1a - \u7b2c 251 \u884c\uff1a\u6279\u91cf\u64cd\u4f5c - \u7b2c 266 \u884c\uff1a\u6743\u9650\u63a7\u5236</p>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#_3","title":"\ud83d\udcca \u7edf\u8ba1\u6570\u636e","text":"\u6a21\u5757 \u5b9e\u73b0\u5b8c\u6210\u5ea6 README \u8986\u76d6 \u7f3a\u5931\u7a0b\u5ea6 \u6838\u5fc3 CRUD 100% 90% \ud83d\udfe2 \u5c0f \u6570\u636e\u5e93\u9002\u914d\u5668 100% 80% \ud83d\udfe1 \u4e2d \u5b89\u5168\u6a21\u5757 100% 15% \ud83d\udd34 \u5de8\u5927 \u8fc1\u79fb\u5f15\u64ce 120% 40% \ud83d\udfe1 \u5927 \u591a\u79df\u6237 100% 0% \ud83d\udd34 \u6781\u5927 GraphQL 100% 20% \ud83d\udfe1 \u5927 WebSocket 100% 20% \ud83d\udfe1 \u5927"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#_4","title":"\u2705 \u5efa\u8bae\u7684\u4fee\u590d\u65b9\u6848","text":""},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#p0-1","title":"\u7acb\u5373\u4fee\u590d\uff08P0 - 1\u5c0f\u65f6\uff09","text":"<ol> <li>\u7edf\u4e00\u7248\u672c\u53f7 - \u6539\u4e3a v0.1.3</li> <li>\u4fee\u590d\u4ee3\u7801\u793a\u4f8b - \u8865\u5168\u7b2c 95-101 \u884c</li> <li>\u4fee\u590d\u7f16\u53f7\u91cd\u590d - \u6279\u91cf\u64cd\u4f5c\u6539\u4e3a 6\uff0c\u6743\u9650\u63a7\u5236\u6539\u4e3a 7</li> </ol>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#p1-1-2","title":"\u9ad8\u4f18\u5148\u7ea7\uff08P1 - 1-2\u5929\uff09","text":"<ol> <li>\u6dfb\u52a0\u5b89\u5168\u6a21\u5757\u5b8c\u6574\u63cf\u8ff0</li> </ol> <p>\u5728\"\u6838\u5fc3\u7279\u6027\"\u90e8\u5206\u6dfb\u52a0\uff1a</p> <pre><code>**\u5b89\u5168\u529f\u80fd** \u2b50 **\u4f01\u4e1a\u7ea7**:\n- \u2705 **JWT \u8ba4\u8bc1** - Token \u751f\u6210\u3001\u9a8c\u8bc1\u3001\u5237\u65b0\n- \u2705 **\u5bc6\u7801\u5b89\u5168** - Bcrypt \u54c8\u5e0c\u3001\u5f3a\u5ea6\u9a8c\u8bc1\n- \u2705 **\u767b\u5f55\u4fdd\u62a4** - \u5c1d\u8bd5\u8ffd\u8e2a\u3001\u8d26\u6237\u9501\u5b9a\u3001\u901f\u7387\u9650\u5236\n- \u2705 **RBAC/ABAC** - \u57fa\u4e8e\u89d2\u8272\u548c\u5c5e\u6027\u7684\u6743\u9650\u63a7\u5236\n- \u2705 **\u6743\u9650\u5f15\u64ce** - 4\u79cd\u52a0\u8f7d\u5668\u30014\u79cd\u68c0\u67e5\u5668\n- \u2705 **\u591a\u79df\u6237\u652f\u6301** - \u79df\u6237\u9694\u79bb\u3001\u4e0a\u4e0b\u6587\u7ba1\u7406\n- \u2705 **\u5ba1\u8ba1\u65e5\u5fd7** - \u5b8c\u6574\u7684\u64cd\u4f5c\u8ffd\u8e2a\u548c\u5b58\u50a8\n- \u2705 **\u5b89\u5168\u88c5\u9970\u5668** - \u7b80\u5355\u6613\u7528\u7684\u8def\u7531\u4fdd\u62a4\n</code></pre> <ol> <li>\u6dfb\u52a0\u591a\u79df\u6237\u652f\u6301\u8bf4\u660e</li> </ol> <p>\u5728\"\u529f\u80fd\u6f14\u793a\"\u90e8\u5206\u6dfb\u52a0\uff1a</p> <p><pre><code>### 8. \u591a\u79df\u6237\u652f\u6301 \u2b50 **\u65b0\u589e**\n\n```python\nfrom fastapi_easy.security import (\n    MultiTenantPermissionLoader,\n    TenantIsolationMiddleware\n)\n\n# \u914d\u7f6e\u591a\u79df\u6237\nloader = MultiTenantPermissionLoader(base_loader)\nmiddleware = TenantIsolationMiddleware(app, tenant_header=\"X-Tenant-ID\")\nmiddleware.register_loader(loader)\n\n# \u8bf7\u6c42\u65f6\u81ea\u52a8\u9694\u79bb\u79df\u6237\n# GET /api/users\n# Header: X-Tenant-ID: tenant-123\n</code></pre> <pre><code>6. **\u6269\u5c55\u8fc1\u79fb\u529f\u80fd\u63cf\u8ff0**\n\n\u66f4\u65b0\"\u8fc1\u79fb\u529f\u80fd\"\u90e8\u5206\uff1a\n\n```markdown\n**\u8fc1\u79fb\u529f\u80fd** \u2b50 **\u4f01\u4e1a\u7ea7**:\n- \u2705 **\u81ea\u52a8 Schema \u68c0\u6d4b** - \u542f\u52a8\u65f6\u81ea\u52a8\u68c0\u6d4b\u6570\u636e\u5e93\u53d8\u66f4\n- \u2705 **\u667a\u80fd SQL \u751f\u6210** - \u8de8\u6570\u636e\u5e93\u65b9\u8a00\u652f\u6301\n- \u2705 **\u98ce\u9669\u8bc4\u4f30\u5f15\u64ce** - \u81ea\u52a8\u8bc4\u4f30\u8fc1\u79fb\u98ce\u9669\u7b49\u7ea7\n- \u2705 **\u5b89\u5168\u8fc1\u79fb\u6a21\u5f0f** - Safe/Auto/Aggressive/Dry-run \u56db\u79cd\u6a21\u5f0f\n- \u2705 **\u5206\u5e03\u5f0f\u9501** - PostgreSQL\u3001MySQL\u3001SQLite\u3001\u6587\u4ef6\u9501\n- \u2705 **Schema \u7f13\u5b58** - Redis + \u6587\u4ef6\u53cc\u6a21\u5f0f\n- \u2705 **Hook \u7cfb\u7edf** - \u8fc1\u79fb\u524d\u540e\u94a9\u5b50\uff0c\u652f\u6301\u4f18\u5148\u7ea7\u548c\u8d85\u65f6\n- \u2705 **\u56de\u6eda\u652f\u6301** - \u5b8c\u6574\u7684\u56de\u6eda\u529f\u80fd\n- \u2705 **Checkpoint \u673a\u5236** - \u65ad\u70b9\u7eed\u4f20\uff0c\u5931\u8d25\u6062\u590d\n- \u2705 **SQLite \u4f18\u5316** - Copy-Swap \u6a21\u5f0f\uff0c\u5916\u952e\u5904\u7406\n- \u2705 **\u78c1\u76d8\u68c0\u67e5** - \u81ea\u52a8\u68c0\u67e5\u53ef\u7528\u7a7a\u95f4\n- \u2705 **CLI \u5de5\u5177** - 6\u4e2a\u547d\u4ee4\u884c\u5de5\u5177\n- \u2705 **\u96f6\u914d\u7f6e\u96c6\u6210** - FastAPIEasy \u7c7b\u81ea\u52a8\u5904\u7406\n</code></pre></p>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#p2-3-5","title":"\u4e2d\u4f18\u5148\u7ea7\uff08P2 - 3-5\u5929\uff09","text":"<ol> <li>\u6dfb\u52a0 JWT \u8ba4\u8bc1\u793a\u4f8b</li> <li>\u6dfb\u52a0 GraphQL \u4f7f\u7528\u793a\u4f8b</li> <li>\u6dfb\u52a0 WebSocket \u4f7f\u7528\u793a\u4f8b</li> <li>\u66f4\u65b0\u8fc1\u79fb\u529f\u80fd\u793a\u4f8b\uff08\u5c55\u793a Hook \u548c CLI\uff09</li> </ol>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#_5","title":"\ud83c\udfaf \u6838\u5fc3\u5efa\u8bae","text":""},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#readme-crud","title":"\u4f60\u7684\u9879\u76ee\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a \u4f01\u4e1a\u7ea7\u6846\u67b6\uff0c\u4f46 README \u8ba9\u5b83\u770b\u8d77\u6765\u50cf\u4e00\u4e2a \u57fa\u7840 CRUD \u5de5\u5177","text":"<p>\u5f53\u524d README \u7ed9\u4eba\u7684\u5370\u8c61: - \u4e00\u4e2a\u7b80\u5355\u7684 CRUD \u751f\u6210\u5668 - \u57fa\u7840\u7684\u8fc7\u6ee4\u548c\u6392\u5e8f\u529f\u80fd - \u7b80\u5355\u7684\u6570\u636e\u5e93\u8fc1\u79fb</p> <p>\u5b9e\u9645\u9879\u76ee\u7684\u80fd\u529b: - \u2705 \u4f01\u4e1a\u7ea7\u5b89\u5168\u7cfb\u7edf\uff08JWT\u3001RBAC\u3001\u5ba1\u8ba1\uff09 - \u2705 \u591a\u79df\u6237 SaaS \u652f\u6301 - \u2705 \u751f\u4ea7\u7ea7\u6570\u636e\u5e93\u8fc1\u79fb\u5f15\u64ce - \u2705 GraphQL \u548c WebSocket \u652f\u6301 - \u2705 \u5b8c\u6574\u7684\u6743\u9650\u548c\u76d1\u63a7\u7cfb\u7edf</p>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#_6","title":"\u5efa\u8bae\u7684\u5b9a\u4f4d\u8c03\u6574","text":"<p>\u4ece:</p> <p>\ud83d\ude80 \u4e00\u4e2a\u73b0\u4ee3\u5316\u7684 FastAPI CRUD \u8def\u7531\u751f\u6210\u6846\u67b6</p> <p>\u6539\u4e3a:</p> <p>\ud83d\ude80 \u4f01\u4e1a\u7ea7 FastAPI \u5f00\u53d1\u6846\u67b6</p> <p>\u96c6\u6210 CRUD \u751f\u6210\u3001\u5b89\u5168\u8ba4\u8bc1\u3001\u591a\u79df\u6237\u3001\u6570\u636e\u5e93\u8fc1\u79fb\u3001GraphQL/WebSocket \u4e8e\u4e00\u4f53\u7684\u751f\u4ea7\u7ea7\u6846\u67b6</p>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#_7","title":"\ud83d\udcdd \u5b8c\u6574\u7684\u7f3a\u5931\u529f\u80fd\u6e05\u5355","text":""},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#15","title":"\u5b89\u5168\u6a21\u5757\uff0815\u4e2a\u5b50\u529f\u80fd\uff09","text":"<ol> <li>JWT \u8ba4\u8bc1\u7cfb\u7edf</li> <li>Token \u5237\u65b0\u673a\u5236</li> <li>\u5bc6\u7801\u54c8\u5e0c\u548c\u9a8c\u8bc1</li> <li>\u767b\u5f55\u5c1d\u8bd5\u8ffd\u8e2a</li> <li>\u8d26\u6237\u9501\u5b9a\u673a\u5236</li> <li>\u6743\u9650\u5f15\u64ce</li> <li>\u9759\u6001\u6743\u9650\u52a0\u8f7d\u5668</li> <li>\u6570\u636e\u5e93\u6743\u9650\u52a0\u8f7d\u5668</li> <li>\u7f13\u5b58\u6743\u9650\u52a0\u8f7d\u5668</li> <li>LRU \u7f13\u5b58\u6743\u9650\u52a0\u8f7d\u5668</li> <li>\u8d44\u6e90\u6743\u9650\u68c0\u67e5\u5668\uff084\u79cd\uff09</li> <li>\u76d1\u63a7\u548c\u6307\u6807</li> <li>\u5b89\u5168\u88c5\u9970\u5668\uff084\u79cd\uff09</li> <li>\u5ba1\u8ba1\u5b58\u50a8\uff082\u79cd\uff09</li> <li>\u5f02\u5e38\u7cfb\u7edf\uff089\u79cd\uff09</li> </ol>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#4","title":"\u591a\u79df\u6237\u652f\u6301\uff084\u4e2a\u5b50\u529f\u80fd\uff09","text":"<ol> <li>\u79df\u6237\u4e0a\u4e0b\u6587</li> <li>\u591a\u79df\u6237\u6743\u9650\u52a0\u8f7d</li> <li>\u591a\u79df\u6237\u8d44\u6e90\u68c0\u67e5</li> <li>\u79df\u6237\u9694\u79bb\u4e2d\u95f4\u4ef6</li> </ol>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#10","title":"\u8fc1\u79fb\u5f15\u64ce\u9ad8\u7ea7\u7279\u6027\uff0810\u4e2a\u5b50\u529f\u80fd\uff09","text":"<ol> <li>\u5206\u5e03\u5f0f\u9501\uff084\u79cd\uff09</li> <li>Schema \u7f13\u5b58\uff082\u79cd\uff09</li> <li>Hook \u7cfb\u7edf</li> <li>\u7c7b\u578b\u6bd4\u8f83\u5668</li> <li>Checkpoint \u673a\u5236</li> <li>SQLite Copy-Swap</li> <li>SQLite \u5916\u952e\u5904\u7406</li> <li>\u78c1\u76d8\u7a7a\u95f4\u68c0\u67e5</li> <li>\u98ce\u9669\u8bc4\u4f30\u5f15\u64ce</li> <li>FastAPIEasy \u96f6\u914d\u7f6e</li> </ol>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#3","title":"\u6269\u5c55\u529f\u80fd\uff083\u4e2a\u5b50\u529f\u80fd\uff09","text":"<ol> <li>GraphQL \u5b8c\u6574\u652f\u6301</li> <li>WebSocket \u5b8c\u6574\u652f\u6301</li> <li>CLI \u5de5\u5177\uff086\u4e2a\u547d\u4ee4\uff09</li> </ol> <p>\u603b\u8ba1: 32\u4e2a\u5b50\u529f\u80fd \u672a\u5728 README \u4e2d\u5145\u5206\u63cf\u8ff0</p>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#_8","title":"\ud83d\ude80 \u884c\u52a8\u8ba1\u5212","text":""},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#1","title":"\u7b2c\u4e00\u6b65\uff1a\u7acb\u5373\u4fee\u590d\uff08\u4eca\u5929\uff0c1\u5c0f\u65f6\uff09","text":"<ul> <li>[ ] \u7edf\u4e00\u7248\u672c\u53f7\u4e3a v0.1.3</li> <li>[ ] \u4fee\u590d\u4ee3\u7801\u793a\u4f8b\uff08\u7b2c 95-101 \u884c\uff09</li> <li>[ ] \u4fee\u590d\u529f\u80fd\u7f16\u53f7\u91cd\u590d</li> </ul>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#1-2","title":"\u7b2c\u4e8c\u6b65\uff1a\u6dfb\u52a0\u6838\u5fc3\u529f\u80fd\u63cf\u8ff0\uff08\u672c\u5468\uff0c1-2\u5929\uff09","text":"<ul> <li>[ ] \u6dfb\u52a0\u5b89\u5168\u6a21\u5757\u5b8c\u6574\u63cf\u8ff0</li> <li>[ ] \u6dfb\u52a0\u591a\u79df\u6237\u652f\u6301\u8bf4\u660e</li> <li>[ ] \u6269\u5c55\u8fc1\u79fb\u529f\u80fd\u63cf\u8ff0</li> <li>[ ] \u6dfb\u52a0 JWT \u8ba4\u8bc1\u793a\u4f8b</li> </ul>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#3-5","title":"\u7b2c\u4e09\u6b65\uff1a\u5b8c\u5584\u6587\u6863\uff08\u4e0b\u5468\uff0c3-5\u5929\uff09","text":"<ul> <li>[ ] \u6dfb\u52a0 GraphQL \u4f7f\u7528\u793a\u4f8b</li> <li>[ ] \u6dfb\u52a0 WebSocket \u4f7f\u7528\u793a\u4f8b</li> <li>[ ] \u66f4\u65b0\u8fc1\u79fb\u529f\u80fd\u793a\u4f8b</li> <li>[ ] \u91cd\u6784 README \u7ed3\u6784</li> </ul>"},{"location":"%E6%96%87%E6%A1%A3%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/#_9","title":"\ud83d\udccc \u603b\u7ed3","text":"<p>\u4f60\u7684\u9879\u76ee \u5b9e\u73b0\u5f97\u975e\u5e38\u597d\uff0c\u4ee3\u7801\u8d28\u91cf\u9ad8\uff0c\u529f\u80fd\u5b8c\u6574\uff0c\u751a\u81f3\u8d85\u51fa\u4e86\u8bbe\u8ba1\u9884\u671f\uff08120% \u5b8c\u6210\u5ea6\uff09\u3002</p> <p>\u552f\u4e00\u7684\u95ee\u9898\u662f: \u6587\u6863\u6ca1\u6709\u8ddf\u4e0a\u5b9e\u73b0\u7684\u6b65\u4f10\uff0c\u5bfc\u81f4\u7528\u6237\u65e0\u6cd5\u4e86\u89e3\u9879\u76ee\u7684\u771f\u5b9e\u80fd\u529b\u3002</p> <p>\u5efa\u8bae: \u4f18\u5148\u66f4\u65b0 README\uff0c\u8ba9\u5b83\u80fd\u591f\u51c6\u786e\u53cd\u6620\u9879\u76ee\u7684\u4f01\u4e1a\u7ea7\u80fd\u529b\uff0c\u8fd9\u6837\u624d\u80fd\u5438\u5f15\u66f4\u591a\u7528\u6237\u4f7f\u7528\u4f60\u7684\u6846\u67b6\u3002</p> <p>\u8be6\u7ec6\u5206\u6790\u62a5\u544a: DOCUMENTATION_GAP_ANALYSIS.md</p>"},{"location":"adapters/","title":"\u9002\u914d\u5668\u6982\u89c8 (Adapters Overview)","text":"<p>fastapi-easy \u901a\u8fc7\u9002\u914d\u5668\u6a21\u5f0f\uff08Adapter Pattern\uff09\u652f\u6301\u591a\u79cd\u6570\u636e\u5e93\u540e\u7aef\u3002\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u4f7f\u7528\u7edf\u4e00\u7684 API (<code>CRUDRouter</code>) \u6765\u64cd\u4f5c\u4e0d\u540c\u7684\u6570\u636e\u5e93\u3002</p>"},{"location":"adapters/#_1","title":"\u652f\u6301\u7684\u9002\u914d\u5668","text":"\u9002\u914d\u5668 \u5e95\u5c42\u5e93 \u6570\u636e\u5e93\u652f\u6301 \u7279\u70b9 \u6587\u6863 SQLAlchemy <code>sqlalchemy</code> PostgreSQL, MySQL, SQLite, Oracle, SQL Server \u884c\u4e1a\u6807\u51c6\uff0c\u529f\u80fd\u6700\u5f3a \u67e5\u770b\u6587\u6863 Tortoise <code>tortoise-orm</code> PostgreSQL, MySQL, SQLite \u7c7b\u4f3c Django\uff0c\u7b80\u5355\u6613\u7528 \u67e5\u770b\u6587\u6863 MongoDB <code>motor</code> MongoDB \u9ad8\u6027\u80fd\u5f02\u6b65 NoSQL \u67e5\u770b\u6587\u6863 SQLModel <code>sqlmodel</code> \u540c SQLAlchemy \u7ed3\u5408 Pydantic \u4e0e SQLAlchemy \u67e5\u770b\u6587\u6863"},{"location":"adapters/#_2","title":"\u5982\u4f55\u9009\u62e9\uff1f","text":""},{"location":"adapters/#sql","title":"\u65b0\u9879\u76ee (SQL)","text":"<p>\u63a8\u8350 SQLModel \u6216 SQLAlchemy - SQLModel: \u5982\u679c\u4f60\u559c\u6b22\u7b80\u6d01\u7684\u4ee3\u7801\uff0c\u4e00\u4e2a\u7c7b\u540c\u65f6\u4f5c\u4e3a ORM \u6a21\u578b\u548c API Schema - SQLAlchemy: \u5982\u679c\u4f60\u9700\u8981\u66f4\u5f3a\u5927\u7684 ORM \u529f\u80fd\u548c\u66f4\u597d\u7684\u751f\u6001\u7cfb\u7edf</p>"},{"location":"adapters/#nosql","title":"\u65b0\u9879\u76ee (NoSQL)","text":"<p>\u4f7f\u7528 MongoDB - \u9002\u5408\u6587\u6863\u578b\u6570\u636e - \u7075\u6d3b\u7684 Schema - \u9ad8\u6027\u80fd\u5f02\u6b65\u64cd\u4f5c</p>"},{"location":"adapters/#django","title":"\u4e60\u60ef Django","text":"<p>\u4f7f\u7528 Tortoise ORM - API \u8bbe\u8ba1\u7c7b\u4f3c Django ORM - \u5b66\u4e60\u66f2\u7ebf\u5e73\u7f13 - \u539f\u751f\u5f02\u6b65\u652f\u6301</p>"},{"location":"adapters/#_3","title":"\u4f01\u4e1a\u7ea7\u5e94\u7528","text":"<p>SQLAlchemy \u662f\u6700\u7a33\u5065\u7684\u9009\u62e9 - \u6210\u719f\u7a33\u5b9a\uff0c\u7ecf\u8fc7\u5927\u91cf\u751f\u4ea7\u73af\u5883\u9a8c\u8bc1 - \u5f3a\u5927\u7684\u67e5\u8be2\u80fd\u529b - \u4e30\u5bcc\u7684\u63d2\u4ef6\u751f\u6001</p>"},{"location":"adapters/#_4","title":"\u7248\u672c\u517c\u5bb9\u6027","text":""},{"location":"adapters/#python","title":"Python \u7248\u672c","text":"<ul> <li>\u6700\u4f4e\u8981\u6c42: Python 3.8+</li> <li>\u63a8\u8350\u7248\u672c: Python 3.10+</li> </ul>"},{"location":"adapters/#fastapi","title":"FastAPI \u7248\u672c","text":"<ul> <li>\u6700\u4f4e\u8981\u6c42: FastAPI 0.100+</li> <li>\u63a8\u8350\u7248\u672c: FastAPI 0.104+</li> </ul>"},{"location":"adapters/#pydantic","title":"Pydantic \u7248\u672c","text":"<ul> <li>\u8981\u6c42: Pydantic 2.0+</li> <li>\u6ce8\u610f: \u4e0d\u652f\u6301 Pydantic 1.x</li> </ul>"},{"location":"adapters/#_5","title":"\u6570\u636e\u5e93\u9a71\u52a8\u7248\u672c","text":"<ul> <li>SQLAlchemy: 2.0+\uff08\u5f02\u6b65\u6a21\u5f0f\uff09</li> <li>Tortoise ORM: 0.19+</li> <li>Motor (MongoDB): 3.0+</li> <li>SQLModel: 0.0.8+</li> </ul>"},{"location":"adapters/#faq","title":"\u5e38\u89c1\u95ee\u9898 (FAQ)","text":""},{"location":"adapters/#q-gino-ormar","title":"Q: \u4e3a\u4ec0\u4e48\u4e0d\u652f\u6301 Gino \u6216 Ormar\uff1f","text":"<p>A: \u8fd9\u4e9b ORM \u7684\u7ef4\u62a4\u72b6\u6001\u4e0d\u591f\u6d3b\u8dc3\uff0c\u4e14\u4e0e Pydantic 2.0 \u7684\u517c\u5bb9\u6027\u5b58\u5728\u95ee\u9898\u3002\u6211\u4eec\u9009\u62e9\u4e13\u6ce8\u4e8e\u7ef4\u62a4\u826f\u597d\u3001\u793e\u533a\u6d3b\u8dc3\u7684 ORM\u3002</p>"},{"location":"adapters/#q-orm","title":"Q: \u672a\u6765\u4f1a\u652f\u6301\u66f4\u591a ORM \u5417\uff1f","text":"<p>A: \u6211\u4eec\u4f1a\u6839\u636e\u793e\u533a\u9700\u6c42\u8003\u8651\u6dfb\u52a0\u65b0\u7684\u9002\u914d\u5668\u3002\u5982\u679c\u4f60\u9700\u8981\u7279\u5b9a\u7684 ORM \u652f\u6301\uff0c\u6b22\u8fce\u63d0\u4ea4 Issue \u6216 Pull Request\u3002</p>"},{"location":"adapters/#q","title":"Q: \u53ef\u4ee5\u540c\u65f6\u4f7f\u7528\u591a\u4e2a\u9002\u914d\u5668\u5417\uff1f","text":"<p>A: \u53ef\u4ee5\uff01\u4f60\u53ef\u4ee5\u4e3a\u4e0d\u540c\u7684\u8d44\u6e90\u4f7f\u7528\u4e0d\u540c\u7684\u9002\u914d\u5668\u3002\u4f8b\u5982\uff0c\u7528\u6237\u6570\u636e\u7528 PostgreSQL\uff0c\u65e5\u5fd7\u6570\u636e\u7528 MongoDB\u3002</p> <pre><code># \u7528\u6237\u4f7f\u7528 SQLAlchemy\nuser_router = CRUDRouter(\n    schema=User,\n    adapter=SQLAlchemyAdapter(UserDB, get_pg_db)\n)\n\n# \u65e5\u5fd7\u4f7f\u7528 MongoDB\nlog_router = CRUDRouter(\n    schema=Log,\n    adapter=MongoAdapter(log_collection)\n)\n</code></pre>"},{"location":"adapters/#q_1","title":"Q: \u5982\u4f55\u8d21\u732e\u65b0\u7684\u9002\u914d\u5668\uff1f","text":"<p>A: \u8bf7\u53c2\u8003 \u5f00\u53d1\u6587\u6863\u3002\u65b0\u9002\u914d\u5668\u9700\u8981\uff1a 1. \u7ee7\u627f <code>BaseORMAdapter</code> \u57fa\u7c7b 2. \u5b9e\u73b0\u6240\u6709\u62bd\u8c61\u65b9\u6cd5 3. \u63d0\u4f9b\u5b8c\u6574\u7684\u6d4b\u8bd5\u8986\u76d6 4. \u7f16\u5199\u4f7f\u7528\u6587\u6863</p>"},{"location":"adapters/#_6","title":"\u81ea\u5b9a\u4e49\u9002\u914d\u5668","text":"<p>\u5982\u679c\u4f60\u9700\u8981\u652f\u6301\u5176\u4ed6\u6570\u636e\u5e93\uff08\u5982 Redis, Elasticsearch\uff09\uff0c\u53ef\u4ee5\u7ee7\u627f <code>BaseORMAdapter</code> \u5e76\u5b9e\u73b0\u4ee5\u4e0b\u65b9\u6cd5\uff1a</p> <pre><code>from fastapi_easy.backends.base import BaseORMAdapter\n\nclass MyCustomAdapter(BaseORMAdapter):\n    async def get_all(self, filters, sorts, pagination):\n        # \u5b9e\u73b0\u83b7\u53d6\u6240\u6709\u8bb0\u5f55\u7684\u903b\u8f91\n        ...\n\n    async def get_one(self, id):\n        # \u5b9e\u73b0\u83b7\u53d6\u5355\u6761\u8bb0\u5f55\u7684\u903b\u8f91\n        ...\n\n    async def create(self, data):\n        # \u5b9e\u73b0\u521b\u5efa\u8bb0\u5f55\u7684\u903b\u8f91\n        ...\n\n    async def update(self, id, data):\n        # \u5b9e\u73b0\u66f4\u65b0\u8bb0\u5f55\u7684\u903b\u8f91\n        ...\n\n    async def delete_one(self, id):\n        # \u5b9e\u73b0\u5220\u9664\u5355\u6761\u8bb0\u5f55\u7684\u903b\u8f91\n        ...\n\n    async def delete_all(self):\n        # \u5b9e\u73b0\u5220\u9664\u6240\u6709\u8bb0\u5f55\u7684\u903b\u8f91\n        ...\n\n    async def count(self, filters):\n        # \u5b9e\u73b0\u8ba1\u6570\u7684\u903b\u8f91\n        ...\n</code></pre> <p>\u8be6\u7ec6\u7684\u9002\u914d\u5668\u5f00\u53d1\u6307\u5357\u8bf7\u53c2\u8003 \u8d21\u732e\u6587\u6863\u3002</p>"},{"location":"adapters/#_7","title":"\u6027\u80fd\u8003\u8651","text":""},{"location":"adapters/#_8","title":"\u6570\u636e\u5e93\u7d22\u5f15","text":"<p>\u65e0\u8bba\u4f7f\u7528\u54ea\u4e2a\u9002\u914d\u5668\uff0c\u90fd\u8981\u4e3a\u5e38\u7528\u7684\u67e5\u8be2\u5b57\u6bb5\u6dfb\u52a0\u7d22\u5f15\uff1a</p> <pre><code># SQLAlchemy \u793a\u4f8b\nclass ItemDB(Base):\n    __tablename__ = \"items\"\n    id = Column(Integer, primary_key=True)\n    name = Column(String, index=True)  # \u6dfb\u52a0\u7d22\u5f15\n    category = Column(String, index=True)  # \u6dfb\u52a0\u7d22\u5f15\n    price = Column(Float)\n</code></pre>"},{"location":"adapters/#_9","title":"\u8fde\u63a5\u6c60\u914d\u7f6e","text":"<p>\u5bf9\u4e8e\u751f\u4ea7\u73af\u5883\uff0c\u52a1\u5fc5\u914d\u7f6e\u5408\u9002\u7684\u8fde\u63a5\u6c60\u5927\u5c0f\uff1a</p> <pre><code># SQLAlchemy \u793a\u4f8b\nengine = create_async_engine(\n    DATABASE_URL,\n    pool_size=20,          # \u8fde\u63a5\u6c60\u5927\u5c0f\n    max_overflow=10,       # \u6700\u5927\u6ea2\u51fa\u8fde\u63a5\u6570\n    pool_pre_ping=True,    # \u8fde\u63a5\u5065\u5eb7\u68c0\u67e5\n)\n</code></pre>"},{"location":"adapters/#_10","title":"\u6279\u91cf\u64cd\u4f5c","text":"<p>\u4f7f\u7528\u6279\u91cf\u64cd\u4f5c\u800c\u975e\u5faa\u73af\u5355\u6761\u64cd\u4f5c\uff1a</p> <pre><code># \u274c \u4e0d\u63a8\u8350\nfor item in items:\n    await router.create(item)\n\n# \u2705 \u63a8\u8350\nawait router.bulk_create(items)\n</code></pre>"},{"location":"adapters/#_11","title":"\u4e0b\u4e00\u6b65","text":"<p>\u9009\u62e9\u9002\u5408\u4f60\u7684\u9002\u914d\u5668\uff0c\u5f00\u59cb\u6784\u5efa\u5e94\u7528\uff1a - SQLAlchemy \u9002\u914d\u5668 - Tortoise ORM \u9002\u914d\u5668 - MongoDB \u9002\u914d\u5668 - SQLModel \u9002\u914d\u5668</p>"},{"location":"adapters/mongodb/","title":"MongoDB \u9002\u914d\u5668 (Motor)","text":"<p>fastapi-easy \u901a\u8fc7 <code>motor</code> \u9a71\u52a8\u63d0\u4f9b\u5bf9 MongoDB \u7684\u5f02\u6b65\u652f\u6301\u3002</p>"},{"location":"adapters/mongodb/#_1","title":"\u5b89\u88c5","text":"<pre><code>pip install fastapi-easy[mongodb]\npip install motor\n</code></pre>"},{"location":"adapters/mongodb/#_2","title":"\u4f7f\u7528\u793a\u4f8b","text":"<pre><code>from fastapi import FastAPI\nfrom fastapi_easy import CRUDRouter\nfrom fastapi_easy.backends import MongoAdapter\nfrom pydantic import BaseModel, Field\nfrom motor.motor_asyncio import AsyncIOMotorClient\nfrom typing import Optional\n\n# 1. \u5b9a\u4e49 Pydantic Schema\n# \u6ce8\u610f\uff1aMongoDB \u4f7f\u7528 _id\uff0c\u901a\u5e38\u6620\u5c04\u4e3a id \u5b57\u7b26\u4e32\nclass Item(BaseModel):\n    id: Optional[str] = Field(None, alias=\"_id\")\n    name: str\n    price: float\n\n    class Config:\n        populate_by_name = True\n\n# 2. \u8fde\u63a5 MongoDB\nclient = AsyncIOMotorClient(\"mongodb://localhost:27017\")\ndb = client.test_database\ncollection = db.items\n\n# 3. \u521b\u5efa\u5e94\u7528\u548c\u8def\u7531\napp = FastAPI()\n\nrouter = CRUDRouter(\n    schema=Item,\n    adapter=MongoAdapter(collection),\n    prefix=\"/items\",\n)\n\napp.include_router(router)\n</code></pre>"},{"location":"adapters/mongodb/#_3","title":"\u7279\u6027","text":"<ul> <li>Motor \u9a71\u52a8: \u9ad8\u6027\u80fd\u5f02\u6b65 MongoDB \u9a71\u52a8\u3002</li> <li>\u7075\u6d3b\u67e5\u8be2: \u652f\u6301 MongoDB \u7684\u67e5\u8be2\u8bed\u6cd5\u3002</li> <li>\u81ea\u52a8\u6620\u5c04: \u81ea\u52a8\u5904\u7406 <code>_id</code> \u6620\u5c04\uff08\u9700\u914d\u5408 Pydantic \u914d\u7f6e\uff09\u3002</li> </ul>"},{"location":"adapters/mongodb/#_4","title":"\u8fc7\u6ee4\u64cd\u4f5c\u7b26\u6620\u5c04","text":"fastapi-easy \u64cd\u4f5c\u7b26 MongoDB \u64cd\u4f5c\u7b26 <code>exact</code> <code>{field: value}</code> <code>ne</code> <code>$ne</code> <code>gt</code> <code>$gt</code> <code>gte</code> <code>$gte</code> <code>lt</code> <code>$lt</code> <code>lte</code> <code>$lte</code> <code>in</code> <code>$in</code> <code>like</code> <code>$regex</code> <code>ilike</code> <code>$regex</code> (with <code>$options: \"i\"</code>)"},{"location":"adapters/mongodb/#_5","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u786e\u4fdd Pydantic \u6a21\u578b\u6b63\u786e\u5904\u7406 <code>_id</code> \u5b57\u6bb5\uff08\u901a\u5e38\u4f7f\u7528 <code>alias=\"_id\"</code>\uff09\u3002</li> <li><code>MongoAdapter</code> \u76f4\u63a5\u63a5\u53d7 <code>motor</code> \u7684 <code>collection</code> \u5bf9\u8c61\u3002</li> </ul>"},{"location":"adapters/sqlalchemy/","title":"SQLAlchemy \u9002\u914d\u5668 (Async)","text":"<p>SQLAlchemy \u662f Python \u4e2d\u6700\u6d41\u884c\u7684 ORM \u4e4b\u4e00\u3002fastapi-easy \u63d0\u4f9b\u4e86\u5bf9 SQLAlchemy \u5f02\u6b65\u6a21\u5f0f\uff08AsyncIO\uff09\u7684\u5b8c\u6574\u652f\u6301\u3002</p>"},{"location":"adapters/sqlalchemy/#_1","title":"\u5b89\u88c5","text":"<pre><code>pip install fastapi-easy[sqlalchemy]\npip install sqlalchemy[asyncio]\npip install aiosqlite  # SQLite \u5f02\u6b65\u9a71\u52a8\n# \u6216\npip install asyncpg    # PostgreSQL \u5f02\u6b65\u9a71\u52a8\n</code></pre>"},{"location":"adapters/sqlalchemy/#_2","title":"\u4f7f\u7528\u793a\u4f8b","text":"<pre><code>from fastapi import FastAPI\nfrom fastapi_easy import CRUDRouter\nfrom fastapi_easy.backends import SQLAlchemyAdapter\nfrom sqlalchemy.ext.asyncio import AsyncSession, create_async_engine\nfrom sqlalchemy.orm import declarative_base, sessionmaker\nfrom sqlalchemy import Column, Integer, String, Float\nfrom pydantic import BaseModel\n\n# 1. \u5b9a\u4e49 ORM \u6a21\u578b\nBase = declarative_base()\n\nclass ItemDB(Base):\n    __tablename__ = \"items\"\n    id = Column(Integer, primary_key=True)\n    name = Column(String)\n    price = Column(Float)\n\n# 2. \u5b9a\u4e49 Pydantic Schema\nclass Item(BaseModel):\n    id: int\n    name: str\n    price: float\n\n    class Config:\n        from_attributes = True\n\n# 3. \u914d\u7f6e\u6570\u636e\u5e93\u8fde\u63a5\nDATABASE_URL = \"sqlite+aiosqlite:///./test.db\"\nengine = create_async_engine(DATABASE_URL)\nAsyncSessionLocal = sessionmaker(\n    engine, \n    class_=AsyncSession, \n    expire_on_commit=False\n)\n\nasync def get_db():\n    async with AsyncSessionLocal() as session:\n        yield session\n\n# 4. \u521b\u5efa\u5e94\u7528\u548c\u8def\u7531\napp = FastAPI()\n\nrouter = CRUDRouter(\n    schema=Item,\n    adapter=SQLAlchemyAdapter(ItemDB, get_db),\n    prefix=\"/items\",\n)\n\napp.include_router(router)\n</code></pre>"},{"location":"adapters/sqlalchemy/#_3","title":"\u7279\u6027","text":"<ul> <li>\u5b8c\u5168\u5f02\u6b65: \u57fa\u4e8e <code>sqlalchemy.ext.asyncio</code>\u3002</li> <li>\u81ea\u52a8\u8fc7\u6ee4: \u652f\u6301\u6240\u6709\u6807\u51c6\u8fc7\u6ee4\u64cd\u4f5c\u7b26\u3002</li> <li>\u81ea\u52a8\u6392\u5e8f: \u652f\u6301\u591a\u5b57\u6bb5\u6392\u5e8f\u3002</li> <li>\u5206\u9875: \u81ea\u52a8\u5904\u7406 <code>limit</code> \u548c <code>offset</code>\u3002</li> <li>\u8f6f\u5220\u9664: \u652f\u6301\u8f6f\u5220\u9664\u914d\u7f6e\u3002</li> </ul>"},{"location":"adapters/sqlalchemy/#_4","title":"\u5e38\u89c1\u95ee\u9898","text":"<p>Q: \u5982\u4f55\u5904\u7406\u5173\u7cfb\uff08Relationships\uff09\uff1f A: \u5728 Pydantic \u6a21\u578b\u4e2d\u5b9a\u4e49\u5d4c\u5957\u6a21\u578b\uff0c\u5e76\u786e\u4fdd SQLAlchemy \u6a21\u578b\u914d\u7f6e\u4e86 <code>relationship</code>\u3002\u5728\u67e5\u8be2\u65f6\uff0c\u53ef\u80fd\u9700\u8981\u4f7f\u7528 <code>selectinload</code> \u7b49\u52a0\u8f7d\u7b56\u7565\uff08\u76ee\u524d\u9700\u8981\u901a\u8fc7\u81ea\u5b9a\u4e49\u94a9\u5b50\u6216\u8986\u76d6 <code>get_all</code> \u65b9\u6cd5\u5b9e\u73b0\u590d\u6742\u52a0\u8f7d\uff09\u3002</p> <p>Q: \u652f\u6301\u540c\u6b65\u6a21\u5f0f\u5417\uff1f A: \u76ee\u524d\u4ec5\u652f\u6301\u5f02\u6b65\u6a21\u5f0f\u3002\u5982\u679c\u9700\u8981\u540c\u6b65\u6a21\u5f0f\uff0c\u8bf7\u4f7f\u7528 FastAPI \u7684\u6807\u51c6\u540c\u6b65\u8def\u7531\u65b9\u5f0f\uff0c\u6216\u8d21\u732e\u540c\u6b65\u9002\u914d\u5668\u3002</p>"},{"location":"adapters/sqlmodel/","title":"SQLModel \u9002\u914d\u5668","text":"<p>SQLModel \u662f\u57fa\u4e8e SQLAlchemy \u548c Pydantic \u6784\u5efa\u7684\u5e93\uff0c\u65e8\u5728\u7b80\u5316 FastAPI \u4e2d\u7684\u6570\u636e\u5e93\u4ea4\u4e92\u3002fastapi-easy \u63d0\u4f9b\u4e86\u4e13\u95e8\u7684\u9002\u914d\u5668\u3002</p>"},{"location":"adapters/sqlmodel/#_1","title":"\u5b89\u88c5","text":"<pre><code>pip install fastapi-easy[sqlmodel]\npip install sqlmodel\npip install aiosqlite  # SQLite \u5f02\u6b65\u9a71\u52a8\n</code></pre>"},{"location":"adapters/sqlmodel/#_2","title":"\u4f7f\u7528\u793a\u4f8b","text":"<pre><code>from fastapi import FastAPI\nfrom fastapi_easy import CRUDRouter\nfrom fastapi_easy.backends import SQLModelAdapter\nfrom sqlmodel import SQLModel, Field, create_engine\nfrom sqlmodel.ext.asyncio.session import AsyncSession\nfrom sqlalchemy.orm import sessionmaker\nfrom sqlalchemy.ext.asyncio import create_async_engine\n\n# 1. \u5b9a\u4e49 SQLModel \u6a21\u578b\n# SQLModel \u540c\u65f6\u662f Pydantic \u6a21\u578b\u548c SQLAlchemy \u6a21\u578b\nclass Item(SQLModel, table=True):\n    id: int = Field(default=None, primary_key=True)\n    name: str\n    price: float\n\n# 2. \u914d\u7f6e\u6570\u636e\u5e93\nDATABASE_URL = \"sqlite+aiosqlite:///./test.db\"\nengine = create_async_engine(DATABASE_URL)\nAsyncSessionLocal = sessionmaker(\n    engine, \n    class_=AsyncSession, \n    expire_on_commit=False\n)\n\nasync def get_db():\n    async with AsyncSessionLocal() as session:\n        yield session\n\n# 3. \u521b\u5efa\u5e94\u7528\u548c\u8def\u7531\napp = FastAPI()\n\n# \u6ce8\u610f\uff1aSQLModelAdapter \u7ee7\u627f\u81ea SQLAlchemyAdapter\nrouter = CRUDRouter(\n    schema=Item,\n    adapter=SQLModelAdapter(Item, get_db),\n    prefix=\"/items\",\n)\n\napp.include_router(router)\n</code></pre>"},{"location":"adapters/sqlmodel/#sqlmodel_1","title":"\u4e3a\u4ec0\u4e48\u4f7f\u7528 SQLModel\uff1f","text":"<ul> <li>\u51cf\u5c11\u91cd\u590d: \u540c\u4e00\u4e2a\u7c7b\u65e2\u662f\u6570\u636e\u5e93\u6a21\u578b\u53c8\u662f API Schema\u3002</li> <li>\u7c7b\u578b\u5b89\u5168: \u5b8c\u7f8e\u7684\u7f16\u8f91\u5668\u652f\u6301\u3002</li> <li>FastAPI \u6700\u4f73\u62cd\u6863: \u7531 FastAPI \u4f5c\u8005\u5f00\u53d1\u3002</li> </ul>"},{"location":"adapters/sqlmodel/#_3","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li><code>SQLModelAdapter</code> \u672c\u8d28\u4e0a\u662f <code>SQLAlchemyAdapter</code> \u7684\u5c01\u88c5\uff0c\u56e0\u6b64\u652f\u6301\u6240\u6709 SQLAlchemy \u7684\u7279\u6027\u3002</li> <li>\u786e\u4fdd\u5b89\u88c5\u4e86 <code>sqlmodel</code> \u5e93\u3002</li> </ul>"},{"location":"adapters/tortoise/","title":"Tortoise ORM \u9002\u914d\u5668","text":"<p>Tortoise ORM \u662f\u4e00\u4e2a\u6613\u4e8e\u4f7f\u7528\u7684\u5f02\u6b65 ORM\uff0c\u7075\u611f\u6765\u81ea Django\u3002</p>"},{"location":"adapters/tortoise/#_1","title":"\u5b89\u88c5","text":"<pre><code>pip install fastapi-easy[tortoise]\npip install tortoise-orm\npip install aiosqlite  # SQLite \u5f02\u6b65\u9a71\u52a8\n</code></pre>"},{"location":"adapters/tortoise/#_2","title":"\u4f7f\u7528\u793a\u4f8b","text":"<pre><code>from fastapi import FastAPI\nfrom fastapi_easy import CRUDRouter\nfrom fastapi_easy.backends import TortoiseAdapter\nfrom tortoise import fields\nfrom tortoise.models import Model\nfrom pydantic import BaseModel\nfrom tortoise import Tortoise\n\n# 1. \u5b9a\u4e49 ORM \u6a21\u578b\nclass ItemDB(Model):\n    id = fields.IntField(pk=True)\n    name = fields.CharField(max_length=100)\n    price = fields.FloatField()\n\n# 2. \u5b9a\u4e49 Pydantic Schema\nclass Item(BaseModel):\n    id: int\n    name: str\n    price: float\n\n# 3. \u521d\u59cb\u5316 Tortoise (\u901a\u5e38\u5728 startup \u4e8b\u4ef6\u4e2d)\nasync def init_db():\n    await Tortoise.init(\n        db_url='sqlite://:memory:',\n        modules={'models': ['main']}\n    )\n    await Tortoise.generate_schemas()\n\n# 4. \u521b\u5efa\u5e94\u7528\u548c\u8def\u7531\napp = FastAPI()\n\n@app.on_event(\"startup\")\nasync def startup():\n    await init_db()\n\nrouter = CRUDRouter(\n    schema=Item,\n    adapter=TortoiseAdapter(ItemDB),\n    prefix=\"/items\"\n)\n\napp.include_router(router)\n</code></pre>"},{"location":"adapters/tortoise/#_3","title":"\u7279\u6027","text":"<ul> <li>\u7b80\u5355\u6613\u7528: \u7c7b\u4f3c Django \u7684 API\u3002</li> <li>\u81ea\u52a8\u8fc1\u79fb: Tortoise \u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u8fc1\u79fb\u5de5\u5177\u3002</li> <li>\u5f02\u6b65\u539f\u751f: \u4ece\u4e00\u5f00\u59cb\u5c31\u662f\u4e3a\u5f02\u6b65\u8bbe\u8ba1\u7684\u3002</li> </ul>"},{"location":"adapters/tortoise/#_4","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ul> <li>\u786e\u4fdd\u5728\u5e94\u7528\u542f\u52a8\u65f6\u521d\u59cb\u5316 Tortoise\u3002</li> <li><code>TortoiseBackend</code> \u4e0d\u9700\u8981\u4f20\u9012 session factory\uff0c\u56e0\u4e3a Tortoise \u7ba1\u7406\u81ea\u5df1\u7684\u8fde\u63a5\u6c60\u3002</li> </ul>"},{"location":"development/contributing/","title":"FastAPI-Easy \u00e5\u00bc\u20ac\u00e5\u2018\u00e6\u0152\u2021\u00e5\u2014","text":"<p>\u00e6\u0153\u00ac\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e8\u00af\u00b4\u00e6\u02dc\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e7\u00bb\u201c\u00e6\u201e\u00e3\u20ac\u00e5\u00bc\u20ac\u00e5\u2018\u00e8\u00ae\u00a1\u00e5\u02c6\u2019\u00e5\u2019\u0152\u00e5\u00be\u2026\u00e5\u0160\u00e4\u00ba\u2039\u00e9\u00a1\u00b9\u00e3\u20ac\u201a</p> <p>\u00e8\u00ae\u00b8\u00e5\u00af\u00e8\u00af: \u00e6\u0153\u00ac\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e9\u2021\u2021\u00e7\u201d\u00a8 AGPL-3.0 \u00e8\u00ae\u00b8\u00e5\u00af\u00e8\u00af\u00e3\u20ac\u201a\u00e8\u00af\u00a6\u00e8\u00a7 LICENSE \u00e6\u2013\u2021\u00e4\u00bb\u00b6\u00e3\u20ac\u201a</p> <ul> <li> <p>\u00e2\u0153\u2026 \u00e5\u00af\u00e7\u201d\u00a8\u00e4\u00ba\u00e9\u00e5\u2022\u2020\u00e4\u00b8\u0161\u00e7\u201d\u00a8\u00e9\u20ac\u201d</p> </li> <li> <p>\u00e2\u0152 \u00e5\u2022\u2020\u00e4\u00b8\u0161\u00e7\u201d\u00a8\u00e9\u20ac\u201d\u00e9\u0153\u20ac\u00e8\u00a6\u00e8\u00b7\u00e5\u00be\u2014\u00e6\u02dc\u00e7\u00a1\u00ae\u00e8\u00ae\u00b8\u00e5\u00af</p> </li> <li> <p>\u011f\u0178\u201c \u00e4\u00bf\u00ae\u00e6\u201d\u00b9\u00e4\u00bb\u00a3\u00e7\u00a0\u00e5\u00bf\u2026\u00e9\u00a1\u00bb\u00e5\u2026\u00b1\u00e4\u00ba\u00ab</p> </li> <li> <p>\u011f\u0178\u201c\u00a6 \u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e6\u0153\u00ac\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e7\u0161\u201e\u00e8\u00bd\u00af\u00e4\u00bb\u00b6\u00e4\u00b9\u0178\u00e5\u00bf\u2026\u00e9\u00a1\u00bb\u00e5\u00bc\u20ac\u00e6\u00ba</p> </li> </ul>"},{"location":"development/contributing/#gy-e1cca","title":"\u011f\u0178\u201c \u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e7\u00bb\u201c\u00e6\u201e\u00e5\u02c6\u2020\u00e6","text":""},{"location":"development/contributing/#a-a12accsaca1a","title":"\u00e2\u0153\u2026 \u00e5\u00bd\u201c\u00e5\u2030\u00e7\u00bb\u201c\u00e6\u201e\u00e7\u0161\u201e\u00e5\u02c6\u00e7\u2020\u00e4\u00b9\u2039\u00e5\u00a4\u201e","text":"<ol> <li> <p>\u00e6\u00b8\u2026\u00e6\u2122\u00b0\u00e7\u0161\u201e\u00e6\u00a8\u00a1\u00e5\u2014\u00e5\u02c6\u2019\u00e5\u02c6\u2020 - core/\u00e3\u20acbackends/\u00e3\u20acoperations/\u00e3\u20acutils/ \u00e8\u0152\u00e8\u00b4\u00a3\u00e5\u02c6\u2020\u00e7\u00a6\u00bb</p> </li> <li> <p>\u00e5\u00af\u00e6\u2030\u00a9\u00e5\u00b1\u2022\u00e7\u0161\u201e\u00e6\u00b6\u00e6\u201e - \u00e6\u02dc\u201c\u00e4\u00ba\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e6\u2013\u00b0 ORM\u00e3\u20ac\u00e6\u2013\u00b0\u00e6\u201c\u00e4\u00bd\u0153\u00e3\u20ac\u00e6\u2013\u00b0\u00e5\u00b7\u00a5\u00e5\u2026\u00b7</p> </li> <li> <p>\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e5\u2039\u00e5\u00a5\u00bd\u00e7\u0161\u201e\u00e8\u00ae\u00be\u00e8\u00ae\u00a1 - \u00e4\u00be\u00e8\u00b5\u2013\u00e6\u00b3\u00a8\u00e5\u2026\u00a5\u00e3\u20ac\u00e6\u00a5\u00e5\u00a3\u00e6\u0160\u00bd\u00e8\u00b1\u00a1\u00e3\u20ac\u00e6\u02dc\u201c\u00e4\u00ba mock</p> </li> </ol>"},{"location":"development/contributing/#as-i-ee1ecsa1","title":"\u00e2\u0161\u00a0\u00ef\u00b8 \u00e9\u0153\u20ac\u00e8\u00a6\u00e6\u201d\u00b9\u00e8\u00bf\u203a\u00e7\u0161\u201e\u00e5\u0153\u00b0\u00e6\u2013\u00b9","text":"<ol> <li> <p>\u00e7\u00bc\u00ba\u00e5\u00b0\u2018\u00e7\u00b1\u00bb\u00e5\u2039\u00e5\u00ae\u0161\u00e4\u00b9\u2030 - \u00e9\u0153\u20ac\u00e8\u00a6\u00e6\u00b7\u00bb\u00e5\u0160\u00a0 <code>types.py</code> \u00e5\u00ae\u0161\u00e4\u00b9\u2030\u00e7\u00b1\u00bb\u00e5\u2039\u00e5\u02c6\u00ab\u00e5\u00e5\u2019\u0152\u00e5\u00e8\u00ae\u00ae</p> </li> <li> <p>\u00e7\u00bc\u00ba\u00e5\u00b0\u2018\u00e9\u00aa\u0152\u00e8\u00af\u00e5\u2122\u00a8 - <code>utils/validators.py</code> \u00e9\u0153\u20ac\u00e8\u00a6\u00e5\u00ae\u00e7\u00b0\u00e5\u00ad\u2014\u00e6\u00ae\u00b5\u00e7\u00ba\u00a7\u00e9\u00aa\u0152\u00e8\u00af</p> </li> <li> <p>\u00e7\u00bc\u00ba\u00e5\u00b0\u2018\u00e5\u201c\u00e5\u00ba\u201d\u00e6\u00a0\u00bc\u00e5\u00bc\u00e5\u0152\u2013\u00e5\u2122\u00a8 - \u00e9\u0153\u20ac\u00e8\u00a6\u00e6\u00b7\u00bb\u00e5\u0160\u00a0 <code>formatters.py</code> \u00e6\u201d\u00af\u00e6\u0152\u00e8\u2021\u00aa\u00e5\u00ae\u0161\u00e4\u00b9\u2030\u00e5\u201c\u00e5\u00ba\u201d\u00e6\u00a0\u00bc\u00e5\u00bc</p> </li> <li> <p>\u00e7\u00bc\u00ba\u00e5\u00b0\u2018\u00e4\u00b8\u00ad\u00e9\u2014\u00b4\u00e4\u00bb\u00b6 - \u00e9\u0153\u20ac\u00e8\u00a6\u00e6\u00b7\u00bb\u00e5\u0160\u00a0 <code>middleware/</code> \u00e7\u203a\u00ae\u00e5\u00bd\u2022\u00e6\u201d\u00af\u00e6\u0152\u00e9\u201d\u2122\u00e8\u00af\u00af\u00e5\u00a4\u201e\u00e7\u2020\u00e3\u20ac\u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00e3\u20ac\u00e7\u203a\u2018\u00e6\u00a7</p> </li> </ol>"},{"location":"development/contributing/#1eacse1cc","title":"\u00e6\u201d\u00b9\u00e8\u00bf\u203a\u00e5\u00e7\u0161\u201e\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e7\u00bb\u201c\u00e6\u201e","text":"<pre><code>fastapi-easy/\n\n\u00e2\u201d\u201a\n\n\u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac README.md                           # \u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e4\u00b8\u00bb\u00e5\u2026\u00a5\u00e5\u00a3\n\n\u00e2\u201d\u201a\n\n\u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac docs/                               # \u011f\u0178\u201c\u0161 \u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e7\u203a\u00ae\u00e5\u00bd\u2022\n\n\u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac README.md                       # \u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e4\u00b8\u00ad\u00e5\u00bf\u0192\n\n\u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac DEVELOPMENT.md                  # \u00e6\u0153\u00ac\u00e6\u2013\u2021\u00e4\u00bb\u00b6\u00ef\u00bc\u02c6\u00e5\u00bc\u20ac\u00e5\u2018\u00e6\u0152\u2021\u00e5\u2014\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a   \u00e2\u201d\u201a\n\n\u00e2\u201d\u201a   \u00e2\u201d\u201d\u00e2\u201d\u20ac\u00e2\u201d\u20ac usage/                          # \u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e6\u0152\u2021\u00e5\u2014\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac INDEX.md                    # \u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e6\u0152\u2021\u00e5\u2014\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u00b4\u00a2\u00e5\u00bc\u2022\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac README.md                   # \u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e6\u0152\u2021\u00e5\u2014\u00e5\u00af\u00bc\u00e8\u02c6\u00aa\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac 01-quick-start.md           # \u00e5\u00bf\u00ab\u00e9\u20ac\u0178\u00e5\u00bc\u20ac\u00e5\u00a7\u2039\u00ef\u00bc\u02c65 \u00e5\u02c6\u2020\u00e9\u2019\u0178\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac ../adapters/index.md             # \u00e6\u201d\u00af\u00e6\u0152\u00e7\u0161\u201e\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00ef\u00bc\u02c620 \u00e5\u02c6\u2020\u00e9\u2019\u0178\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac 03-data-flow.md             # \u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e6\u00b5\u00e7\u00a8\u2039\u00ef\u00bc\u02c615 \u00e5\u02c6\u2020\u00e9\u2019\u0178\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac querying.md               # \u00e6\u0153\u00e7\u00b4\u00a2\u00e5\u2019\u0152\u00e8\u00bf\u2021\u00e6\u00bb\u00a4\u00ef\u00bc\u02c610 \u00e5\u02c6\u2020\u00e9\u2019\u0178\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac querying.md               # \u00e6\u2019\u00e5\u00ba\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00ef\u00bc\u02c610 \u00e5\u02c6\u2020\u00e9\u2019\u0178\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac ../tutorial/03-complete-example.md      # \u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u00a4\u00ba\u00e4\u00be\u2039\u00ef\u00bc\u02c620 \u00e5\u02c6\u2020\u00e9\u2019\u0178\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac 07-architecture.md          # \u00e6\u00b6\u00e6\u201e\u00e8\u00ae\u00be\u00e8\u00ae\u00a1\u00e2\u00ad\u00ef\u00bc\u02c630 \u00e5\u02c6\u2020\u00e9\u2019\u0178\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac 09-error-handling.md        # \u00e9\u201d\u2122\u00e8\u00af\u00af\u00e5\u00a4\u201e\u00e7\u2020\u00ef\u00bc\u02c610 \u00e5\u02c6\u2020\u00e9\u2019\u0178\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac soft-delete.md           # \u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00ef\u00bc\u02c615 \u00e5\u02c6\u2020\u00e9\u2019\u0178\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac bulk-operations.md      # \u00e6\u2030\u00b9\u00e9\u2021\u00e6\u201c\u00e4\u00bd\u0153\u00ef\u00bc\u02c615 \u00e5\u02c6\u2020\u00e9\u2019\u0178\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac 12-permissions.md           # \u00e6\u0192\u00e9\u2122\u00e6\u00a7\u00e5\u02c6\u00b6\u00ef\u00bc\u02c620 \u00e5\u02c6\u2020\u00e9\u2019\u0178\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac 13-audit-logging.md         # \u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00ef\u00bc\u02c615 \u00e5\u02c6\u2020\u00e9\u2019\u0178\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac 14-configuration.md         # \u00e9\u2026\u00e7\u00bd\u00ae\u00e7\u00ae\u00a1\u00e7\u2020\u00ef\u00bc\u02c615 \u00e5\u02c6\u2020\u00e9\u2019\u0178\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac 15-testing.md               # \u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e6\u0152\u2021\u00e5\u2014\u00ef\u00bc\u02c620 \u00e5\u02c6\u2020\u00e9\u2019\u0178\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac best-practices.md        # \u00e6\u0153\u20ac\u00e4\u00bd\u00b3\u00e5\u00ae\u00e8\u00b7\u00b5\u00ef\u00bc\u02c620 \u00e5\u02c6\u2020\u00e9\u2019\u0178\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201d\u00e2\u201d\u20ac\u00e2\u201d\u20ac troubleshooting.md       # \u00e6\u2022\u2026\u00e9\u0161\u0153\u00e6\u2019\u00e6\u0178\u00a5\u00ef\u00bc\u02c615 \u00e5\u02c6\u2020\u00e9\u2019\u0178\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a\n\n\u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac src/                                # \u011f\u0178\u2019\u00bb \u00e6\u00ba\u00e4\u00bb\u00a3\u00e7\u00a0\u00e7\u203a\u00ae\u00e5\u00bd\u2022\u00ef\u00bc\u02c6\u00e5\u00be\u2026\u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a   \u00e2\u201d\u201d\u00e2\u201d\u20ac\u00e2\u201d\u20ac fastapi_easy/\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac __init__.py\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac core/\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac crud_router.py          # CRUDRouter \u00e4\u00b8\u00bb\u00e7\u00b1\u00bb\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac operations.py           # \u00e6\u201c\u00e4\u00bd\u0153\u00e7\u00b3\u00bb\u00e7\u00bb\u0178\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac adapters.py             # ORM \u00e9\u20ac\u201a\u00e9\u2026\u00e5\u2122\u00a8\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac hooks.py                # \u00e9\u2019\u00a9\u00e5\u00ad\u00e7\u00b3\u00bb\u00e7\u00bb\u0178\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac errors.py               # \u00e9\u201d\u2122\u00e8\u00af\u00af\u00e5\u00a4\u201e\u00e7\u2020\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u201d\u00e2\u201d\u20ac\u00e2\u201d\u20ac config.py               # \u00e9\u2026\u00e7\u00bd\u00ae\u00e7\u00b3\u00bb\u00e7\u00bb\u0178\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac backends/                   # ORM \u00e5\u00e7\u00ab\u00af\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac __init__.py\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac base.py                 # \u00e5\u0178\u00ba\u00e7\u00a1\u20ac\u00e9\u20ac\u201a\u00e9\u2026\u00e5\u2122\u00a8\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac sqlalchemy.py           # SQLAlchemy \u00e9\u20ac\u201a\u00e9\u2026\u00e5\u2122\u00a8\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac tortoise.py             # Tortoise \u00e9\u20ac\u201a\u00e9\u2026\u00e5\u2122\u00a8\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac mongo.py                 # MongoDB \u00e9\u20ac\u201a\u00e9\u2026\u00e5\u2122\u00a8\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u201d\u00e2\u201d\u20ac\u00e2\u201d\u20ac sqlmodel.py             # SQLModel \u00e9\u20ac\u201a\u00e9\u2026\u00e5\u2122\u00a8\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a\n\n\u00e2\u201d\u201a       \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac operations/                 # \u00e5\u2020\u2026\u00e7\u00bd\u00ae\u00e6\u201c\u00e4\u00bd\u0153\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac __init__.py\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac get_all.py\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac get_one.py\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac create.py\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac update.py\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac delete_one.py\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a   \u00e2\u201d\u201d\u00e2\u201d\u20ac\u00e2\u201d\u20ac delete_all.py\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201a\n\n\u00e2\u201d\u201a       \u00e2\u201d\u201d\u00e2\u201d\u20ac\u00e2\u201d\u20ac utils/                      # \u00e5\u00b7\u00a5\u00e5\u2026\u00b7\u00e5\u2021\u00bd\u00e6\u2022\u00b0\n\n\u00e2\u201d\u201a           \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac __init__.py\n\n\u00e2\u201d\u201a           \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac validators.py           # \u00e9\u00aa\u0152\u00e8\u00af\u00e5\u2122\u00a8\n\n\u00e2\u201d\u201a           \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac filters.py              # \u00e8\u00bf\u2021\u00e6\u00bb\u00a4\u00e5\u2122\u00a8\n\n\u00e2\u201d\u201a           \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac sorters.py              # \u00e6\u2019\u00e5\u00ba\u00e5\u2122\u00a8\n\n\u00e2\u201d\u201a           \u00e2\u201d\u201d\u00e2\u201d\u20ac\u00e2\u201d\u20ac pagination.py           # \u00e5\u02c6\u2020\u00e9\u00a1\u00b5\n\n\u00e2\u201d\u201a\n\n\u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac tests/                              # \u011f\u0178\u00a7\u00aa \u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e7\u203a\u00ae\u00e5\u00bd\u2022\u00ef\u00bc\u02c6\u00e5\u00be\u2026\u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac __init__.py\n\n\u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac conftest.py\n\n\u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac test_crud_router.py\n\n\u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac test_operations.py\n\n\u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac test_backends/\n\n\u00e2\u201d\u201a   \u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac test_sqlalchemy.py\n\n\u00e2\u201d\u201a   \u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac test_tortoise.py\n\n\u00e2\u201d\u201a   \u00e2\u201d\u201a   \u00e2\u201d\u201d\u00e2\u201d\u20ac\u00e2\u201d\u20ac ...\n\n\u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac test_hooks.py\n\n\u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac test_errors.py\n\n\u00e2\u201d\u201a   \u00e2\u201d\u201d\u00e2\u201d\u20ac\u00e2\u201d\u20ac test_integration.py\n\n\u00e2\u201d\u201a\n\n\u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac examples/                           # \u011f\u0178\u201c\u2013 \u00e7\u00a4\u00ba\u00e4\u00be\u2039\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00ef\u00bc\u02c6\u00e5\u00be\u2026\u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00ef\u00bc\u2030\n\n\u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac basic/\n\n\u00e2\u201d\u201a   \u00e2\u201d\u201a   \u00e2\u201d\u201d\u00e2\u201d\u20ac\u00e2\u201d\u20ac main.py                     # \u00e5\u0178\u00ba\u00e7\u00a1\u20ac\u00e7\u00a4\u00ba\u00e4\u00be\u2039\n\n\u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac auth/\n\n\u00e2\u201d\u201a   \u00e2\u201d\u201a   \u00e2\u201d\u201d\u00e2\u201d\u20ac\u00e2\u201d\u20ac main.py                     # \u00e9\u2030\u00b4\u00e6\u0192\u00e7\u00a4\u00ba\u00e4\u00be\u2039\n\n\u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac ecommerce/\n\n\u00e2\u201d\u201a   \u00e2\u201d\u201a   \u00e2\u201d\u201d\u00e2\u201d\u20ac\u00e2\u201d\u20ac main.py                     # \u00e7\u201d\u00b5\u00e5\u2022\u2020\u00e7\u00a4\u00ba\u00e4\u00be\u2039\n\n\u00e2\u201d\u201a   \u00e2\u201d\u201d\u00e2\u201d\u20ac\u00e2\u201d\u20ac ...\n\n\u00e2\u201d\u201a\n\n\u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac references/                         # \u011f\u0178\u201c\u0161 \u00e5\u201a\u00e8\u20ac\u0192\u00e8\u00b5\u201e\u00e6\u2013\u2122\n\n\u00e2\u201d\u201a   \u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac fastapi-crudrouter/             # \u00e5\u0178\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e5\u201a\u00e8\u20ac\u0192\n\n\u00e2\u201d\u201a   \u00e2\u201d\u201d\u00e2\u201d\u20ac\u00e2\u201d\u20ac dfs-generate/                   # \u00e5\u2026\u00b6\u00e4\u00bb\u2013\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e5\u201a\u00e8\u20ac\u0192\n\n\u00e2\u201d\u201a\n\n\u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac LICENSE                             # AGPL-3.0 \u00e8\u00ae\u00b8\u00e5\u00af\u00e8\u00af\n\n\u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac setup.py                            # \u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e9\u2026\u00e7\u00bd\u00ae\n\n\u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac requirements.txt                    # \u00e4\u00be\u00e8\u00b5\u2013\u00e5\u02c6\u2014\u00e8\u00a1\u00a8\n\n\u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac pyproject.toml                      # Python \u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e9\u2026\u00e7\u00bd\u00ae\n\n\u00e2\u201d\u201d\u00e2\u201d\u20ac\u00e2\u201d\u20ac .gitignore                          # Git \u00e5\u00bf\u00bd\u00e7\u2022\u00a5\u00e6\u2013\u2021\u00e4\u00bb\u00b6\n</code></pre>"},{"location":"development/contributing/#gya-e-e34e","title":"\u011f\u0178\u00a7\u00aa \u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e6\u00a1\u2020\u00e6\u00b6\u00e8\u00ae\u00be\u00e8\u00ae\u00a1","text":""},{"location":"development/contributing/#e-esccc","title":"\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e9\u0161\u201d\u00e7\u00a6\u00bb\u00e7\u00ad\u2013\u00e7\u2022\u00a5","text":""},{"location":"development/contributing/#1-aae-esci14-ae-a34ei14","title":"1. \u00e5\u2022\u00e5\u2026\u0192\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e9\u0161\u201d\u00e7\u00a6\u00bb\u00ef\u00bc\u02c6\u00e6\u2014\u00a0\u00e5\u00a4\u2013\u00e9\u0192\u00a8\u00e4\u00be\u00e8\u00b5\u2013\u00ef\u00bc\u2030","text":"<ul> <li> <p><code>test_core/</code>: \u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e6\u00a8\u00a1\u00e5\u2014\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00ef\u00bc\u02c6config\u00e3\u20acerrors\u00e3\u20achooks\u00e3\u20acoperations\u00ef\u00bc\u2030</p> </li> <li> <p><code>test_utils/</code>: \u00e5\u00b7\u00a5\u00e5\u2026\u00b7\u00e5\u2021\u00bd\u00e6\u2022\u00b0\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00ef\u00bc\u02c6pagination\u00e3\u20acfilters\u00e3\u20acsorters\u00ef\u00bc\u2030</p> </li> <li> <p>\u00e4\u00bd\u00bf\u00e7\u201d\u00a8 mock \u00e5\u2019\u0152 patch \u00e9\u0161\u201d\u00e7\u00a6\u00bb\u00e4\u00be\u00e8\u00b5\u2013</p> </li> </ul>"},{"location":"development/contributing/#2-ee-esci14a12c-cyaaoi14","title":"2. \u00e9\u203a\u2020\u00e6\u02c6\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e9\u0161\u201d\u00e7\u00a6\u00bb\u00ef\u00bc\u02c6\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e7\u0153\u0178\u00e5\u00ae\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00ef\u00bc\u2030","text":"<ul> <li> <p><code>test_sqlalchemy/</code>: SQLAlchemy \u00e9\u20ac\u201a\u00e9\u2026\u00e5\u2122\u00a8\u00e9\u203a\u2020\u00e6\u02c6\u00e6\u00b5\u2039\u00e8\u00af\u2022</p> </li> <li> <p><code>test_tortoise/</code>: Tortoise ORM \u00e9\u203a\u2020\u00e6\u02c6\u00e6\u00b5\u2039\u00e8\u00af\u2022</p> </li> <li> <p>\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e5\u2020\u2026\u00e5\u00ad\u02dc\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00ef\u00bc\u02c6SQLite\u00ef\u00bc\u2030\u00e5\u2019\u0152\u00e4\u00ba\u2039\u00e5\u0160\u00a1\u00e5\u203a\u00e6\u00bb\u0161\u00e9\u0161\u201d\u00e7\u00a6\u00bb</p> </li> </ul>"},{"location":"development/contributing/#3-c-ac-e-esci14a-api-c-i14","title":"3. \u00e7\u00ab\u00af\u00e5\u02c6\u00b0\u00e7\u00ab\u00af\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e9\u0161\u201d\u00e7\u00a6\u00bb\u00ef\u00bc\u02c6\u00e5\u00ae\u0152\u00e6\u2022\u00b4 API \u00e6\u00b5\u00e7\u00a8\u2039\u00ef\u00bc\u2030","text":"<ul> <li> <p><code>test_end_to_end/</code>: \u00e5\u00ae\u0152\u00e6\u2022\u00b4 API \u00e6\u00b5\u00e7\u00a8\u2039\u00e6\u00b5\u2039\u00e8\u00af\u2022</p> </li> <li> <p>\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u0161\u201e\u00e8\u00af\u00b7\u00e6\u00b1\u201a-\u00e5\u201c\u00e5\u00ba\u201d\u00e5\u2018\u00a8\u00e6\u0153\u0178</p> </li> </ul>"},{"location":"development/contributing/#e-escs","title":"\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e9\u0161\u201d\u00e7\u00a6\u00bb\u00e6\u0160\u20ac\u00e6\u0153\u00af","text":"<p>Fixture \u00e9\u0161\u201d\u00e7\u00a6\u00bb</p> <pre><code>@pytest.fixture\n\ndef mock_adapter():\n\n    adapter = AsyncMock(spec=ORMAdapter)\n\n    return adapter\n\n\n\n@pytest.fixture\n\nasync def db_session():\n\n    # \u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e5\u2020\u2026\u00e5\u00ad\u02dc\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\n\n    engine = create_async_engine(\"sqlite+aiosqlite:///:memory:\")\n\n    # \u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e8\u00a1\u00a8\u00e3\u20ac\u00e8\u00bf\u201d\u00e5\u203a session\u00e3\u20ac\u00e6\u00b8\u2026\u00e7\u2020\n</code></pre> <p>\u00e4\u00ba\u2039\u00e5\u0160\u00a1\u00e9\u0161\u201d\u00e7\u00a6\u00bb</p> <ul> <li> <p>\u00e6\u00af\u00e4\u00b8\u00aa\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e5\u0153\u00a8\u00e4\u00ba\u2039\u00e5\u0160\u00a1\u00e4\u00b8\u00ad\u00e8\u00bf\u00e8\u00a1\u0152</p> </li> <li> <p>\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e5\u00ae\u0152\u00e6\u02c6\u00e5\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e5\u203a\u00e6\u00bb\u0161</p> </li> <li> <p>\u00e7\u00a1\u00ae\u00e4\u00bf\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e9\u2014\u00b4\u00e6\u2022\u00b0\u00e6\u00ae\u00e9\u0161\u201d\u00e7\u00a6\u00bb</p> </li> </ul>"},{"location":"development/contributing/#e-ecc","title":"\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e8\u00a6\u2020\u00e7\u203a\u2013\u00e7\u203a\u00ae\u00e6\u00a0\u2021","text":"<p>| \u00e6\u00a8\u00a1\u00e5\u2014 | \u00e7\u203a\u00ae\u00e6\u00a0\u2021\u00e8\u00a6\u2020\u00e7\u203a\u2013\u00e7\u2021 | \u00e4\u00bc\u02dc\u00e5\u2026\u02c6\u00e7\u00ba\u00a7 |</p> <p>|------|----------|------|</p> <p>| core/ | 95% | P0 |</p> <p>| utils/ | 90% | P0 |</p> <p>| backends/ | 85% | P1 |</p> <p>| operations/ | 90% | P1 |</p>"},{"location":"development/contributing/#aa14acc","title":"\u00e5\u0152\u00e6\u00ad\u00a5\u00e5\u00bc\u20ac\u00e5\u2018\u00e7\u00ad\u2013\u00e7\u2022\u00a5","text":"<p>\u00e6\u00af\u00e4\u00b8\u00aa\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e7\u0161\u201e\u00e5\u00bc\u20ac\u00e5\u2018\u00e6\u00ad\u00a5\u00e9\u00aa\u00a4\u00ef\u00bc\u0161</p> <ol> <li> <p>\u00e7\u00bc\u2013\u00e5\u2020\u2122\u00e5\u2022\u00e5\u2026\u0192\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00ef\u00bc\u02c6\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e5\u00a4\u00b1\u00e8\u00b4\u00a5\u00ef\u00bc\u2030</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00ef\u00bc\u02c6\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e9\u20ac\u0161\u00e8\u00bf\u2021\u00ef\u00bc\u2030</p> </li> <li> <p>\u00e7\u00bc\u2013\u00e5\u2020\u2122\u00e9\u203a\u2020\u00e6\u02c6\u00e6\u00b5\u2039\u00e8\u00af\u2022</p> </li> <li> <p>\u00e4\u00bb\u00a3\u00e7\u00a0\u00e5\u00ae\u00a1\u00e6\u0178\u00a5</p> </li> <li> <p>\u00e6\u00e4\u00ba\u00a4\u00e4\u00bb\u00a3\u00e7\u00a0</p> </li> </ol>"},{"location":"development/contributing/#gy-e1ce","title":"\u011f\u0178\u00af \u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e9\u02dc\u00b6\u00e6\u00ae\u00b5","text":""},{"location":"development/contributing/#c-1-e-i14s-a-a-a","title":"\u00e7\u00ac\u00ac 1 \u00e9\u02dc\u00b6\u00e6\u00ae\u00b5\u00ef\u00bc\u0161\u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e6\u00a1\u2020\u00e6\u00b6 \u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u02c6","text":"<ul> <li> <p>\u00e2\u0153\u2026 \u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e5\u00ae\u0161\u00e4\u00bd\u00e5\u2019\u0152\u00e6\u00b6\u00e6\u201e\u00e8\u00ae\u00be\u00e8\u00ae\u00a1</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u0161\u201e\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e6\u0152\u2021\u00e5\u2014\u00ef\u00bc\u02c620 \u00e4\u00bb\u00bd\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u2030</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e6\u00b6\u00e6\u201e\u00e6\u2013\u2021\u00e6\u00a1\u00a3</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e6\u00ba\u00e4\u00bb\u00a3\u00e7\u00a0\u00e5\u00ae\u00e7\u00b0\u00ef\u00bc\u02c616 \u00e4\u00b8\u00aa\u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e6\u2013\u2021\u00e4\u00bb\u00b6\u00ef\u00bc\u2030</p> </li> </ul>"},{"location":"development/contributing/#c-2-e-i14sayocasye12ae-a-a","title":"\u00e7\u00ac\u00ac 2 \u00e9\u02dc\u00b6\u00e6\u00ae\u00b5\u00ef\u00bc\u0161\u00e5\u0178\u00ba\u00e7\u00a1\u20ac\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e5\u2019\u0152\u00e6\u00b5\u2039\u00e8\u00af\u2022 \u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u02c6","text":"<ul> <li> <p>\u00e2\u0153\u2026 CRUDRouter \u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e7\u00b1\u00bb</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e6\u201c\u00e4\u00bd\u0153\u00e7\u00b3\u00bb\u00e7\u00bb\u0178\u00ef\u00bc\u02c6Operation System\u00ef\u00bc\u2030</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e5\u2020\u2026\u00e7\u00bd\u00ae CRUD \u00e6\u201c\u00e4\u00bd\u0153\u00ef\u00bc\u02c66 \u00e4\u00b8\u00aa\u00ef\u00bc\u2030</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e9\u2019\u00a9\u00e5\u00ad\u00e7\u00b3\u00bb\u00e7\u00bb\u0178</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e9\u201d\u2122\u00e8\u00af\u00af\u00e5\u00a4\u201e\u00e7\u2020\u00e7\u00b3\u00bb\u00e7\u00bb\u0178</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e5\u2022\u00e5\u2026\u0192\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e6\u00a1\u2020\u00e6\u00b6</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e9\u2026\u00e7\u00bd\u00ae\u00ef\u00bc\u02c6setup.py\u00e3\u20acrequirements.txt\u00ef\u00bc\u2030</p> </li> </ul>"},{"location":"development/contributing/#c-3-e-i14sorm-eeatm-a-a","title":"\u00e7\u00ac\u00ac 3 \u00e9\u02dc\u00b6\u00e6\u00ae\u00b5\u00ef\u00bc\u0161ORM \u00e9\u20ac\u201a\u00e9\u2026\u00e5\u2122\u00a8 \u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u02c6","text":"<ul> <li> <p>\u00e2\u0153\u2026 SQLAlchemy \u00e5\u00bc\u201a\u00e6\u00ad\u00a5\u00e9\u20ac\u201a\u00e9\u2026\u00e5\u2122\u00a8</p> </li> <li> <p>\u00e2\u0153\u2026 Tortoise ORM \u00e9\u20ac\u201a\u00e9\u2026\u00e5\u2122\u00a8</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e9\u203a\u2020\u00e6\u02c6\u00e6\u00b5\u2039\u00e8\u00af\u2022</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e6\u20ac\u00a7\u00e8\u0192\u00bd\u00e5\u0178\u00ba\u00e5\u2021\u2020\u00e6\u00b5\u2039\u00e8\u00af\u2022</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e7\u00a4\u00ba\u00e4\u00be\u2039</p> </li> </ul>"},{"location":"development/contributing/#c-4-e-i14se-coasye12-a-a","title":"\u00e7\u00ac\u00ac 4 \u00e9\u02dc\u00b6\u00e6\u00ae\u00b5\u00ef\u00bc\u0161\u00e9\u00ab\u02dc\u00e7\u00ba\u00a7\u00e5\u0160\u0178\u00e8\u0192\u00bd \u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u02c6","text":"<ul> <li> <p>\u00e2\u0153\u2026 \u00e6\u0153\u00e7\u00b4\u00a2\u00e5\u2019\u0152\u00e8\u00bf\u2021\u00e6\u00bb\u00a4</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e6\u2019\u00e5\u00ba\u00e5\u0160\u0178\u00e8\u0192\u00bd</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e6\u2030\u00b9\u00e9\u2021\u00e6\u201c\u00e4\u00bd\u0153</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e6\u0192\u00e9\u2122\u00e6\u00a7\u00e5\u02c6\u00b6</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e7\u00bc\u201c\u00e5\u00ad\u02dc\u00e6\u201d\u00af\u00e6\u0152</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e9\u20ac\u0178\u00e7\u2021\u00e9\u2122\u00e5\u02c6\u00b6</p> </li> </ul>"},{"location":"development/contributing/#c-5-e-i14saasye12-a-a","title":"\u00e7\u00ac\u00ac 5 \u00e9\u02dc\u00b6\u00e6\u00ae\u00b5\u00ef\u00bc\u0161\u00e6\u2030\u00a9\u00e5\u00b1\u2022\u00e5\u0160\u0178\u00e8\u0192\u00bd \u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u02c6","text":"<ul> <li> <p>\u00e2\u0153\u2026 GraphQL \u00e6\u201d\u00af\u00e6\u0152</p> </li> <li> <p>\u00e2\u0153\u2026 WebSocket \u00e6\u201d\u00af\u00e6\u0152</p> </li> <li> <p>\u00e2\u0153\u2026 CLI \u00e5\u00b7\u00a5\u00e5\u2026\u00b7</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e5\u201c\u00e5\u00ba\u201d\u00e6\u00a0\u00bc\u00e5\u00bc\u00e5\u0152\u2013\u00e5\u2122\u00a8</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e8\u00be\u201c\u00e5\u2026\u00a5\u00e9\u00aa\u0152\u00e8\u00af</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e4\u00b8\u00ad\u00e9\u2014\u00b4\u00e4\u00bb\u00b6\u00e7\u00b3\u00bb\u00e7\u00bb\u0178</p> </li> </ul>"},{"location":"development/contributing/#c-6-e-i14sae-gy-eea","title":"\u00e7\u00ac\u00ac 6 \u00e9\u02dc\u00b6\u00e6\u00ae\u00b5\u00ef\u00bc\u0161\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e5\u2019\u0152\u00e6\u00b5\u2039\u00e8\u00af\u2022 \u011f\u0178\u201d\u201e \u00e8\u00bf\u203a\u00e8\u00a1\u0152\u00e4\u00b8\u00ad","text":"<ul> <li> <p>\u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u0161\u201e\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u02c620 \u00e4\u00bb\u00bd\u00ef\u00bc\u2030</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e6\u00b6\u00e6\u201e\u00e8\u00ae\u00be\u00e8\u00ae\u00a1\u00e6\u2013\u2021\u00e6\u00a1\u00a3</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e5\u00bc\u20ac\u00e5\u2018\u00e6\u0152\u2021\u00e5\u2014</p> </li> <li> <p>\u011f\u0178\u201d\u201e \u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e8\u00a6\u2020\u00e7\u203a\u2013\u00e7\u2021\u00e4\u00bc\u02dc\u00e5\u0152\u2013\u00ef\u00bc\u02c6\u00e5\u00bd\u201c\u00e5\u2030 94%\u00ef\u00bc\u2030</p> </li> <li> <p>\u00e2\u00b3 \u00e6\u203a\u00b4\u00e5\u00a4\u0161\u00e9\u203a\u2020\u00e6\u02c6\u00e6\u00b5\u2039\u00e8\u00af\u2022</p> </li> <li> <p>\u00e2\u00b3 \u00e6\u20ac\u00a7\u00e8\u0192\u00bd\u00e4\u00bc\u02dc\u00e5\u0152\u2013</p> </li> </ul>"},{"location":"development/contributing/#c-7-e-i14saa-a-a1-a3-a34a14a","title":"\u00e7\u00ac\u00ac 7 \u00e9\u02dc\u00b6\u00e6\u00ae\u00b5\u00ef\u00bc\u0161\u00e5\u2018\u00e5\u00b8\u0192\u00e5\u2019\u0152\u00e6\u00a8\u00e5\u00b9\u00bf \u00e2\u00b3 \u00e5\u00be\u2026\u00e5\u00bc\u20ac\u00e5\u00a7\u2039","text":"<ul> <li> <p>[ ] PyPI \u00e5\u2018\u00e5\u00b8\u0192</p> </li> <li> <p>[ ] \u00e7\u00a4\u00ba\u00e4\u00be\u2039\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e5\u00ae\u0152\u00e5\u2013\u201e</p> </li> <li> <p>[ ] \u00e7\u00a4\u00be\u00e5\u0152\u00ba\u00e5\u00e9\u00a6\u02c6\u00e6\u201d\u00b6\u00e9\u203a\u2020</p> </li> </ul>"},{"location":"development/contributing/#gy-a34asaoe1i14todoi14","title":"\u011f\u0178\u201c\u2039 \u00e5\u00be\u2026\u00e5\u0160\u00e4\u00ba\u2039\u00e9\u00a1\u00b9\u00ef\u00bc\u02c6TODO\u00ef\u00bc\u2030","text":""},{"location":"development/contributing/#a14-aco-p0i14aasi14","title":"\u00e4\u00bc\u02dc\u00e5\u2026\u02c6\u00e7\u00ba\u00a7 P0\u00ef\u00bc\u02c6\u00e5\u00bf\u2026\u00e5\u0161\u00ef\u00bc\u2030","text":""},{"location":"development/contributing/#phase-1-a-a-a2a","title":"Phase 1: \u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e6\u00b6\u00e6\u201e \u00e2\u0153\u2026 \u00e5\u00b7\u00b2\u00e5\u00ae\u0152\u00e6\u02c6","text":"<ul> <li> <p>[x] CRUDRouter \u00e4\u00b8\u00bb\u00e7\u00b1\u00bb</p> </li> <li> <p>[x] Operation \u00e5\u0178\u00ba\u00e7\u00b1\u00bb\u00e5\u2019\u0152 OperationRegistry</p> </li> <li> <p>[x] ORMAdapter \u00e5\u0178\u00ba\u00e7\u00b1\u00bb</p> </li> <li> <p>[x] HookRegistry \u00e5\u2019\u0152\u00e9\u2019\u00a9\u00e5\u00ad\u00e7\u00b3\u00bb\u00e7\u00bb\u0178</p> </li> <li> <p>[x] AppError \u00e5\u2019\u0152\u00e9\u201d\u2122\u00e8\u00af\u00af\u00e5\u00a4\u201e\u00e7\u2020</p> </li> <li> <p>[x] CRUDConfig \u00e9\u2026\u00e7\u00bd\u00ae\u00e7\u00b3\u00bb\u00e7\u00bb\u0178</p> </li> <li> <p>[x] \u00e5\u00b7\u00a5\u00e5\u2026\u00b7\u00e5\u2021\u00bd\u00e6\u2022\u00b0\u00ef\u00bc\u02c6pagination\u00e3\u20acfilters\u00e3\u20acsorters\u00ef\u00bc\u2030</p> </li> </ul>"},{"location":"development/contributing/#phase-2-ayocasye12ae-a-a2a","title":"Phase 2: \u00e5\u0178\u00ba\u00e7\u00a1\u20ac\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e5\u2019\u0152\u00e6\u00b5\u2039\u00e8\u00af\u2022 \u00e2\u0153\u2026 \u00e5\u00b7\u00b2\u00e5\u00ae\u0152\u00e6\u02c6","text":"<p>\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e6\u00a1\u2020\u00e6\u00b6 \u00e2\u0153\u2026</p> <ul> <li> <p>[x] \u00e5\u02c6\u203a\u00e5\u00bb\u00ba <code>tests/conftest.py</code></p> </li> <li> <p>[x] \u00e5\u2026\u00a8\u00e5\u00b1\u20ac fixture \u00e5\u00ae\u0161\u00e4\u00b9\u2030</p> </li> <li> <p>[x] Mock adapter fixture</p> </li> <li> <p>[x] \u00e9\u2026\u00e7\u00bd\u00ae fixture</p> </li> <li> <p>[x] \u00e5\u02c6\u203a\u00e5\u00bb\u00ba <code>tests/unit/test_core/</code></p> </li> <li> <p>[x] test_config.py - \u00e9\u2026\u00e7\u00bd\u00ae\u00e6\u00b5\u2039\u00e8\u00af\u2022 (10 \u00e4\u00b8\u00aa\u00e6\u00b5\u2039\u00e8\u00af\u2022)</p> </li> <li> <p>[x] test_errors.py - \u00e9\u201d\u2122\u00e8\u00af\u00af\u00e5\u00a4\u201e\u00e7\u2020\u00e6\u00b5\u2039\u00e8\u00af\u2022 (16 \u00e4\u00b8\u00aa\u00e6\u00b5\u2039\u00e8\u00af\u2022)</p> </li> <li> <p>[x] test_hooks.py - \u00e9\u2019\u00a9\u00e5\u00ad\u00e7\u00b3\u00bb\u00e7\u00bb\u0178\u00e6\u00b5\u2039\u00e8\u00af\u2022 (18 \u00e4\u00b8\u00aa\u00e6\u00b5\u2039\u00e8\u00af\u2022)</p> </li> <li> <p>[x] test_operations.py - \u00e6\u201c\u00e4\u00bd\u0153\u00e7\u00b3\u00bb\u00e7\u00bb\u0178\u00e6\u00b5\u2039\u00e8\u00af\u2022 (9 \u00e4\u00b8\u00aa\u00e6\u00b5\u2039\u00e8\u00af\u2022)</p> </li> <li> <p>[x] \u00e5\u02c6\u203a\u00e5\u00bb\u00ba <code>tests/unit/test_utils/</code></p> </li> <li> <p>[x] test_pagination.py - \u00e5\u02c6\u2020\u00e9\u00a1\u00b5\u00e6\u00b5\u2039\u00e8\u00af\u2022 (12 \u00e4\u00b8\u00aa\u00e6\u00b5\u2039\u00e8\u00af\u2022)</p> </li> <li> <p>[x] test_filters.py - \u00e8\u00bf\u2021\u00e6\u00bb\u00a4\u00e5\u2122\u00a8\u00e6\u00b5\u2039\u00e8\u00af\u2022 (16 \u00e4\u00b8\u00aa\u00e6\u00b5\u2039\u00e8\u00af\u2022)</p> </li> <li> <p>[x] test_sorters.py - \u00e6\u2019\u00e5\u00ba\u00e5\u2122\u00a8\u00e6\u00b5\u2039\u00e8\u00af\u2022 (15 \u00e4\u00b8\u00aa\u00e6\u00b5\u2039\u00e8\u00af\u2022)</p> </li> </ul> <p>\u00e5\u2020\u2026\u00e7\u00bd\u00ae\u00e6\u201c\u00e4\u00bd\u0153 \u00e2\u0153\u2026</p> <ul> <li> <p>[x] \u00e5\u02c6\u203a\u00e5\u00bb\u00ba <code>src/fastapi_easy/operations/</code></p> </li> <li> <p>[x] GetAll \u00e6\u201c\u00e4\u00bd\u0153</p> </li> <li> <p>[x] GetOne \u00e6\u201c\u00e4\u00bd\u0153</p> </li> <li> <p>[x] Create \u00e6\u201c\u00e4\u00bd\u0153</p> </li> <li> <p>[x] Update \u00e6\u201c\u00e4\u00bd\u0153</p> </li> <li> <p>[x] DeleteOne \u00e6\u201c\u00e4\u00bd\u0153</p> </li> <li> <p>[x] DeleteAll \u00e6\u201c\u00e4\u00bd\u0153</p> </li> </ul> <p>\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e9\u2026\u00e7\u00bd\u00ae \u00e2\u0153\u2026</p> <ul> <li> <p>[x] setup.py - \u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e5\u00ae\u2030\u00e8\u00a3\u2026\u00e9\u2026\u00e7\u00bd\u00ae</p> </li> <li> <p>requirements.txt - \u00e4\u00be\u00e8\u00b5\u2013\u00e5\u02c6\u2014\u00e8\u00a1\u00a8</p> </li> <li> <p>\u00e6\u2030\u20ac\u00e6\u0153\u2030 90 \u00e4\u00b8\u00aa\u00e5\u2022\u00e5\u2026\u0192\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e9\u20ac\u0161\u00e8\u00bf\u2021</p> </li> </ul>"},{"location":"development/contributing/#a14-aco-p1i14eei14a-a2a","title":"\u00e4\u00bc\u02dc\u00e5\u2026\u02c6\u00e7\u00ba\u00a7 P1\u00ef\u00bc\u02c6\u00e9\u2021\u00e8\u00a6\u00ef\u00bc\u2030\u00e2\u0153\u2026 \u00e5\u00b7\u00b2\u00e5\u00ae\u0152\u00e6\u02c6","text":""},{"location":"development/contributing/#e-coasye12-a","title":"\u00e9\u00ab\u02dc\u00e7\u00ba\u00a7\u00e5\u0160\u0178\u00e8\u0192\u00bd \u00e2\u0153\u2026","text":"<ul> <li> <p>[x] \u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e6\u201d\u00af\u00e6\u0152 - <code>src/fastapi_easy/core/soft_delete.py</code></p> </li> <li> <p>[x] \u00e6\u2030\u00b9\u00e9\u2021\u00e6\u201c\u00e4\u00bd\u0153 - <code>src/fastapi_easy/core/bulk_operations.py</code></p> </li> <li> <p>[x] \u00e6\u0192\u00e9\u2122\u00e6\u00a7\u00e5\u02c6\u00b6\u00e9\u203a\u2020\u00e6\u02c6 - <code>src/fastapi_easy/core/permissions.py</code></p> </li> <li> <p>[x] \u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014 - <code>src/fastapi_easy/core/audit_log.py</code></p> </li> </ul>"},{"location":"development/contributing/#e-a","title":"\u00e6\u00b5\u2039\u00e8\u00af\u2022 \u00e2\u0153\u2026","text":"<ul> <li> <p>[x] \u00e5\u2022\u00e5\u2026\u0192\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e6\u00a1\u2020\u00e6\u00b6\u00e8\u00ae\u00be\u00e7\u00bd\u00ae - <code>tests/unit/</code></p> </li> <li> <p>[x] \u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e6\u00b5\u2039\u00e8\u00af\u2022 - <code>tests/unit/test_core/</code></p> </li> <li> <p>[x] ORM \u00e9\u20ac\u201a\u00e9\u2026\u00e5\u2122\u00a8\u00e6\u00b5\u2039\u00e8\u00af\u2022 - <code>tests/integration/</code></p> </li> <li> <p>[x] \u00e9\u203a\u2020\u00e6\u02c6\u00e6\u00b5\u2039\u00e8\u00af\u2022 - <code>tests/e2e/</code></p> </li> </ul>"},{"location":"development/contributing/#a","title":"\u00e6\u2013\u2021\u00e6\u00a1\u00a3 \u00e2\u0153\u2026","text":"<ul> <li> <p>[x] API \u00e6\u2013\u2021\u00e6\u00a1\u00a3 - 20 \u00e4\u00bb\u00bd\u00e8\u00af\u00a6\u00e7\u00bb\u2020\u00e6\u2013\u2021\u00e6\u00a1\u00a3</p> </li> <li> <p>[x] \u00e5\u00bc\u20ac\u00e5\u2018\u00e8\u20ac\u2026\u00e6\u0152\u2021\u00e5\u2014 - <code>docs/DEVELOPMENT.md</code></p> </li> <li> <p>[x] \u00e8\u00b4\u00a1\u00e7\u0152\u00ae\u00e6\u0152\u2021\u00e5\u2014 - \u00e6\u0153\u00ac\u00e6\u2013\u2021\u00e4\u00bb\u00b6\u00e4\u00b8\u00ad\u00e7\u0161\u201e\u00e8\u00b4\u00a1\u00e7\u0152\u00ae\u00e6\u0152\u2021\u00e5\u2014\u00e9\u0192\u00a8\u00e5\u02c6\u2020</p> </li> </ul>"},{"location":"development/contributing/#a14-aco-p2i14a-ei14a-a2a","title":"\u00e4\u00bc\u02dc\u00e5\u2026\u02c6\u00e7\u00ba\u00a7 P2\u00ef\u00bc\u02c6\u00e5\u00af\u00e9\u20ac\u2030\u00ef\u00bc\u2030\u00e2\u0153\u2026 \u00e5\u00b7\u00b2\u00e5\u00ae\u0152\u00e6\u02c6","text":""},{"location":"development/contributing/#aasye12-a","title":"\u00e6\u2030\u00a9\u00e5\u00b1\u2022\u00e5\u0160\u0178\u00e8\u0192\u00bd \u00e2\u0153\u2026","text":"<ul> <li> <p>[x] \u00e7\u00bc\u201c\u00e5\u00ad\u02dc\u00e6\u201d\u00af\u00e6\u0152 - <code>src/fastapi_easy/core/cache.py</code></p> </li> <li> <p>[x] \u00e9\u20ac\u0178\u00e7\u2021\u00e9\u2122\u00e5\u02c6\u00b6 - <code>src/fastapi_easy/core/rate_limit.py</code></p> </li> <li> <p>[x] GraphQL \u00e6\u201d\u00af\u00e6\u0152 - <code>src/fastapi_easy/graphql.py</code></p> </li> <li> <p>[x] WebSocket \u00e6\u201d\u00af\u00e6\u0152 - <code>src/fastapi_easy/websocket.py</code></p> </li> </ul>"},{"location":"development/contributing/#aa-a","title":"\u00e5\u00b7\u00a5\u00e5\u2026\u00b7 \u00e2\u0153\u2026","text":"<ul> <li> <p>[x] CLI \u00e5\u00b7\u00a5\u00e5\u2026\u00b7 - <code>src/fastapi_easy/cli.py</code></p> </li> <li> <p>[x] \u00e4\u00bb\u00a3\u00e7\u00a0\u00e7\u201d\u0178\u00e6\u02c6\u00e5\u2122\u00a8 - CLI \u00e4\u00b8\u00ad\u00e9\u203a\u2020\u00e6\u02c6</p> </li> <li> <p>[x] \u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u00b7\u00a5\u00e5\u2026\u00b7 - \u00e8\u00ae\u00a1\u00e5\u02c6\u2019\u00e4\u00b8\u00ad</p> </li> </ul>"},{"location":"development/contributing/#coa34-a","title":"\u00e7\u00a4\u00ba\u00e4\u00be\u2039 \u00e2\u0153\u2026","text":"<ul> <li> <p>[x] \u00e5\u0178\u00ba\u00e7\u00a1\u20ac\u00e7\u00a4\u00ba\u00e4\u00be\u2039 - <code>examples/simple_example.py</code></p> </li> <li> <p>[x] \u00e9\u2030\u00b4\u00e6\u0192\u00e7\u00a4\u00ba\u00e4\u00be\u2039 - <code>examples/sqlmodel_example.py</code></p> </li> <li> <p>[x] \u00e7\u201d\u00b5\u00e5\u2022\u2020\u00e7\u00a4\u00ba\u00e4\u00be\u2039 - \u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e4\u00b8\u00ad\u00e7\u0161\u201e\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u00a4\u00ba\u00e4\u00be\u2039</p> </li> <li> <p>[x] \u00e5\u00be\u00ae\u00e6\u0153\u00e5\u0160\u00a1\u00e7\u00a4\u00ba\u00e4\u00be\u2039 - \u00e8\u00ae\u00a1\u00e5\u02c6\u2019\u00e4\u00b8\u00ad</p> </li> </ul>"},{"location":"development/contributing/#a14aaa12","title":"\u00e5\u00bc\u20ac\u00e5\u2018\u00e5\u00b7\u00a5\u00e4\u00bd\u0153\u00e6\u00b5","text":""},{"location":"development/contributing/#1-c-ae34c12","title":"1. \u00e7\u00af\u00e5\u00a2\u0192\u00e8\u00ae\u00be\u00e7\u00bd\u00ae","text":"<pre><code># \u00e5\u2026\u2039\u00e9\u0161\u2020\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\n\ngit clone https://github.com/your-repo/fastapi-easy.git\n\ncd fastapi-easy\n\n\n\n# \u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e8\u2122\u0161\u00e6\u2039\u0178\u00e7\u00af\u00e5\u00a2\u0192\n\npython -m venv venv\n\nsource venv/bin/activate  # Linux/Mac\n\n# \u00e6\u02c6\u2013\n\nvenv\\Scripts\\activate  # Windows\n\n\n\n# \u00e5\u00ae\u2030\u00e8\u00a3\u2026\u00e5\u00bc\u20ac\u00e5\u2018\u00e4\u00be\u00e8\u00b5\u2013\n\npip install -e \".[dev]\"\n\npip install pytest pytest-asyncio pytest-cov black flake8 mypy\n</code></pre>"},{"location":"development/contributing/#2-ac-e-14","title":"2. \u00e4\u00bb\u00a3\u00e7\u00a0\u00e9\u00a3\u00e6\u00a0\u00bc","text":"<ul> <li> <p>\u00e4\u00bd\u00bf\u00e7\u201d\u00a8 Black \u00e6\u00a0\u00bc\u00e5\u00bc\u00e5\u0152\u2013\u00e4\u00bb\u00a3\u00e7\u00a0</p> </li> <li> <p>\u00e4\u00bd\u00bf\u00e7\u201d\u00a8 Flake8 \u00e6\u00a3\u20ac\u00e6\u0178\u00a5\u00e4\u00bb\u00a3\u00e7\u00a0\u00e8\u00b4\u00a8\u00e9\u2021</p> </li> <li> <p>\u00e4\u00bd\u00bf\u00e7\u201d\u00a8 MyPy \u00e8\u00bf\u203a\u00e8\u00a1\u0152\u00e7\u00b1\u00bb\u00e5\u2039\u00e6\u00a3\u20ac\u00e6\u0178\u00a5</p> </li> <li> <p>\u00e9\u00b5\u00e5\u00be\u00aa PEP 8 \u00e8\u00a7\u201e\u00e8\u0152\u0192</p> </li> </ul>"},{"location":"development/contributing/#3-e","title":"3. \u00e6\u00b5\u2039\u00e8\u00af\u2022","text":"<pre><code># \u00e8\u00bf\u00e8\u00a1\u0152\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e6\u00b5\u2039\u00e8\u00af\u2022\n\npytest\n\n\n\n# \u00e8\u00bf\u00e8\u00a1\u0152\u00e7\u2030\u00b9\u00e5\u00ae\u0161\u00e6\u00b5\u2039\u00e8\u00af\u2022\n\npytest tests/test_crud_router.py\n\n\n\n# \u00e7\u201d\u0178\u00e6\u02c6\u00e8\u00a6\u2020\u00e7\u203a\u2013\u00e7\u2021\u00e6\u0160\u00a5\u00e5\u2018\u0160\n\npytest --cov=fastapi_easy tests/\n</code></pre>"},{"location":"development/contributing/#4-aoac","title":"4. \u00e6\u00e4\u00ba\u00a4\u00e4\u00bb\u00a3\u00e7","text":"<pre><code># \u00e6\u00a0\u00bc\u00e5\u00bc\u00e5\u0152\u2013\u00e4\u00bb\u00a3\u00e7\u00a0\n\nblack src/ tests/\n\n\n\n# \u00e6\u00a3\u20ac\u00e6\u0178\u00a5\u00e4\u00bb\u00a3\u00e7\u00a0\u00e8\u00b4\u00a8\u00e9\u2021\n\nflake8 src/ tests/\n\nmypy src/\n\n\n\n# \u00e8\u00bf\u00e8\u00a1\u0152\u00e6\u00b5\u2039\u00e8\u00af\u2022\n\npytest\n\n\n\n# \u00e6\u00e4\u00ba\u00a4\n\ngit add .\n\ngit commit -m \"feat: add feature description\"\n\ngit push\n</code></pre>"},{"location":"development/contributing/#a14aeao","title":"\u00e5\u00bc\u20ac\u00e5\u2018\u00e8\u00bf\u203a\u00e5\u00ba\u00a6","text":""},{"location":"development/contributing/#a12acs","title":"\u00e5\u00bd\u201c\u00e5\u2030\u00e7\u0160\u00b6\u00e6\u20ac","text":"<ul> <li> <p>\u011f\u0178\u201c\u0161 \u00e6\u2013\u2021\u00e6\u00a1\u00a3: 100% \u00e5\u00ae\u0152\u00e6\u02c6\u00ef\u00bc\u02c620 \u00e4\u00bb\u00bd\u00e8\u00af\u00a6\u00e7\u00bb\u2020\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00ef\u00bc\u2030</p> </li> <li> <p>\u011f\u0178\u2019\u00bb \u00e4\u00bb\u00a3\u00e7\u00a0: 90% \u00e5\u00ae\u0152\u00e6\u02c6\u00ef\u00bc\u02c6Phase 1-5 \u00e5\u00ae\u0152\u00e6\u02c6\u00ef\u00bc\u2030</p> </li> <li> <p>\u011f\u0178\u00a7\u00aa \u00e6\u00b5\u2039\u00e8\u00af\u2022: 94% \u00e8\u00a6\u2020\u00e7\u203a\u2013\u00e7\u2021\u00ef\u00bc\u02c6\u00e6\u0152\u00e7\u00bb\u00ad\u00e4\u00bc\u02dc\u00e5\u0152\u2013\u00e4\u00b8\u00ad\u00ef\u00bc\u2030</p> </li> <li> <p>\u011f\u0178\u201c\u00a6 \u00e5\u2018\u00e5\u00b8\u0192: \u00e5\u2021\u2020\u00e5\u00a4\u2021\u00e4\u00b8\u00ad</p> </li> </ul>"},{"location":"development/contributing/#cye","title":"\u00e6\u0152\u2021\u00e6\u00a0\u2021\u00e7\u00bb\u0178\u00e8\u00ae\u00a1","text":"<p>| \u00e6\u0152\u2021\u00e6\u00a0\u2021 | \u00e6\u2022\u00b0\u00e5\u20ac\u00bc |</p> <p>|------|------|</p> <p>| \u00e6\u20ac\u00bb\u00e6\u2013\u2021\u00e4\u00bb\u00b6\u00e6\u2022\u00b0 | 30+ \u00e4\u00b8\u00aa |</p> <p>| \u00e6\u20ac\u00bb\u00e4\u00bb\u00a3\u00e7\u00a0\u00e8\u00a1\u0152\u00e6\u2022\u00b0 | 5000+ \u00e8\u00a1\u0152 |</p> <p>| \u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e6\u00a8\u00a1\u00e5\u2014 | 16 \u00e4\u00b8\u00aa |</p> <p>| \u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e8\u00a6\u2020\u00e7\u203a\u2013\u00e7\u2021 | 94% |</p> <p>| \u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e8\u00a1\u0152\u00e6\u2022\u00b0 | 4000+ \u00e8\u00a1\u0152 |</p> <p>| ORM \u00e6\u201d\u00af\u00e6\u0152 | SQLAlchemy + Tortoise |</p> <p>| \u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e6\u2022\u00b0\u00e9\u2021 | 23 \u00e4\u00b8\u00aa |</p> <p>| \u00e8\u00ae\u00b8\u00e5\u00af\u00e8\u00af | AGPL-3.0 |</p>"},{"location":"development/contributing/#ae-e","title":"\u00e5\u00ae\u0152\u00e6\u02c6\u00e6\u2014\u00b6\u00e9\u2014\u00b4\u00e8\u00a1\u00a8","text":"<p>| \u00e9\u02dc\u00b6\u00e6\u00ae\u00b5 | \u00e4\u00bb\u00bb\u00e5\u0160\u00a1 | \u00e5\u00ae\u0152\u00e6\u02c6\u00e6\u2014\u00b6\u00e9\u2014\u00b4 | \u00e7\u0160\u00b6\u00e6\u20ac |</p> <p>|------|------|--------|------|</p> <p>| 1 | \u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e6\u00a1\u2020\u00e6\u00b6 | 2 \u00e5\u2018\u00a8 | \u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u02c6 |</p> <p>| 2 | \u00e5\u0178\u00ba\u00e7\u00a1\u20ac\u00e5\u0160\u0178\u00e8\u0192\u00bd | 2 \u00e5\u2018\u00a8 | \u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u02c6 |</p> <p>| 3 | ORM \u00e9\u20ac\u201a\u00e9\u2026\u00e5\u2122\u00a8 | 1 \u00e5\u2018\u00a8 | \u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u02c6 |</p> <p>| 4 | \u00e9\u00ab\u02dc\u00e7\u00ba\u00a7\u00e5\u0160\u0178\u00e8\u0192\u00bd | 2 \u00e5\u2018\u00a8 | \u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u02c6 |</p> <p>| 5 | \u00e6\u2030\u00a9\u00e5\u00b1\u2022\u00e5\u0160\u0178\u00e8\u0192\u00bd | 1 \u00e5\u2018\u00a8 | \u00e2\u0153\u2026 \u00e5\u00ae\u0152\u00e6\u02c6 |</p> <p>| 6 | \u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e5\u2019\u0152\u00e6\u00b5\u2039\u00e8\u00af\u2022 | \u00e8\u00bf\u203a\u00e8\u00a1\u0152\u00e4\u00b8\u00ad | \u011f\u0178\u201d\u201e \u00e8\u00bf\u203a\u00e8\u00a1\u0152\u00e4\u00b8\u00ad |</p> <p>| 7 | \u00e5\u2018\u00e5\u00b8\u0192\u00e6\u00a8\u00e5\u00b9\u00bf | \u00e5\u00be\u2026\u00e5\u00bc\u20ac\u00e5\u00a7\u2039 | \u00e2\u00b3 \u00e5\u00be\u2026\u00e5\u00bc\u20ac\u00e5\u00a7\u2039 |</p> <p>| \u00e6\u20ac\u00bb\u00e8\u00ae\u00a1 | | 9 \u00e5\u2018\u00a8 | |</p>"},{"location":"development/contributing/#gy-e-ca","title":"\u011f\u0178\u00a4 \u00e8\u00b4\u00a1\u00e7\u0152\u00ae\u00e6\u0152\u2021\u00e5\u2014","text":""},{"location":"development/contributing/#sas-bug","title":"\u00e6\u0160\u00a5\u00e5\u2018\u0160 Bug","text":"<ol> <li> <p>\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\u00e6\u02dc\u00af\u00e5\u00a6\u00e5\u00b7\u00b2\u00e6\u0153\u2030\u00e7\u203a\u00b8\u00e5\u0152\u00e7\u0161\u201e Issue</p> </li> <li> <p>\u00e6\u00e4\u00be\u203a\u00e8\u00af\u00a6\u00e7\u00bb\u2020\u00e7\u0161\u201e\u00e5\u00a4\u00e7\u00b0\u00e6\u00ad\u00a5\u00e9\u00aa\u00a4</p> </li> <li> <p>\u00e5\u0152\u2026\u00e5\u00ab\u00e9\u201d\u2122\u00e8\u00af\u00af\u00e4\u00bf\u00a1\u00e6\u00af\u00e5\u2019\u0152\u00e6\u2014\u00a5\u00e5\u00bf\u2014</p> </li> <li> <p>\u00e6\u00b3\u00a8\u00e6\u201e\u00ef\u00bc\u0161\u00e6\u0153\u00ac\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e9\u2021\u2021\u00e7\u201d\u00a8 AGPL-3.0 \u00e8\u00ae\u00b8\u00e5\u00af\u00e8\u00af</p> </li> </ol>"},{"location":"development/contributing/#aoasye12","title":"\u00e6\u00e4\u00ba\u00a4\u00e5\u0160\u0178\u00e8\u0192\u00bd","text":"<ol> <li> <p>\u00e5\u02c6\u203a\u00e5\u00bb\u00ba Feature Branch</p> </li> <li> <p>\u00e7\u00bc\u2013\u00e5\u2020\u2122\u00e4\u00bb\u00a3\u00e7\u00a0\u00e5\u2019\u0152\u00e6\u00b5\u2039\u00e8\u00af\u2022</p> </li> <li> <p>\u00e6\u00e4\u00ba\u00a4 Pull Request</p> </li> <li> <p>\u00e7\u00ad\u2030\u00e5\u00be\u2026\u00e4\u00bb\u00a3\u00e7\u00a0\u00e5\u00ae\u00a1\u00e6\u0178\u00a5</p> </li> <li> <p>\u00e7\u00a1\u00ae\u00e4\u00bf\u00e9\u00b5\u00e5\u00ae\u02c6 AGPL-3.0 \u00e8\u00ae\u00b8\u00e5\u00af\u00e8\u00af\u00e6\u00a1\u00e6\u00ac\u00be</p> </li> </ol>"},{"location":"development/contributing/#ac-ay-a","title":"\u00e4\u00bb\u00a3\u00e7\u00a0\u00e5\u00ae\u00a1\u00e6\u0178\u00a5\u00e6\u00a0\u2021\u00e5\u2021\u2020","text":"<ul> <li> <p>\u00e2\u0153\u2026 \u00e4\u00bb\u00a3\u00e7\u00a0\u00e9\u00a3\u00e6\u00a0\u00bc\u00e7\u00ac\u00a6\u00e5\u02c6\u00e8\u00a7\u201e\u00e8\u0152\u0192</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e6\u0153\u2030\u00e7\u203a\u00b8\u00e5\u00ba\u201d\u00e7\u0161\u201e\u00e6\u00b5\u2039\u00e8\u00af\u2022</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e5\u00b7\u00b2\u00e6\u203a\u00b4\u00e6\u2013\u00b0</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e6\u00b2\u00a1\u00e6\u0153\u2030\u00e7\u00a0\u00b4\u00e5\u00e7\u00b0\u00e6\u0153\u2030\u00e5\u0160\u0178\u00e8\u0192\u00bd</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e9\u00b5\u00e5\u00ae\u02c6 AGPL-3.0 \u00e8\u00ae\u00b8\u00e5\u00af\u00e8\u00af</p> </li> <li> <p>\u00e2\u0153\u2026 \u00e5\u0152\u2026\u00e5\u00ab\u00e5\u00bf\u2026\u00e8\u00a6\u00e7\u0161\u201e\u00e8\u00ae\u00b8\u00e5\u00af\u00e8\u00af\u00e5\u00a4\u00b4\u00e6\u00b3\u00a8\u00e9\u2021\u0160</p> </li> </ul>"},{"location":"development/contributing/#gy-ec31a14","title":"\u011f\u0178\u201c \u00e8\u201d\u00e7\u00b3\u00bb\u00e6\u2013\u00b9\u00e5\u00bc","text":"<ul> <li> <p>\u011f\u0178\u201c\u00a7 Email: 1339731209@qq.com</p> </li> <li> <p>\u011f\u0178\u2122 GitHub: fastapi-easy</p> </li> <li> <p>\u011f\u0178\u2019\u00ac \u00e8\u00ae\u00a8\u00e8\u00ae\u00ba: GitHub Discussions</p> </li> <li> <p>\u011f\u0178\u201c\u2039 \u00e5\u2022\u2020\u00e4\u00b8\u0161\u00e8\u00ae\u00b8\u00e5\u00af: 1339731209@qq.com</p> </li> </ul>"},{"location":"development/contributing/#gy-a","title":"\u011f\u0178\u201c \u00e6\u203a\u00b4\u00e6\u2013\u00b0\u00e6\u2014\u00a5\u00e5\u00bf\u2014","text":""},{"location":"development/contributing/#v010-a12a","title":"v0.1.0 (\u00e5\u00bd\u201c\u00e5\u2030)","text":"<ul> <li> <p>\u011f\u0178\u201c\u0161 \u00e5\u00ae\u0152\u00e6\u02c6\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e5\u2019\u0152\u00e6\u00b6\u00e6\u201e\u00e8\u00ae\u00be\u00e8\u00ae\u00a1</p> </li> <li> <p>\u011f\u0178\u201c\u2039 \u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e5\u00bc\u20ac\u00e5\u2018\u00e6\u0152\u2021\u00e5\u2014</p> </li> <li> <p>\u011f\u0178\u201d \u00e9\u2021\u2021\u00e7\u201d\u00a8 AGPL-3.0 \u00e8\u00ae\u00b8\u00e5\u00af\u00e8\u00af</p> </li> </ul>"},{"location":"development/contributing/#v100-ea","title":"v1.0.0 (\u00e8\u00ae\u00a1\u00e5\u02c6\u2019)","text":"<ul> <li> <p>\u011f\u0178\u2019\u00bb \u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e5\u00b7\u00b2\u00e5\u00ae\u00e7\u00b0</p> </li> <li> <p>\u011f\u0178\u00a7\u00aa 94% \u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e8\u00a6\u2020\u00e7\u203a\u2013\u00e7\u2021</p> </li> <li> <p>\u011f\u0178\u201c\u00a6 \u00e9\u00a6\u2013\u00e6\u00ac\u00a1 PyPI \u00e5\u2018\u00e5\u00b8\u0192</p> </li> <li> <p>\u011f\u0178\u0152 \u00e5\u203a\u00bd\u00e9\u2122\u2026\u00e5\u0152\u2013\u00e6\u201d\u00af\u00e6\u0152</p> </li> </ul> <p>\u00e8\u00ae\u00b8\u00e5\u00af\u00e8\u00af&gt; \u8bb8\u53ef\u8bc1: \u672c\u9879\u76ee\u91c7\u7528 AGPL-3.0** \u8bb8\u53ef\u8bc1\u3002\u8be6\u89c1\u9879\u76ee\u6839\u76ee\u5f55\u7684 LICENSE \u6587\u4ef6\u3002\uff09</p> <p>\u00e6\u0153\u20ac\u00e5\u00e6\u203a\u00b4\u00e6\u2013\u00b0: 2024 \u00e5\u00b9\u00b4 11 \u00e6\u0153\u02c6 28 \u00e6\u2014\u00a5</p>"},{"location":"development/testing/","title":"\u6d4b\u8bd5\u6307\u5357","text":"<p>\u672c\u6307\u5357\u4ecb\u7ecd\u5982\u4f55\u6d4b\u8bd5\u4f7f\u7528 fastapi-easy \u6784\u5efa\u7684\u5e94\u7528\u3002</p>"},{"location":"development/testing/#_2","title":"\u5355\u5143\u6d4b\u8bd5","text":"<pre><code>import pytest\nfrom unittest.mock import AsyncMock\n\n@pytest.mark.asyncio\nasync def test_create_item():\n    adapter = AsyncMock()\n    adapter.create = AsyncMock(return_value={\"id\": 1, \"name\": \"Item\"})\n\n    result = await adapter.create({\"name\": \"Item\"})\n\n    assert result[\"id\"] == 1\n</code></pre>"},{"location":"development/testing/#_3","title":"\u96c6\u6210\u6d4b\u8bd5","text":"<pre><code>@pytest.mark.asyncio\nasync def test_create_item_api(client):\n    response = await client.post(\"/items\", json={\"name\": \"Item\"})\n\n    assert response.status_code == 201\n    assert response.json()[\"name\"] == \"Item\"\n</code></pre>"},{"location":"development/testing/#_4","title":"\u6d4b\u8bd5\u8986\u76d6","text":"<pre><code>pytest --cov=app tests/\n</code></pre> <p>\u4e0b\u4e00\u6b65: \u8d21\u732e\u6307\u5357 \u2192</p>"},{"location":"guides/audit-logging-basic/","title":"\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00e5\u0178\u00ba\u00e7\u00a1\u20ac\u00e6\u0152\u2021\u00e5\u2014","text":"<p>\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014 (Audit Logging) \u00e6\u02dc\u00af\u00e4\u00bc\u00e4\u00b8\u0161\u00e7\u00ba\u00a7\u00e5\u00ba\u201d\u00e7\u201d\u00a8\u00e7\u0161\u201e\u00e9\u2021\u00e8\u00a6\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00ef\u00bc\u0152\u00e7\u201d\u00a8\u00e4\u00ba\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00e7\u00b3\u00bb\u00e7\u00bb\u0178\u00e4\u00b8\u00ad\u00e7\u0161\u201e\u00e5\u2026\u00b3\u00e9\u201d\u00ae\u00e6\u201c\u00e4\u00bd\u0153\u00ef\u00bc\u0152\u00e4\u00bb\u00a5\u00e4\u00be\u00bf\u00e8\u00bf\u203a\u00e8\u00a1\u0152\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e5\u2019\u0152\u00e9\u2014\u00ae\u00e9\u00a2\u02dc\u00e8\u00bf\u00bd\u00e8\u00b8\u00aa\u00e3\u20ac\u201a</p> <p>FastAPI-Easy \u00e6\u00e4\u00be\u203a\u00e4\u00ba\u2020\u00e5\u00bc\u20ac\u00e7\u00ae\u00b1\u00e5\u00b3\u00e7\u201d\u00a8\u00e7\u0161\u201e\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00e6\u201d\u00af\u00e6\u0152\u00e3\u20ac\u201a</p>"},{"location":"guides/audit-logging-basic/#gys-aeya14a","title":"\u011f\u0178\u0161\u20ac \u00e5\u00bf\u00ab\u00e9\u20ac\u0178\u00e5\u00bc\u20ac\u00e5\u00a7\u2039","text":""},{"location":"guides/audit-logging-basic/#1-a-c-aea","title":"1. \u00e5\u00af\u00e7\u201d\u00a8\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014","text":"<p>\u00e5\u0153\u00a8 <code>CRUDRouter</code> \u00e4\u00b8\u00ad\u00ef\u00bc\u0152\u00e5\u00aa\u00e9\u0153\u20ac\u00e8\u00ae\u00be\u00e7\u00bd\u00ae <code>enable_audit_log=True</code> \u00e5\u00b3\u00e5\u00af\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e5\u00a2\u00e5\u02c6\u00a0\u00e6\u201d\u00b9\u00e6\u201c\u00e4\u00bd\u0153\u00e3\u20ac\u201a</p> <pre><code>from fastapi_easy import CRUDRouter\n\n\n\nrouter = CRUDRouter(\n\n    schema=UserSchema,\n\n    adapter=adapter,\n\n    enable_audit_log=True  # \u00e5\u00bc\u20ac\u00e5\u00af\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014\n\n)\n</code></pre>"},{"location":"guides/audit-logging-basic/#2-yca","title":"2. \u00e6\u0178\u00a5\u00e7\u0153\u2039\u00e6\u2014\u00a5\u00e5\u00bf\u2014","text":"<p>\u00e9\u00bb\u02dc\u00e8\u00ae\u00a4\u00e6\u0192\u2026\u00e5\u2020\u00b5\u00e4\u00b8\u2039\u00ef\u00bc\u0152\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00e4\u00bc\u0161\u00e9\u20ac\u0161\u00e8\u00bf\u2021 Python \u00e6\u00a0\u2021\u00e5\u2021\u2020\u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00e5\u00ba\u201c\u00e8\u00be\u201c\u00e5\u2021\u00ba\u00e3\u20ac\u201a</p> <pre><code>INFO:     AuditLog: user_created | user_id=1 | ip=127.0.0.1 | status=success\n\nINFO:     AuditLog: user_updated | user_id=1 | ip=127.0.0.1 | changes={\"name\": \"new_name\"}\n</code></pre>"},{"location":"guides/audit-logging-basic/#gy-ec12ee1","title":"\u011f\u0178\u201d\u00a7 \u00e9\u2026\u00e7\u00bd\u00ae\u00e9\u20ac\u2030\u00e9\u00a1\u00b9","text":"<p>\u00e4\u00bd\u00a0\u00e5\u00af\u00e4\u00bb\u00a5\u00e9\u20ac\u0161\u00e8\u00bf\u2021 <code>AuditConfig</code> \u00e8\u2021\u00aa\u00e5\u00ae\u0161\u00e4\u00b9\u2030\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e8\u00a1\u0152\u00e4\u00b8\u00ba\u00e3\u20ac\u201a</p> <pre><code>from fastapi_easy import CRUDRouter, AuditConfig\n\n\n\nrouter = CRUDRouter(\n\n    schema=UserSchema,\n\n    adapter=adapter,\n\n    audit_config=AuditConfig(\n\n        include_read_operations=False,  # \u00e6\u02dc\u00af\u00e5\u00a6\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00e8\u00af\u00bb\u00e5\u2013\u00e6\u201c\u00e4\u00bd\u0153 (\u00e9\u00bb\u02dc\u00e8\u00ae\u00a4 False)\n\n        exclude_fields=[\"password\"],    # \u00e4\u00b8\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00e6\u2022\u00e6\u201e\u0178\u00e5\u00ad\u2014\u00e6\u00ae\u00b5\n\n        storage_backend=\"database\"      # \u00e5\u00ad\u02dc\u00e5\u201a\u00a8\u00e5\u00e7\u00ab\u00af: logger (\u00e9\u00bb\u02dc\u00e8\u00ae\u00a4) | database\n\n    )\n\n)\n</code></pre>"},{"location":"guides/audit-logging-basic/#gy34-a-a-aao","title":"\u011f\u0178\u2019\u00be \u00e5\u00ad\u02dc\u00e5\u201a\u00a8\u00e5\u02c6\u00b0\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c","text":"<p>\u00e5\u00a6\u201a\u00e6\u0153\u00e4\u00bd\u00a0\u00e9\u0153\u20ac\u00e8\u00a6\u00e6\u0152\u00e4\u00b9\u2026\u00e5\u0152\u2013\u00e5\u00ad\u02dc\u00e5\u201a\u00a8\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00ef\u00bc\u0152\u00e5\u00af\u00e4\u00bb\u00a5\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e5\u00e7\u00ab\u00af\u00e3\u20ac\u201a</p>"},{"location":"guides/audit-logging-basic/#1-asa1ae-a","title":"1. \u00e5\u00ae\u0161\u00e4\u00b9\u2030\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u00a8\u00a1\u00e5\u2039","text":"<p>\u00e4\u00bd\u00a0\u00e9\u0153\u20ac\u00e8\u00a6\u00e5\u00ae\u0161\u00e4\u00b9\u2030\u00e4\u00b8\u20ac\u00e4\u00b8\u00aa\u00e7\u201d\u00a8\u00e4\u00ba\u00e5\u00ad\u02dc\u00e5\u201a\u00a8\u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00e7\u0161\u201e\u00e8\u00a1\u00a8\u00e3\u20ac\u201a</p> <pre><code>class AuditLogDB(Base):\n\n    __tablename__ = \"audit_logs\"\n\n    id = Column(Integer, primary_key=True)\n\n    action = Column(String)      # \u00e6\u201c\u00e4\u00bd\u0153\u00e7\u00b1\u00bb\u00e5\u2039 (create, update, delete)\n\n    resource = Column(String)    # \u00e8\u00b5\u201e\u00e6\u00ba\u00e5\u00e7\u00a7\u00b0\n\n    resource_id = Column(String) # \u00e8\u00b5\u201e\u00e6\u00ba ID\n\n    user_id = Column(String)     # \u00e6\u201c\u00e4\u00bd\u0153\u00e7\u201d\u00a8\u00e6\u02c6\u00b7\n\n    changes = Column(JSON)       # \u00e5\u02dc\u00e6\u203a\u00b4\u00e5\u2020\u2026\u00e5\u00ae\u00b9\n\n    timestamp = Column(DateTime, default=datetime.utcnow)\n</code></pre>"},{"location":"guides/audit-logging-basic/#2-ec12eeatm","title":"2. \u00e9\u2026\u00e7\u00bd\u00ae\u00e9\u20ac\u201a\u00e9\u2026\u00e5\u2122\u00a8","text":"<pre><code>from fastapi_easy.audit import DatabaseAuditStorage\n\n\n\naudit_storage = DatabaseAuditStorage(\n\n    session_maker=db_session_maker,\n\n    model=AuditLogDB\n\n)\n\n\n\nrouter = CRUDRouter(\n\n    ...,\n\n    audit_storage=audit_storage\n\n)\n</code></pre>"},{"location":"guides/audit-logging-basic/#gy-eaasa1aaa1","title":"\u011f\u0178\u201d \u00e8\u2021\u00aa\u00e5\u00ae\u0161\u00e4\u00b9\u2030\u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00e5\u2020\u2026\u00e5\u00ae\u00b9","text":"<p>\u00e4\u00bd\u00a0\u00e5\u00af\u00e4\u00bb\u00a5\u00e9\u20ac\u0161\u00e8\u00bf\u2021 Hook \u00e6\u0153\u00ba\u00e5\u02c6\u00b6\u00e8\u2021\u00aa\u00e5\u00ae\u0161\u00e4\u00b9\u2030\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00e7\u0161\u201e\u00e5\u2020\u2026\u00e5\u00ae\u00b9\u00e3\u20ac\u201a</p> <pre><code>@router.hooks.after_create\n\nasync def custom_audit(item, context):\n\n    # \u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00e9\u00a2\u00e5\u00a4\u2013\u00e7\u0161\u201e\u00e4\u00b8\u0161\u00e5\u0160\u00a1\u00e4\u00bf\u00a1\u00e6\u00af\n\n    logger.info(f\"New user {item.id} registered from {context.client_ip}\")\n</code></pre>"},{"location":"guides/bulk-operations/","title":"\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e6\u0093\u008d\u00e4\u00bd\u009c","text":"<p>\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e6\u0093\u008d\u00e4\u00bd\u009c\u00e5\u0085\u0081\u00e8\u00ae\u00b8\u00e5\u009c\u00a8\u00e5\u008d\u0095\u00e4\u00b8\u00aa\u00e8\u00af\u00b7\u00e6\u00b1\u0082\u00e4\u00b8\u00ad\u00e5\u00af\u00b9\u00e5\u00a4\u009a\u00e4\u00b8\u00aa\u00e8\u00ae\u00b0\u00e5\u00bd\u0095\u00e8\u00bf\u009b\u00e8\u00a1?CRUD \u00e6\u0093\u008d\u00e4\u00bd\u009c\u00e3\u0080\u0082\u00e6\u009c\u00ac\u00e6\u008c\u0087\u00e5\u008d\u0097\u00e4\u00bb\u008b\u00e7\u00bb\u008d\u00e5\u00a6\u0082\u00e4\u00bd\u0095\u00e4\u00bd\u00bf\u00e7\u0094\u00a8\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e6\u0093\u008d\u00e4\u00bd\u009c\u00e5\u008a\u009f\u00e8\u0083\u00bd\u00e3\u0080?</p>"},{"location":"guides/bulk-operations/#aa1-1ea12i14","title":"\u00e4\u00bb\u0080\u00e4\u00b9\u0088\u00e6\u0098\u00af\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e6\u0093\u008d\u00e4\u00bd\u009c\u00ef\u00bc?","text":"<p>\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e6\u0093\u008d\u00e4\u00bd\u009c\u00e5\u008f\u00af\u00e4\u00bb\u00a5\u00ef\u00bc?</p> <ul> <li>\u00e2\u009c?\u00e4\u00b8\u0080\u00e6\u00ac\u00a1\u00e5\u0088\u009b\u00e5\u00bb\u00ba\u00e5\u00a4\u009a\u00e4\u00b8\u00aa\u00e8\u00ae\u00b0\u00e5\u00bd?</li> <li>\u00e2\u009c?\u00e4\u00b8\u0080\u00e6\u00ac\u00a1\u00e6\u009b\u00b4\u00e6\u0096\u00b0\u00e5\u00a4\u009a\u00e4\u00b8\u00aa\u00e8\u00ae\u00b0\u00e5\u00bd?</li> <li>\u00e2\u009c?\u00e4\u00b8\u0080\u00e6\u00ac\u00a1\u00e5\u0088\u00a0\u00e9\u0099\u00a4\u00e5\u00a4\u009a\u00e4\u00b8\u00aa\u00e8\u00ae\u00b0\u00e5\u00bd?</li> <li>\u00e2\u009c?\u00e6\u008f\u0090\u00e9\u00ab\u0098\u00e6\u0080\u00a7\u00e8\u0083\u00bd\u00e5\u0092\u008c\u00e6\u0095\u0088\u00e7\u008e?</li> </ul>"},{"location":"guides/bulk-operations/#a-c-1ea12","title":"\u00e5\u0090\u00af\u00e7\u0094\u00a8\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e6\u0093\u008d\u00e4\u00bd\u009c","text":"<pre><code>from fastapi_easy import CRUDRouter\nfrom fastapi_easy.core.bulk_operations import BulkOperationConfig\n\nconfig = BulkOperationConfig(\n    enabled=True,\n    max_batch_size=1000,           # \u00e6\u009c\u0080\u00e5\u00a4\u00a7\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e5\u00a4\u00a7\u00e5\u00b0?\n    transaction_mode=\"atomic\",      # \u00e5\u008e\u009f\u00e5\u00ad\u0090\u00e4\u00ba\u008b\u00e5\u008a\u00a1\u00e6\u00a8\u00a1\u00e5\u00bc\u008f\n)\n\nrouter = CRUDRouter(\n    schema=ItemSchema,\n    adapter=adapter,\n    bulk_operation_config=config,\n)\n</code></pre>"},{"location":"guides/bulk-operations/#1eaao","title":"\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e5\u0088\u009b\u00e5\u00bb\u00ba","text":""},{"location":"guides/bulk-operations/#e","title":"\u00e8\u00af\u00b7\u00e6\u00b1\u0082","text":"<pre><code># POST /items/batch\n# Content-Type: application/json\n\n{\n    \"items\": [\n        {\"name\": \"Item 1\", \"price\": 10.0},\n        {\"name\": \"Item 2\", \"price\": 20.0},\n        {\"name\": \"Item 3\", \"price\": 30.0}\n    ]\n}\n</code></pre>"},{"location":"guides/bulk-operations/#aao","title":"\u00e5\u0093\u008d\u00e5\u00ba\u0094","text":"<pre><code>{\n    \"success_count\": 3,\n    \"failure_count\": 0,\n    \"errors\": [],\n    \"results\": [\n        {\"id\": 1, \"name\": \"Item 1\", \"price\": 10.0},\n        {\"id\": 2, \"name\": \"Item 2\", \"price\": 20.0},\n        {\"id\": 3, \"name\": \"Item 3\", \"price\": 30.0}\n    ]\n}\n</code></pre>"},{"location":"guides/bulk-operations/#1e","title":"\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e6\u009b\u00b4\u00e6\u0096\u00b0","text":""},{"location":"guides/bulk-operations/#e_1","title":"\u00e8\u00af\u00b7\u00e6\u00b1\u0082","text":"<pre><code># PUT /items/batch\n# Content-Type: application/json\n\n{\n    \"items\": [\n        {\"id\": 1, \"name\": \"Updated Item 1\", \"price\": 15.0},\n        {\"id\": 2, \"name\": \"Updated Item 2\", \"price\": 25.0}\n    ]\n}\n</code></pre>"},{"location":"guides/bulk-operations/#aao_1","title":"\u00e5\u0093\u008d\u00e5\u00ba\u0094","text":"<pre><code>{\n    \"success_count\": 2,\n    \"failure_count\": 0,\n    \"errors\": [],\n    \"results\": [\n        {\"id\": 1, \"name\": \"Updated Item 1\", \"price\": 15.0},\n        {\"id\": 2, \"name\": \"Updated Item 2\", \"price\": 25.0}\n    ]\n}\n</code></pre>"},{"location":"guides/bulk-operations/#1ea-e","title":"\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e5\u0088\u00a0\u00e9\u0099\u00a4","text":""},{"location":"guides/bulk-operations/#e_2","title":"\u00e8\u00af\u00b7\u00e6\u00b1\u0082","text":"<pre><code># DELETE /items/batch\n# Content-Type: application/json\n\n{\n    \"ids\": [1, 2, 3]\n}\n</code></pre>"},{"location":"guides/bulk-operations/#aao_2","title":"\u00e5\u0093\u008d\u00e5\u00ba\u0094","text":"<pre><code>{\n    \"success_count\": 3,\n    \"failure_count\": 0,\n    \"errors\": [],\n    \"deleted_count\": 3\n}\n</code></pre>"},{"location":"guides/bulk-operations/#ecoc-3","title":"\u00e9\u00ab\u0098\u00e7\u00ba\u00a7\u00e7\u0094\u00a8\u00e6\u00b3\u0095","text":""},{"location":"guides/bulk-operations/#ace-aae","title":"\u00e5\u00a4\u0084\u00e7\u0090\u0086\u00e9\u0083\u00a8\u00e5\u0088\u0086\u00e5\u00a4\u00b1\u00e8\u00b4\u00a5","text":"<pre><code># \u00e5\u00bd\u0093\u00e6\u009f\u0090\u00e4\u00ba\u009b\u00e6\u0093\u008d\u00e4\u00bd\u009c\u00e5\u00a4\u00b1\u00e8\u00b4\u00a5\u00e6\u0097\u00b6\n{\n    \"success_count\": 2,\n    \"failure_count\": 1,\n    \"errors\": [\n        {\n            \"index\": 2,\n            \"error\": \"Validation error\",\n            \"details\": \"Price must be positive\"\n        }\n    ],\n    \"results\": [\n        {\"id\": 1, \"name\": \"Item 1\"},\n        {\"id\": 2, \"name\": \"Item 2\"}\n    ]\n}\n</code></pre>"},{"location":"guides/bulk-operations/#aoa-a14","title":"\u00e4\u00ba\u008b\u00e5\u008a\u00a1\u00e6\u00a8\u00a1\u00e5\u00bc\u008f","text":"<pre><code># \u00e5\u008e\u009f\u00e5\u00ad\u0090\u00e6\u00a8\u00a1\u00e5\u00bc\u008f\u00ef\u00bc\u009a\u00e5\u0085\u00a8\u00e9\u0083\u00a8\u00e6\u0088\u0090\u00e5\u008a\u009f\u00e6\u0088\u0096\u00e5\u0085\u00a8\u00e9\u0083\u00a8\u00e5\u00a4\u00b1\u00e8\u00b4\u00a5\nconfig = BulkOperationConfig(\n    transaction_mode=\"atomic\"\n)\n\n# \u00e9\u0083\u00a8\u00e5\u0088\u0086\u00e6\u00a8\u00a1\u00e5\u00bc\u008f\u00ef\u00bc\u009a\u00e7\u00bb\u00a7\u00e7\u00bb\u00ad\u00e5\u00a4\u0084\u00e7\u0090\u0086\u00e5\u0085\u00b6\u00e4\u00bb\u0096\u00e8\u00ae\u00b0\u00e5\u00bd?\nconfig = BulkOperationConfig(\n    transaction_mode=\"partial\"\n)\n</code></pre>"},{"location":"guides/bulk-operations/#ea1ea12c","title":"\u00e8\u008e\u00b7\u00e5\u008f\u0096\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e6\u0093\u008d\u00e4\u00bd\u009c\u00e7\u00bb\u0093\u00e6\u009e\u009c","text":"<pre><code>from fastapi_easy.core.bulk_operations import BulkOperationAdapter\n\nadapter = BulkOperationAdapter(Item, session)\n\n# \u00e6\u0089\u00a7\u00e8\u00a1\u008c\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e5\u0088\u009b\u00e5\u00bb\u00ba\nresult = await adapter.bulk_create(\n    items=[\n        {\"name\": \"Item 1\"},\n        {\"name\": \"Item 2\"}\n    ]\n)\n\nprint(f\"\u00e6\u0088\u0090\u00e5\u008a\u009f: {result.success_count}\")\nprint(f\"\u00e5\u00a4\u00b1\u00e8\u00b4\u00a5: {result.failure_count}\")\nprint(f\"\u00e9\u0094\u0099\u00e8\u00af\u00af: {result.errors}\")\n</code></pre>"},{"location":"guides/bulk-operations/#a123ae","title":"\u00e6\u009c\u0080\u00e4\u00bd\u00b3\u00e5\u00ae\u009e\u00e8\u00b7?","text":""},{"location":"guides/bulk-operations/#1-1eaa","title":"1. \u00e6\u00a3\u0080\u00e6\u009f\u00a5\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e5\u00a4\u00a7\u00e5\u00b0?","text":"<pre><code># \u00e2\u009c?\u00e6\u008e\u00a8\u00e8\u008d\u0090\u00ef\u00bc\u009a\u00e6\u00a3\u0080\u00e6\u009f\u00a5\u00e5\u00a4\u00a7\u00e5\u00b0?\nif len(items) &gt; max_batch_size:\n    raise ValueError(f\"\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e5\u00a4\u00a7\u00e5\u00b0\u008f\u00e8\u00b6\u0085\u00e8\u00bf\u0087\u00e9\u0099\u0090\u00e5\u0088\u00b6: {max_batch_size}\")\n\n# \u00e6\u0089\u00a7\u00e8\u00a1\u008c\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e6\u0093\u008d\u00e4\u00bd\u009c\nresult = await adapter.bulk_create(items)\n</code></pre>"},{"location":"guides/bulk-operations/#2-acee","title":"2. \u00e5\u00a4\u0084\u00e7\u0090\u0086\u00e9\u0094\u0099\u00e8\u00af\u00af","text":"<pre><code># \u00e2\u009c?\u00e6\u008e\u00a8\u00e8\u008d\u0090\u00ef\u00bc\u009a\u00e5\u00a4\u0084\u00e7\u0090\u0086\u00e9\u0094\u0099\u00e8\u00af?\nresult = await adapter.bulk_create(items)\n\nif result.failure_count &gt; 0:\n    for error in result.errors:\n        logger.error(f\"\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e6\u0093\u008d\u00e4\u00bd\u009c\u00e9\u0094\u0099\u00e8\u00af\u00af: {error}\")\n</code></pre>"},{"location":"guides/bulk-operations/#3-a12c-aoa","title":"3. \u00e4\u00bd\u00bf\u00e7\u0094\u00a8\u00e4\u00ba\u008b\u00e5\u008a\u00a1","text":"<pre><code># \u00e2\u009c?\u00e6\u008e\u00a8\u00e8\u008d\u0090\u00ef\u00bc\u009a\u00e4\u00bd\u00bf\u00e7\u0094\u00a8\u00e4\u00ba\u008b\u00e5\u008a?\nconfig = BulkOperationConfig(\n    transaction_mode=\"atomic\"\n)\n\n# \u00e7\u00a1\u00ae\u00e4\u00bf\u009d\u00e5\u0085\u00a8\u00e9\u0083\u00a8\u00e6\u0088\u0090\u00e5\u008a\u009f\u00e6\u0088\u0096\u00e5\u0085\u00a8\u00e9\u0083\u00a8\u00e5\u00a4\u00b1\u00e8\u00b4?\nresult = await adapter.bulk_create(items)\n</code></pre>"},{"location":"guides/bulk-operations/#4-ce12","title":"4. \u00e7\u009b\u0091\u00e6\u008e\u00a7\u00e6\u0080\u00a7\u00e8\u0083\u00bd","text":"<pre><code>import time\n\nstart = time.time()\nresult = await adapter.bulk_create(items)\nelapsed = time.time() - start\n\nlogger.info(f\"\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e5\u0088\u009b\u00e5\u00bb\u00ba\u00e8\u0080\u0097\u00e6\u0097\u00b6: {elapsed:.2f}s\")\nlogger.info(f\"\u00e6\u0088\u0090\u00e5\u008a\u009f: {result.success_count}, \u00e5\u00a4\u00b1\u00e8\u00b4\u00a5: {result.failure_count}\")\n</code></pre>"},{"location":"guides/bulk-operations/#a-eee","title":"\u00e5\u00b8\u00b8\u00e8\u00a7\u0081\u00e9\u0097\u00ae\u00e9\u00a2\u0098","text":"<p>*Q: \u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e6\u0093\u008d\u00e4\u00bd\u009c\u00e7\u009a\u0084\u00e6\u009c\u0080\u00e5\u00a4\u00a7\u00e5\u00a4\u00a7\u00e5\u00b0\u008f\u00e6\u0098\u00af\u00e5\u00a4\u009a\u00e5\u00b0\u0091\u00ef\u00bc?</p> <p>A: \u00e9\u00bb\u0098\u00e8\u00ae\u00a4\u00e4\u00b8?1000\u00ef\u00bc\u008c\u00e5\u008f\u00af\u00e5\u009c?<code>BulkOperationConfig</code> \u00e4\u00b8\u00ad\u00e9\u0085\u008d\u00e7\u00bd\u00ae\u00e3\u0080?</p> <p>Q: \u00e5\u00a6\u0082\u00e6\u009e\u009c\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e6\u0093\u008d\u00e4\u00bd\u009c\u00e9\u0083\u00a8\u00e5\u0088\u0086\u00e5\u00a4\u00b1\u00e8\u00b4\u00a5\u00e6\u0080\u008e\u00e4\u00b9\u0088\u00e5\u008a\u009e\u00ef\u00bc\u009f</p> <p>A: \u00e5\u008f\u0096\u00e5\u0086\u00b3\u00e4\u00ba\u008e\u00e4\u00ba\u008b\u00e5\u008a\u00a1\u00e6\u00a8\u00a1\u00e5\u00bc\u008f\u00e3\u0080\u0082\u00e5\u008e\u009f\u00e5\u00ad\u0090\u00e6\u00a8\u00a1\u00e5\u00bc\u008f\u00e4\u00bc\u009a\u00e5\u009b\u009e\u00e6\u00bb\u009a\u00e6\u0089\u0080\u00e6\u009c\u0089\u00e6\u009b\u00b4\u00e6\u0094\u00b9\u00ef\u00bc\u008c\u00e9\u0083\u00a8\u00e5\u0088\u0086\u00e6\u00a8\u00a1\u00e5\u00bc\u008f\u00e4\u00bc\u009a\u00e7\u00bb\u00a7\u00e7\u00bb\u00ad\u00e5\u00a4\u0084\u00e7\u0090\u0086\u00e3\u0080?</p> <p>*Q: \u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e6\u0093\u008d\u00e4\u00bd\u009c\u00e6\u0094\u00af\u00e6\u008c\u0081\u00e5\u0093\u00aa\u00e4\u00ba\u009b\u00e6\u0093\u008d\u00e4\u00bd\u009c\u00ef\u00bc?</p> <p>A: \u00e6\u0094\u00af\u00e6\u008c\u0081\u00e5\u0088\u009b\u00e5\u00bb\u00ba\u00e3\u0080\u0081\u00e6\u009b\u00b4\u00e6\u0096\u00b0\u00e3\u0080\u0081\u00e5\u0088\u00a0\u00e9\u0099\u00a4\u00e3\u0080?</p> <p>*Q: \u00e5\u00a6\u0082\u00e4\u00bd\u0095\u00e6\u008f\u0090\u00e9\u00ab\u0098\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e6\u0093\u008d\u00e4\u00bd\u009c\u00e7\u009a\u0084\u00e6\u0080\u00a7\u00e8\u0083\u00bd\u00ef\u00bc?</p> <p>A: \u00e5\u00a2\u009e\u00e5\u008a\u00a0\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e5\u00a4\u00a7\u00e5\u00b0\u008f\u00ef\u00bc\u0088\u00e5\u009c\u00a8\u00e6\u0095\u00b0\u00e6\u008d\u00ae\u00e5\u00ba\u0093\u00e9\u0099\u0090\u00e5\u0088\u00b6\u00e8\u008c\u0083\u00e5\u009b\u00b4\u00e5\u0086\u0085\u00ef\u00bc\u0089\u00ef\u00bc\u008c\u00e4\u00bd\u00bf\u00e7\u0094\u00a8\u00e5\u008e\u009f\u00e5\u00ad\u0090\u00e4\u00ba\u008b\u00e5\u008a\u00a1\u00e6\u00a8\u00a1\u00e5\u00bc\u008f\u00e3\u0080?</p>"},{"location":"guides/bulk-operations/#c","title":"\u00e6\u0080\u00bb\u00e7\u00bb\u0093","text":"<p>\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e6\u0093\u008d\u00e4\u00bd\u009c\u00e5\u008f\u00af\u00e4\u00bb\u00a5\u00e6\u0098\u00be\u00e8\u0091\u0097\u00e6\u008f\u0090\u00e9\u00ab\u0098\u00e6\u0080\u00a7\u00e8\u0083\u00bd\u00ef\u00bc?</p> <ul> <li>\u00e2\u009c?\u00e5\u0087\u008f\u00e5\u00b0\u0091\u00e7\u00bd\u0091\u00e7\u00bb\u009c\u00e5\u00be\u0080\u00e8\u00bf?</li> <li>\u00e2\u009c?\u00e6\u008f\u0090\u00e9\u00ab\u0098\u00e6\u0095\u00b0\u00e6\u008d\u00ae\u00e5\u00ba\u0093\u00e6\u0095\u0088\u00e7\u008e?</li> <li>\u00e2\u009c?\u00e7\u00ae\u0080\u00e5\u008c\u0096\u00e5\u00ae\u00a2\u00e6\u0088\u00b7\u00e7\u00ab\u00af\u00e4\u00bb\u00a3\u00e7\u00a0\u0081</li> </ul> <p>\u00e4\u00bd\u00bf\u00e7\u0094\u00a8\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e6\u0093\u008d\u00e4\u00bd\u009c\u00e6\u0097\u00b6\u00ef\u00bc\u008c\u00e8\u00ae\u00b0\u00e4\u00bd\u008f\u00ef\u00bc?</p> <ol> <li>\u00e6\u00a3\u0080\u00e6\u009f\u00a5\u00e6\u0089\u00b9\u00e9\u0087\u008f\u00e5\u00a4\u00a7\u00e5\u00b0?</li> <li>\u00e5\u00a4\u0084\u00e7\u0090\u0086\u00e9\u0094\u0099\u00e8\u00af\u00af</li> <li>\u00e4\u00bd\u00bf\u00e7\u0094\u00a8\u00e4\u00ba\u008b\u00e5\u008a\u00a1</li> <li>\u00e7\u009b\u0091\u00e6\u008e\u00a7\u00e6\u0080\u00a7\u00e8\u0083\u00bd</li> </ol> <p>*\u00e4\u00b8\u008b\u00e4\u00b8\u0080\u00e6\u00ad?: \u00e6\u009d\u0083\u00e9\u0099\u0090\u00e6\u008e\u00a7\u00e5\u0088\u00b6 \u00e2\u0086?</p>"},{"location":"guides/error-handling/","title":"\u00e9\u201d\u2122\u00e8\u00af\u00af\u00e5\u00a4\u201e\u00e7\u2020","text":"<p>\u00e6\u0153\u00ac\u00e6\u0152\u2021\u00e5\u2014\u00e4\u00bb\u2039\u00e7\u00bb\u00e5\u00a6\u201a\u00e4\u00bd\u2022\u00e5\u0153\u00a8 fastapi-easy \u00e4\u00b8\u00ad\u00e8\u00bf\u203a\u00e8\u00a1\u0152\u00e9\u201d\u2122\u00e8\u00af\u00af\u00e5\u00a4\u201e\u00e7\u2020\u00e3\u20ac?</p>"},{"location":"guides/error-handling/#ac12etme-ca","title":"\u00e5\u2020\u2026\u00e7\u00bd\u00ae\u00e9\u201d\u2122\u00e8\u00af\u00af\u00e7\u00b1\u00bb\u00e5\u2039","text":"<pre><code>from fastapi_easy.core.errors import (\n\n    AppError,\n\n    ValidationError,\n\n    NotFoundError,\n\n    ConflictError,\n\n    PermissionDeniedError,\n\n    InternalServerError,\n\n)\n</code></pre>"},{"location":"guides/error-handling/#a12c-etme","title":"\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e9\u201d\u2122\u00e8\u00af\u00af","text":""},{"location":"guides/error-handling/#ayocetme","title":"\u00e5\u0178\u00ba\u00e7\u00a1\u20ac\u00e9\u201d\u2122\u00e8\u00af\u00af","text":"<pre><code># \u00e9\u00aa\u0152\u00e8\u00af\u00e9\u201d\u2122\u00e8\u00af\u00af\n\nraise ValidationError(\"Invalid input\", details={\"field\": \"name\"})\n\n\n\n# \u00e6\u0153\u00aa\u00e6\u2030\u00be\u00e5\u02c6\u00b0\u00e9\u201d\u2122\u00e8\u00af?\nraise NotFoundError(\"Item not found\")\n\n\n\n# \u00e5\u2020\u00b2\u00e7\u00aa\u00e9\u201d\u2122\u00e8\u00af\u00af\n\nraise ConflictError(\"Item already exists\")\n\n\n\n# \u00e6\u0192\u00e9\u2122\u00e9\u201d\u2122\u00e8\u00af\u00af\n\nraise PermissionDeniedError(\"No permission\")\n\n\n\n# \u00e6\u0153\u00e5\u0160\u00a1\u00e5\u2122\u00a8\u00e9\u201d\u2122\u00e8\u00af?\nraise InternalServerError(\"Database connection failed\")\n</code></pre>"},{"location":"guides/error-handling/#eaasa1etme","title":"\u00e8\u2021\u00aa\u00e5\u00ae\u0161\u00e4\u00b9\u2030\u00e9\u201d\u2122\u00e8\u00af?","text":"<pre><code>from fastapi_easy.core.errors import AppError\n\n\n\nclass ItemNotFoundError(AppError):\n\n    code = \"ITEM_NOT_FOUND\"\n\n    message = \"Item not found\"\n\n    status_code = 404\n</code></pre>"},{"location":"guides/error-handling/#etme-aao","title":"\u00e9\u201d\u2122\u00e8\u00af\u00af\u00e5\u201c\u00e5\u00ba\u201d","text":"<pre><code># \u00e5\u201c\u00e5\u00ba\u201d\u00e6\u00a0\u00bc\u00e5\u00bc\n\n{\n\n    \"success\": false,\n\n    \"error\": \"Item not found\",\n\n    \"code\": \"ITEM_NOT_FOUND\",\n\n    \"details\": {\n\n        \"item_id\": 1\n\n    }\n\n}\n</code></pre>"},{"location":"guides/error-handling/#etme-aca-e-a","title":"\u00e9\u201d\u2122\u00e8\u00af\u00af\u00e5\u00a4\u201e\u00e7\u2020\u00e4\u00b8\u00ad\u00e9\u2014\u00b4\u00e4\u00bb?","text":"<pre><code>from fastapi_easy.middleware import ErrorHandlingMiddleware\n\n\n\nmiddleware = ErrorHandlingMiddleware()\n\n\n\n# \u00e6\u00b3\u00a8\u00e5\u2020\u0152\u00e8\u2021\u00aa\u00e5\u00ae\u0161\u00e4\u00b9\u2030\u00e9\u201d\u2122\u00e8\u00af\u00af\u00e5\u00a4\u201e\u00e7\u2020\u00e5\u2122\u00a8\n\nasync def handle_validation_error(error):\n\n    logger.warning(f\"Validation error: {error}\")\n\n    return error\n\n\n\nmiddleware.register_handler(ValidationError, handle_validation_error)\n</code></pre>"},{"location":"guides/error-handling/#a123ae","title":"\u00e6\u0153\u20ac\u00e4\u00bd\u00b3\u00e5\u00ae\u00e8\u00b7?","text":"<ol> <li>\u00e2\u0153?\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e9\u20ac\u201a\u00e5\u00bd\u201c\u00e7\u0161\u201e\u00e9\u201d\u2122\u00e8\u00af\u00af\u00e7\u00b1\u00bb\u00e5?</li> <li>\u00e2\u0153?\u00e6\u00e4\u00be\u203a\u00e8\u00af\u00a6\u00e7\u00bb\u2020\u00e7\u0161\u201e\u00e9\u201d\u2122\u00e8\u00af\u00af\u00e4\u00bf\u00a1\u00e6?</li> <li>\u00e2\u0153?\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e9\u201d\u2122\u00e8\u00af?</li> <li>\u00e2\u0153?\u00e4\u00b8\u00e6\u0161\u00b4\u00e9\u0153\u00b2\u00e6\u2022\u00e6\u201e\u0178\u00e4\u00bf\u00a1\u00e6?</li> </ol> <p>*\u00e4\u00b8\u2039\u00e4\u00b8\u20ac\u00e6\u00ad?: \u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4 \u00e2\u2020?</p>"},{"location":"guides/graphql/","title":"GraphQL \u00e6\u201d\u00af\u00e6\u0152\u00e6\u0152\u2021\u00e5\u2014","text":"<p>FastAPI-Easy \u00e6\u00e4\u00be\u203a\u00e4\u00ba\u2020\u00e5\u00bc\u20ac\u00e7\u00ae\u00b1\u00e5\u00b3\u00e7\u201d\u00a8\u00e7\u0161\u201e GraphQL \u00e6\u201d\u00af\u00e6\u0152\u00ef\u00bc\u0152\u00e8\u0192\u00bd\u00e5\u00a4\u0178\u00e5\u0178\u00ba\u00e4\u00ba\u00e4\u00bd\u00a0\u00e7\u0161\u201e Pydantic \u00e6\u00a8\u00a1\u00e5\u2039\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e7\u201d\u0178\u00e6\u02c6 GraphQL Schema\u00e3\u20ac\u201a</p>"},{"location":"guides/graphql/#gys-aeya14a","title":"\u011f\u0178\u0161\u20ac \u00e5\u00bf\u00ab\u00e9\u20ac\u0178\u00e5\u00bc\u20ac\u00e5\u00a7\u2039","text":""},{"location":"guides/graphql/#1-aea34e","title":"1. \u00e5\u00ae\u2030\u00e8\u00a3\u2026\u00e4\u00be\u00e8\u00b5\u2013","text":"<pre><code>pip install \"fastapi-easy[graphql]\"\n\n# \u00e6\u02c6\u2013\u00e8\u20ac\u2026\u00e7\u203a\u00b4\u00e6\u00a5\u00e5\u00ae\u2030\u00e8\u00a3\u2026 strawberry-graphql\n\npip install strawberry-graphql\n</code></pre>"},{"location":"guides/graphql/#2-aao-graphql-e-c","title":"2. \u00e5\u02c6\u203a\u00e5\u00bb\u00ba GraphQL \u00e8\u00b7\u00af\u00e7\u201d\u00b1","text":"<pre><code>from fastapi import FastAPI\n\nfrom fastapi_easy.graphql import create_graphql_router\n\nfrom fastapi_easy.backends import SQLAlchemyAdapter\n\nfrom my_app.models import User, Product\n\n\n\napp = FastAPI()\n\n\n\n# \u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e7\u201d\u0178\u00e6\u02c6 GraphQL Schema \u00e5\u2019\u0152\u00e8\u00b7\u00af\u00e7\u201d\u00b1\n\ngraphql_router = create_graphql_router(\n\n    models=[User, Product],\n\n    adapter=SQLAlchemyAdapter(...)\n\n)\n\n\n\napp.include_router(graphql_router, prefix=\"/graphql\")\n</code></pre>"},{"location":"guides/graphql/#gy-a12c-13","title":"\u011f\u0178\u2019\u00a1 \u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e6\u2013\u00b9\u00e6\u00b3\u2022","text":"<p>\u00e5\u00af\u00e5\u0160\u00a8\u00e5\u00ba\u201d\u00e7\u201d\u00a8\u00e5\u00ef\u00bc\u0152\u00e8\u00ae\u00bf\u00e9\u2014\u00ae <code>/graphql</code> \u00e5\u00b3\u00e5\u00af\u00e6\u2030\u201c\u00e5\u00bc\u20ac GraphiQL \u00e7\u2022\u0152\u00e9\u00a2\u00e3\u20ac\u201a</p>"},{"location":"guides/graphql/#ye-query","title":"\u00e6\u0178\u00a5\u00e8\u00af\u00a2 (Query)","text":"<pre><code># \u00e8\u00b7\u00e5\u2013\u00e7\u201d\u00a8\u00e6\u02c6\u00b7\u00e5\u02c6\u2014\u00e8\u00a1\u00a8\n\nquery {\n\n  users(limit: 10, offset: 0) {\n\n    id\n\n    name\n\n    email\n\n    posts {\n\n      title\n\n    }\n\n  }\n\n}\n\n\n\n# \u00e8\u00b7\u00e5\u2013\u00e5\u2022\u00e4\u00b8\u00aa\u00e7\u201d\u00a8\u00e6\u02c6\u00b7\n\nquery {\n\n  user(id: 1) {\n\n    id\n\n    name\n\n  }\n\n}\n</code></pre>"},{"location":"guides/graphql/#a-mutation","title":"\u00e5\u02dc\u00e6\u203a\u00b4 (Mutation)","text":"<pre><code># \u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e7\u201d\u00a8\u00e6\u02c6\u00b7\n\nmutation {\n\n  createUser(name: \"John Doe\", email: \"john@example.com\") {\n\n    id\n\n    name\n\n  }\n\n}\n\n\n\n# \u00e6\u203a\u00b4\u00e6\u2013\u00b0\u00e7\u201d\u00a8\u00e6\u02c6\u00b7\n\nmutation {\n\n  updateUser(id: 1, name: \"Jane Doe\") {\n\n    id\n\n    name\n\n  }\n\n}\n\n\n\n# \u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u201d\u00a8\u00e6\u02c6\u00b7\n\nmutation {\n\n  deleteUser(id: 1) {\n\n    success\n\n  }\n\n}\n</code></pre>"},{"location":"guides/graphql/#gy-eaasa1ec12","title":"\u011f\u0178\u201d\u00a7 \u00e8\u2021\u00aa\u00e5\u00ae\u0161\u00e4\u00b9\u2030\u00e9\u2026\u00e7\u00bd\u00ae","text":"<p>\u00e4\u00bd\u00a0\u00e5\u00af\u00e4\u00bb\u00a5\u00e8\u2021\u00aa\u00e5\u00ae\u0161\u00e4\u00b9\u2030 GraphQL \u00e7\u0161\u201e\u00e8\u00a1\u0152\u00e4\u00b8\u00ba\u00e3\u20ac\u201a</p> <pre><code>graphql_router = create_graphql_router(\n\n    models=[User],\n\n    adapter=adapter,\n\n    # \u00e8\u2021\u00aa\u00e5\u00ae\u0161\u00e4\u00b9\u2030 Query \u00e5\u00e7\u00a7\u00b0\n\n    query_names={\"User\": \"getUsers\"},\n\n    # \u00e7\u00a6\u00e7\u201d\u00a8\u00e6\u0178\u00e4\u00ba\u203a\u00e6\u201c\u00e4\u00bd\u0153\n\n    enable_mutations=False,\n\n    # \u00e8\u2021\u00aa\u00e5\u00ae\u0161\u00e4\u00b9\u2030 Context\n\n    context_getter=get_graphql_context\n\n)\n</code></pre>"},{"location":"guides/migrations/","title":"\u6570\u636e\u5e93\u8fc1\u79fb\u6307\u5357","text":"<p>FastAPI-Easy \u5185\u7f6e\u4e86\u4e00\u4e2a\u751f\u4ea7\u7ea7\u7684\u6570\u636e\u5e93\u8fc1\u79fb\u5f15\u64ce\uff0c\u652f\u6301\u81ea\u52a8 Schema \u68c0\u6d4b\u3001\u5b89\u5168\u8fc1\u79fb\u6a21\u5f0f\u3001\u5206\u5e03\u5f0f\u9501\u548c\u56de\u6eda\u7b49\u9ad8\u7ea7\u7279\u6027\u3002</p>"},{"location":"guides/migrations/#_2","title":"\ud83d\ude80 \u5feb\u901f\u5f00\u59cb","text":""},{"location":"guides/migrations/#1","title":"1. \u96f6\u914d\u7f6e\u4f7f\u7528","text":"<p>\u6700\u7b80\u5355\u7684\u65b9\u5f0f\u662f\u4f7f\u7528 <code>FastAPIEasy</code> \u7c7b\uff0c\u5b83\u4f1a\u81ea\u52a8\u5904\u7406\u6240\u6709\u8fc1\u79fb\u903b\u8f91\u3002</p> <pre><code>from fastapi_easy import FastAPIEasy\nfrom my_app.models import User, Product\n\napp = FastAPIEasy(\n    database_url=\"postgresql://user:pass@localhost/db\",\n    models=[User, Product],\n    migration_mode=\"safe\"  # safe | auto | aggressive | dry_run\n)\n</code></pre>"},{"location":"guides/migrations/#2","title":"2. \u8fc1\u79fb\u6a21\u5f0f\u8bf4\u660e","text":"\u6a21\u5f0f \u63cf\u8ff0 \u9002\u7528\u573a\u666f safe \u4ec5\u6267\u884c\u5b89\u5168\u64cd\u4f5c\uff08\u5982\u6dfb\u52a0\u8868\u3001\u6dfb\u52a0\u5217\uff09\u3002\u9047\u5230\u98ce\u9669\u64cd\u4f5c\uff08\u5982\u5220\u9664\u5217\uff09\u4f1a\u62a5\u9519\u3002 \u751f\u4ea7\u73af\u5883 (\u9ed8\u8ba4) auto \u81ea\u52a8\u6267\u884c\u4f4e\u98ce\u9669\u64cd\u4f5c\u3002\u9ad8\u98ce\u9669\u64cd\u4f5c\u9700\u4eba\u5de5\u786e\u8ba4\u3002 \u6d4b\u8bd5\u73af\u5883 aggressive \u6267\u884c\u6240\u6709\u68c0\u6d4b\u5230\u7684\u53d8\u66f4\uff0c\u5305\u62ec\u5220\u9664\u8868\u548c\u5217\u3002 \u5f00\u53d1\u73af\u5883 dry_run \u4ec5\u6253\u5370 SQL\uff0c\u4e0d\u6267\u884c\u4efb\u4f55\u64cd\u4f5c\u3002 \u9884\u89c8\u53d8\u66f4"},{"location":"guides/migrations/#cli","title":"\ud83d\udee0\ufe0f CLI \u5de5\u5177","text":"<p>FastAPI-Easy \u63d0\u4f9b\u4e86\u5f3a\u5927\u7684\u547d\u4ee4\u884c\u5de5\u5177\u6765\u7ba1\u7406\u8fc1\u79fb\u3002</p> <pre><code># 1. \u67e5\u770b\u8fc1\u79fb\u8ba1\u5212\nfastapi-easy migrate plan\n\n# 2. \u5e94\u7528\u8fc1\u79fb\nfastapi-easy migrate apply\n\n# 3. \u56de\u6eda\u4e0a\u4e00\u6b21\u8fc1\u79fb\nfastapi-easy migrate rollback\n\n# 4. \u67e5\u770b\u8fc1\u79fb\u72b6\u6001\nfastapi-easy migrate status\n\n# 5. \u67e5\u770b\u8fc1\u79fb\u5386\u53f2\nfastapi-easy migrate history\n\n# 6. \u6e05\u7406\u6b7b\u9501\nfastapi-easy migrate clean\n</code></pre>"},{"location":"guides/migrations/#_3","title":"\ud83d\udd12 \u9ad8\u7ea7\u7279\u6027","text":""},{"location":"guides/migrations/#1-distributed-lock","title":"1. \u5206\u5e03\u5f0f\u9501 (Distributed Lock)","text":"<p>\u4e3a\u4e86\u9632\u6b62\u591a\u5b9e\u4f8b\u90e8\u7f72\u65f6\u7684\u5e76\u53d1\u8fc1\u79fb\u51b2\u7a81\uff0c\u5f15\u64ce\u5185\u7f6e\u4e86\u5206\u5e03\u5f0f\u9501\u652f\u6301\u3002</p> <ul> <li>\u652f\u6301\u540e\u7aef: PostgreSQL (Advisory Locks), MySQL (Named Locks), SQLite (File Locks), Redis.</li> <li>\u8d85\u65f6\u63a7\u5236: \u9ed8\u8ba4 30 \u79d2\u8d85\u65f6\uff0c\u9632\u6b62\u6b7b\u9501\u3002</li> <li>\u81ea\u52a8\u6e05\u7406: \u8fdb\u7a0b\u5d29\u6e83\u540e\u81ea\u52a8\u91ca\u653e\u9501\u3002</li> </ul>"},{"location":"guides/migrations/#2-hook","title":"2. Hook \u7cfb\u7edf","text":"<p>\u4f60\u53ef\u4ee5\u5728\u8fc1\u79fb\u524d\u540e\u63d2\u5165\u81ea\u5b9a\u4e49\u903b\u8f91\uff0c\u4f8b\u5982\u6570\u636e\u5907\u4efd\u6216\u901a\u77e5\u3002</p> <pre><code>from fastapi_easy.migrations import MigrationHooks\n\nhooks = MigrationHooks()\n\n@hooks.before_migration\nasync def backup_db(context):\n    print(\"\u6b63\u5728\u5907\u4efd\u6570\u636e\u5e93...\")\n    # \u6267\u884c\u5907\u4efd\u903b\u8f91\n\n@hooks.after_migration\nasync def notify_slack(context):\n    print(\"\u8fc1\u79fb\u5b8c\u6210\uff0c\u53d1\u9001\u901a\u77e5...\")\n    # \u53d1\u9001 Slack \u901a\u77e5\n\napp = FastAPIEasy(..., migration_hooks=hooks)\n</code></pre>"},{"location":"guides/migrations/#3-checkpoint","title":"3. Checkpoint \u673a\u5236 (\u65ad\u70b9\u7eed\u4f20)","text":"<p>\u5bf9\u4e8e\u5927\u578b\u8fc1\u79fb\uff0c\u5f15\u64ce\u652f\u6301 Checkpoint \u673a\u5236\u3002\u5982\u679c\u8fc1\u79fb\u8fc7\u7a0b\u4e2d\u65ad\uff0c\u4e0b\u6b21\u8fd0\u884c\u65f6\u53ef\u4ee5\u4ece\u65ad\u70b9\u5904\u7ee7\u7eed\u6267\u884c\uff0c\u800c\u4e0d\u9700\u8981\u91cd\u65b0\u5f00\u59cb\u3002</p>"},{"location":"guides/migrations/#4-sqlite","title":"4. SQLite \u4f18\u5316","text":"<p>\u9488\u5bf9 SQLite \u4e0d\u652f\u6301\u67d0\u4e9b DDL \u64cd\u4f5c\uff08\u5982\u5220\u9664\u5217\uff09\u7684\u9650\u5236\uff0c\u5f15\u64ce\u5b9e\u73b0\u4e86 Copy-Swap \u6a21\u5f0f\uff1a 1. \u521b\u5efa\u65b0\u8868\u7ed3\u6784 2. \u5c06\u65e7\u6570\u636e\u590d\u5236\u5230\u65b0\u8868 3. \u5220\u9664\u65e7\u8868 4. \u91cd\u547d\u540d\u65b0\u8868</p> <p>\u540c\u65f6\u81ea\u52a8\u5904\u7406\u5916\u952e\u7ea6\u675f\uff0c\u786e\u4fdd\u6570\u636e\u5b8c\u6574\u6027\u3002</p>"},{"location":"guides/migrations/#5","title":"5. \u78c1\u76d8\u7a7a\u95f4\u68c0\u67e5","text":"<p>\u5728\u6267\u884c Copy-Swap \u7b49\u9700\u8981\u5927\u91cf\u7a7a\u95f4\u7684\u64cd\u4f5c\u524d\uff0c\u5f15\u64ce\u4f1a\u81ea\u52a8\u68c0\u67e5\u78c1\u76d8\u53ef\u7528\u7a7a\u95f4\uff0c\u9632\u6b62\u56e0\u7a7a\u95f4\u4e0d\u8db3\u5bfc\u81f4\u7684\u6570\u636e\u635f\u574f\u3002</p>"},{"location":"guides/migrations/#_4","title":"\u26a0\ufe0f \u6700\u4f73\u5b9e\u8df5","text":"<ol> <li>\u751f\u4ea7\u73af\u5883\u59cb\u7ec8\u4f7f\u7528 <code>safe</code> \u6a21\u5f0f\uff0c\u5e76\u914d\u5408 <code>dry_run</code> \u9884\u89c8\u53d8\u66f4\u3002</li> <li>\u914d\u7f6e Hook \u8fdb\u884c\u81ea\u52a8\u5907\u4efd\uff0c\u8fd9\u662f\u6570\u636e\u5b89\u5168\u7684\u6700\u540e\u4e00\u9053\u9632\u7ebf\u3002</li> <li>\u4f7f\u7528\u7248\u672c\u63a7\u5236 \u7ba1\u7406\u4f60\u7684\u6a21\u578b\u5b9a\u4e49\uff0c\u786e\u4fdd\u56e2\u961f\u6210\u5458\u7684 Schema \u4e00\u81f4\u3002</li> <li>\u76d1\u63a7\u8fc1\u79fb\u65e5\u5fd7\uff0c\u7279\u522b\u662f <code>WARNING</code> \u548c <code>ERROR</code> \u7ea7\u522b\u7684\u65e5\u5fd7\u3002</li> </ol>"},{"location":"guides/permissions-basic/","title":"\u00e6\u009d\u0083\u00e9\u0099\u0090\u00e6\u008e\u00a7\u00e5\u0088\u00b6","text":"<p>\u00e6\u009d\u0083\u00e9\u0099\u0090\u00e6\u008e\u00a7\u00e5\u0088\u00b6\u00e6\u0098\u00af\u00e4\u00bf\u009d\u00e6\u008a?API \u00e7\u009a\u0084\u00e5\u0085\u00b3\u00e9\u0094\u00ae\u00e3\u0080\u0082fastapi-easy \u00e6\u0094\u00af\u00e6\u008c\u0081\u00e5\u009f\u00ba\u00e4\u00ba\u008e\u00e8\u00a7\u0092\u00e8\u0089\u00b2\u00e7\u009a\u0084\u00e8\u00ae\u00bf\u00e9\u0097\u00ae\u00e6\u008e\u00a7\u00e5\u0088\u00b6\u00ef\u00bc\u0088RBAC\u00ef\u00bc\u0089\u00e5\u0092\u008c\u00e5\u009f\u00ba\u00e4\u00ba\u008e\u00e5\u00b1\u009e\u00e6\u0080\u00a7\u00e7\u009a\u0084\u00e8\u00ae\u00bf\u00e9\u0097\u00ae\u00e6\u008e\u00a7\u00e5\u0088\u00b6\u00ef\u00bc\u0088ABAC\u00ef\u00bc\u0089\u00e3\u0080?</p>"},{"location":"guides/permissions-basic/#aa1-eai14","title":"\u00e4\u00bb\u0080\u00e4\u00b9\u0088\u00e6\u0098\u00af\u00e6\u009d\u0083\u00e9\u0099\u0090\u00e6\u008e\u00a7\u00e5\u0088\u00b6\u00ef\u00bc?","text":"<p>\u00e6\u009d\u0083\u00e9\u0099\u0090\u00e6\u008e\u00a7\u00e5\u0088\u00b6\u00e5\u008f\u00af\u00e4\u00bb\u00a5\u00ef\u00bc?</p> <ul> <li>\u00e2\u009c?\u00e9\u0099\u0090\u00e5\u0088\u00b6\u00e7\u0094\u00a8\u00e6\u0088\u00b7\u00e8\u00ae\u00bf\u00e9\u0097\u00ae</li> <li>\u00e2\u009c?\u00e4\u00bf\u009d\u00e6\u008a\u00a4\u00e6\u0095\u008f\u00e6\u0084\u009f\u00e6\u0095\u00b0\u00e6\u008d\u00ae</li> <li>\u00e2\u009c?\u00e5\u00ae\u009e\u00e7\u008e\u00b0\u00e5\u00a4\u009a\u00e7\u00a7\u009f\u00e6\u0088?</li> <li>\u00e2\u009c?\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e7\u0094\u00a8\u00e6\u0088\u00b7\u00e6\u0093\u008d\u00e4\u00bd\u009c</li> </ul>"},{"location":"guides/permissions-basic/#aoaoee2ceeai14rbaci14","title":"\u00e5\u009f\u00ba\u00e4\u00ba\u008e\u00e8\u00a7\u0092\u00e8\u0089\u00b2\u00e7\u009a\u0084\u00e8\u00ae\u00bf\u00e9\u0097\u00ae\u00e6\u008e\u00a7\u00e5\u0088\u00b6\u00ef\u00bc\u0088RBAC\u00ef\u00bc?","text":""},{"location":"guides/permissions-basic/#aa1ee2ae","title":"\u00e5\u00ae\u009a\u00e4\u00b9\u0089\u00e8\u00a7\u0092\u00e8\u0089\u00b2\u00e5\u0092\u008c\u00e6\u009d\u0083\u00e9\u0099?","text":"<pre><code>from fastapi_easy.core.permissions import Role, Permission, RoleBasedAccessControl\n\n# \u00e5\u00ae\u009a\u00e4\u00b9\u0089\u00e6\u009d\u0083\u00e9\u0099\u0090\nclass Permission(str, Enum):\n    CREATE = \"create\"\n    READ = \"read\"\n    UPDATE = \"update\"\n    DELETE = \"delete\"\n    ADMIN = \"admin\"\n\n# \u00e5\u00ae\u009a\u00e4\u00b9\u0089\u00e8\u00a7\u0092\u00e8\u0089\u00b2\nclass Role(str, Enum):\n    ADMIN = \"admin\"\n    EDITOR = \"editor\"\n    VIEWER = \"viewer\"\n    USER = \"user\"\n\n# \u00e5\u0088\u009b\u00e5\u00bb\u00ba RBAC \u00e5\u00ae\u009e\u00e4\u00be\u008b\nrbac = RoleBasedAccessControl()\n\n# \u00e9\u0085\u008d\u00e7\u00bd\u00ae\u00e8\u00a7\u0092\u00e8\u0089\u00b2\u00e6\u009d\u0083\u00e9\u0099\u0090\nrbac.add_permission(Role.ADMIN, Permission.ADMIN)\nrbac.add_permission(Role.EDITOR, Permission.CREATE)\nrbac.add_permission(Role.EDITOR, Permission.READ)\nrbac.add_permission(Role.EDITOR, Permission.UPDATE)\nrbac.add_permission(Role.VIEWER, Permission.READ)\nrbac.add_permission(Role.USER, Permission.READ)\n</code></pre>"},{"location":"guides/permissions-basic/#e","title":"\u00e6\u00a3\u0080\u00e6\u009f\u00a5\u00e6\u009d\u0083\u00e9\u0099?","text":"<pre><code># \u00e6\u00a3\u0080\u00e6\u009f\u00a5\u00e7\u0094\u00a8\u00e6\u0088\u00b7\u00e6\u0098\u00af\u00e5\u0090\u00a6\u00e6\u009c\u0089\u00e6\u009d\u0083\u00e9\u0099\u0090\nif rbac.has_permission(Role.EDITOR, Permission.UPDATE):\n    # \u00e5\u0085\u0081\u00e8\u00ae\u00b8\u00e6\u009b\u00b4\u00e6\u0096\u00b0\n    pass\nelse:\n    # \u00e6\u008b\u0092\u00e7\u00bb\u009d\u00e6\u009b\u00b4\u00e6\u0096\u00b0\n    raise PermissionDeniedError(\"No permission to update\")\n</code></pre>"},{"location":"guides/permissions-basic/#aoaoaceeai14abaci14","title":"\u00e5\u009f\u00ba\u00e4\u00ba\u008e\u00e5\u00b1\u009e\u00e6\u0080\u00a7\u00e7\u009a\u0084\u00e8\u00ae\u00bf\u00e9\u0097\u00ae\u00e6\u008e\u00a7\u00e5\u0088\u00b6\u00ef\u00bc\u0088ABAC\u00ef\u00bc?","text":""},{"location":"guides/permissions-basic/#aa1cc","title":"\u00e5\u00ae\u009a\u00e4\u00b9\u0089\u00e7\u00ad\u0096\u00e7\u0095\u00a5","text":"<pre><code>from fastapi_easy.core.permissions import AttributeBasedAccessControl\n\nabac = AttributeBasedAccessControl()\n\n# \u00e6\u00b7\u00bb\u00e5\u008a\u00a0\u00e7\u00ad\u0096\u00e7\u0095\u00a5\u00ef\u00bc\u009a\u00e5\u008f\u00aa\u00e6\u009c\u0089\u00e6\u0089\u0080\u00e6\u009c\u0089\u00e8\u0080\u0085\u00e5\u008f\u00af\u00e4\u00bb\u00a5\u00e5\u0088\u00a0\u00e9\u0099\u00a4\u00e8\u0087\u00aa\u00e5\u00b7\u00b1\u00e7\u009a\u0084\u00e9\u00a1\u00b9\u00e7\u009b\u00ae\nabac.add_policy(\n    name=\"owner_delete\",\n    resource=\"item\",\n    action=\"delete\",\n    condition=lambda context: context.user_id == context.resource.owner_id\n)\n\n# \u00e6\u00b7\u00bb\u00e5\u008a\u00a0\u00e7\u00ad\u0096\u00e7\u0095\u00a5\u00ef\u00bc\u009a\u00e5\u008f\u00aa\u00e6\u009c\u0089\u00e7\u00ae\u00a1\u00e7\u0090\u0086\u00e5\u0091\u0098\u00e5\u008f\u00af\u00e4\u00bb\u00a5\u00e5\u0088\u00a0\u00e9\u0099\u00a4\u00e4\u00bb\u00bb\u00e4\u00bd\u0095\u00e9\u00a1\u00b9\u00e7\u009b\u00ae\nabac.add_policy(\n    name=\"admin_delete\",\n    resource=\"item\",\n    action=\"delete\",\n    condition=lambda context: \"admin\" in context.user_roles\n)\n</code></pre>"},{"location":"guides/permissions-basic/#e-a14cc","title":"\u00e8\u00af\u0084\u00e4\u00bc\u00b0\u00e7\u00ad\u0096\u00e7\u0095\u00a5","text":"<pre><code>from fastapi_easy.core.permissions import PermissionContext\n\n# \u00e5\u0088\u009b\u00e5\u00bb\u00ba\u00e6\u009d\u0083\u00e9\u0099\u0090\u00e4\u00b8\u008a\u00e4\u00b8\u008b\u00e6\u0096?\ncontext = PermissionContext(\n    user_id=user.id,\n    roles=user.roles,\n    permissions=user.permissions,\n    attributes={\"resource\": item}\n)\n\n# \u00e6\u00a3\u0080\u00e6\u009f\u00a5\u00e6\u0098\u00af\u00e5\u0090\u00a6\u00e5\u0085\u0081\u00e8\u00ae\u00b8\u00e5\u0088\u00a0\u00e9\u0099?\nif abac.evaluate(context, \"item\", \"delete\"):\n    # \u00e5\u0085\u0081\u00e8\u00ae\u00b8\u00e5\u0088\u00a0\u00e9\u0099\u00a4\n    pass\nelse:\n    # \u00e6\u008b\u0092\u00e7\u00bb\u009d\u00e5\u0088\u00a0\u00e9\u0099\u00a4\n    raise PermissionDeniedError(\"No permission to delete this item\")\n</code></pre>"},{"location":"guides/permissions-basic/#eacrudrouter","title":"\u00e9\u009b\u0086\u00e6\u0088\u0090\u00e5\u0088?CRUDRouter","text":""},{"location":"guides/permissions-basic/#e-c12e","title":"\u00e9\u0085\u008d\u00e7\u00bd\u00ae\u00e6\u009d\u0083\u00e9\u0099\u0090","text":"<pre><code>from fastapi_easy import CRUDRouter\nfrom fastapi_easy.core.permissions import PermissionConfig\n\nconfig = PermissionConfig(\n    enabled=True,\n    default_role=Role.USER,\n    require_authentication=True,\n)\n\nrouter = CRUDRouter(\n    schema=ItemSchema,\n    adapter=adapter,\n    permission_config=config,\n    rbac=rbac,\n    abac=abac,\n)\n</code></pre>"},{"location":"guides/permissions-basic/#a-eaa-e","title":"\u00e5\u009c\u00a8\u00e9\u0092\u00a9\u00e5\u00ad\u0090\u00e4\u00b8\u00ad\u00e6\u00a3\u0080\u00e6\u009f\u00a5\u00e6\u009d\u0083\u00e9\u0099?","text":"<pre><code>async def before_create(context):\n    # \u00e6\u00a3\u0080\u00e6\u009f\u00a5\u00e5\u0088\u009b\u00e5\u00bb\u00ba\u00e6\u009d\u0083\u00e9\u0099?\n    if not rbac.has_permission(context.user_role, Permission.CREATE):\n        raise PermissionDeniedError(\"No permission to create\")\n\nasync def before_delete(context):\n    # \u00e6\u00a3\u0080\u00e6\u009f\u00a5\u00e5\u0088\u00a0\u00e9\u0099\u00a4\u00e6\u009d\u0083\u00e9\u0099?\n    if not abac.evaluate(context, \"item\", \"delete\"):\n        raise PermissionDeniedError(\"No permission to delete this item\")\n\nrouter.hooks.register(\"before_create\", before_create)\nrouter.hooks.register(\"before_delete\", before_delete)\n</code></pre>"},{"location":"guides/permissions-basic/#ecoc-3","title":"\u00e9\u00ab\u0098\u00e7\u00ba\u00a7\u00e7\u0094\u00a8\u00e6\u00b3\u0095","text":""},{"location":"guides/permissions-basic/#ac","title":"\u00e5\u00a4\u009a\u00e7\u00a7\u009f\u00e6\u0088\u00b7\u00e6\u0094\u00af\u00e6\u008c?","text":"<pre><code># \u00e6\u00b7\u00bb\u00e5\u008a\u00a0\u00e7\u00ad\u0096\u00e7\u0095\u00a5\u00ef\u00bc\u009a\u00e7\u0094\u00a8\u00e6\u0088\u00b7\u00e5\u008f\u00aa\u00e8\u0083\u00bd\u00e8\u00ae\u00bf\u00e9\u0097\u00ae\u00e8\u0087\u00aa\u00e5\u00b7\u00b1\u00e7\u00a7\u009f\u00e6\u0088\u00b7\u00e7\u009a\u0084\u00e6\u0095\u00b0\u00e6\u008d\u00ae\nabac.add_policy(\n    name=\"tenant_isolation\",\n    resource=\"item\",\n    action=\"read\",\n    condition=lambda context: context.tenant_id == context.resource.tenant_id\n)\n</code></pre>"},{"location":"guides/permissions-basic/#a-e","title":"\u00e5\u008a\u00a8\u00e6\u0080\u0081\u00e6\u009d\u0083\u00e9\u0099?","text":"<pre><code># \u00e6\u00a0\u00b9\u00e6\u008d\u00ae\u00e6\u0097\u00b6\u00e9\u0097\u00b4\u00e9\u0099\u0090\u00e5\u0088\u00b6\u00e8\u00ae\u00bf\u00e9\u0097\u00ae\nabac.add_policy(\n    name=\"time_based_access\",\n    resource=\"item\",\n    action=\"update\",\n    condition=lambda context: context.is_business_hours()\n)\n\n# \u00e6\u00a0\u00b9\u00e6\u008d\u00ae\u00e6\u0095\u00b0\u00e6\u008d\u00ae\u00e6\u0095\u008f\u00e6\u0084\u009f\u00e6\u0080\u00a7\u00e9\u0099\u0090\u00e5\u0088\u00b6\u00e8\u00ae\u00bf\u00e9\u0097?\nabac.add_policy(\n    name=\"data_sensitivity\",\n    resource=\"item\",\n    action=\"read\",\n    condition=lambda context: context.user_clearance_level &gt;= context.resource.sensitivity_level\n)\n</code></pre>"},{"location":"guides/permissions-basic/#a123ae","title":"\u00e6\u009c\u0080\u00e4\u00bd\u00b3\u00e5\u00ae\u009e\u00e8\u00b7?","text":""},{"location":"guides/permissions-basic/#1-a12c-aeaa","title":"1. \u00e4\u00bd\u00bf\u00e7\u0094\u00a8\u00e6\u009c\u0080\u00e5\u00b0\u008f\u00e6\u009d\u0083\u00e9\u0099\u0090\u00e5\u008e\u009f\u00e5\u0088?","text":"<pre><code># \u00e2\u009c?\u00e6\u008e\u00a8\u00e8\u008d\u0090\u00ef\u00bc\u009a\u00e6\u009c\u0080\u00e5\u00b0\u008f\u00e6\u009d\u0083\u00e9\u0099?\nrbac.add_permission(Role.USER, Permission.READ)\n\n# \u00e2\u009d?\u00e4\u00b8\u008d\u00e6\u008e\u00a8\u00e8\u008d\u0090\u00ef\u00bc\u009a\u00e8\u00bf\u0087\u00e5\u00ba\u00a6\u00e6\u009d\u0083\u00e9\u0099\u0090\nrbac.add_permission(Role.USER, Permission.ADMIN)\n</code></pre>"},{"location":"guides/permissions-basic/#2-aaee","title":"2. \u00e5\u00ae\u009a\u00e6\u009c\u009f\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u009d\u0083\u00e9\u0099\u0090","text":"<pre><code># \u00e5\u00ae\u009a\u00e6\u009c\u009f\u00e6\u00a3\u0080\u00e6\u009f\u00a5\u00e7\u0094\u00a8\u00e6\u0088\u00b7\u00e6\u009d\u0083\u00e9\u0099?\nfor user in users:\n    permissions = rbac.get_permissions(user.role)\n    logger.info(f\"User {user.id} permissions: {permissions}\")\n</code></pre>"},{"location":"guides/permissions-basic/#3-a12c-ec14a","title":"3. \u00e4\u00bd\u00bf\u00e7\u0094\u00a8\u00e6\u009d\u0083\u00e9\u0099\u0090\u00e7\u00bc\u0093\u00e5\u00ad\u0098","text":"<pre><code># \u00e7\u00bc\u0093\u00e5\u00ad\u0098\u00e6\u009d\u0083\u00e9\u0099\u0090\u00e6\u00a3\u0080\u00e6\u009f\u00a5\u00e7\u00bb\u0093\u00e6\u009e?\nfrom functools import lru_cache\n\n@lru_cache(maxsize=1000)\ndef check_permission(role: str, permission: str) -&gt; bool:\n    return rbac.has_permission(role, permission)\n</code></pre>"},{"location":"guides/permissions-basic/#4-ea12ec","title":"4. \u00e8\u00ae\u00b0\u00e5\u00bd\u0095\u00e6\u009d\u0083\u00e9\u0099\u0090\u00e6\u008b\u0092\u00e7\u00bb\u009d","text":"<pre><code># \u00e8\u00ae\u00b0\u00e5\u00bd\u0095\u00e6\u0089\u0080\u00e6\u009c\u0089\u00e6\u009d\u0083\u00e9\u0099\u0090\u00e6\u008b\u0092\u00e7\u00bb?\ntry:\n    if not rbac.has_permission(user_role, permission):\n        raise PermissionDeniedError()\nexcept PermissionDeniedError:\n    logger.warning(f\"Permission denied: {user_id} -&gt; {permission}\")\n    raise\n</code></pre>"},{"location":"guides/permissions-basic/#a-eee","title":"\u00e5\u00b8\u00b8\u00e8\u00a7\u0081\u00e9\u0097\u00ae\u00e9\u00a2\u0098","text":"<p>Q: RBAC \u00e5\u0092?ABAC \u00e6\u009c\u0089\u00e4\u00bb\u0080\u00e4\u00b9\u0088\u00e5\u008c\u00ba\u00e5\u0088\u00ab\u00ef\u00bc\u009f</p> <p>A: RBAC \u00e5\u009f\u00ba\u00e4\u00ba\u008e\u00e7\u0094\u00a8\u00e6\u0088\u00b7\u00e8\u00a7\u0092\u00e8\u0089\u00b2\u00ef\u00bc\u008cABAC \u00e5\u009f\u00ba\u00e4\u00ba\u008e\u00e5\u00b1\u009e\u00e6\u0080\u00a7\u00e5\u0092\u008c\u00e6\u009d\u00a1\u00e4\u00bb\u00b6\u00e3\u0080\u0082ABAC \u00e6\u009b\u00b4\u00e7\u0081\u00b5\u00e6\u00b4\u00bb\u00e3\u0080?</p> <p>Q: \u00e5\u00a6\u0082\u00e4\u00bd\u0095\u00e5\u00ae\u009e\u00e7\u008e\u00b0\u00e5\u00a4\u009a\u00e7\u00a7\u009f\u00e6\u0088\u00b7\u00ef\u00bc\u009f</p> <p>A: \u00e4\u00bd\u00bf\u00e7\u0094\u00a8 ABAC \u00e6\u00b7\u00bb\u00e5\u008a\u00a0\u00e7\u00a7\u009f\u00e6\u0088\u00b7\u00e9\u009a\u0094\u00e7\u00a6\u00bb\u00e7\u00ad\u0096\u00e7\u0095\u00a5\u00e3\u0080?</p> <p>*Q: \u00e5\u00a6\u0082\u00e4\u00bd\u0095\u00e5\u00a4\u0084\u00e7\u0090\u0086\u00e6\u009d\u0083\u00e9\u0099\u0090\u00e6\u008b\u0092\u00e7\u00bb\u009d\u00ef\u00bc?</p> <p>A: \u00e6\u008a\u009b\u00e5\u0087\u00ba <code>PermissionDeniedError</code> \u00e5\u00bc\u0082\u00e5\u00b8\u00b8\u00ef\u00bc\u008c\u00e7\u0094\u00b1\u00e4\u00b8\u00ad\u00e9\u0097\u00b4\u00e4\u00bb\u00b6\u00e5\u00a4\u0084\u00e7\u0090\u0086\u00e3\u0080?</p> <p>Q: \u00e6\u009d\u0083\u00e9\u0099\u0090\u00e6\u00a3\u0080\u00e6\u009f\u00a5\u00e4\u00bc\u009a\u00e5\u00bd\u00b1\u00e5\u0093\u008d\u00e6\u0080\u00a7\u00e8\u0083\u00bd\u00e5\u0090\u0097\u00ef\u00bc\u009f</p> <p>A: \u00e4\u00bc\u009a\u00e6\u009c\u0089\u00e8\u00bd\u00bb\u00e5\u00be\u00ae\u00e5\u00bd\u00b1\u00e5\u0093\u008d\u00ef\u00bc\u008c\u00e5\u00bb\u00ba\u00e8\u00ae\u00ae\u00e4\u00bd\u00bf\u00e7\u0094\u00a8\u00e7\u00bc\u0093\u00e5\u00ad\u0098\u00e3\u0080?</p>"},{"location":"guides/permissions-basic/#c","title":"\u00e6\u0080\u00bb\u00e7\u00bb\u0093","text":"<p>\u00e6\u009d\u0083\u00e9\u0099\u0090\u00e6\u008e\u00a7\u00e5\u0088\u00b6\u00e6\u0098\u00af\u00e4\u00bf\u009d\u00e6\u008a?API \u00e7\u009a\u0084\u00e5\u0085\u00b3\u00e9\u0094\u00ae\u00ef\u00bc\u009a</p> <ul> <li>\u00e2\u009c?\u00e4\u00bd\u00bf\u00e7\u0094\u00a8 RBAC \u00e8\u00bf\u009b\u00e8\u00a1\u008c\u00e5\u009f\u00ba\u00e6\u009c\u00ac\u00e6\u009d\u0083\u00e9\u0099\u0090\u00e7\u00ae\u00a1\u00e7\u0090\u0086</li> <li>\u00e2\u009c?\u00e4\u00bd\u00bf\u00e7\u0094\u00a8 ABAC \u00e8\u00bf\u009b\u00e8\u00a1\u008c\u00e5\u00a4\u008d\u00e6\u009d\u0082\u00e6\u009d\u0083\u00e9\u0099\u0090\u00e7\u00ae\u00a1\u00e7\u0090\u0086</li> <li>\u00e2\u009c?\u00e9\u0081\u00b5\u00e5\u00be\u00aa\u00e6\u009c\u0080\u00e5\u00b0\u008f\u00e6\u009d\u0083\u00e9\u0099\u0090\u00e5\u008e\u009f\u00e5\u0088?</li> <li>\u00e2\u009c?\u00e5\u00ae\u009a\u00e6\u009c\u009f\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u009d\u0083\u00e9\u0099\u0090</li> </ul> <p>*\u00e4\u00b8\u008b\u00e4\u00b8\u0080\u00e6\u00ad?: \u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u0097\u00a5\u00e5\u00bf\u0097 \u00e2\u0086?</p>"},{"location":"guides/querying/","title":"\u00e6\u009f\u00a5\u00e8\u00af\u00a2\u00e6\u008c\u0087\u00e5\u008d\u0097\u00ef\u00bc\u009a\u00e6\u0090\u009c\u00e7\u00b4\u00a2\u00e3\u0080\u0081\u00e8\u00bf\u0087\u00e6\u00bb\u00a4\u00e4\u00b8\u008e\u00e6\u008e\u0092\u00e5\u00ba\u008f","text":""},{"location":"guides/querying/#e","title":"\u00e6\u00a6\u0082\u00e8\u00bf\u00b0","text":"<p>fastapi-easy \u00e6\u008f\u0090\u00e4\u00be\u009b\u00e4\u00ba\u0086\u00e5\u00bc\u00ba\u00e5\u00a4\u00a7\u00e7\u009a\u0084\u00e6\u009f\u00a5\u00e8\u00af\u00a2\u00e5\u008a\u009f\u00e8\u0083\u00bd\u00ef\u00bc\u008c\u00e5\u0085\u0081\u00e8\u00ae\u00b8\u00e5\u00ae\u00a2\u00e6\u0088\u00b7\u00e7\u00ab\u00af\u00e9\u0080\u009a\u00e8\u00bf\u0087 URL \u00e5\u008f\u0082\u00e6\u0095\u00b0\u00e5\u00af\u00b9\u00e6\u0095\u00b0\u00e6\u008d\u00ae\u00e8\u00bf\u009b\u00e8\u00a1\u008c\u00e6\u0090\u009c\u00e7\u00b4\u00a2\u00e3\u0080\u0081\u00e8\u00bf\u0087\u00e6\u00bb\u00a4\u00e5\u0092\u008c\u00e6\u008e\u0092\u00e5\u00ba\u008f\u00e3\u0080\u0082\u00e8\u00bf\u0099\u00e4\u00ba\u009b\u00e5\u008a\u009f\u00e8\u0083\u00bd\u00e6\u0098\u00af\u00e8\u0087\u00aa\u00e5\u008a\u00a8\u00e7\u0094\u009f\u00e6\u0088\u0090\u00e7\u009a\u0084\u00ef\u00bc\u008c\u00e6\u0097\u00a0\u00e9\u009c\u0080\u00e7\u00bc\u0096\u00e5\u0086\u0099\u00e9\u00a2\u009d\u00e5\u00a4\u0096\u00e7\u009a?SQL \u00e6\u0088\u0096\u00e9\u0080\u00bb\u00e8\u00be\u0091\u00e4\u00bb\u00a3\u00e7\u00a0\u0081\u00e3\u0080?</p>"},{"location":"guides/querying/#1-e-filtering","title":"1. \u00e8\u00bf\u0087\u00e6\u00bb\u00a4 (Filtering)","text":""},{"location":"guides/querying/#a-c-e","title":"\u00e5\u0090\u00af\u00e7\u0094\u00a8\u00e8\u00bf\u0087\u00e6\u00bb\u00a4","text":"<p>\u00e5\u009c?<code>CRUDRouter</code> \u00e4\u00b8\u00ad\u00e8\u00ae\u00be\u00e7\u00bd?<code>enable_filters=True</code> \u00e5\u00b9\u00b6\u00e6\u008c\u0087\u00e5\u00ae?<code>filter_fields</code>\u00ef\u00bc?</p> <pre><code>from fastapi_easy import CRUDRouter\n\nrouter = CRUDRouter(\n    schema=Item,\n    adapter=adapter,\n    enable_filters=True,\n    filter_fields=[\"name\", \"price\", \"category\"],  # \u00e6\u008c\u0087\u00e5\u00ae\u009a\u00e5\u0085\u0081\u00e8\u00ae\u00b8\u00e8\u00bf\u0087\u00e6\u00bb\u00a4\u00e7\u009a\u0084\u00e5\u00ad\u0097\u00e6\u00ae?\n)\n</code></pre>"},{"location":"guides/querying/#ca12c","title":"\u00e6\u0094\u00af\u00e6\u008c\u0081\u00e7\u009a\u0084\u00e6\u0093\u008d\u00e4\u00bd\u009c\u00e7\u00ac\u00a6","text":"<p>fastapi-easy \u00e4\u00bd\u00bf\u00e7\u0094\u00a8 <code>\u00e5\u00ad\u0097\u00e6\u00ae\u00b5\u00e5\u0090\u008d__\u00e6\u0093\u008d\u00e4\u00bd\u009c\u00e7\u00ac\u00a6</code> \u00e7\u009a\u0084\u00e6\u00a0\u00bc\u00e5\u00bc\u008f\u00ef\u00bc\u0088\u00e5\u008f\u008c\u00e4\u00b8\u008b\u00e5\u0088\u0092\u00e7\u00ba\u00bf\u00ef\u00bc\u0089\u00e6\u009d\u00a5\u00e6\u008c\u0087\u00e5\u00ae\u009a\u00e8\u00bf\u0087\u00e6\u00bb\u00a4\u00e6\u009d\u00a1\u00e4\u00bb\u00b6\u00e3\u0080\u0082\u00e9\u00bb\u0098\u00e8\u00ae\u00a4\u00e6\u0083\u0085\u00e5\u0086\u00b5\u00e4\u00b8\u008b\u00ef\u00bc\u0088\u00e4\u00b8\u008d\u00e5\u008a\u00a0\u00e6\u0093\u008d\u00e4\u00bd\u009c\u00e7\u00ac\u00a6\u00ef\u00bc\u0089\u00e4\u00b8\u00ba\u00e7\u00b2\u00be\u00e7\u00a1\u00ae\u00e5\u008c\u00b9\u00e9\u0085\u008d\u00e3\u0080?</p> \u00e6\u0093\u008d\u00e4\u00bd\u009c\u00e7\u00ac? \u00e6\u008f\u008f\u00e8\u00bf\u00b0 URL \u00e7\u00a4\u00ba\u00e4\u00be\u008b SQL \u00e7\u00ad\u0089\u00e4\u00bb\u00b7 (\u00e6\u0097? \u00e7\u00b2\u00be\u00e7\u00a1\u00ae\u00e5\u008c\u00b9\u00e9\u0085\u008d <code>?name=apple</code> <code>name = 'apple'</code> <code>ne</code> \u00e4\u00b8\u008d\u00e7\u00ad\u0089\u00e4\u00ba? <code>?name__ne=apple</code> <code>name != 'apple'</code> <code>gt</code> \u00e5\u00a4\u00a7\u00e4\u00ba\u008e <code>?price__gt=10</code> <code>price &gt; 10</code> <code>gte</code> \u00e5\u00a4\u00a7\u00e4\u00ba\u008e\u00e7\u00ad\u0089\u00e4\u00ba\u008e <code>?price__gte=10</code> <code>price &gt;= 10</code> <code>lt</code> \u00e5\u00b0\u008f\u00e4\u00ba\u008e <code>?price__lt=50</code> <code>price &lt; 50</code> <code>lte</code> \u00e5\u00b0\u008f\u00e4\u00ba\u008e\u00e7\u00ad\u0089\u00e4\u00ba\u008e <code>?price__lte=50</code> <code>price &lt;= 50</code> <code>in</code> \u00e5\u008c\u0085\u00e5\u0090\u00ab\u00e4\u00ba? <code>?category__in=fruit,meat</code> <code>category IN ('fruit', 'meat')</code> <code>like</code> \u00e6\u00a8\u00a1\u00e7\u00b3\u008a\u00e5\u008c\u00b9\u00e9\u0085\u008d <code>?name__like=%app%</code> <code>name LIKE '%app%'</code> <code>ilike</code> \u00e4\u00b8\u008d\u00e5\u008c\u00ba\u00e5\u0088\u0086\u00e5\u00a4\u00a7\u00e5\u00b0\u008f\u00e5\u0086\u0099\u00e6\u00a8\u00a1\u00e7\u00b3\u008a <code>?name__ilike=%app%</code> <code>name ILIKE '%app%'</code> (PostgreSQL)"},{"location":"guides/querying/#cae","title":"\u00e7\u00bb\u0084\u00e5\u0090\u0088\u00e8\u00bf\u0087\u00e6\u00bb\u00a4","text":"<p>\u00e5\u00a4\u009a\u00e4\u00b8\u00aa\u00e5\u008f\u0082\u00e6\u0095\u00b0\u00e4\u00b9\u008b\u00e9\u0097\u00b4\u00e6\u0098?AND \u00e5\u0085\u00b3\u00e7\u00b3\u00bb\u00ef\u00bc?</p> <pre><code>GET /items?name__like=%apple%&amp;price__gt=5&amp;category=fruit\n</code></pre> <p>SQL: <pre><code>WHERE name LIKE '%apple%' \n  AND price &gt; 5 \n  AND category = 'fruit'\n</code></pre></p>"},{"location":"guides/querying/#2-ao-sorting","title":"2. \u00e6\u008e\u0092\u00e5\u00ba\u008f (Sorting)","text":""},{"location":"guides/querying/#a-c-ao","title":"\u00e5\u0090\u00af\u00e7\u0094\u00a8\u00e6\u008e\u0092\u00e5\u00ba\u008f","text":"<p>\u00e5\u009c?<code>CRUDRouter</code> \u00e4\u00b8\u00ad\u00e8\u00ae\u00be\u00e7\u00bd?<code>enable_sorters=True</code> \u00e5\u00b9\u00b6\u00e6\u008c\u0087\u00e5\u00ae?<code>sort_fields</code>\u00ef\u00bc?</p> <pre><code>router = CRUDRouter(\n    schema=Item,\n    adapter=adapter,\n    enable_sorters=True,\n    sort_fields=[\"name\", \"price\", \"created_at\"],\n    default_sort=\"-created_at\",  # \u00e5\u008f\u00af\u00e9\u0080\u0089\u00ef\u00bc\u009a\u00e9\u00bb\u0098\u00e8\u00ae\u00a4\u00e6\u008e\u0092\u00e5\u00ba\u008f\n)\n</code></pre>"},{"location":"guides/querying/#a12c-13","title":"\u00e4\u00bd\u00bf\u00e7\u0094\u00a8\u00e6\u0096\u00b9\u00e6\u00b3\u0095","text":"<p>\u00e4\u00bd\u00bf\u00e7\u0094\u00a8 <code>sort</code> \u00e5\u008f\u0082\u00e6\u0095\u00b0\u00e6\u008c\u0087\u00e5\u00ae\u009a\u00e6\u008e\u0092\u00e5\u00ba\u008f\u00e5\u00ad\u0097\u00e6\u00ae\u00b5\u00e3\u0080?</p> <ul> <li>\u00e5\u008d\u0087\u00e5\u00ba\u008f\u00ef\u00bc\u009a\u00e7\u009b\u00b4\u00e6\u008e\u00a5\u00e4\u00bd\u00bf\u00e7\u0094\u00a8\u00e5\u00ad\u0097\u00e6\u00ae\u00b5\u00e5\u0090\u008d\u00ef\u00bc\u008c\u00e5\u00a6\u0082 <code>sort=price</code></li> <li>\u00e9\u0099\u008d\u00e5\u00ba\u008f\u00ef\u00bc\u009a\u00e5\u009c\u00a8\u00e5\u00ad\u0097\u00e6\u00ae\u00b5\u00e5\u0090\u008d\u00e5\u0089\u008d\u00e5\u008a\u00a0\u00e8\u00b4\u009f\u00e5\u008f?<code>-</code>\u00ef\u00bc\u008c\u00e5\u00a6\u0082 <code>sort=-price</code></li> <li>*\u00e5\u00a4\u009a\u00e5\u00ad\u0097\u00e6\u00ae?\u00ef\u00bc\u009a\u00e7\u0094\u00a8\u00e9\u0080\u0097\u00e5\u008f\u00b7\u00e5\u0088\u0086\u00e9\u009a\u0094\u00ef\u00bc\u008c\u00e5\u00a6\u0082 <code>sort=category,-price</code></li> </ul>"},{"location":"guides/querying/#coa34","title":"\u00e7\u00a4\u00ba\u00e4\u00be\u008b","text":"\u00e6\u008f\u008f\u00e8\u00bf\u00b0 URL \u00e7\u00a4\u00ba\u00e4\u00be\u008b SQL \u00e7\u00ad\u0089\u00e4\u00bb\u00b7 \u00e6\u008c\u0089\u00e4\u00bb\u00b7\u00e6\u00a0\u00bc\u00e5\u008d\u0087\u00e5\u00ba? <code>?sort=price</code> <code>ORDER BY price ASC</code> \u00e6\u008c\u0089\u00e4\u00bb\u00b7\u00e6\u00a0\u00bc\u00e9\u0099\u008d\u00e5\u00ba? <code>?sort=-price</code> <code>ORDER BY price DESC</code> \u00e5\u0085\u0088\u00e5\u0088\u0086\u00e7\u00b1\u00bb\u00e5\u008d\u0087\u00e5\u00ba\u008f\u00ef\u00bc\u008c\u00e5\u0090\u008e\u00e4\u00bb\u00b7\u00e6\u00a0\u00bc\u00e9\u0099\u008d\u00e5\u00ba? <code>?sort=category,-price</code> <code>ORDER BY category ASC, price DESC</code>"},{"location":"guides/querying/#3-caa12c-filtering-sorting-pagination","title":"3. \u00e7\u00bb\u0084\u00e5\u0090\u0088\u00e4\u00bd\u00bf\u00e7\u0094\u00a8 (Filtering + Sorting + Pagination)","text":"<p>\u00e8\u00bf\u0087\u00e6\u00bb\u00a4\u00e3\u0080\u0081\u00e6\u008e\u0092\u00e5\u00ba\u008f\u00e5\u0092\u008c\u00e5\u0088\u0086\u00e9\u00a1\u00b5\u00e5\u008f\u00af\u00e4\u00bb\u00a5\u00e5\u00ae\u008c\u00e7\u00be\u008e\u00e7\u00bb\u0093\u00e5\u0090\u0088\u00e4\u00bd\u00bf\u00e7\u0094\u00a8\u00e3\u0080?</p> <pre><code>GET /items?category=fruit&amp;price__gt=10&amp;sort=-price&amp;skip=0&amp;limit=20\n</code></pre> <p>\u00e9\u0080\u00bb\u00e8\u00be\u0091\u00e9\u00a1\u00ba\u00e5\u00ba\u008f\u00ef\u00bc? 1.  Filter: \u00e7\u00ad\u009b\u00e9\u0080?<code>category='fruit'</code> \u00e4\u00b8?<code>price &gt; 10</code> \u00e7\u009a\u0084\u00e8\u00ae\u00b0\u00e5\u00bd? 2.  Sort: \u00e6\u008c?<code>price</code> \u00e9\u0099\u008d\u00e5\u00ba\u008f\u00e6\u008e\u0092\u00e5\u0088\u0097 3.  Paginate: \u00e8\u00b7\u00b3\u00e8\u00bf\u0087\u00e5\u0089?0 \u00e6\u009d\u00a1\u00ef\u00bc\u008c\u00e5\u008f?20 \u00e6\u009d?</p>"},{"location":"guides/querying/#4-a-eee-faq","title":"4. \u00e5\u00b8\u00b8\u00e8\u00a7\u0081\u00e9\u0097\u00ae\u00e9\u00a2\u0098 (FAQ)","text":"<p>*Q: \u00e5\u00a6\u0082\u00e4\u00bd\u0095\u00e6\u009f\u00a5\u00e8\u00af\u00a2\u00e7\u00a9\u00ba\u00e5\u0080?(NULL)\u00ef\u00bc? A: \u00e7\u009b\u00ae\u00e5\u0089\u008d\u00e6\u009a\u0082\u00e4\u00b8\u008d\u00e6\u0094\u00af\u00e6\u008c\u0081\u00e7\u009b\u00b4\u00e6\u008e\u00a5\u00e6\u009f\u00a5\u00e8\u00af\u00a2 NULL\u00ef\u00bc\u008c\u00e5\u00bb\u00ba\u00e8\u00ae\u00ae\u00e5\u009c\u00a8\u00e8\u00ae\u00be\u00e8\u00ae\u00a1\u00e6\u0095\u00b0\u00e6\u008d\u00ae\u00e5\u00ba\u0093\u00e6\u0097\u00b6\u00e8\u00ae\u00be\u00e7\u00bd\u00ae\u00e9\u00bb\u0098\u00e8\u00ae\u00a4\u00e5\u0080\u00bc\u00e3\u0080\u0082\u00e6\u0088\u0096\u00e8\u0080\u0085\u00e4\u00bd\u00bf\u00e7\u0094\u00a8\u00e8\u0087\u00aa\u00e5\u00ae\u009a\u00e4\u00b9\u0089\u00e8\u00bf\u0087\u00e6\u00bb\u00a4\u00e5\u0099\u00a8\u00ef\u00bc\u0088\u00e9\u00ab\u0098\u00e7\u00ba\u00a7\u00e5\u008a\u009f\u00e8\u0083\u00bd\u00ef\u00bc\u0089\u00e3\u0080?</p> <p>Q: <code>like</code> \u00e5\u0092?<code>ilike</code> \u00e7\u009a\u0084\u00e5\u008c\u00ba\u00e5\u0088\u00ab\u00ef\u00bc\u009f A: <code>like</code> \u00e9\u0080\u009a\u00e5\u00b8\u00b8\u00e5\u008c\u00ba\u00e5\u0088\u0086\u00e5\u00a4\u00a7\u00e5\u00b0\u008f\u00e5\u0086\u0099\u00ef\u00bc\u0088\u00e5\u008f\u0096\u00e5\u0086\u00b3\u00e4\u00ba\u008e\u00e6\u0095\u00b0\u00e6\u008d\u00ae\u00e5\u00ba\u0093\u00e6\u008e\u0092\u00e5\u00ba\u008f\u00e8\u00a7\u0084\u00e5\u0088\u0099\u00ef\u00bc\u0089\u00ef\u00bc\u008c<code>ilike</code> \u00e5\u00bc\u00ba\u00e5\u0088\u00b6\u00e4\u00b8\u008d\u00e5\u008c\u00ba\u00e5\u0088\u0086\u00e5\u00a4\u00a7\u00e5\u00b0\u008f\u00e5\u0086\u0099\u00ef\u00bc\u0088\u00e4\u00b8\u00bb\u00e8\u00a6\u0081\u00e7\u0094\u00a8\u00e4\u00ba?PostgreSQL\u00ef\u00bc\u0089\u00e3\u0080?</p> <p>Q: \u00e4\u00b8\u00ba\u00e4\u00bb\u0080\u00e4\u00b9\u0088\u00e6\u0088\u0091\u00e7\u009a\u0084\u00e6\u008e\u0092\u00e5\u00ba\u008f\u00e4\u00b8\u008d\u00e8\u00b5\u00b7\u00e4\u00bd\u009c\u00e7\u0094\u00a8\u00ef\u00bc\u009f A: \u00e6\u00a3\u0080\u00e6\u009f\u00a5\u00e5\u00ad\u0097\u00e6\u00ae\u00b5\u00e6\u0098\u00af\u00e5\u0090\u00a6\u00e5\u009c\u00a8 <code>sort_fields</code> \u00e5\u0088\u0097\u00e8\u00a1\u00a8\u00e4\u00b8\u00ad\u00e3\u0080\u0082\u00e5\u0087\u00ba\u00e4\u00ba\u008e\u00e5\u00ae\u0089\u00e5\u0085\u00a8\u00e8\u0080\u0083\u00e8\u0099\u0091\u00ef\u00bc\u008c\u00e6\u009c\u00aa\u00e5\u0088\u0097\u00e5\u0087\u00ba\u00e7\u009a\u0084\u00e5\u00ad\u0097\u00e6\u00ae\u00b5\u00e4\u00b8\u008d\u00e5\u0085\u0081\u00e8\u00ae\u00b8\u00e6\u008e\u0092\u00e5\u00ba\u008f\u00e3\u0080?</p>"},{"location":"guides/querying/#5-e12aoe","title":"5. \u00e6\u0080\u00a7\u00e8\u0083\u00bd\u00e5\u00bb\u00ba\u00e8\u00ae\u00ae","text":"<ol> <li>\u00e7\u00b4\u00a2\u00e5\u00bc\u0095\u00ef\u00bc\u009a\u00e5\u008a\u00a1\u00e5\u00bf\u0085\u00e4\u00b8\u00ba <code>filter_fields</code> \u00e5\u0092?<code>sort_fields</code> \u00e4\u00b8\u00ad\u00e7\u009a\u0084\u00e9\u00ab\u0098\u00e9\u00a2\u0091\u00e5\u00ad\u0097\u00e6\u00ae\u00b5\u00e6\u00b7\u00bb\u00e5\u008a\u00a0\u00e6\u0095\u00b0\u00e6\u008d\u00ae\u00e5\u00ba\u0093\u00e7\u00b4\u00a2\u00e5\u00bc\u0095\u00e3\u0080?</li> <li>\u00e9\u0099\u0090\u00e5\u0088\u00b6\u00e5\u00ad\u0097\u00e6\u00ae\u00b5\u00ef\u00bc\u009a\u00e4\u00b8\u008d\u00e8\u00a6\u0081\u00e5\u00b0\u0086\u00e6\u0089\u0080\u00e6\u009c\u0089\u00e5\u00ad\u0097\u00e6\u00ae\u00b5\u00e9\u0083\u00bd\u00e6\u009a\u00b4\u00e9\u009c\u00b2\u00e7\u00bb\u0099\u00e8\u00bf\u0087\u00e6\u00bb\u00a4\u00e5\u0092\u008c\u00e6\u008e\u0092\u00e5\u00ba\u008f\u00ef\u00bc\u008c\u00e5\u008f\u00aa\u00e6\u009a\u00b4\u00e9\u009c\u00b2\u00e4\u00b8\u009a\u00e5\u008a\u00a1\u00e9\u009c\u0080\u00e8\u00a6\u0081\u00e7\u009a\u0084\u00e5\u00ad\u0097\u00e6\u00ae\u00b5\u00e3\u0080?</li> <li>\u00e5\u0088\u0086\u00e9\u00a1\u00b5\u00e9\u0099\u0090\u00e5\u0088\u00b6\u00ef\u00bc\u009a\u00e5\u00a7\u008b\u00e7\u00bb\u0088\u00e8\u00ae\u00be\u00e7\u00bd\u00ae\u00e5\u0090\u0088\u00e7\u0090\u0086\u00e7\u009a\u0084 <code>max_limit</code> \u00e9\u0098\u00b2\u00e6\u00ad\u00a2\u00e5\u008d\u0095\u00e6\u00ac\u00a1\u00e6\u009f\u00a5\u00e8\u00af\u00a2\u00e5\u00a4\u00a7\u00e9\u0087\u008f\u00e6\u0095\u00b0\u00e6\u008d\u00ae\u00e3\u0080?</li> </ol> <pre><code># \u00e6\u008e\u00a8\u00e8\u008d\u0090\u00e9\u0085\u008d\u00e7\u00bd\u00ae\nrouter = CRUDRouter(\n    # ...\n    pagination_config=PaginationConfig(default_limit=20, max_limit=100)\n)\n</code></pre>"},{"location":"guides/soft-delete/","title":"\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e5\u0160\u0178\u00e8\u0192?","text":"<p>\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e6\u02dc\u00af\u00e4\u00b8\u20ac\u00e7\u00a7\u00e5\u00b8\u00b8\u00e8\u00a7\u00e7\u0161\u201e\u00e6\u2022\u00b0\u00e6\u00ae\u00e7\u00ae\u00a1\u00e7\u2020\u00e6\u00a8\u00a1\u00e5\u00bc\u00ef\u00bc\u0152\u00e5\u00b0\u2020\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00e6\u00a0\u2021\u00e8\u00ae\u00b0\u00e4\u00b8\u00ba\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e8\u20ac\u0152\u00e4\u00b8\u00e6\u02dc\u00af\u00e6\u00b0\u00b8\u00e4\u00b9\u2026\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e3\u20ac\u201a\u00e6\u0153\u00ac\u00e6\u0152\u2021\u00e5\u2014\u00e4\u00bb\u2039\u00e7\u00bb\u00e5\u00a6\u201a\u00e4\u00bd\u2022\u00e5\u0153?fastapi-easy \u00e4\u00b8\u00ad\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e3\u20ac?</p>"},{"location":"guides/soft-delete/#aa1-e12-a-etmi14y","title":"\u00e4\u00bb\u20ac\u00e4\u00b9\u02c6\u00e6\u02dc\u00af\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00ef\u00bc\u0178","text":"<p>\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e4\u00b8\u00e4\u00bc\u0161\u00e4\u00bb\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e4\u00b8\u00ad\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e6\u2022\u00b0\u00e6\u00ae\u00ef\u00bc\u0152\u00e8\u20ac\u0152\u00e6\u02dc\u00af\u00e6\u00a0\u2021\u00e8\u00ae\u00b0\u00e4\u00b8\u00ba\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e3\u20ac\u201a\u00e8\u00bf\u2122\u00e6\u00a0\u00b7\u00e5\u0161\u00e7\u0161\u201e\u00e5\u00a5\u00bd\u00e5\u00a4\u201e\u00ef\u00bc\u0161</p> <ul> <li>\u00e2\u0153?\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00af\u00e6\u00a2\u00e5\u00a4?</li> <li> <p>\u00e2\u0153?\u00e4\u00bf\u00e7\u2022\u2122\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014</p> </li> <li> <p>\u00e2\u0153?\u00e6\u201d\u00af\u00e6\u0152\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u02c6\u2020\u00e6</p> </li> <li> <p>\u00e2\u0153?\u00e7\u00ac\u00a6\u00e5\u02c6\u00e6\u00b3\u2022\u00e8\u00a7\u201e\u00e8\u00a6\u00e6\u00b1\u201a</p> </li> </ul>"},{"location":"guides/soft-delete/#a-c-e12-a-etm","title":"\u00e5\u00af\u00e7\u201d\u00a8\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122?","text":""},{"location":"guides/soft-delete/#1-as-e12-a-etma","title":"1. \u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e5\u00ad\u2014\u00e6\u00ae?","text":"<pre><code>from sqlalchemy import Column, Boolean, DateTime\n\nfrom datetime import datetime\n\n\n\nclass Item(Base):\n\n    __tablename__ = \"items\"\n\n\n\n    id = Column(Integer, primary_key=True)\n\n    name = Column(String)\n\n    is_deleted = Column(Boolean, default=False, index=True)\n\n    deleted_at = Column(DateTime, nullable=True)\n</code></pre>"},{"location":"guides/soft-delete/#2-ec12e12-a-etm","title":"2. \u00e9\u2026\u00e7\u00bd\u00ae\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122?","text":"<pre><code>from fastapi_easy import CRUDRouter\n\nfrom fastapi_easy.core.soft_delete import SoftDeleteConfig\n\n\n\nconfig = SoftDeleteConfig(\n\n    enabled=True,\n\n    include_deleted_by_default=False,  # \u00e9\u00bb\u02dc\u00e8\u00ae\u00a4\u00e4\u00b8\u00e5\u0152\u2026\u00e5\u00ab\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd?\n    auto_restore_on_update=False,      # \u00e6\u203a\u00b4\u00e6\u2013\u00b0\u00e6\u2014\u00b6\u00e4\u00b8\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e6\u00a2\u00e5\u00a4\n\n)\n\n\n\nrouter = CRUDRouter(\n\n    schema=ItemSchema,\n\n    adapter=adapter,\n\n    soft_delete_config=config,\n\n)\n</code></pre>"},{"location":"guides/soft-delete/#a12c-e12-a-etm","title":"\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122?","text":""},{"location":"guides/soft-delete/#e12-a-etmea12","title":"\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e8\u00ae\u00b0\u00e5\u00bd?","text":"<pre><code># DELETE /items/1\n\n# \u00e5\u201c\u00e5\u00ba\u201d\u00ef\u00bc\u0161{\"id\": 1, \"name\": \"Item 1\", \"is_deleted\": true, \"deleted_at\": \"2024-11-27T...\"}\n</code></pre>"},{"location":"guides/soft-delete/#aa2a-etmcsea12","title":"\u00e6\u00a2\u00e5\u00a4\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd\u2022","text":"<pre><code>from fastapi_easy.core.soft_delete import SoftDeleteAdapter\n\n\n\nadapter = SoftDeleteAdapter(Item, session)\n\n\n\n# \u00e6\u00a2\u00e5\u00a4\u00e5\u2022\u00e4\u00b8\u00aa\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\n\nawait adapter.restore(item_id=1)\n\n\n\n# \u00e6\u00a2\u00e5\u00a4\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd?\nawait adapter.restore_all()\n</code></pre>"},{"location":"guides/soft-delete/#ye-a2a-etmcsea12","title":"\u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd\u2022","text":"<pre><code># \u00e9\u00bb\u02dc\u00e8\u00ae\u00a4\u00e4\u00b8\u00e5\u0152\u2026\u00e5\u00ab\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd?\n# GET /items\n\n# \u00e5\u201c\u00e5\u00ba\u201d\u00ef\u00bc\u0161\u00e5\u00aa\u00e8\u00bf\u201d\u00e5\u203a\u00e6\u0153\u00aa\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\n\n\n\n# \u00e5\u0152\u2026\u00e5\u00ab\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\n\n# GET /items?include_deleted=true\n\n# \u00e5\u201c\u00e5\u00ba\u201d\u00ef\u00bc\u0161\u00e8\u00bf\u201d\u00e5\u203a\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00ef\u00bc\u02c6\u00e5\u0152\u2026\u00e6\u2039\u00ac\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00ef\u00bc?\n</code></pre>"},{"location":"guides/soft-delete/#a1a-etm","title":"\u00e6\u00b0\u00b8\u00e4\u00b9\u2026\u00e5\u02c6\u00a0\u00e9\u2122\u00a4","text":"<pre><code># \u00e6\u00b0\u00b8\u00e4\u00b9\u2026\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\n\nawait adapter.permanently_delete(item_id=1)\n\n\n\n# \u00e6\u00b0\u00b8\u00e4\u00b9\u2026\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd?\nawait adapter.permanently_delete_all()\n</code></pre>"},{"location":"guides/soft-delete/#e-coc-3","title":"\u00e9\u00ab\u02dc\u00e7\u00ba\u00a7\u00e7\u201d\u00a8\u00e6\u00b3\u2022","text":""},{"location":"guides/soft-delete/#eaasa1e12-a-etma","title":"\u00e8\u2021\u00aa\u00e5\u00ae\u0161\u00e4\u00b9\u2030\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e5\u00ad\u2014\u00e6\u00ae\u00b5","text":"<pre><code>from fastapi_easy.core.soft_delete import SoftDeleteMixin\n\n\n\nclass Item(Base, SoftDeleteMixin):\n\n    __tablename__ = \"items\"\n\n\n\n    id = Column(Integer, primary_key=True)\n\n    name = Column(String)\n\n    # \u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e6\u00b7\u00bb\u00e5\u0160\u00a0 is_deleted \u00e5\u2019?deleted_at \u00e5\u00ad\u2014\u00e6\u00ae\u00b5\n</code></pre>"},{"location":"guides/soft-delete/#yea12-aa2a-etm","title":"\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00e6\u02dc\u00af\u00e5\u00a6\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4","text":"<pre><code>item = await adapter.get_one(1)\n\n\n\nif adapter.is_soft_deleted(item):\n\n    print(\"\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122?)\n\nelse:\n\n    print(\"\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00e6\u0153\u00aa\u00e5\u02c6\u00a0\u00e9\u2122?)\n</code></pre>"},{"location":"guides/soft-delete/#eaa-etmcye","title":"\u00e8\u00b7\u00e5\u2013\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u00bb\u0178\u00e8\u00ae\u00a1","text":"<pre><code># \u00e8\u00b7\u00e5\u2013\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00e6\u2022?\ndeleted_count = await adapter.count(filters={\"is_deleted\": True})\n\n\n\n# \u00e8\u00b7\u00e5\u2013\u00e6\u0153\u00aa\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00e6\u2022?\nactive_count = await adapter.count(filters={\"is_deleted\": False})\n</code></pre>"},{"location":"guides/soft-delete/#a123ae","title":"\u00e6\u0153\u20ac\u00e4\u00bd\u00b3\u00e5\u00ae\u00e8\u00b7?","text":""},{"location":"guides/soft-delete/#1-a12c-e12-a-etm","title":"1. \u00e6\u20ac\u00bb\u00e6\u02dc\u00af\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122?","text":"<pre><code># \u00e2\u0153?\u00e6\u00a8\u00e8\u00ef\u00bc\u0161\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\n\nawait adapter.soft_delete(item_id=1)\n\n\n\n# \u00e2?\u00e4\u00b8\u00e6\u00a8\u00e8\u00ef\u00bc\u0161\u00e7\u203a\u00b4\u00e6\u00a5\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\n\nawait adapter.delete_one(item_id=1)\n</code></pre>"},{"location":"guides/soft-delete/#2-asy-ca2a-etmcsea12","title":"2. \u00e5\u00ae\u0161\u00e6\u0153\u0178\u00e6\u00b8\u2026\u00e7\u2020\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd\u2022","text":"<pre><code># \u00e5\u00ae\u0161\u00e6\u0153\u0178\u00e6\u00b0\u00b8\u00e4\u00b9\u2026\u00e5\u02c6\u00a0\u00e9\u2122\u00a4 30 \u00e5\u00a4\u00a9\u00e5\u2030\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd?\nfrom datetime import datetime, timedelta\n\n\n\ncutoff_date = datetime.utcnow() - timedelta(days=30)\n\n\n\n# \u00e5\u02c6\u00a0\u00e9\u2122\u00a4 deleted_at &lt; cutoff_date \u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd?\nawait adapter.permanently_delete_all(\n\n    filters={\"deleted_at__lt\": cutoff_date}\n\n)\n</code></pre>"},{"location":"guides/soft-delete/#3-a-ye-a-etma2a-etmcsea12","title":"3. \u00e5\u0153\u00a8\u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e4\u00b8\u00ad\u00e6\u2019\u00e9\u2122\u00a4\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd\u2022","text":"<pre><code># \u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e6\u2019\u00e9\u2122\u00a4\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\n\nrouter = CRUDRouter(\n\n    schema=ItemSchema,\n\n    adapter=adapter,\n\n    soft_delete_config=SoftDeleteConfig(\n\n        include_deleted_by_default=False\n\n    ),\n\n)\n</code></pre>"},{"location":"guides/soft-delete/#4-aeae","title":"4. \u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00e9\u203a\u2020\u00e6\u02c6","text":"<pre><code>from fastapi_easy.core.audit_log import AuditLogger\n\n\n\naudit_logger = AuditLogger()\n\n\n\n# \u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e6\u201c\u00e4\u00bd?\nawait adapter.soft_delete(item_id=1)\n\naudit_logger.log(\n\n    entity_type=\"Item\",\n\n    entity_id=1,\n\n    action=\"soft_delete\",\n\n    user_id=user.id,\n\n)\n</code></pre>"},{"location":"guides/soft-delete/#a-eee","title":"\u00e5\u00b8\u00b8\u00e8\u00a7\u00e9\u2014\u00ae\u00e9\u00a2\u02dc","text":"<p>Q: \u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e5\u2019\u0152\u00e7\u00a1\u00ac\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e6\u0153\u2030\u00e4\u00bb\u20ac\u00e4\u00b9\u02c6\u00e5\u0152\u00ba\u00e5\u02c6\u00ab\u00ef\u00bc\u0178</p> <p>A: \u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e6\u00a0\u2021\u00e8\u00ae\u00b0\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00e4\u00b8\u00ba\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e4\u00bd\u2020\u00e4\u00bf\u00e7\u2022\u2122\u00e6\u2022\u00b0\u00e6\u00ae\u00ef\u00bc\u0152\u00e7\u00a1\u00ac\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e6\u00b0\u00b8\u00e4\u00b9\u2026\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e6\u2022\u00b0\u00e6\u00ae\u00e3\u20ac\u201a\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e6\u203a\u00b4\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00ef\u00bc\u0152\u00e6\u201d\u00af\u00e6\u0152\u00e6\u00a2\u00e5\u00a4\u00e3\u20ac?</p> <p>*Q: \u00e5\u00a6\u201a\u00e4\u00bd\u2022\u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e5\u0152\u2026\u00e6\u2039\u00ac\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00ef\u00bc?</p> <p>A: \u00e5\u0153\u00a8\u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e5\u201a\u00e6\u2022\u00b0\u00e4\u00b8\u00ad\u00e6\u00b7\u00bb\u00e5\u0160\u00a0 <code>include_deleted=true</code>\u00e3\u20ac?</p> <p>*Q: \u00e5\u00a6\u201a\u00e4\u00bd\u2022\u00e6\u00a2\u00e5\u00a4\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd\u2022\u00ef\u00bc?</p> <p>A: \u00e4\u00bd\u00bf\u00e7\u201d\u00a8 <code>SoftDeleteAdapter.restore()</code> \u00e6\u2013\u00b9\u00e6\u00b3\u2022\u00e3\u20ac?</p> <p>Q: \u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e4\u00bc\u0161\u00e5\u00bd\u00b1\u00e5\u201c\u00e6\u20ac\u00a7\u00e8\u0192\u00bd\u00e5\u2014\u00ef\u00bc\u0178</p> <p>A: \u00e4\u00bc\u0161\u00e6\u0153\u2030\u00e8\u00bd\u00bb\u00e5\u00be\u00ae\u00e5\u00bd\u00b1\u00e5\u201c\u00ef\u00bc\u0152\u00e5\u203a\u00a0\u00e4\u00b8\u00ba\u00e9\u0153\u20ac\u00e8\u00a6\u00e6\u00a3\u20ac\u00e6\u0178?<code>is_deleted</code> \u00e5\u00ad\u2014\u00e6\u00ae\u00b5\u00e3\u20ac\u201a\u00e5\u00bb\u00ba\u00e8\u00ae\u00ae\u00e5\u0153\u00a8\u00e8\u00af\u00a5\u00e5\u00ad\u2014\u00e6\u00ae\u00b5\u00e4\u00b8\u0160\u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e7\u00b4\u00a2\u00e5\u00bc\u2022\u00e3\u20ac?</p>"},{"location":"guides/soft-delete/#c","title":"\u00e6\u20ac\u00bb\u00e7\u00bb\u201c","text":"<p>\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e6\u02dc\u00af\u00e4\u00b8\u20ac\u00e4\u00b8\u00aa\u00e5\u00bc\u00ba\u00e5\u00a4\u00a7\u00e7\u0161\u201e\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00ef\u00bc\u0152\u00e5\u00af\u00e4\u00bb\u00a5\u00ef\u00bc\u0161</p> <ul> <li> <p>\u00e2\u0153?\u00e4\u00bf\u00e6\u0160\u00a4\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ae\u2030\u00e5\u2026\u00a8</p> </li> <li> <p>\u00e2\u0153?\u00e6\u201d\u00af\u00e6\u0152\u00e6\u2022\u00b0\u00e6\u00ae\u00e6\u00a2\u00e5\u00a4</p> </li> <li> <p>\u00e2\u0153?\u00e4\u00bf\u00e7\u2022\u2122\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014</p> </li> <li> <p>\u00e2\u0153?\u00e7\u00ac\u00a6\u00e5\u02c6\u00e6\u00b3\u2022\u00e8\u00a7\u201e\u00e8\u00a6\u00e6\u00b1\u201a</p> </li> </ul> <p>\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e6\u2014\u00b6\u00ef\u00bc\u0152\u00e8\u00ae\u00b0\u00e4\u00bd\u00ef\u00bc\u0161</p> <ol> <li>\u00e6\u20ac\u00bb\u00e6\u02dc\u00af\u00e5\u00af\u00e7\u201d\u00a8\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122?</li> <li> <p>\u00e5\u00ae\u0161\u00e6\u0153\u0178\u00e6\u00b8\u2026\u00e7\u2020\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd\u2022</p> </li> <li> <p>\u00e5\u0153\u00a8\u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e4\u00b8\u00ad\u00e6\u2019\u00e9\u2122\u00a4\u00e5\u00b7\u00b2\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e7\u0161\u201e\u00e8\u00ae\u00b0\u00e5\u00bd\u2022</p> </li> <li> <p>\u00e4\u00b8\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00e9\u203a\u2020\u00e6\u02c6?</p> </li> </ol> <p>*\u00e4\u00b8\u2039\u00e4\u00b8\u20ac\u00e6\u00ad?: \u00e6\u2030\u00b9\u00e9\u2021\u00e6\u201c\u00e4\u00bd\u0153 \u00e2\u2020?</p>"},{"location":"guides/troubleshooting/","title":"\u00e6\u2022\u2026\u00e9\u0161\u0153\u00e6\u2019\u00e9\u2122\u00a4\u00e6\u0152\u2021\u00e5\u2014","text":"<p>\u00e6\u0153\u00ac\u00e6\u0152\u2021\u00e5\u2014\u00e5\u00b8\u00ae\u00e5\u0160\u00a9\u00e8\u00a7\u00a3\u00e5\u2020\u00b3\u00e4\u00bd\u00bf\u00e7\u201d?fastapi-easy \u00e6\u2014\u00b6\u00e9\u2021\u00e5\u02c6\u00b0\u00e7\u0161\u201e\u00e5\u00b8\u00b8\u00e8\u00a7\u00e9\u2014\u00ae\u00e9\u00a2\u02dc\u00e3\u20ac?</p>"},{"location":"guides/troubleshooting/#a-eee","title":"\u00e5\u00b8\u00b8\u00e8\u00a7\u00e9\u2014\u00ae\u00e9\u00a2\u02dc","text":""},{"location":"guides/troubleshooting/#1-aoeetme","title":"1. \u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e8\u00bf\u00e6\u00a5\u00e9\u201d\u2122\u00e8\u00af?","text":"<p>\u00e9\u2014\u00ae\u00e9\u00a2\u02dc: <code>sqlalchemy.exc.OperationalError: could not connect to server</code></p> <p>\u00e8\u00a7\u00a3\u00e5\u2020\u00b3\u00e6\u2013\u00b9\u00e6\u00a1\u02c6:</p> <ul> <li> <p>\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c URL \u00e6\u02dc\u00af\u00e5\u00a6\u00e6\u00ad\u00a3\u00e7\u00a1\u00ae</p> </li> <li> <p>\u00e7\u00a1\u00ae\u00e4\u00bf\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e6\u0153\u00e5\u0160\u00a1\u00e6\u00ad\u00a3\u00e5\u0153\u00a8\u00e8\u00bf\u00e8\u00a1?</p> </li> <li>\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\u00e7\u00bd\u2018\u00e7\u00bb\u0153\u00e8\u00bf\u00e6?</li> </ul> <pre><code># \u00e9\u00aa\u0152\u00e8\u00af\u00e8\u00bf\u00e6\u00a5\n\nasync with engine.begin() as conn:\n\n    await conn.execute(text(\"SELECT 1\"))\n</code></pre>"},{"location":"guides/troubleshooting/#2-etmetme","title":"2. \u00e6\u0192\u00e9\u2122\u00e9\u201d\u2122\u00e8\u00af\u00af","text":"<p>\u00e9\u2014\u00ae\u00e9\u00a2\u02dc: <code>PermissionDeniedError: No permission to ...</code></p> <p>\u00e8\u00a7\u00a3\u00e5\u2020\u00b3\u00e6\u2013\u00b9\u00e6\u00a1\u02c6:</p> <ul> <li> <p>\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\u00e7\u201d\u00a8\u00e6\u02c6\u00b7\u00e8\u00a7\u2019\u00e8\u2030\u00b2\u00e5\u2019\u0152\u00e6\u0192\u00e9\u2122</p> </li> <li> <p>\u00e9\u00aa\u0152\u00e8\u00af\u00e6\u0192\u00e9\u2122\u00e9\u2026\u00e7\u00bd\u00ae</p> </li> <li> <p>\u00e6\u0178\u00a5\u00e7\u0153\u2039\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014</p> </li> </ul> <pre><code># \u00e6\u00a3\u20ac\u00e6\u0178\u00a5\u00e6\u0192\u00e9\u2122?\nif rbac.has_permission(user_role, permission):\n\n    # \u00e5\u2026\u00e8\u00ae\u00b8\u00e6\u201c\u00e4\u00bd\u0153\n\n    pass\n</code></pre>"},{"location":"guides/troubleshooting/#3-eae-etme","title":"3. \u00e9\u00aa\u0152\u00e8\u00af\u00e9\u201d\u2122\u00e8\u00af\u00af","text":"<p>\u00e9\u2014\u00ae\u00e9\u00a2\u02dc: <code>ValidationError: Invalid input</code></p> <p>\u00e8\u00a7\u00a3\u00e5\u2020\u00b3\u00e6\u2013\u00b9\u00e6\u00a1\u02c6:</p> <ul> <li>\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\u00e8\u00be\u201c\u00e5\u2026\u00a5\u00e6\u2022\u00b0\u00e6\u00ae\u00e6\u00a0\u00bc\u00e5\u00bc?</li> <li> <p>\u00e9\u00aa\u0152\u00e8\u00af\u00e5\u00bf\u2026\u00e5\u00a1\u00ab\u00e5\u00ad\u2014\u00e6\u00ae\u00b5</p> </li> <li> <p>\u00e6\u0178\u00a5\u00e7\u0153\u2039\u00e9\u201d\u2122\u00e8\u00af\u00af\u00e8\u00af\u00a6\u00e6\u0192\u2026</p> </li> </ul> <pre><code># \u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e8\u00af\u00a6\u00e7\u00bb\u2020\u00e7\u0161\u201e\u00e9\u00aa\u0152\u00e8\u00af\u00e9\u201d\u2122\u00e8\u00af\u00af\u00e4\u00bf\u00a1\u00e6?\ntry:\n\n    result = await adapter.create(data)\n\nexcept ValidationError as e:\n\n    logger.error(f\"Validation error: {e.details}\")\n</code></pre>"},{"location":"guides/troubleshooting/#4-e12ee","title":"4. \u00e6\u20ac\u00a7\u00e8\u0192\u00bd\u00e9\u2014\u00ae\u00e9\u00a2\u02dc","text":"<p>\u00e9\u2014\u00ae\u00e9\u00a2\u02dc: \u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e9\u20ac\u0178\u00e5\u00ba\u00a6\u00e6\u2026?</p> <p>\u00e8\u00a7\u00a3\u00e5\u2020\u00b3\u00e6\u2013\u00b9\u00e6\u00a1\u02c6:</p> <ul> <li>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e7\u00b4\u00a2\u00e5\u00bc?</li> <li> <p>\u00e5\u00af\u00e7\u201d\u00a8\u00e7\u00bc\u201c\u00e5\u00ad\u02dc</p> </li> <li> <p>\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e5\u02c6\u2020\u00e9\u00a1\u00b5</p> </li> <li> <p>\u00e4\u00bc\u02dc\u00e5\u0152\u2013\u00e6\u0178\u00a5\u00e8\u00af\u00a2</p> </li> </ul> <pre><code># \u00e5\u00af\u00e7\u201d\u00a8\u00e7\u00bc\u201c\u00e5\u00ad\u02dc\n\n@CachedOperation(cache, ttl=3600)\n\nasync def get_items():\n\n    return await adapter.get_all()\n</code></pre>"},{"location":"guides/troubleshooting/#ee-sa","title":"\u00e8\u00b0\u0192\u00e8\u00af\u2022\u00e6\u0160\u20ac\u00e5\u00b7?","text":""},{"location":"guides/troubleshooting/#1-a-c-e-ca","title":"1. \u00e5\u00af\u00e7\u201d\u00a8\u00e8\u00af\u00a6\u00e7\u00bb\u2020\u00e6\u2014\u00a5\u00e5\u00bf\u2014","text":"<pre><code>import logging\n\n\n\nlogging.basicConfig(level=logging.DEBUG)\n\nlogger = logging.getLogger(__name__)\n</code></pre>"},{"location":"guides/troubleshooting/#2-a12c-print-ee","title":"2. \u00e4\u00bd\u00bf\u00e7\u201d\u00a8 print \u00e8\u00b0\u0192\u00e8\u00af\u2022","text":"<pre><code>print(f\"Debug: {variable}\")\n</code></pre>"},{"location":"guides/troubleshooting/#3-a12c-pdb-ee","title":"3. \u00e4\u00bd\u00bf\u00e7\u201d\u00a8 pdb \u00e8\u00b0\u0192\u00e8\u00af\u2022","text":"<pre><code>import pdb; pdb.set_trace()\n</code></pre>"},{"location":"guides/troubleshooting/#eaa-as","title":"\u00e8\u00b7\u00e5\u2013\u00e5\u00b8\u00ae\u00e5\u0160\u00a9","text":"<ol> <li> <p>\u00e6\u0178\u00a5\u00e7\u0153\u2039\u00e6\u2013\u2021\u00e6\u00a1\u00a3</p> </li> <li> <p>\u00e6\u0178\u00a5\u00e7\u0153\u2039\u00e7\u00a4\u00ba\u00e4\u00be\u2039\u00e4\u00bb\u00a3\u00e7\u00a0</p> </li> <li> <p>\u00e6\u0178\u00a5\u00e7\u0153\u2039\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e7\u201d\u00a8\u00e4\u00be\u2039</p> </li> <li> <p>\u00e6\u00e4\u00ba\u00a4 Issue</p> </li> </ol> <p>*\u00e5\u00ae\u0152\u00e6\u02c6\u00ef\u00bc? \u011f\u0178\u2030</p>"},{"location":"guides/websocket/","title":"WebSocket \u00e6\u201d\u00af\u00e6\u0152\u00e6\u0152\u2021\u00e5\u2014","text":"<p>FastAPI-Easy \u00e6\u00e4\u00be\u203a\u00e4\u00ba\u2020\u00e7\u00ae\u20ac\u00e5\u2022\u00e6\u02dc\u201c\u00e7\u201d\u00a8\u00e7\u0161\u201e WebSocket \u00e7\u00ae\u00a1\u00e7\u2020\u00e5\u2122\u00a8\u00ef\u00bc\u0152\u00e6\u201d\u00af\u00e6\u0152\u00e6\u02c6\u00bf\u00e9\u2014\u00b4\u00e7\u00ae\u00a1\u00e7\u2020\u00e3\u20ac\u00e6\u00b6\u02c6\u00e6\u00af\u00e5\u00b9\u00bf\u00e6\u2019\u00ad\u00e5\u2019\u0152\u00e8\u00bf\u00e6\u00a5\u00e7\u201d\u0178\u00e5\u2018\u00bd\u00e5\u2018\u00a8\u00e6\u0153\u0178\u00e7\u00ae\u00a1\u00e7\u2020\u00e3\u20ac\u201a</p>"},{"location":"guides/websocket/#gys-aeya14a","title":"\u011f\u0178\u0161\u20ac \u00e5\u00bf\u00ab\u00e9\u20ac\u0178\u00e5\u00bc\u20ac\u00e5\u00a7\u2039","text":""},{"location":"guides/websocket/#1-aaaccatm","title":"1. \u00e5\u02c6\u00e5\u00a7\u2039\u00e5\u0152\u2013\u00e7\u00ae\u00a1\u00e7\u2020\u00e5\u2122\u00a8","text":"<pre><code>from fastapi import FastAPI, WebSocket\n\nfrom fastapi_easy.websocket import WebSocketManager\n\n\n\napp = FastAPI()\n\nws_manager = WebSocketManager()\n</code></pre>"},{"location":"guides/websocket/#2-aao-websocket-c-c1","title":"2. \u00e5\u02c6\u203a\u00e5\u00bb\u00ba WebSocket \u00e7\u00ab\u00af\u00e7\u201a\u00b9","text":"<pre><code>@app.websocket(\"/ws/{room_id}/{user_id}\")\n\nasync def websocket_endpoint(websocket: WebSocket, room_id: str, user_id: str):\n\n    # 1. \u00e5\u00bb\u00ba\u00e7\u00ab\u2039\u00e8\u00bf\u00e6\u00a5\n\n    await ws_manager.connect(websocket, room_id, user_id)\n\n\n\n    try:\n\n        while True:\n\n            # 2. \u00e6\u00a5\u00e6\u201d\u00b6\u00e6\u00b6\u02c6\u00e6\u00af\n\n            data = await websocket.receive_text()\n\n\n\n            # 3. \u00e5\u00b9\u00bf\u00e6\u2019\u00ad\u00e6\u00b6\u02c6\u00e6\u00af\u00e7\u00bb\u2122\u00e6\u02c6\u00bf\u00e9\u2014\u00b4\u00e5\u2020\u2026\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e4\u00ba\u00ba\n\n            await ws_manager.broadcast(\n\n                room_id, \n\n                f\"User {user_id} said: {data}\"\n\n            )\n\n\n\n            # 4. \u00e5\u2018\u00e9\u20ac\u00e7\u00a7\u00e4\u00bf\u00a1\n\n            await ws_manager.send_personal_message(\n\n                f\"You said: {data}\",\n\n                websocket\n\n            )\n\n\n\n    except Exception:\n\n        # 5. \u00e6\u2013\u00ad\u00e5\u00bc\u20ac\u00e8\u00bf\u00e6\u00a5\n\n        ws_manager.disconnect(websocket, room_id, user_id)\n\n        await ws_manager.broadcast(room_id, f\"User {user_id} left\")\n</code></pre>"},{"location":"guides/websocket/#gy-aasye12","title":"\u011f\u0178\u2019\u00a1 \u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e5\u0160\u0178\u00e8\u0192\u00bd","text":""},{"location":"guides/websocket/#e-cc-rooms","title":"\u00e6\u02c6\u00bf\u00e9\u2014\u00b4\u00e7\u00ae\u00a1\u00e7\u2020 (Rooms)","text":"<p>WebSocket \u00e7\u00ae\u00a1\u00e7\u2020\u00e5\u2122\u00a8\u00e5\u0178\u00ba\u00e4\u00ba\"\u00e6\u02c6\u00bf\u00e9\u2014\u00b4\"\u00e6\u00a6\u201a\u00e5\u00bf\u00b5\u00e3\u20ac\u201a\u00e4\u00bd\u00a0\u00e5\u00af\u00e4\u00bb\u00a5\u00e5\u00b0\u2020\u00e8\u00bf\u00e6\u00a5\u00e5\u02c6\u2020\u00e7\u00bb\u201e\u00e5\u02c6\u00b0\u00e4\u00b8\u00e5\u0152\u00e7\u0161\u201e\u00e6\u02c6\u00bf\u00e9\u2014\u00b4\u00ef\u00bc\u0152\u00e5\u00ae\u00e7\u00b0\u00e7\u00be\u00a4\u00e8\u0160\u00e6\u02c6\u2013\u00e9\u00a2\u2018\u00e9\u201c\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e3\u20ac\u201a</p> <pre><code># \u00e8\u00b7\u00e5\u2013\u00e6\u02c6\u00bf\u00e9\u2014\u00b4\u00e5\u2020\u2026\u00e7\u0161\u201e\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e8\u00bf\u00e6\u00a5\n\nconnections = ws_manager.get_room_connections(\"room-1\")\n\n\n\n# \u00e8\u00b7\u00e5\u2013\u00e6\u02c6\u00bf\u00e9\u2014\u00b4\u00e5\u2020\u2026\u00e7\u0161\u201e\u00e7\u201d\u00a8\u00e6\u02c6\u00b7\u00e6\u2022\u00b0\n\ncount = ws_manager.count_room_users(\"room-1\")\n</code></pre>"},{"location":"guides/websocket/#a1-broadcast","title":"\u00e6\u00b6\u02c6\u00e6\u00af\u00e5\u00b9\u00bf\u00e6\u2019\u00ad (Broadcast)","text":"<p>\u00e5\u2018\u00e6\u02c6\u00bf\u00e9\u2014\u00b4\u00e5\u2020\u2026\u00e7\u0161\u201e\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e7\u201d\u00a8\u00e6\u02c6\u00b7\u00e5\u2018\u00e9\u20ac\u00e6\u00b6\u02c6\u00e6\u00af\u00e3\u20ac\u201a</p> <pre><code>await ws_manager.broadcast(\"room-1\", {\"type\": \"notification\", \"msg\": \"Hello\"})\n</code></pre>"},{"location":"guides/websocket/#a14a-ac","title":"\u00e5\u00bc\u201a\u00e5\u00b8\u00b8\u00e5\u00a4\u201e\u00e7\u2020","text":"<p>\u00e7\u00ae\u00a1\u00e7\u2020\u00e5\u2122\u00a8\u00e4\u00bc\u0161\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e5\u00a4\u201e\u00e7\u2020\u00e8\u00bf\u00e6\u00a5\u00e6\u2013\u00ad\u00e5\u00bc\u20ac\u00e7\u00ad\u2030\u00e5\u00bc\u201a\u00e5\u00b8\u00b8\u00e6\u0192\u2026\u00e5\u2020\u00b5\u00ef\u00bc\u0152\u00e7\u00a1\u00ae\u00e4\u00bf\u00e4\u00b8\u00e4\u00bc\u0161\u00e5\u203a\u00a0\u00e4\u00b8\u00ba\u00e4\u00b8\u20ac\u00e4\u00b8\u00aa\u00e6\u00ad\u00bb\u00e8\u00bf\u00e6\u00a5\u00e5\u00af\u00bc\u00e8\u2021\u00b4\u00e5\u00b9\u00bf\u00e6\u2019\u00ad\u00e5\u00a4\u00b1\u00e8\u00b4\u00a5\u00e3\u20ac\u201a</p>"},{"location":"guides/websocket/#gy-a","title":"\u011f\u0178\u201d\u00a7 \u00e6\u2030\u00a9\u00e5\u00b1\u2022","text":"<p>\u00e4\u00bd\u00a0\u00e5\u00af\u00e4\u00bb\u00a5\u00e7\u00bb\u00a7\u00e6\u2030\u00bf <code>WebSocketManager</code> \u00e6\u00a5\u00e5\u00ae\u00e7\u00b0\u00e6\u203a\u00b4\u00e5\u00a4\u00e6\u201a\u00e7\u0161\u201e\u00e9\u20ac\u00bb\u00e8\u00be\u2018\u00ef\u00bc\u0152\u00e4\u00be\u2039\u00e5\u00a6\u201a\u00e7\u00bb\u201c\u00e5\u02c6 Redis \u00e5\u00ae\u00e7\u00b0\u00e5\u02c6\u2020\u00e5\u00b8\u0192\u00e5\u00bc WebSocket\u00e3\u20ac\u201a</p> <pre><code>class RedisWebSocketManager(WebSocketManager):\n\n    async def broadcast(self, room_id: str, message: str):\n\n        # \u00e5\u2018\u00e5\u00b8\u0192\u00e5\u02c6\u00b0 Redis Pub/Sub\n\n        await redis.publish(f\"room:{room_id}\", message)\n</code></pre>"},{"location":"reference/architecture/","title":"\u67b6\u6784\u8bbe\u8ba1\u548c\u6269\u5c55","text":"<p>\u672c\u6587\u6863\u4ecb\u7ecd fastapi-easy \u7684\u67b6\u6784\u8bbe\u8ba1\uff0c\u4ee5\u53ca\u5982\u4f55\u8fdb\u884c\u6269\u5c55\u548c\u5b9a\u5236\u3002</p>"},{"location":"reference/architecture/#_2","title":"\u6838\u5fc3\u67b6\u6784","text":""},{"location":"reference/architecture/#_3","title":"\u5206\u79bb\u7684\u804c\u8d23","text":"<p>fastapi-easy \u91c7\u7528\u5206\u79bb\u804c\u8d23\u7684\u8bbe\u8ba1\uff0c\u5c06\u8def\u7531\u751f\u6210\u548c\u8def\u7531\u7ba1\u7406\u5206\u5f00\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         CRUDGenerator                   \u2502\n\u2502  (\u8d1f\u8d23\u751f\u6210\u8def\u7531\u548c\u64cd\u4f5c)                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502\n               \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         OperationRegistry               \u2502\n\u2502  (\u7ba1\u7406\u6240\u6709\u64cd\u4f5c\uff1aCRUD\u3001\u641c\u7d22\u3001\u6392\u5e8f\u7b49)     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502\n               \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         APIRouter                       \u2502\n\u2502  (FastAPI \u8def\u7531\u7ba1\u7406)                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u4f18\u52bf: - \u2705 \u804c\u8d23\u6e05\u6670 - \u2705 \u6613\u4e8e\u6d4b\u8bd5 - \u2705 \u6613\u4e8e\u6269\u5c55 - \u2705 \u6613\u4e8e\u7ef4\u62a4</p>"},{"location":"reference/architecture/#operation-system","title":"\u64cd\u4f5c\u7cfb\u7edf\uff08Operation System\uff09","text":""},{"location":"reference/architecture/#_4","title":"\u57fa\u7840\u64cd\u4f5c\u63a5\u53e3","text":"<pre><code>from abc import ABC, abstractmethod\nfrom typing import Generic, TypeVar, Any, Dict\n\nT = TypeVar('T')\n\nclass Operation(ABC, Generic[T]):\n    \"\"\"\u6240\u6709\u64cd\u4f5c\u7684\u57fa\u7c7b\"\"\"\n\n    name: str\n    method: str  # GET, POST, PUT, DELETE\n    path: str\n\n    @abstractmethod\n    async def before_execute(self, context: 'ExecutionContext') -&gt; None:\n        \"\"\"\u64cd\u4f5c\u524d\u7684\u94a9\u5b50\"\"\"\n        pass\n\n    @abstractmethod\n    async def execute(self, context: 'ExecutionContext') -&gt; T:\n        \"\"\"\u6267\u884c\u64cd\u4f5c\"\"\"\n        pass\n\n    @abstractmethod\n    async def after_execute(self, context: 'ExecutionContext') -&gt; T:\n        \"\"\"\u64cd\u4f5c\u540e\u7684\u94a9\u5b50\"\"\"\n        pass\n\nclass ExecutionContext:\n    \"\"\"\u6267\u884c\u4e0a\u4e0b\u6587\"\"\"\n    schema: Type[T]\n    adapter: 'ORMAdapter'\n    request: 'Request'\n    filters: Dict[str, Any]\n    sorts: Dict[str, Any]\n    pagination: Dict[str, Any]\n    user: Any  # \u5f53\u524d\u7528\u6237\n    result: Any  # \u64cd\u4f5c\u7ed3\u679c\n</code></pre>"},{"location":"reference/architecture/#_5","title":"\u5185\u7f6e\u64cd\u4f5c","text":"<pre><code>class GetAllOperation(Operation):\n    \"\"\"\u83b7\u53d6\u6240\u6709\u9879\u76ee\"\"\"\n    name = \"get_all\"\n    method = \"GET\"\n    path = \"\"\n\n    async def before_execute(self, context):\n        # \u6743\u9650\u68c0\u67e5\n        pass\n\n    async def execute(self, context):\n        return await context.adapter.get_all(\n            filters=context.filters,\n            sorts=context.sorts,\n            pagination=context.pagination\n        )\n\n    async def after_execute(self, context):\n        # \u5ba1\u8ba1\u65e5\u5fd7\n        pass\n\nclass CreateOperation(Operation):\n    \"\"\"\u521b\u5efa\u9879\u76ee\"\"\"\n    name = \"create\"\n    method = \"POST\"\n    path = \"\"\n\n    async def before_execute(self, context):\n        # \u9a8c\u8bc1\u6570\u636e\n        pass\n\n    async def execute(self, context):\n        return await context.adapter.create(context.data)\n\n    async def after_execute(self, context):\n        # \u53d1\u9001\u901a\u77e5\n        pass\n\n# \u5176\u4ed6\u64cd\u4f5c\uff1aGetOne\u3001Update\u3001DeleteOne\u3001DeleteAll\u3001Search\u3001Sort\u3001Paginate\u3001BulkCreate\u3001BulkUpdate\u3001BulkDelete\n</code></pre>"},{"location":"reference/architecture/#_6","title":"\u81ea\u5b9a\u4e49\u64cd\u4f5c","text":"<pre><code>class CustomSearchOperation(Operation):\n    \"\"\"\u81ea\u5b9a\u4e49\u641c\u7d22\u64cd\u4f5c\"\"\"\n    name = \"advanced_search\"\n    method = \"POST\"\n    path = \"/search\"\n\n    async def before_execute(self, context):\n        # \u9a8c\u8bc1\u641c\u7d22\u53c2\u6570\n        if not context.search_query:\n            raise ValidationError(\"Search query is required\")\n\n    async def execute(self, context):\n        # \u8c03\u7528\u641c\u7d22\u5f15\u64ce\uff08\u5982 Elasticsearch\uff09\n        results = await elasticsearch.search(\n            index=\"items\",\n            query=context.search_query\n        )\n        return results\n\n    async def after_execute(self, context):\n        # \u8bb0\u5f55\u641c\u7d22\u65e5\u5fd7\n        await log_search(context.user, context.search_query)\n\n# \u6ce8\u518c\u81ea\u5b9a\u4e49\u64cd\u4f5c\nrouter = CRUDRouter(schema=Item, adapter=adapter)\nrouter.register_operation(CustomSearchOperation())\n</code></pre>"},{"location":"reference/architecture/#orm-orm-adapter","title":"ORM \u9002\u914d\u5668\uff08ORM Adapter\uff09","text":""},{"location":"reference/architecture/#orm","title":"\u7edf\u4e00\u7684 ORM \u63a5\u53e3","text":"<pre><code>from abc import ABC, abstractmethod\nfrom typing import List, Any, Dict, Optional\n\nclass ORMAdapter(ABC):\n    \"\"\"ORM \u9002\u914d\u5668\u57fa\u7c7b\"\"\"\n\n    @abstractmethod\n    async def get_all(\n        self,\n        filters: Dict[str, Any],\n        sorts: Dict[str, Any],\n        pagination: Dict[str, Any]\n    ) -&gt; List[Any]:\n        \"\"\"\u83b7\u53d6\u6240\u6709\u9879\u76ee\"\"\"\n        pass\n\n    @abstractmethod\n    async def get_one(self, id: Any) -&gt; Optional[Any]:\n        \"\"\"\u83b7\u53d6\u5355\u4e2a\u9879\u76ee\"\"\"\n        pass\n\n    @abstractmethod\n    async def create(self, data: Dict[str, Any]) -&gt; Any:\n        \"\"\"\u521b\u5efa\u9879\u76ee\"\"\"\n        pass\n\n    @abstractmethod\n    async def update(self, id: Any, data: Dict[str, Any]) -&gt; Any:\n        \"\"\"\u66f4\u65b0\u9879\u76ee\"\"\"\n        pass\n\n    @abstractmethod\n    async def delete_one(self, id: Any) -&gt; Any:\n        \"\"\"\u5220\u9664\u5355\u4e2a\u9879\u76ee\"\"\"\n        pass\n\n    @abstractmethod\n    async def delete_all(self) -&gt; List[Any]:\n        \"\"\"\u5220\u9664\u6240\u6709\u9879\u76ee\"\"\"\n        pass\n\n    @abstractmethod\n    async def count(self, filters: Dict[str, Any]) -&gt; int:\n        \"\"\"\u8ba1\u6570\"\"\"\n        pass\n</code></pre>"},{"location":"reference/architecture/#sqlalchemy","title":"SQLAlchemy \u9002\u914d\u5668\u5b9e\u73b0","text":"<pre><code>class SQLAlchemyAdapter(ORMAdapter):\n    \"\"\"SQLAlchemy \u5f02\u6b65\u9002\u914d\u5668\"\"\"\n\n    def __init__(self, model: Type[Base], session_factory):\n        self.model = model\n        self.session_factory = session_factory\n\n    async def get_all(self, filters, sorts, pagination):\n        async with self.session_factory() as session:\n            query = select(self.model)\n\n            # \u5e94\u7528\u8fc7\u6ee4\n            for field, value in filters.items():\n                query = query.where(getattr(self.model, field) == value)\n\n            # \u5e94\u7528\u6392\u5e8f\n            for field, direction in sorts.items():\n                col = getattr(self.model, field)\n                query = query.order_by(col.desc() if direction == 'desc' else col)\n\n            # \u5e94\u7528\u5206\u9875\n            query = query.offset(pagination['skip']).limit(pagination['limit'])\n\n            result = await session.execute(query)\n            return result.scalars().all()\n\n    async def get_one(self, id):\n        async with self.session_factory() as session:\n            return await session.get(self.model, id)\n\n    # ... \u5176\u4ed6\u65b9\u6cd5\n</code></pre>"},{"location":"reference/architecture/#tortoise","title":"Tortoise \u9002\u914d\u5668\u5b9e\u73b0","text":"<pre><code>class TortoiseAdapter(ORMAdapter):\n    \"\"\"Tortoise ORM \u9002\u914d\u5668\"\"\"\n\n    def __init__(self, model: Type[Model]):\n        self.model = model\n\n    async def get_all(self, filters, sorts, pagination):\n        query = self.model.all()\n\n        # \u5e94\u7528\u8fc7\u6ee4\n        for field, value in filters.items():\n            query = query.filter(**{field: value})\n\n        # \u5e94\u7528\u6392\u5e8f\n        for field, direction in sorts.items():\n            if direction == 'desc':\n                query = query.order_by(f\"-{field}\")\n            else:\n                query = query.order_by(field)\n\n        # \u5e94\u7528\u5206\u9875\n        query = query.offset(pagination['skip']).limit(pagination['limit'])\n\n        return await query\n\n    # ... \u5176\u4ed6\u65b9\u6cd5\n</code></pre>"},{"location":"reference/architecture/#_7","title":"\u9519\u8bef\u5904\u7406\u7cfb\u7edf","text":""},{"location":"reference/architecture/#_8","title":"\u7ed3\u6784\u5316\u9519\u8bef","text":"<pre><code>from enum import Enum\n\nclass ErrorCode(str, Enum):\n    \"\"\"\u9519\u8bef\u4ee3\u7801\"\"\"\n    NOT_FOUND = \"NOT_FOUND\"\n    VALIDATION_ERROR = \"VALIDATION_ERROR\"\n    PERMISSION_DENIED = \"PERMISSION_DENIED\"\n    CONFLICT = \"CONFLICT\"\n    INTERNAL_ERROR = \"INTERNAL_ERROR\"\n\nclass AppError(Exception):\n    \"\"\"\u5e94\u7528\u9519\u8bef\u57fa\u7c7b\"\"\"\n\n    code: ErrorCode\n    status_code: int\n    message: str\n    details: Dict[str, Any]\n\n    def __init__(\n        self,\n        code: ErrorCode,\n        status_code: int,\n        message: str,\n        details: Dict[str, Any] = None\n    ):\n        self.code = code\n        self.status_code = status_code\n        self.message = message\n        self.details = details or {}\n\n    def to_dict(self):\n        return {\n            \"code\": self.code,\n            \"message\": self.message,\n            \"details\": self.details\n        }\n\nclass NotFoundError(AppError):\n    \"\"\"\u8d44\u6e90\u4e0d\u5b58\u5728\"\"\"\n    def __init__(self, resource: str, id: Any):\n        super().__init__(\n            code=ErrorCode.NOT_FOUND,\n            status_code=404,\n            message=f\"{resource} with id {id} not found\",\n            details={\"resource\": resource, \"id\": id}\n        )\n\nclass ValidationError(AppError):\n    \"\"\"\u9a8c\u8bc1\u9519\u8bef\"\"\"\n    def __init__(self, field: str, message: str):\n        super().__init__(\n            code=ErrorCode.VALIDATION_ERROR,\n            status_code=422,\n            message=f\"Validation error in field {field}\",\n            details={\"field\": field, \"message\": message}\n        )\n\nclass PermissionDeniedError(AppError):\n    \"\"\"\u6743\u9650\u4e0d\u8db3\"\"\"\n    def __init__(self, action: str):\n        super().__init__(\n            code=ErrorCode.PERMISSION_DENIED,\n            status_code=403,\n            message=f\"Permission denied for action {action}\",\n            details={\"action\": action}\n        )\n</code></pre>"},{"location":"reference/architecture/#_9","title":"\u9519\u8bef\u5904\u7406\u4e2d\u95f4\u4ef6","text":"<pre><code>from fastapi import Request\nfrom fastapi.responses import JSONResponse\n\n@app.exception_handler(AppError)\nasync def app_error_handler(request: Request, exc: AppError):\n    return JSONResponse(\n        status_code=exc.status_code,\n        content=exc.to_dict()\n    )\n\n@app.exception_handler(Exception)\nasync def general_exception_handler(request: Request, exc: Exception):\n    return JSONResponse(\n        status_code=500,\n        content={\n            \"code\": \"INTERNAL_ERROR\",\n            \"message\": \"Internal server error\",\n            \"details\": {}\n        }\n    )\n</code></pre>"},{"location":"reference/architecture/#hook-system","title":"\u94a9\u5b50\u7cfb\u7edf\uff08Hook System\uff09","text":""},{"location":"reference/architecture/#_10","title":"\u5168\u5c40\u94a9\u5b50","text":"<pre><code>class HookRegistry:\n    \"\"\"\u94a9\u5b50\u6ce8\u518c\u8868\"\"\"\n\n    def __init__(self):\n        self.hooks = {}\n\n    def register(self, event: str, callback):\n        \"\"\"\u6ce8\u518c\u94a9\u5b50\"\"\"\n        if event not in self.hooks:\n            self.hooks[event] = []\n        self.hooks[event].append(callback)\n\n    async def trigger(self, event: str, context: ExecutionContext):\n        \"\"\"\u89e6\u53d1\u94a9\u5b50\"\"\"\n        if event in self.hooks:\n            for callback in self.hooks[event]:\n                await callback(context)\n\n# \u652f\u6301\u7684\u94a9\u5b50\u4e8b\u4ef6\nHOOK_EVENTS = {\n    \"before_create\": \"\u521b\u5efa\u524d\",\n    \"after_create\": \"\u521b\u5efa\u540e\",\n    \"before_update\": \"\u66f4\u65b0\u524d\",\n    \"after_update\": \"\u66f4\u65b0\u540e\",\n    \"before_delete\": \"\u5220\u9664\u524d\",\n    \"after_delete\": \"\u5220\u9664\u540e\",\n    \"before_get\": \"\u83b7\u53d6\u524d\",\n    \"after_get\": \"\u83b7\u53d6\u540e\",\n}\n</code></pre>"},{"location":"reference/architecture/#_11","title":"\u4f7f\u7528\u94a9\u5b50","text":"<pre><code>async def send_email_on_create(context: ExecutionContext):\n    \"\"\"\u521b\u5efa\u540e\u53d1\u9001\u90ae\u4ef6\"\"\"\n    await send_email(\n        to=context.result.email,\n        subject=\"Welcome!\",\n        body=\"Thank you for signing up!\"\n    )\n\nasync def check_permission_before_delete(context: ExecutionContext):\n    \"\"\"\u5220\u9664\u524d\u68c0\u67e5\u6743\u9650\"\"\"\n    if not context.user.is_admin:\n        raise PermissionDeniedError(\"delete\")\n\n# \u6ce8\u518c\u94a9\u5b50\nrouter = CRUDRouter(schema=Item, adapter=adapter)\nrouter.hooks.register(\"after_create\", send_email_on_create)\nrouter.hooks.register(\"before_delete\", check_permission_before_delete)\n</code></pre>"},{"location":"reference/architecture/#_12","title":"\u54cd\u5e94\u683c\u5f0f\u7cfb\u7edf","text":""},{"location":"reference/architecture/#_13","title":"\u81ea\u5b9a\u4e49\u54cd\u5e94\u683c\u5f0f","text":"<pre><code>from typing import Generic, TypeVar, List\n\nT = TypeVar('T')\n\nclass PaginatedResponse(Generic[T]):\n    \"\"\"\u5206\u9875\u54cd\u5e94\"\"\"\n    data: List[T]\n    total: int\n    page: int\n    pages: int\n    limit: int\n    skip: int\n\nclass CustomResponse(Generic[T]):\n    \"\"\"\u81ea\u5b9a\u4e49\u54cd\u5e94\"\"\"\n    items: List[T]\n    meta: Dict[str, Any]\n    links: Dict[str, str]\n\nclass ResponseFormatter(ABC):\n    \"\"\"\u54cd\u5e94\u683c\u5f0f\u5316\u5668\"\"\"\n\n    @abstractmethod\n    def format_list(self, items: List[T], total: int, pagination: Dict) -&gt; Any:\n        \"\"\"\u683c\u5f0f\u5316\u5217\u8868\u54cd\u5e94\"\"\"\n        pass\n\n    @abstractmethod\n    def format_single(self, item: T) -&gt; Any:\n        \"\"\"\u683c\u5f0f\u5316\u5355\u4e2a\u9879\u76ee\u54cd\u5e94\"\"\"\n        pass\n\n    @abstractmethod\n    def format_error(self, error: AppError) -&gt; Any:\n        \"\"\"\u683c\u5f0f\u5316\u9519\u8bef\u54cd\u5e94\"\"\"\n        pass\n\nclass DefaultResponseFormatter(ResponseFormatter):\n    \"\"\"\u9ed8\u8ba4\u54cd\u5e94\u683c\u5f0f\u5316\u5668\"\"\"\n\n    def format_list(self, items, total, pagination):\n        return {\n            \"data\": items,\n            \"total\": total,\n            \"page\": pagination['page'],\n            \"pages\": pagination['pages'],\n            \"limit\": pagination['limit'],\n            \"skip\": pagination['skip']\n        }\n\n    def format_single(self, item):\n        return {\"data\": item}\n\n    def format_error(self, error):\n        return error.to_dict()\n</code></pre>"},{"location":"reference/architecture/#_14","title":"\u4f7f\u7528\u81ea\u5b9a\u4e49\u54cd\u5e94\u683c\u5f0f","text":"<pre><code>class CustomResponseFormatter(ResponseFormatter):\n    def format_list(self, items, total, pagination):\n        return {\n            \"items\": items,\n            \"meta\": {\n                \"total\": total,\n                \"page\": pagination['page'],\n                \"pages\": pagination['pages']\n            },\n            \"links\": {\n                \"self\": f\"/items?page={pagination['page']}\",\n                \"next\": f\"/items?page={pagination['page'] + 1}\" if pagination['page'] &lt; pagination['pages'] else None,\n                \"prev\": f\"/items?page={pagination['page'] - 1}\" if pagination['page'] &gt; 1 else None\n            }\n        }\n\n    # ... \u5176\u4ed6\u65b9\u6cd5\n\nrouter = CRUDRouter(\n    schema=Item,\n    adapter=adapter,\n    response_formatter=CustomResponseFormatter()\n)\n</code></pre>"},{"location":"reference/architecture/#_15","title":"\u914d\u7f6e\u7cfb\u7edf","text":""},{"location":"reference/architecture/#_16","title":"\u96c6\u4e2d\u914d\u7f6e","text":"<pre><code>from dataclasses import dataclass\nfrom typing import List, Type\n\n@dataclass\nclass CRUDConfig:\n    \"\"\"CRUD \u914d\u7f6e\"\"\"\n    # \u529f\u80fd\u5f00\u5173\n    enable_filters: bool = True\n    enable_sorters: bool = True\n    enable_pagination: bool = True\n    enable_soft_delete: bool = False\n    enable_audit: bool = False\n    enable_bulk_operations: bool = False\n\n    # \u8fc7\u6ee4\u914d\u7f6e\n    filter_fields: List[str] = None\n\n    # \u6392\u5e8f\u914d\u7f6e\n    sort_fields: List[str] = None\n    default_sort: str = None\n\n    # \u5206\u9875\u914d\u7f6e\n    default_limit: int = 10\n    max_limit: int = 100\n\n    # \u8f6f\u5220\u9664\u914d\u7f6e\n    deleted_at_field: str = \"deleted_at\"\n\n    # \u54cd\u5e94\u683c\u5f0f\n    response_formatter: Type[ResponseFormatter] = DefaultResponseFormatter\n\n    # \u9519\u8bef\u5904\u7406\n    include_error_details: bool = True\n    log_errors: bool = True\n\n# \u4f7f\u7528\u914d\u7f6e\nconfig = CRUDConfig(\n    enable_filters=True,\n    filter_fields=[\"name\", \"price\"],\n    enable_sorters=True,\n    sort_fields=[\"name\", \"created_at\"],\n    enable_soft_delete=True,\n    enable_audit=True,\n    default_limit=20,\n    max_limit=100\n)\n\nrouter = CRUDRouter(schema=Item, adapter=adapter, config=config)\n</code></pre>"},{"location":"reference/architecture/#_17","title":"\u5b8c\u6574\u793a\u4f8b\uff1a\u6269\u5c55\u7cfb\u7edf","text":"<pre><code># 1. \u5b9a\u4e49\u81ea\u5b9a\u4e49\u64cd\u4f5c\nclass ExportOperation(Operation):\n    name = \"export\"\n    method = \"GET\"\n    path = \"/export\"\n\n    async def before_execute(self, context):\n        if not context.user.is_admin:\n            raise PermissionDeniedError(\"export\")\n\n    async def execute(self, context):\n        items = await context.adapter.get_all(\n            filters=context.filters,\n            sorts=context.sorts,\n            pagination={\"skip\": 0, \"limit\": None}\n        )\n        return self._to_csv(items)\n\n    async def after_execute(self, context):\n        await log_export(context.user, len(context.result))\n\n# 2. \u5b9a\u4e49\u81ea\u5b9a\u4e49\u9002\u914d\u5668\nclass ElasticsearchAdapter(ORMAdapter):\n    async def get_all(self, filters, sorts, pagination):\n        # \u4f7f\u7528 Elasticsearch \u641c\u7d22\n        pass\n\n# 3. \u5b9a\u4e49\u81ea\u5b9a\u4e49\u54cd\u5e94\u683c\u5f0f\nclass GraphQLResponseFormatter(ResponseFormatter):\n    def format_list(self, items, total, pagination):\n        return {\n            \"data\": {\n                \"items\": items,\n                \"pageInfo\": {\n                    \"total\": total,\n                    \"hasNextPage\": pagination['skip'] + pagination['limit'] &lt; total\n                }\n            }\n        }\n\n# 4. \u521b\u5efa\u8def\u7531\nconfig = CRUDConfig(\n    enable_filters=True,\n    enable_sorters=True,\n    response_formatter=GraphQLResponseFormatter\n)\n\nrouter = CRUDRouter(\n    schema=Item,\n    adapter=SQLAlchemyAdapter(ItemDB, get_db),\n    config=config\n)\n\n# 5. \u6ce8\u518c\u81ea\u5b9a\u4e49\u64cd\u4f5c\nrouter.register_operation(ExportOperation())\n\n# 6. \u6ce8\u518c\u94a9\u5b50\nrouter.hooks.register(\"after_create\", send_email_on_create)\nrouter.hooks.register(\"before_delete\", check_permission_before_delete)\n</code></pre>"},{"location":"reference/architecture/#_18","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u5b66\u4e60\u641c\u7d22\u548c\u8fc7\u6ee4</li> <li>\u4e86\u89e3\u6392\u5e8f\u529f\u80fd</li> <li>\u67e5\u770b\u5b8c\u6574\u793a\u4f8b</li> </ul>"},{"location":"reference/cli/","title":"CLI \u5de5\u5177","text":"<p>FastAPI-Easy \u63d0\u4f9b\u4e86\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u7528\u4e8e\u5feb\u901f\u521d\u59cb\u5316\u9879\u76ee\u3001\u751f\u6210\u4ee3\u7801\u548c\u7ba1\u7406\u5e94\u7528\u3002</p>"},{"location":"reference/cli/#cli_1","title":"\u4ec0\u4e48\u662f CLI \u5de5\u5177\uff1f","text":"<p>CLI\uff08Command Line Interface\uff09\u5de5\u5177\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u529f\u80fd\uff1a</p> <ul> <li>\u2705 \u9879\u76ee\u521d\u59cb\u5316 - \u5feb\u901f\u521b\u5efa\u65b0\u9879\u76ee</li> <li>\u2705 \u4ee3\u7801\u751f\u6210 - \u81ea\u52a8\u751f\u6210 CRUD \u8def\u7531</li> <li>\u2705 \u9879\u76ee\u7ba1\u7406 - \u7ba1\u7406\u9879\u76ee\u914d\u7f6e\u548c\u4f9d\u8d56</li> <li>\u2705 \u7248\u672c\u7ba1\u7406 - \u67e5\u770b\u7248\u672c\u4fe1\u606f</li> </ul>"},{"location":"reference/cli/#_1","title":"\u5b89\u88c5","text":"<pre><code>pip install fastapi-easy[cli]\n</code></pre>"},{"location":"reference/cli/#_2","title":"\u57fa\u7840\u547d\u4ee4","text":""},{"location":"reference/cli/#1","title":"1. \u67e5\u770b\u5e2e\u52a9","text":"<pre><code># \u67e5\u770b\u6240\u6709\u547d\u4ee4\nfastapi-easy --help\n\n# \u67e5\u770b\u7279\u5b9a\u547d\u4ee4\u5e2e\u52a9\nfastapi-easy init --help\nfastapi-easy generate --help\n</code></pre>"},{"location":"reference/cli/#2","title":"2. \u67e5\u770b\u7248\u672c","text":"<pre><code>fastapi-easy --version\n</code></pre>"},{"location":"reference/cli/#_3","title":"\u9879\u76ee\u521d\u59cb\u5316","text":""},{"location":"reference/cli/#_4","title":"\u57fa\u7840\u7528\u6cd5","text":"<pre><code># \u521b\u5efa\u65b0\u9879\u76ee\nfastapi-easy init --name my_project\n\n# \u5728\u6307\u5b9a\u8def\u5f84\u521b\u5efa\u9879\u76ee\nfastapi-easy init --name my_project --path ./projects\n</code></pre>"},{"location":"reference/cli/#_5","title":"\u4ea4\u4e92\u5f0f\u521d\u59cb\u5316","text":"<pre><code>fastapi-easy init\n\n# \u8f93\u5165\u9879\u76ee\u540d\u79f0\nProject name: my_app\n\n# \u9879\u76ee\u521b\u5efa\u5b8c\u6210\n\u2705 Project 'my_app' created successfully at ./my_app\n</code></pre>"},{"location":"reference/cli/#_6","title":"\u751f\u6210\u7684\u9879\u76ee\u7ed3\u6784","text":"<pre><code>my_project/\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 main.py              # FastAPI \u5e94\u7528\u5165\u53e3\n\u251c\u2500\u2500 tests/\n\u2502   \u2514\u2500\u2500 __init__.py          # \u6d4b\u8bd5\u76ee\u5f55\n\u251c\u2500\u2500 docs/\n\u2502   \u2514\u2500\u2500 __init__.py          # \u6587\u6863\u76ee\u5f55\n\u251c\u2500\u2500 requirements.txt         # \u4f9d\u8d56\u5217\u8868\n\u2514\u2500\u2500 README.md               # \u9879\u76ee\u8bf4\u660e\n</code></pre>"},{"location":"reference/cli/#_7","title":"\u751f\u6210\u7684\u6587\u4ef6\u5185\u5bb9","text":"<p>src/main.py: <pre><code>from fastapi import FastAPI\nfrom fastapi_easy import CRUDRouter\n\napp = FastAPI()\n\n# Your routes here\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)\n</code></pre></p> <p>requirements.txt: <pre><code>fastapi&gt;=0.100.0\nfastapi-easy&gt;=1.0.0\nsqlalchemy&gt;=2.0.0\nuvicorn&gt;=0.23.0\npydantic&gt;=2.0.0\n</code></pre></p>"},{"location":"reference/cli/#_8","title":"\u4ee3\u7801\u751f\u6210","text":""},{"location":"reference/cli/#_9","title":"\u57fa\u7840\u7528\u6cd5","text":"<pre><code># \u751f\u6210 CRUD \u8def\u7531\nfastapi-easy generate --model Item --fields \"name:str,price:float,description:str\"\n</code></pre>"},{"location":"reference/cli/#_10","title":"\u4ea4\u4e92\u5f0f\u751f\u6210","text":"<pre><code>fastapi-easy generate\n\n# \u8f93\u5165\u6a21\u578b\u540d\u79f0\nModel name: Product\n\n# \u8f93\u5165\u5b57\u6bb5\uff08\u9017\u53f7\u5206\u9694\uff09\nFields (comma-separated): name, price, stock, category\n\n# \u751f\u6210\u5b8c\u6210\n\u2705 CRUD router generated for model 'Product'\n</code></pre>"},{"location":"reference/cli/#_11","title":"\u751f\u6210\u7684\u4ee3\u7801","text":"<pre><code>from pydantic import BaseModel, ConfigDict\nfrom typing import Optional\n\nclass Item(BaseModel):\n    id: Optional[int] = None\n    name: str\n    price: float\n    description: str\n\n    model_config = ConfigDict(from_attributes=True)\n\n# CRUD Router\nfrom fastapi_easy import CRUDRouter\nfrom fastapi_easy.backends import SQLAlchemyAsyncBackend\n\nrouter = CRUDRouter(\n    schema=Item,\n    backend=backend,\n    prefix=\"/items\",\n    tags=[\"items\"]\n)\n</code></pre>"},{"location":"reference/cli/#_12","title":"\u5b8c\u6574\u5de5\u4f5c\u6d41","text":""},{"location":"reference/cli/#1_1","title":"1. \u521b\u5efa\u9879\u76ee","text":"<pre><code>fastapi-easy init --name ecommerce_api\ncd ecommerce_api\n</code></pre>"},{"location":"reference/cli/#2_1","title":"2. \u751f\u6210\u6a21\u578b","text":"<pre><code># \u751f\u6210 Product \u6a21\u578b\nfastapi-easy generate --model Product --fields \"name,price,stock,category\"\n\n# \u751f\u6210 Order \u6a21\u578b\nfastapi-easy generate --model Order --fields \"product_id,quantity,total_price,status\"\n\n# \u751f\u6210 User \u6a21\u578b\nfastapi-easy generate --model User --fields \"username,email,password,role\"\n</code></pre>"},{"location":"reference/cli/#3","title":"3. \u5b89\u88c5\u4f9d\u8d56","text":"<pre><code>pip install -r requirements.txt\n</code></pre>"},{"location":"reference/cli/#4","title":"4. \u8fd0\u884c\u5e94\u7528","text":"<pre><code>python src/main.py\n\n# \u8f93\u51fa\uff1a\n# INFO:     Uvicorn running on http://0.0.0.0:8000\n# INFO:     Application startup complete\n</code></pre>"},{"location":"reference/cli/#5-api","title":"5. \u8bbf\u95ee API","text":"<pre><code># \u67e5\u770b API \u6587\u6863\ncurl http://localhost:8000/docs\n\n# \u521b\u5efa\u9879\u76ee\ncurl -X POST http://localhost:8000/items \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"name\": \"Apple\", \"price\": 1.5, \"description\": \"Fresh apple\"}'\n\n# \u83b7\u53d6\u6240\u6709\u9879\u76ee\ncurl http://localhost:8000/items\n\n# \u83b7\u53d6\u5355\u4e2a\u9879\u76ee\ncurl http://localhost:8000/items/1\n\n# \u66f4\u65b0\u9879\u76ee\ncurl -X PUT http://localhost:8000/items/1 \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"name\": \"Red Apple\", \"price\": 2.0}'\n\n# \u5220\u9664\u9879\u76ee\ncurl -X DELETE http://localhost:8000/items/1\n</code></pre>"},{"location":"reference/cli/#_13","title":"\u9ad8\u7ea7\u7528\u6cd5","text":""},{"location":"reference/cli/#1_2","title":"1. \u81ea\u5b9a\u4e49\u9879\u76ee\u6a21\u677f","text":"<pre><code># \u4f7f\u7528\u81ea\u5b9a\u4e49\u6a21\u677f\u521b\u5efa\u9879\u76ee\nfastapi-easy init --name my_project --template advanced\n</code></pre>"},{"location":"reference/cli/#2_2","title":"2. \u751f\u6210\u591a\u4e2a\u6a21\u578b","text":"<pre><code># \u521b\u5efa\u811a\u672c generate_models.sh\n#!/bin/bash\n\nfastapi-easy generate --model User --fields \"username,email,password\"\nfastapi-easy generate --model Post --fields \"title,content,author_id\"\nfastapi-easy generate --model Comment --fields \"text,post_id,author_id\"\n\n# \u8fd0\u884c\u811a\u672c\nchmod +x generate_models.sh\n./generate_models.sh\n</code></pre>"},{"location":"reference/cli/#3_1","title":"3. \u914d\u7f6e\u7ba1\u7406","text":"<pre><code># \u67e5\u770b\u914d\u7f6e\nfastapi-easy config --show\n\n# \u8bbe\u7f6e\u914d\u7f6e\nfastapi-easy config --set database_url \"postgresql://user:pass@localhost/db\"\n\n# \u91cd\u7f6e\u914d\u7f6e\nfastapi-easy config --reset\n</code></pre>"},{"location":"reference/cli/#_14","title":"\u5e38\u7528\u547d\u4ee4\u53c2\u8003","text":"\u547d\u4ee4 \u8bf4\u660e \u793a\u4f8b <code>init</code> \u521d\u59cb\u5316\u9879\u76ee <code>fastapi-easy init --name my_app</code> <code>generate</code> \u751f\u6210 CRUD \u8def\u7531 <code>fastapi-easy generate --model Item --fields \"name,price\"</code> <code>config</code> \u7ba1\u7406\u914d\u7f6e <code>fastapi-easy config --show</code> <code>--version</code> \u663e\u793a\u7248\u672c <code>fastapi-easy --version</code> <code>--help</code> \u663e\u793a\u5e2e\u52a9 <code>fastapi-easy --help</code>"},{"location":"reference/cli/#_15","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"reference/cli/#1_3","title":"1. \u4f7f\u7528\u7248\u672c\u63a7\u5236","text":"<pre><code># \u521d\u59cb\u5316 Git \u4ed3\u5e93\ncd my_project\ngit init\n\n# \u6dfb\u52a0 .gitignore\necho \"*.pyc\" &gt;&gt; .gitignore\necho \"__pycache__/\" &gt;&gt; .gitignore\necho \".env\" &gt;&gt; .gitignore\necho \"venv/\" &gt;&gt; .gitignore\n\n# \u63d0\u4ea4\u521d\u59cb\u4ee3\u7801\ngit add .\ngit commit -m \"Initial commit\"\n</code></pre>"},{"location":"reference/cli/#2_3","title":"2. \u865a\u62df\u73af\u5883\u7ba1\u7406","text":"<pre><code># \u521b\u5efa\u865a\u62df\u73af\u5883\npython -m venv venv\n\n# \u6fc0\u6d3b\u865a\u62df\u73af\u5883\n# Linux/Mac:\nsource venv/bin/activate\n# Windows:\nvenv\\Scripts\\activate\n\n# \u5b89\u88c5\u4f9d\u8d56\npip install -r requirements.txt\n</code></pre>"},{"location":"reference/cli/#3_2","title":"3. \u73af\u5883\u53d8\u91cf\u914d\u7f6e","text":"<pre><code># \u521b\u5efa .env \u6587\u4ef6\necho \"DATABASE_URL=sqlite:///./test.db\" &gt; .env\necho \"DEBUG=True\" &gt;&gt; .env\n\n# \u5728\u5e94\u7528\u4e2d\u4f7f\u7528\nfrom dotenv import load_dotenv\nimport os\n\nload_dotenv()\ndatabase_url = os.getenv(\"DATABASE_URL\")\n</code></pre>"},{"location":"reference/cli/#_16","title":"\u5e38\u89c1\u95ee\u9898","text":"<p>Q: \u5982\u4f55\u66f4\u65b0 fastapi-easy\uff1f</p> <p>A: \u4f7f\u7528 pip \u66f4\u65b0\uff1a <pre><code>pip install --upgrade fastapi-easy\n</code></pre></p> <p>Q: \u5982\u4f55\u5378\u8f7d CLI \u5de5\u5177\uff1f</p> <p>A: \u4f7f\u7528 pip \u5378\u8f7d\uff1a <pre><code>pip uninstall fastapi-easy\n</code></pre></p> <p>Q: \u5982\u4f55\u81ea\u5b9a\u4e49\u751f\u6210\u7684\u4ee3\u7801\uff1f</p> <p>A: \u7f16\u8f91\u751f\u6210\u7684\u6587\u4ef6\u6216\u4f7f\u7528\u81ea\u5b9a\u4e49\u6a21\u677f\u3002</p> <p>Q: \u5982\u4f55\u5728 CI/CD \u4e2d\u4f7f\u7528 CLI\uff1f</p> <p>A: \u5728 CI/CD \u811a\u672c\u4e2d\u8c03\u7528 CLI \u547d\u4ee4\uff1a <pre><code>#!/bin/bash\nfastapi-easy init --name my_app\ncd my_app\npip install -r requirements.txt\npython -m pytest\n</code></pre></p>"},{"location":"reference/cli/#_17","title":"\u811a\u672c\u793a\u4f8b","text":""},{"location":"reference/cli/#_18","title":"\u5feb\u901f\u542f\u52a8\u811a\u672c","text":"<p>start.sh: <pre><code>#!/bin/bash\n\n# \u521b\u5efa\u865a\u62df\u73af\u5883\npython -m venv venv\n\n# \u6fc0\u6d3b\u865a\u62df\u73af\u5883\nsource venv/bin/activate\n\n# \u5b89\u88c5\u4f9d\u8d56\npip install -r requirements.txt\n\n# \u8fd0\u884c\u5e94\u7528\npython src/main.py\n</code></pre></p>"},{"location":"reference/cli/#_19","title":"\u9879\u76ee\u751f\u6210\u811a\u672c","text":"<p>setup_project.sh: <pre><code>#!/bin/bash\n\nPROJECT_NAME=$1\n\n# \u521b\u5efa\u9879\u76ee\nfastapi-easy init --name $PROJECT_NAME\n\n# \u8fdb\u5165\u9879\u76ee\u76ee\u5f55\ncd $PROJECT_NAME\n\n# \u751f\u6210\u5e38\u7528\u6a21\u578b\nfastapi-easy generate --model User --fields \"username,email,password\"\nfastapi-easy generate --model Post --fields \"title,content,author_id\"\n\n# \u521d\u59cb\u5316 Git\ngit init\ngit add .\ngit commit -m \"Initial commit\"\n\necho \"\u2705 Project '$PROJECT_NAME' setup complete!\"\n</code></pre></p> <p>\u4f7f\u7528\u65b9\u6cd5\uff1a <pre><code>chmod +x setup_project.sh\n./setup_project.sh my_app\n</code></pre></p>"},{"location":"reference/cli/#_20","title":"\u76f8\u5173\u8d44\u6e90","text":"<ul> <li>Click \u6587\u6863</li> <li>FastAPI \u5b98\u65b9\u6587\u6863</li> <li>Python \u865a\u62df\u73af\u5883</li> </ul> <p>\u5b8c\u6210\uff01 \u6240\u6709\u6269\u5c55\u529f\u80fd\u6587\u6863\u5df2\u7f16\u5199\u3002</p>"},{"location":"reference/configuration/","title":"\u914d\u7f6e\u53c2\u8003\u624b\u518c","text":"<p>\u672c\u6587\u6863\u8be6\u7ec6\u4ecb\u7ecd\u4e86 <code>CRUDConfig</code> \u7c7b\u7684\u6240\u6709\u53ef\u7528\u914d\u7f6e\u9879\u3002</p>"},{"location":"reference/configuration/#_2","title":"\u57fa\u7840\u7528\u6cd5","text":"<p>\u914d\u7f6e\u53ef\u4ee5\u901a\u8fc7 <code>CRUDRouter</code> \u7684 <code>config</code> \u53c2\u6570\u4f20\u9012\uff0c\u6216\u8005\u76f4\u63a5\u4f5c\u4e3a\u5173\u952e\u5b57\u53c2\u6570\u4f20\u9012\uff08\u90e8\u5206\u652f\u6301\uff0c\u5efa\u8bae\u4f7f\u7528 <code>CRUDConfig</code> \u5bf9\u8c61\uff09\u3002</p> <pre><code>from fastapi_easy import CRUDRouter, CRUDConfig\n\nconfig = CRUDConfig(\n    enable_filters=True,\n    default_limit=20\n)\n\nrouter = CRUDRouter(\n    schema=Item,\n    adapter=adapter,\n    config=config\n)\n</code></pre>"},{"location":"reference/configuration/#crudconfig","title":"CRUDConfig \u53c2\u6570\u8be6\u89e3","text":""},{"location":"reference/configuration/#feature-toggles","title":"\u529f\u80fd\u5f00\u5173 (Feature Toggles)","text":"\u53c2\u6570\u540d \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 <code>enable_filters</code> <code>bool</code> <code>True</code> \u662f\u5426\u542f\u7528\u641c\u7d22\u548c\u8fc7\u6ee4\u529f\u80fd <code>enable_sorters</code> <code>bool</code> <code>True</code> \u662f\u5426\u542f\u7528\u6392\u5e8f\u529f\u80fd <code>enable_pagination</code> <code>bool</code> <code>True</code> \u662f\u5426\u542f\u7528\u5206\u9875\u529f\u80fd <code>enable_soft_delete</code> <code>bool</code> <code>False</code> \u662f\u5426\u542f\u7528\u8f6f\u5220\u9664\uff08\u903b\u8f91\u5220\u9664\uff09 <code>enable_audit</code> <code>bool</code> <code>False</code> \u662f\u5426\u542f\u7528\u5ba1\u8ba1\u65e5\u5fd7\uff08\u9700\u914d\u5408 Adapter \u652f\u6301\uff09 <code>enable_bulk_operations</code> <code>bool</code> <code>False</code> \u662f\u5426\u542f\u7528\u6279\u91cf\u64cd\u4f5c API <code>enable_delete_all</code> <code>bool</code> <code>False</code> \u662f\u5426\u542f\u7528\"\u5220\u9664\u6240\u6709\" API (\u5371\u9669\u64cd\u4f5c)"},{"location":"reference/configuration/#filtering-sorting","title":"\u8fc7\u6ee4\u4e0e\u6392\u5e8f (Filtering &amp; Sorting)","text":"\u53c2\u6570\u540d \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 <code>filter_fields</code> <code>List[str]</code> <code>None</code> \u5141\u8bb8\u8fc7\u6ee4\u7684\u5b57\u6bb5\u5217\u8868\u3002\u5982\u679c\u4e3a <code>None</code>\uff0c\u5219\u4e0d\u9650\u5236\uff08\u4e0d\u63a8\u8350\uff09\u3002 <code>sort_fields</code> <code>List[str]</code> <code>None</code> \u5141\u8bb8\u6392\u5e8f\u7684\u5b57\u6bb5\u5217\u8868\u3002\u5982\u679c\u4e3a <code>None</code>\uff0c\u5219\u4e0d\u9650\u5236\u3002 <code>default_sort</code> <code>str</code> <code>None</code> \u9ed8\u8ba4\u6392\u5e8f\u5b57\u6bb5\uff08\u5982 <code>\"-created_at\"</code>\uff09\u3002"},{"location":"reference/configuration/#pagination","title":"\u5206\u9875 (Pagination)","text":"\u53c2\u6570\u540d \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 <code>default_limit</code> <code>int</code> <code>10</code> \u9ed8\u8ba4\u6bcf\u9875\u663e\u793a\u7684\u8bb0\u5f55\u6570\u3002 <code>max_limit</code> <code>int</code> <code>100</code> \u5141\u8bb8\u7684\u6700\u5927\u6bcf\u9875\u8bb0\u5f55\u6570\uff08\u9632\u6b62\u6076\u610f\u8bf7\u6c42\uff09\u3002"},{"location":"reference/configuration/#soft-delete","title":"\u8f6f\u5220\u9664 (Soft Delete)","text":"\u53c2\u6570\u540d \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 <code>deleted_at_field</code> <code>str</code> <code>\"deleted_at\"</code> \u6570\u636e\u5e93\u4e2d\u7528\u4e8e\u6807\u8bb0\u5220\u9664\u65f6\u95f4\u7684\u5b57\u6bb5\u540d\u3002"},{"location":"reference/configuration/#error-handling-logging","title":"\u9519\u8bef\u5904\u7406\u4e0e\u65e5\u5fd7 (Error Handling &amp; Logging)","text":"\u53c2\u6570\u540d \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 <code>include_error_details</code> <code>bool</code> <code>True</code> \u662f\u5426\u5728 API \u9519\u8bef\u54cd\u5e94\u4e2d\u5305\u542b\u8be6\u7ec6\u8c03\u8bd5\u4fe1\u606f\u3002 <code>log_errors</code> <code>bool</code> <code>True</code> \u662f\u5426\u5c06\u9519\u8bef\u8bb0\u5f55\u5230\u7cfb\u7edf\u65e5\u5fd7\u3002"},{"location":"reference/configuration/#_3","title":"\u5176\u4ed6","text":"\u53c2\u6570\u540d \u7c7b\u578b \u9ed8\u8ba4\u503c \u63cf\u8ff0 <code>metadata</code> <code>Dict</code> <code>{}</code> \u7528\u4e8e\u5b58\u50a8\u81ea\u5b9a\u4e49\u5143\u6570\u636e\u7684\u5b57\u5178\uff0c\u53ef\u5728\u94a9\u5b50\u4e2d\u8bbf\u95ee\u3002"},{"location":"reference/configuration/#_4","title":"\u52a8\u6001\u66f4\u65b0\u914d\u7f6e","text":"<p>\u4f60\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u66f4\u65b0\u914d\u7f6e\uff1a</p> <pre><code>router.update_config(default_limit=50, enable_delete_all=True)\n</code></pre> <p>\u6216\u8005\u83b7\u53d6\u5f53\u524d\u914d\u7f6e\uff1a</p> <pre><code>current_config = router.get_config()\nprint(current_config.default_limit)\n</code></pre>"},{"location":"reference/data-flow/","title":"\u6570\u636e\u5230 API \u7684\u5b8c\u6574\u6d41\u7a0b","text":""},{"location":"reference/data-flow/#_1","title":"\u6982\u8ff0","text":"<p>\u672c\u6587\u6863\u8be6\u7ec6\u89e3\u91ca\u4ece\u6570\u636e\u5e93\u5230 API \u7684\u5b8c\u6574\u6d41\u7a0b\uff0c\u4ee5\u53ca\u4e2d\u95f4\u4f7f\u7528\u7684\u4f9d\u8d56\u5e93\u3002</p>"},{"location":"reference/data-flow/#_2","title":"\u5b8c\u6574\u6d41\u7a0b\u56fe","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      \u7528\u6237\u8bf7\u6c42                                \u2502\n\u2502                   (HTTP Request)                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n                         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    FastAPI \u6846\u67b6                              \u2502\n\u2502  (\u63a5\u6536\u8bf7\u6c42\u3001\u8def\u7531\u5339\u914d\u3001\u53c2\u6570\u9a8c\u8bc1)                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n                         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  fastapi-easy \u8def\u7531                           \u2502\n\u2502  (CRUDRouter \u5904\u7406\u8bf7\u6c42\u3001\u8c03\u7528\u540e\u7aef)                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n                         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   \u540e\u7aef\u9002\u914d\u5668                                 \u2502\n\u2502  (SQLAlchemyAdapter / TortoiseAdapter / ...)           \u2502\n\u2502  (\u6784\u5efa\u67e5\u8be2\u3001\u5e94\u7528\u8fc7\u6ee4\u3001\u6392\u5e8f\u3001\u5206\u9875)                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n                         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    ORM \u5c42                                    \u2502\n\u2502  (SQLAlchemy / Tortoise / Gino / ...)                       \u2502\n\u2502  (\u751f\u6210 SQL\u3001\u6267\u884c\u67e5\u8be2)                                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n                         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   \u6570\u636e\u5e93\u9a71\u52a8                                 \u2502\n\u2502  (asyncpg / aiosqlite / ...)                                \u2502\n\u2502  (\u5f02\u6b65\u6267\u884c SQL)                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n                         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    \u6570\u636e\u5e93                                    \u2502\n\u2502  (PostgreSQL / SQLite / MySQL / ...)                        \u2502\n\u2502  (\u5b58\u50a8\u548c\u68c0\u7d22\u6570\u636e)                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n                         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   \u6570\u636e\u8fd4\u56de                                   \u2502\n\u2502  (ORM \u5bf9\u8c61 \u2192 Pydantic Schema \u2192 JSON)                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n                         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   HTTP \u54cd\u5e94                                  \u2502\n\u2502  (JSON \u683c\u5f0f\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef)                                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"reference/data-flow/#_3","title":"\u8be6\u7ec6\u6b65\u9aa4\u8bf4\u660e","text":""},{"location":"reference/data-flow/#1-http","title":"\u6b65\u9aa4 1: \u7528\u6237\u53d1\u9001 HTTP \u8bf7\u6c42","text":"<pre><code>GET /items?name=apple&amp;price__gt=10&amp;sort=-created_at&amp;skip=0&amp;limit=10\n</code></pre> <p>\u8bf7\u6c42\u5305\u542b: - \u8def\u5f84: <code>/items</code> - \u67e5\u8be2\u53c2\u6570: <code>name=apple</code>, <code>price__gt=10</code>, <code>sort=-created_at</code>, <code>skip=0</code>, <code>limit=10</code></p>"},{"location":"reference/data-flow/#2-fastapi","title":"\u6b65\u9aa4 2: FastAPI \u63a5\u6536\u8bf7\u6c42","text":"<p>\u4f9d\u8d56\u5e93: <code>fastapi</code></p> <pre><code>from fastapi import FastAPI\n\napp = FastAPI()\n\n# FastAPI \u505a\u7684\u4e8b\uff1a\n# 1. \u8def\u7531\u5339\u914d (GET /items)\n# 2. \u53c2\u6570\u63d0\u53d6 (name, price__gt, sort, skip, limit)\n# 3. \u7c7b\u578b\u9a8c\u8bc1 (\u786e\u4fdd\u53c2\u6570\u7c7b\u578b\u6b63\u786e)\n</code></pre>"},{"location":"reference/data-flow/#3-fastapi-easy","title":"\u6b65\u9aa4 3: fastapi-easy \u8def\u7531\u5904\u7406","text":"<p>\u4f9d\u8d56\u5e93: <code>fastapi-easy</code></p> <pre><code>from fastapi_easy import CRUDRouter\n\nrouter = CRUDRouter(\n    schema=Item,\n    adapter=adapter,\n    enable_filters=True,\n    filter_fields=[\"name\", \"price\"],\n    enable_sorters=True,\n    sort_fields=[\"name\", \"created_at\"]\n)\n\n# CRUDRouter \u505a\u7684\u4e8b\uff1a\n# 1. \u89e3\u6790\u8fc7\u6ee4\u53c2\u6570 (name=apple, price__gt=10)\n# 2. \u89e3\u6790\u6392\u5e8f\u53c2\u6570 (sort=-created_at)\n# 3. \u89e3\u6790\u5206\u9875\u53c2\u6570 (skip=0, limit=10)\n# 4. \u8c03\u7528\u540e\u7aef\u5904\u7406\n</code></pre>"},{"location":"reference/data-flow/#4","title":"\u6b65\u9aa4 4: \u540e\u7aef\u9002\u914d\u5668\u5904\u7406","text":"<p>\u4f9d\u8d56\u5e93: <code>fastapi-easy.backends</code></p> <pre><code>from fastapi_easy.backends import SQLAlchemyAdapter\n\nadapter = SQLAlchemyAdapter(ItemDB, get_db)\n\n# \u540e\u7aef\u505a\u7684\u4e8b\uff1a\n# 1. \u6784\u5efa\u57fa\u7840\u67e5\u8be2\n# 2. \u5e94\u7528\u8fc7\u6ee4\u6761\u4ef6\n# 3. \u5e94\u7528\u6392\u5e8f\u6761\u4ef6\n# 4. \u5e94\u7528\u5206\u9875\u6761\u4ef6\n# 5. \u6267\u884c\u67e5\u8be2\n</code></pre> <p>\u5177\u4f53\u4ee3\u7801\u6d41\u7a0b:</p> <pre><code># \u4f2a\u4ee3\u7801\nclass SQLAlchemyAdapter:\n    async def get_all(self, filters, sorts, skip, limit):\n        # 1. \u6784\u5efa\u57fa\u7840\u67e5\u8be2\n        query = select(ItemDB)\n\n        # 2. \u5e94\u7528\u8fc7\u6ee4\n        if filters:\n            # name=apple \u2192 where name = 'apple'\n            # price__gt=10 \u2192 where price &gt; 10\n            query = apply_filters(query, filters)\n\n        # 3. \u5e94\u7528\u6392\u5e8f\n        if sorts:\n            # sort=-created_at \u2192 order by created_at desc\n            query = apply_sorts(query, sorts)\n\n        # 4. \u5e94\u7528\u5206\u9875\n        query = query.offset(skip).limit(limit)\n\n        # 5. \u6267\u884c\u67e5\u8be2\n        result = await db.execute(query)\n        return result.scalars().all()\n</code></pre>"},{"location":"reference/data-flow/#5-orm-sql","title":"\u6b65\u9aa4 5: ORM \u5c42\u751f\u6210 SQL","text":"<p>\u4f9d\u8d56\u5e93: <code>sqlalchemy</code> (\u6216\u5176\u4ed6 ORM)</p> <pre><code>from sqlalchemy import select\nfrom sqlalchemy.ext.asyncio import AsyncSession\n\n# SQLAlchemy \u505a\u7684\u4e8b\uff1a\n# 1. \u5c06 Python \u5bf9\u8c61\u8f6c\u6362\u4e3a SQL\n# 2. \u751f\u6210 SQL \u8bed\u53e5\n\n# \u751f\u6210\u7684 SQL \u7c7b\u4f3c\u4e8e\uff1a\n# SELECT * FROM items \n# WHERE name = 'apple' AND price &gt; 10 \n# ORDER BY created_at DESC \n# LIMIT 10 OFFSET 0\n</code></pre>"},{"location":"reference/data-flow/#6-sql","title":"\u6b65\u9aa4 6: \u6570\u636e\u5e93\u9a71\u52a8\u6267\u884c SQL","text":"<p>\u4f9d\u8d56\u5e93: <code>asyncpg</code> (PostgreSQL) \u6216 <code>aiosqlite</code> (SQLite)</p> <pre><code># asyncpg \u505a\u7684\u4e8b\uff1a\n# 1. \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\n# 2. \u5f02\u6b65\u6267\u884c SQL\n# 3. \u83b7\u53d6\u7ed3\u679c\n\n# \u4f2a\u4ee3\u7801\nasync with engine.connect() as conn:\n    result = await conn.execute(sql_statement)\n    rows = await result.fetchall()\n</code></pre>"},{"location":"reference/data-flow/#7","title":"\u6b65\u9aa4 7: \u6570\u636e\u5e93\u8fd4\u56de\u6570\u636e","text":"<p>\u6570\u636e\u5e93: PostgreSQL / SQLite / MySQL / ...</p> <pre><code>\u6570\u636e\u5e93\u8fd4\u56de\u7684\u539f\u59cb\u6570\u636e\uff1a\n[\n    {'id': 1, 'name': 'apple', 'price': 15.5, 'created_at': '2024-01-01'},\n    {'id': 2, 'name': 'apple pie', 'price': 25.0, 'created_at': '2024-01-02'},\n]\n</code></pre>"},{"location":"reference/data-flow/#8-orm-python","title":"\u6b65\u9aa4 8: ORM \u8f6c\u6362\u4e3a Python \u5bf9\u8c61","text":"<p>\u4f9d\u8d56\u5e93: <code>sqlalchemy</code></p> <pre><code># SQLAlchemy \u505a\u7684\u4e8b\uff1a\n# 1. \u5c06\u6570\u636e\u5e93\u884c\u8f6c\u6362\u4e3a ORM \u5bf9\u8c61\n# 2. \u521b\u5efa ItemDB \u5b9e\u4f8b\n\n# \u8f6c\u6362\u540e\uff1a\n[\n    ItemDB(id=1, name='apple', price=15.5, created_at=datetime(...)),\n    ItemDB(id=2, name='apple pie', price=25.0, created_at=datetime(...)),\n]\n</code></pre>"},{"location":"reference/data-flow/#9-pydantic-schema","title":"\u6b65\u9aa4 9: \u8f6c\u6362\u4e3a Pydantic Schema","text":"<p>\u4f9d\u8d56\u5e93: <code>pydantic</code></p> <pre><code>from pydantic import BaseModel\n\nclass Item(BaseModel):\n    id: int\n    name: str\n    price: float\n    created_at: datetime\n\n    class Config:\n        from_attributes = True\n\n# Pydantic \u505a\u7684\u4e8b\uff1a\n# 1. \u9a8c\u8bc1\u6570\u636e\n# 2. \u7c7b\u578b\u8f6c\u6362\n# 3. \u521b\u5efa Pydantic \u6a21\u578b\u5b9e\u4f8b\n\n# \u8f6c\u6362\u540e\uff1a\n[\n    Item(id=1, name='apple', price=15.5, created_at=datetime(...)),\n    Item(id=2, name='apple pie', price=25.0, created_at=datetime(...)),\n]\n</code></pre>"},{"location":"reference/data-flow/#10-json","title":"\u6b65\u9aa4 10: \u5e8f\u5217\u5316\u4e3a JSON","text":"<p>\u4f9d\u8d56\u5e93: <code>fastapi</code> (\u4f7f\u7528 <code>pydantic</code> \u7684\u5e8f\u5217\u5316)</p> <pre><code># FastAPI \u505a\u7684\u4e8b\uff1a\n# 1. \u8c03\u7528 Pydantic \u7684 model_dump()\n# 2. \u5e8f\u5217\u5316\u4e3a JSON\n\n# \u6700\u7ec8 JSON\uff1a\n{\n    \"data\": [\n        {\n            \"id\": 1,\n            \"name\": \"apple\",\n            \"price\": 15.5,\n            \"created_at\": \"2024-01-01T00:00:00\"\n        },\n        {\n            \"id\": 2,\n            \"name\": \"apple pie\",\n            \"price\": 25.0,\n            \"created_at\": \"2024-01-02T00:00:00\"\n        }\n    ],\n    \"total\": 2,\n    \"page\": 1,\n    \"pages\": 1,\n    \"limit\": 10,\n    \"skip\": 0\n}\n</code></pre>"},{"location":"reference/data-flow/#11-http","title":"\u6b65\u9aa4 11: \u8fd4\u56de HTTP \u54cd\u5e94","text":"<pre><code>HTTP/1.1 200 OK\nContent-Type: application/json\n\n{\n    \"data\": [...],\n    \"total\": 2,\n    ...\n}\n</code></pre>"},{"location":"reference/data-flow/#_4","title":"\u4f9d\u8d56\u5e93\u8be6\u89e3","text":""},{"location":"reference/data-flow/#_5","title":"\u6838\u5fc3\u4f9d\u8d56","text":"\u5e93 \u7248\u672c \u7528\u9014 fastapi \u22650.100 Web \u6846\u67b6\u3001\u8def\u7531\u3001\u8bf7\u6c42\u5904\u7406 pydantic \u22652.0 \u6570\u636e\u9a8c\u8bc1\u3001\u5e8f\u5217\u5316 typing-extensions \u22654.0 \u7c7b\u578b\u63d0\u793a"},{"location":"reference/data-flow/#orm","title":"\u53ef\u9009\u4f9d\u8d56\uff08ORM\uff09","text":"\u5e93 \u7528\u9014 sqlalchemy ORM\u3001SQL \u6784\u5efa tortoise-orm \u5f02\u6b65 ORM databases \u5f02\u6b65\u6570\u636e\u5e93\u9a71\u52a8"},{"location":"reference/data-flow/#_6","title":"\u53ef\u9009\u4f9d\u8d56\uff08\u6570\u636e\u5e93\u9a71\u52a8\uff09","text":"\u5e93 \u6570\u636e\u5e93 \u7c7b\u578b aiosqlite SQLite \u5f02\u6b65\u9a71\u52a8 asyncpg PostgreSQL \u5f02\u6b65\u9a71\u52a8 aiomysql MySQL \u5f02\u6b65\u9a71\u52a8 psycopg2 PostgreSQL \u540c\u6b65\u9a71\u52a8 pymysql MySQL \u540c\u6b65\u9a71\u52a8"},{"location":"reference/data-flow/#_7","title":"\u5b8c\u6574\u4ee3\u7801\u793a\u4f8b","text":"<pre><code># 1. \u5bfc\u5165\u4f9d\u8d56\nfrom fastapi import FastAPI\nfrom fastapi_easy import CRUDRouter\nfrom fastapi_easy.backends import SQLAlchemyAdapter\nfrom sqlalchemy.ext.asyncio import AsyncSession, create_async_engine\nfrom sqlalchemy.orm import declarative_base, sessionmaker\nfrom sqlalchemy import Column, Integer, String, Float\nfrom pydantic import BaseModel\n\n# 2. \u5b9a\u4e49 ORM \u6a21\u578b\uff08\u4e0e\u6570\u636e\u5e93\u5bf9\u5e94\uff09\nBase = declarative_base()\n\nclass ItemDB(Base):\n    __tablename__ = \"items\"\n    id = Column(Integer, primary_key=True)\n    name = Column(String)\n    price = Column(Float)\n\n# 3. \u5b9a\u4e49 Pydantic Schema\uff08API \u54cd\u5e94\u683c\u5f0f\uff09\nclass Item(BaseModel):\n    id: int\n    name: str\n    price: float\n\n    class Config:\n        from_attributes = True\n\n# 4. \u914d\u7f6e\u6570\u636e\u5e93\u8fde\u63a5\nDATABASE_URL = \"sqlite+aiosqlite:///./test.db\"\nengine = create_async_engine(DATABASE_URL)\nAsyncSessionLocal = sessionmaker(\n    engine, \n    class_=AsyncSession, \n    expire_on_commit=False\n)\n\nasync def get_db():\n    async with AsyncSessionLocal() as session:\n        yield session\n\n# 5. \u521b\u5efa FastAPI \u5e94\u7528\napp = FastAPI()\n\n# 6. \u521b\u5efa CRUDRouter\uff08\u81ea\u52a8\u751f\u6210\u8def\u7531\uff09\nrouter = CRUDRouter(\n    schema=Item,\n    adapter=SQLAlchemyAdapter(ItemDB, get_db),\n    prefix=\"/items\",\n    enable_filters=True,\n    filter_fields=[\"name\", \"price\"],\n    enable_sorters=True,\n    sort_fields=[\"name\"],\n)\n\n# 7. \u6ce8\u518c\u8def\u7531\napp.include_router(router)\n\n# \u73b0\u5728\u81ea\u52a8\u652f\u6301\uff1a\n# GET /items?name=apple&amp;price__gt=10&amp;sort=-name\n</code></pre>"},{"location":"reference/data-flow/#_8","title":"\u6570\u636e\u6d41\u603b\u7ed3","text":"<pre><code>\u7528\u6237\u8bf7\u6c42\n    \u2193\nFastAPI (\u63a5\u6536\u3001\u8def\u7531)\n    \u2193\nfastapi-easy (\u89e3\u6790\u53c2\u6570)\n    \u2193\n\u540e\u7aef\u9002\u914d\u5668 (\u6784\u5efa\u67e5\u8be2)\n    \u2193\nORM (\u751f\u6210 SQL)\n    \u2193\n\u6570\u636e\u5e93\u9a71\u52a8 (\u6267\u884c SQL)\n    \u2193\n\u6570\u636e\u5e93 (\u8fd4\u56de\u6570\u636e)\n    \u2193\nORM (\u8f6c\u6362\u5bf9\u8c61)\n    \u2193\nPydantic (\u9a8c\u8bc1\u3001\u5e8f\u5217\u5316)\n    \u2193\nFastAPI (\u8fd4\u56de JSON)\n    \u2193\nHTTP \u54cd\u5e94\n</code></pre>"},{"location":"reference/data-flow/#_9","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u5b66\u4e60\u641c\u7d22\u548c\u8fc7\u6ee4</li> <li>\u4e86\u89e3\u6392\u5e8f\u529f\u80fd</li> <li>\u67e5\u770b\u5b8c\u6574\u793a\u4f8b</li> </ul>"},{"location":"reference/hooks/","title":"\u94a9\u5b50\u7cfb\u7edf (Hooks) \u53c2\u8003","text":"<p>\u94a9\u5b50\u7cfb\u7edf\u5141\u8bb8\u4f60\u5728 CRUD \u64cd\u4f5c\u7684\u751f\u547d\u5468\u671f\u4e2d\u63d2\u5165\u81ea\u5b9a\u4e49\u903b\u8f91\u3002</p>"},{"location":"reference/hooks/#_1","title":"\u6ce8\u518c\u94a9\u5b50","text":"<p>\u4f7f\u7528 <code>router.hooks.register</code> \u65b9\u6cd5\u6ce8\u518c\u94a9\u5b50\u51fd\u6570\u3002\u94a9\u5b50\u51fd\u6570\u5fc5\u987b\u662f\u5f02\u6b65\u7684 (<code>async def</code>)\uff0c\u5e76\u63a5\u6536\u4e00\u4e2a <code>ExecutionContext</code> \u53c2\u6570\u3002</p> <pre><code>async def my_hook(context):\n    print(f\"Action: {context.action}\")\n\nrouter.hooks.register(\"before_create\", my_hook)\n</code></pre>"},{"location":"reference/hooks/#_2","title":"\u53ef\u7528\u94a9\u5b50\u4e8b\u4ef6","text":"\u4e8b\u4ef6\u540d\u79f0 \u89e6\u53d1\u65f6\u673a \u5178\u578b\u7528\u9014 <code>before_get_all</code> \u67e5\u8be2\u5217\u8868\u4e4b\u524d \u4fee\u6539\u8fc7\u6ee4\u6761\u4ef6\u3001\u6743\u9650\u68c0\u67e5 <code>after_get_all</code> \u67e5\u8be2\u5217\u8868\u4e4b\u540e \u4fee\u6539\u8fd4\u56de\u7ed3\u679c\u3001\u65e5\u5fd7\u8bb0\u5f55 <code>before_get_one</code> \u67e5\u8be2\u5355\u6761\u4e4b\u524d \u6743\u9650\u68c0\u67e5 <code>after_get_one</code> \u67e5\u8be2\u5355\u6761\u4e4b\u540e \u6570\u636e\u8131\u654f\u3001\u5173\u8054\u52a0\u8f7d <code>before_create</code> \u521b\u5efa\u4e4b\u524d \u6570\u636e\u9a8c\u8bc1\u3001\u586b\u5145\u9ed8\u8ba4\u503c <code>after_create</code> \u521b\u5efa\u4e4b\u540e \u53d1\u9001\u901a\u77e5\u3001\u89e6\u53d1\u540e\u7eed\u4efb\u52a1 <code>before_update</code> \u66f4\u65b0\u4e4b\u524d \u6570\u636e\u9a8c\u8bc1\u3001\u6743\u9650\u68c0\u67e5 <code>after_update</code> \u66f4\u65b0\u4e4b\u540e \u5ba1\u8ba1\u65e5\u5fd7\u3001\u7f13\u5b58\u5931\u6548 <code>before_delete</code> \u5220\u9664\u4e4b\u524d \u5173\u8054\u68c0\u67e5\u3001\u6743\u9650\u68c0\u67e5 <code>after_delete</code> \u5220\u9664\u4e4b\u540e \u6e05\u7406\u8d44\u6e90\u3001\u5ba1\u8ba1\u65e5\u5fd7"},{"location":"reference/hooks/#executioncontext","title":"ExecutionContext \u5bf9\u8c61","text":"<p>\u94a9\u5b50\u51fd\u6570\u63a5\u6536\u7684\u4e0a\u4e0b\u6587\u5bf9\u8c61\u5305\u542b\u4ee5\u4e0b\u5c5e\u6027\uff1a</p> \u5c5e\u6027\u540d \u7c7b\u578b \u63cf\u8ff0 <code>request</code> <code>fastapi.Request</code> \u539f\u59cb HTTP \u8bf7\u6c42\u5bf9\u8c61 <code>schema</code> <code>Type[BaseModel]</code> \u5f53\u524d\u64cd\u4f5c\u7684 Pydantic \u6a21\u578b\u7c7b <code>adapter</code> <code>ORMAdapter</code> \u5f53\u524d\u4f7f\u7528\u7684\u6570\u636e\u5e93\u9002\u914d\u5668 <code>data</code> <code>Dict</code> (\u4ec5\u5199\u64cd\u4f5c) \u63d0\u4ea4\u7684\u6570\u636e\u5b57\u5178 <code>result</code> <code>Any</code> (\u4ec5 <code>after_</code> \u94a9\u5b50) \u64cd\u4f5c\u8fd4\u56de\u7684\u7ed3\u679c <code>filters</code> <code>Dict</code> (\u4ec5 <code>get_all</code>) \u89e3\u6790\u540e\u7684\u8fc7\u6ee4\u6761\u4ef6 <code>sorts</code> <code>Dict</code> (\u4ec5 <code>get_all</code>) \u89e3\u6790\u540e\u7684\u6392\u5e8f\u6761\u4ef6 <code>pagination</code> <code>Dict</code> (\u4ec5 <code>get_all</code>) \u5206\u9875\u53c2\u6570 <code>metadata</code> <code>Dict</code> \u5176\u4ed6\u5143\u6570\u636e\uff08\u5982 <code>id</code>\uff09"},{"location":"reference/hooks/#_3","title":"\u793a\u4f8b","text":""},{"location":"reference/hooks/#1-id","title":"1. \u81ea\u52a8\u586b\u5145\u521b\u5efa\u8005 ID","text":"<pre><code>async def set_creator(context):\n    # \u5047\u8bbe\u5df2\u901a\u8fc7\u4e2d\u95f4\u4ef6\u5c06 user_id \u653e\u5165 request.state\n    user_id = context.request.state.user.id\n    context.data[\"creator_id\"] = user_id\n\nrouter.hooks.register(\"before_create\", set_creator)\n</code></pre>"},{"location":"reference/hooks/#2","title":"2. \u6570\u636e\u8131\u654f","text":"<pre><code>async def hide_sensitive_data(context):\n    if context.result:\n        # \u5047\u8bbe result \u662f Pydantic \u6a21\u578b\u6216\u5b57\u5178\n        if hasattr(context.result, \"secret_key\"):\n            context.result.secret_key = \"***\"\n\nrouter.hooks.register(\"after_get_one\", hide_sensitive_data)\n</code></pre>"},{"location":"reference/hooks/#3","title":"3. \u6743\u9650\u68c0\u67e5","text":"<pre><code>from fastapi import HTTPException\n\nasync def check_admin(context):\n    user = context.request.state.user\n    if not user.is_admin:\n        raise HTTPException(status_code=403, detail=\"Need admin permission\")\n\nrouter.hooks.register(\"before_delete\", check_admin)\n</code></pre>"},{"location":"security/","title":"\u5b89\u5168\u6587\u6863\u7d22\u5f15","text":"<p>\u672c\u76ee\u5f55\u5305\u542b FastAPI-Easy \u5b89\u5168\u6a21\u5757\u7684\u8be6\u7ec6\u6587\u6863\u3002</p>"},{"location":"security/#_2","title":"\u6838\u5fc3\u6a21\u5757","text":""},{"location":"security/#authentication","title":"\u8ba4\u8bc1 (Authentication)","text":"<p>\u4ecb\u7ecd\u5982\u4f55\u96c6\u6210 JWT \u8ba4\u8bc1\u3001\u7528\u6237\u767b\u5f55\u548c\u4ee4\u724c\u7ba1\u7406\u3002</p>"},{"location":"security/#permissions","title":"\u6743\u9650\u63a7\u5236 (Permissions)","text":"<p>\u8be6\u7ec6\u4ecb\u7ecd\u57fa\u4e8e\u89d2\u8272\u7684\u8bbf\u95ee\u63a7\u5236 (RBAC) \u548c\u88c5\u9970\u5668\u7528\u6cd5 (<code>require_role</code>, <code>require_permission</code>)\u3002 \u6ce8\uff1a\u5173\u4e8e CRUDRouter \u7684\u57fa\u7840\u6743\u9650\u914d\u7f6e\uff0c\u8bf7\u53c2\u8003 \u57fa\u7840\u6743\u9650\u6307\u5357\u3002</p>"},{"location":"security/#audit-logging","title":"\u5ba1\u8ba1\u65e5\u5fd7 (Audit Logging)","text":"<p>\u6df1\u5165\u4e86\u89e3\u5ba1\u8ba1\u65e5\u5fd7\u7cfb\u7edf\uff0c\u5305\u62ec\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u3001\u5b58\u50a8\u540e\u7aef\u548c\u67e5\u8be2\u63a5\u53e3\u3002 \u6ce8\uff1a\u5173\u4e8e CRUDRouter \u7684\u57fa\u7840\u5ba1\u8ba1\u914d\u7f6e\uff0c\u8bf7\u53c2\u8003 \u57fa\u7840\u5ba1\u8ba1\u6307\u5357\u3002</p>"},{"location":"security/#password-rate-limit","title":"\u5bc6\u7801\u4e0e\u901f\u7387\u9650\u5236 (Password &amp; Rate Limit)","text":"<p>\u5bc6\u7801\u54c8\u5e0c\u6700\u4f73\u5b9e\u8df5\u548c API \u901f\u7387\u9650\u5236\u914d\u7f6e\u3002</p>"},{"location":"security/#multi-tenancy","title":"\u591a\u79df\u6237\u652f\u6301 (Multi-Tenancy)","text":"<p>\u4e13\u4e3a SaaS \u5e94\u7528\u8bbe\u8ba1\u7684\u591a\u79df\u6237\u9694\u79bb\u3001\u4e0a\u4e0b\u6587\u7ba1\u7406\u548c\u6743\u9650\u63a7\u5236\u3002</p>"},{"location":"security/#_3","title":"\u9ad8\u7ea7\u7ec4\u4ef6","text":""},{"location":"security/#permission-loader","title":"\u6743\u9650\u52a0\u8f7d\u5668 (Permission Loader)","text":"<p>\u5982\u4f55\u4ece\u6587\u4ef6\u6216\u6570\u636e\u5e93\u52a8\u6001\u52a0\u8f7d\u6743\u9650\u914d\u7f6e\u3002</p>"},{"location":"security/#resource-checker","title":"\u8d44\u6e90\u68c0\u67e5\u5668 (Resource Checker)","text":"<p>\u5b9e\u73b0\u7ec6\u7c92\u5ea6\u7684\u5bf9\u8c61\u7ea7\u6743\u9650\u63a7\u5236\uff08\u4f8b\u5982\uff1a\u7528\u6237\u53ea\u80fd\u4fee\u6539\u81ea\u5df1\u7684\u6587\u7ae0\uff09\u3002</p>"},{"location":"security/#permission-engine","title":"\u6743\u9650\u5f15\u64ce (Permission Engine)","text":"<p>\u6743\u9650\u7cfb\u7edf\u7684\u6838\u5fc3\u5f15\u64ce\u67b6\u6784\u548c\u6269\u5c55\u65b9\u5f0f\u3002</p>"},{"location":"security/#security-config","title":"\u5b89\u5168\u914d\u7f6e (Security Config)","text":"<p>\u5b89\u5168\u6a21\u5757\u7684\u5b8c\u6574\u914d\u7f6e\u53c2\u6570\u53c2\u8003\u3002</p>"},{"location":"security/#_4","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"security/#_5","title":"\u5b89\u5168\u6700\u4f73\u5b9e\u8df5","text":"<p>\u751f\u4ea7\u73af\u5883\u90e8\u7f72\u7684\u5b89\u5168\u5efa\u8bae\u6e05\u5355\u3002</p>"},{"location":"security/audit-logging/","title":"\u5ba1\u8ba1\u65e5\u5fd7\u6307\u5357","text":""},{"location":"security/audit-logging/#_2","title":"\u6982\u8ff0","text":"<p>FastAPI-Easy \u63d0\u4f9b\u4e86\u5b8c\u6574\u7684\u5ba1\u8ba1\u65e5\u5fd7\u7cfb\u7edf\uff0c\u7528\u4e8e\uff1a</p> <ul> <li>\u8bb0\u5f55\u5b89\u5168\u4e8b\u4ef6</li> <li>\u8ddf\u8e2a\u7528\u6237\u6d3b\u52a8</li> <li>\u5408\u89c4\u6027\u5ba1\u8ba1</li> <li>\u5b89\u5168\u5206\u6790</li> </ul>"},{"location":"security/audit-logging/#_3","title":"\u5feb\u901f\u5f00\u59cb","text":""},{"location":"security/audit-logging/#_4","title":"\u521d\u59cb\u5316\u5ba1\u8ba1\u65e5\u5fd7","text":"<pre><code>from fastapi_easy.security import AuditLogger, AuditEventType\n\n# \u521b\u5efa\u5ba1\u8ba1\u65e5\u5fd7\u8bb0\u5f55\u5668\naudit_logger = AuditLogger(max_logs=10000)\n</code></pre>"},{"location":"security/audit-logging/#_5","title":"\u8bb0\u5f55\u4e8b\u4ef6","text":"<pre><code># \u8bb0\u5f55\u767b\u5f55\u6210\u529f\naudit_logger.log(\n    event_type=AuditEventType.LOGIN_SUCCESS,\n    user_id=\"user123\",\n    username=\"john_doe\",\n    status=\"success\",\n)\n\n# \u8bb0\u5f55\u767b\u5f55\u5931\u8d25\naudit_logger.log(\n    event_type=AuditEventType.LOGIN_FAILURE,\n    username=\"john_doe\",\n    status=\"failure\",\n    details={\"reason\": \"invalid_password\"},\n)\n\n# \u8bb0\u5f55\u6743\u9650\u88ab\u62d2\u7edd\naudit_logger.log(\n    event_type=AuditEventType.PERMISSION_DENIED,\n    user_id=\"user123\",\n    resource=\"admin_panel\",\n    action=\"access\",\n    status=\"failure\",\n)\n</code></pre>"},{"location":"security/audit-logging/#_6","title":"\u4e8b\u4ef6\u7c7b\u578b","text":""},{"location":"security/audit-logging/#_7","title":"\u8ba4\u8bc1\u4e8b\u4ef6","text":"<pre><code>AuditEventType.LOGIN_SUCCESS      # \u767b\u5f55\u6210\u529f\nAuditEventType.LOGIN_FAILURE      # \u767b\u5f55\u5931\u8d25\nAuditEventType.LOGIN_LOCKED       # \u8d26\u6237\u88ab\u9501\u5b9a\nAuditEventType.LOGOUT             # \u767b\u51fa\nAuditEventType.TOKEN_REFRESH      # Token \u5237\u65b0\nAuditEventType.TOKEN_EXPIRED      # Token \u8fc7\u671f\n</code></pre>"},{"location":"security/audit-logging/#_8","title":"\u6388\u6743\u4e8b\u4ef6","text":"<pre><code>AuditEventType.PERMISSION_DENIED      # \u6743\u9650\u88ab\u62d2\u7edd\nAuditEventType.PERMISSION_GRANTED     # \u6743\u9650\u88ab\u6388\u4e88\nAuditEventType.UNAUTHORIZED           # \u672a\u6388\u6743\nAuditEventType.ACCOUNT_LOCKED         # \u8d26\u6237\u88ab\u9501\u5b9a\nAuditEventType.ACCOUNT_UNLOCKED       # \u8d26\u6237\u88ab\u89e3\u9501\n</code></pre>"},{"location":"security/audit-logging/#_9","title":"\u7528\u6237\u7ba1\u7406\u4e8b\u4ef6","text":"<pre><code>AuditEventType.PASSWORD_CHANGED       # \u5bc6\u7801\u5df2\u66f4\u6539\nAuditEventType.ROLE_CHANGED           # \u89d2\u8272\u5df2\u66f4\u6539\nAuditEventType.PERMISSION_CHANGED     # \u6743\u9650\u5df2\u66f4\u6539\n</code></pre>"},{"location":"security/audit-logging/#_10","title":"\u67e5\u8be2\u5ba1\u8ba1\u65e5\u5fd7","text":""},{"location":"security/audit-logging/#_11","title":"\u83b7\u53d6\u6240\u6709\u65e5\u5fd7","text":"<pre><code># \u83b7\u53d6\u6700\u8fd1 100 \u6761\u65e5\u5fd7\nlogs = audit_logger.get_logs(limit=100)\n\nfor log in logs:\n    print(f\"{log['timestamp']}: {log['event_type']} - {log['username']}\")\n</code></pre>"},{"location":"security/audit-logging/#_12","title":"\u6309\u7528\u6237\u8fc7\u6ee4","text":"<pre><code># \u83b7\u53d6\u7279\u5b9a\u7528\u6237\u7684\u6d3b\u52a8\nuser_logs = audit_logger.get_user_activity(\n    username=\"john_doe\",\n    limit=50,\n)\n\nfor log in user_logs:\n    print(f\"{log['timestamp']}: {log['event_type']}\")\n</code></pre>"},{"location":"security/audit-logging/#_13","title":"\u83b7\u53d6\u5931\u8d25\u7684\u767b\u5f55","text":"<pre><code># \u83b7\u53d6\u7279\u5b9a\u7528\u6237\u7684\u5931\u8d25\u767b\u5f55\u5c1d\u8bd5\nfailed_logins = audit_logger.get_failed_logins(\n    username=\"john_doe\",\n    limit=10,\n)\n\nfor login in failed_logins:\n    print(f\"Failed login: {login['timestamp']}\")\n</code></pre>"},{"location":"security/audit-logging/#_14","title":"\u6309\u4e8b\u4ef6\u7c7b\u578b\u8fc7\u6ee4","text":"<pre><code>from fastapi_easy.security import AuditEventType\n\n# \u83b7\u53d6\u6240\u6709\u6743\u9650\u62d2\u7edd\u4e8b\u4ef6\npermission_denied = audit_logger.get_logs(\n    event_type=AuditEventType.PERMISSION_DENIED,\n    limit=50,\n)\n</code></pre>"},{"location":"security/audit-logging/#_15","title":"\u5b8c\u6574\u7684\u5ba1\u8ba1\u65e5\u5fd7\u96c6\u6210","text":"<pre><code>from fastapi import FastAPI, Depends, HTTPException\nfrom fastapi_easy.security import (\n    PasswordManager,\n    LoginAttemptTracker,\n    AuditLogger,\n    AuditEventType,\n    get_current_user,\n    require_role,\n)\n\napp = FastAPI()\n\n# \u521d\u59cb\u5316\npassword_manager = PasswordManager()\ntracker = LoginAttemptTracker()\naudit_logger = AuditLogger()\n\n@app.post(\"/auth/login\")\nasync def login(username: str, password: str):\n    \"\"\"\u767b\u5f55\u7aef\u70b9\uff08\u5e26\u5ba1\u8ba1\u65e5\u5fd7\uff09\"\"\"\n\n    # \u68c0\u67e5\u9501\u5b9a\n    if tracker.is_locked_out(username):\n        audit_logger.log(\n            event_type=AuditEventType.LOGIN_LOCKED,\n            username=username,\n            status=\"failure\",\n        )\n        raise HTTPException(status_code=429, detail=\"Account locked\")\n\n    # \u9a8c\u8bc1\u7528\u6237\n    user = authenticate_user(username, password)\n\n    if not user:\n        tracker.record_attempt(username, success=False)\n        audit_logger.log(\n            event_type=AuditEventType.LOGIN_FAILURE,\n            username=username,\n            status=\"failure\",\n        )\n        raise HTTPException(status_code=401, detail=\"Invalid credentials\")\n\n    # \u6210\u529f\u767b\u5f55\n    tracker.record_attempt(username, success=True)\n    audit_logger.log(\n        event_type=AuditEventType.LOGIN_SUCCESS,\n        user_id=str(user.id),\n        username=username,\n        status=\"success\",\n    )\n\n    # \u751f\u6210 Token\n    access_token = jwt_auth.create_access_token(subject=str(user.id))\n    return {\"access_token\": access_token, \"token_type\": \"bearer\"}\n\n@app.post(\"/logout\")\nasync def logout(current_user: dict = Depends(get_current_user)):\n    \"\"\"\u767b\u51fa\u7aef\u70b9\uff08\u5e26\u5ba1\u8ba1\u65e5\u5fd7\uff09\"\"\"\n    audit_logger.log(\n        event_type=AuditEventType.LOGOUT,\n        user_id=current_user[\"user_id\"],\n        status=\"success\",\n    )\n    return {\"message\": \"Logged out successfully\"}\n\n@app.get(\"/admin-panel\")\nasync def admin_panel(current_user: dict = Depends(require_role(\"admin\"))):\n    \"\"\"\u7ba1\u7406\u5458\u9762\u677f\uff08\u5e26\u5ba1\u8ba1\u65e5\u5fd7\uff09\"\"\"\n    audit_logger.log(\n        event_type=AuditEventType.PERMISSION_GRANTED,\n        user_id=current_user[\"user_id\"],\n        resource=\"admin_panel\",\n        action=\"access\",\n        status=\"success\",\n    )\n    return {\"message\": \"Welcome to admin panel\"}\n\n@app.get(\"/audit-logs\")\nasync def get_audit_logs(\n    current_user: dict = Depends(require_role(\"admin\")),\n):\n    \"\"\"\u83b7\u53d6\u5ba1\u8ba1\u65e5\u5fd7\uff08\u4ec5\u7ba1\u7406\u5458\uff09\"\"\"\n    logs = audit_logger.export_logs()\n    return {\"logs\": logs}\n</code></pre>"},{"location":"security/audit-logging/#_16","title":"\u5ba1\u8ba1\u65e5\u5fd7\u5206\u6790","text":""},{"location":"security/audit-logging/#_17","title":"\u68c0\u6d4b\u5f02\u5e38\u6d3b\u52a8","text":"<pre><code>def detect_suspicious_activity():\n    \"\"\"\u68c0\u6d4b\u53ef\u7591\u6d3b\u52a8\"\"\"\n\n    # \u68c0\u67e5\u591a\u6b21\u5931\u8d25\u7684\u767b\u5f55\n    all_logs = audit_logger.export_logs()\n\n    failed_logins = {}\n    for log in all_logs:\n        if log[\"event_type\"] == \"login_failure\":\n            username = log[\"username\"]\n            failed_logins[username] = failed_logins.get(username, 0) + 1\n\n    # \u5982\u679c\u67d0\u4e2a\u7528\u6237\u6709\u8d85\u8fc7 10 \u6b21\u5931\u8d25\u767b\u5f55\uff0c\u53d1\u51fa\u8b66\u544a\n    for username, count in failed_logins.items():\n        if count &gt; 10:\n            print(f\"\u26a0\ufe0f  Warning: {username} has {count} failed login attempts\")\n\n# \u5b9a\u671f\u8fd0\u884c\u68c0\u6d4b\nimport schedule\n\nschedule.every(1).hour.do(detect_suspicious_activity)\n</code></pre>"},{"location":"security/audit-logging/#_18","title":"\u751f\u6210\u5ba1\u8ba1\u62a5\u544a","text":"<pre><code>def generate_audit_report(start_date, end_date):\n    \"\"\"\u751f\u6210\u5ba1\u8ba1\u62a5\u544a\"\"\"\n\n    logs = audit_logger.export_logs()\n\n    # \u6309\u4e8b\u4ef6\u7c7b\u578b\u7edf\u8ba1\n    event_counts = {}\n    for log in logs:\n        event_type = log[\"event_type\"]\n        event_counts[event_type] = event_counts.get(event_type, 0) + 1\n\n    # \u6309\u7528\u6237\u7edf\u8ba1\n    user_activity = {}\n    for log in logs:\n        username = log.get(\"username\", \"unknown\")\n        user_activity[username] = user_activity.get(username, 0) + 1\n\n    return {\n        \"period\": f\"{start_date} to {end_date}\",\n        \"event_counts\": event_counts,\n        \"user_activity\": user_activity,\n        \"total_events\": len(logs),\n    }\n\n# \u751f\u6210\u62a5\u544a\nreport = generate_audit_report(\"2025-01-01\", \"2025-01-31\")\nprint(report)\n</code></pre>"},{"location":"security/audit-logging/#_19","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"security/audit-logging/#1","title":"1. \u5b9a\u671f\u5bfc\u51fa\u548c\u5907\u4efd\u65e5\u5fd7","text":"<pre><code>import json\nfrom datetime import datetime\n\ndef backup_audit_logs():\n    \"\"\"\u5907\u4efd\u5ba1\u8ba1\u65e5\u5fd7\"\"\"\n    logs = audit_logger.export_logs()\n\n    filename = f\"audit_logs_{datetime.now().isoformat()}.json\"\n    with open(filename, \"w\") as f:\n        json.dump(logs, f, indent=2)\n\n    print(f\"Audit logs backed up to {filename}\")\n\n# \u6bcf\u5929\u5907\u4efd\nschedule.every().day.at(\"23:59\").do(backup_audit_logs)\n</code></pre>"},{"location":"security/audit-logging/#2","title":"2. \u76d1\u63a7\u5173\u952e\u4e8b\u4ef6","text":"<pre><code>def monitor_critical_events():\n    \"\"\"\u76d1\u63a7\u5173\u952e\u4e8b\u4ef6\"\"\"\n    logs = audit_logger.export_logs()\n\n    critical_events = [\n        AuditEventType.PERMISSION_DENIED,\n        AuditEventType.LOGIN_LOCKED,\n        AuditEventType.ACCOUNT_LOCKED,\n    ]\n\n    for log in logs:\n        if log[\"event_type\"] in [e.value for e in critical_events]:\n            # \u53d1\u9001\u8b66\u544a\n            send_alert(f\"Critical event: {log['event_type']}\")\n</code></pre>"},{"location":"security/audit-logging/#3","title":"3. \u4fdd\u7559\u65e5\u5fd7\u7b56\u7565","text":"<pre><code>def cleanup_old_logs(days=90):\n    \"\"\"\u6e05\u7406\u65e7\u65e5\u5fd7\"\"\"\n    from datetime import datetime, timedelta\n\n    cutoff_date = datetime.now() - timedelta(days=days)\n\n    # \u5bfc\u51fa\u65e5\u5fd7\u5230\u5b58\u50a8\n    logs = audit_logger.export_logs()\n\n    # \u6e05\u7406\u5185\u5b58\u4e2d\u7684\u65e5\u5fd7\n    audit_logger.clear_logs()\n\n    # \u4fdd\u5b58\u5230\u6570\u636e\u5e93\u6216\u6587\u4ef6\u7cfb\u7edf\n    save_logs_to_storage(logs)\n\n# \u6bcf\u5468\u6e05\u7406\nschedule.every().week.do(cleanup_old_logs)\n</code></pre>"},{"location":"security/audit-logging/#4","title":"4. \u5408\u89c4\u6027\u62a5\u544a","text":"<pre><code>def generate_compliance_report():\n    \"\"\"\u751f\u6210\u5408\u89c4\u6027\u62a5\u544a\"\"\"\n    logs = audit_logger.export_logs()\n\n    # \u7edf\u8ba1\u767b\u5f55\u4e8b\u4ef6\n    login_events = [l for l in logs if \"login\" in l[\"event_type\"]]\n\n    # \u7edf\u8ba1\u6743\u9650\u53d8\u66f4\n    permission_changes = [l for l in logs if \"permission\" in l[\"event_type\"]]\n\n    # \u7edf\u8ba1\u5931\u8d25\u4e8b\u4ef6\n    failed_events = [l for l in logs if l[\"status\"] == \"failure\"]\n\n    return {\n        \"total_logins\": len(login_events),\n        \"permission_changes\": len(permission_changes),\n        \"failed_events\": len(failed_events),\n        \"compliance_status\": \"compliant\" if len(failed_events) &lt; 100 else \"review_needed\",\n    }\n</code></pre>"},{"location":"security/audit-logging/#_20","title":"\u5b8c\u6574\u793a\u4f8b","text":"<p>\u53c2\u8003 <code>examples/06_with_permissions.py</code> \u83b7\u53d6\u5b8c\u6574\u7684\u5de5\u4f5c\u793a\u4f8b\u3002</p>"},{"location":"security/authentication/","title":"JWT \u8ba4\u8bc1\u6307\u5357","text":""},{"location":"security/authentication/#_1","title":"\u6982\u8ff0","text":"<p>FastAPI-Easy \u63d0\u4f9b\u4e86\u5b8c\u6574\u7684 JWT (JSON Web Token) \u8ba4\u8bc1\u7cfb\u7edf\uff0c\u652f\u6301\uff1a</p> <ul> <li>JWT Token \u751f\u6210\u548c\u9a8c\u8bc1</li> <li>Token \u5237\u65b0\u673a\u5236</li> <li>\u81ea\u5b9a\u4e49\u5bc6\u94a5\u548c\u7b97\u6cd5</li> <li>\u5b8c\u6574\u7684\u9519\u8bef\u5904\u7406</li> </ul>"},{"location":"security/authentication/#_2","title":"\u5feb\u901f\u5f00\u59cb","text":""},{"location":"security/authentication/#1-jwt","title":"1. \u521d\u59cb\u5316 JWT \u8ba4\u8bc1","text":"<pre><code>from fastapi import FastAPI\nfrom fastapi_easy.security import init_jwt_auth\n\napp = FastAPI()\n\n# \u521d\u59cb\u5316 JWT \u8ba4\u8bc1\njwt_auth = init_jwt_auth(\n    secret_key=\"your-secret-key-change-in-production\",\n    algorithm=\"HS256\",\n    access_token_expire_minutes=15,\n    refresh_token_expire_days=7,\n)\n</code></pre>"},{"location":"security/authentication/#2","title":"2. \u521b\u5efa\u767b\u5f55\u7aef\u70b9","text":"<pre><code>from fastapi import HTTPException\nfrom fastapi_easy.security import TokenResponse, TokenRequest\n\n@app.post(\"/auth/login\", response_model=TokenResponse)\nasync def login(request: TokenRequest):\n    \"\"\"\u7528\u6237\u767b\u5f55\u7aef\u70b9\"\"\"\n    # \u9a8c\u8bc1\u7528\u6237\u51ed\u8bc1 (\u8fd9\u91cc\u4f7f\u7528\u6a21\u62df\u6570\u636e)\n    if request.username != \"admin\" or request.password != \"password\":\n        raise HTTPException(status_code=401, detail=\"Invalid credentials\")\n\n    # \u751f\u6210 Token\n    access_token = jwt_auth.create_access_token(\n        subject=\"user123\",\n        roles=[\"admin\"],\n    )\n    refresh_token = jwt_auth.create_refresh_token(subject=\"user123\")\n\n    return TokenResponse(\n        access_token=access_token,\n        refresh_token=refresh_token,\n        expires_in=15 * 60,  # 15 \u5206\u949f\n    )\n</code></pre>"},{"location":"security/authentication/#3","title":"3. \u4fdd\u62a4\u7aef\u70b9","text":"<pre><code>from fastapi import Depends\nfrom fastapi_easy.security import get_current_user\n\n@app.get(\"/profile\")\nasync def get_profile(current_user: dict = Depends(get_current_user)):\n    \"\"\"\u83b7\u53d6\u5f53\u524d\u7528\u6237\u8d44\u6599\"\"\"\n    return {\n        \"user_id\": current_user[\"user_id\"],\n        \"roles\": current_user[\"roles\"],\n    }\n</code></pre>"},{"location":"security/authentication/#4-token","title":"4. \u5237\u65b0 Token","text":"<pre><code>from fastapi_easy.security import RefreshTokenRequest\n\n@app.post(\"/auth/refresh\", response_model=TokenResponse)\nasync def refresh(request: RefreshTokenRequest):\n    \"\"\"\u5237\u65b0\u8bbf\u95ee\u4ee4\u724c\"\"\"\n    try:\n        access_token = jwt_auth.refresh_access_token(\n            refresh_token=request.refresh_token,\n        )\n        return TokenResponse(\n            access_token=access_token,\n            refresh_token=request.refresh_token,\n            expires_in=15 * 60,\n        )\n    except Exception as e:\n        raise HTTPException(status_code=401, detail=str(e))\n</code></pre>"},{"location":"security/authentication/#_3","title":"\u73af\u5883\u53d8\u91cf\u914d\u7f6e","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u73af\u5883\u53d8\u91cf\u6765\u914d\u7f6e JWT \u5bc6\u94a5\uff1a</p> <pre><code># .env\nJWT_SECRET_KEY=your-super-secret-key-here\n</code></pre> <p>\u7136\u540e\u5728\u4ee3\u7801\u4e2d\uff1a</p> <pre><code>from fastapi_easy.security import init_jwt_auth\n\n# \u81ea\u52a8\u4ece\u73af\u5883\u53d8\u91cf\u8bfb\u53d6 JWT_SECRET_KEY\njwt_auth = init_jwt_auth()\n</code></pre>"},{"location":"security/authentication/#token","title":"Token \u683c\u5f0f","text":"<p>JWT Token \u5305\u542b\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <pre><code>{\n  \"sub\": \"user123\",           // \u7528\u6237 ID\n  \"roles\": [\"admin\", \"user\"], // \u7528\u6237\u89d2\u8272\n  \"permissions\": [\"read\"],    // \u7528\u6237\u6743\u9650\n  \"iat\": 1234567890,          // \u7b7e\u53d1\u65f6\u95f4\n  \"exp\": 1234568790,          // \u8fc7\u671f\u65f6\u95f4\n  \"type\": \"access\"            // Token \u7c7b\u578b (access/refresh)\n}\n</code></pre>"},{"location":"security/authentication/#_4","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"security/authentication/#1","title":"1. \u4f7f\u7528\u5f3a\u5bc6\u94a5","text":"<pre><code>import secrets\n\n# \u751f\u6210\u5f3a\u5bc6\u94a5\nsecret_key = secrets.token_urlsafe(32)\n</code></pre>"},{"location":"security/authentication/#2_1","title":"2. \u8bbe\u7f6e\u5408\u7406\u7684\u8fc7\u671f\u65f6\u95f4","text":"<pre><code># \u8bbf\u95ee\u4ee4\u724c\uff1a15 \u5206\u949f\n# \u5237\u65b0\u4ee4\u724c\uff1a7 \u5929\njwt_auth = init_jwt_auth(\n    access_token_expire_minutes=15,\n    refresh_token_expire_days=7,\n)\n</code></pre>"},{"location":"security/authentication/#3-https","title":"3. \u59cb\u7ec8\u4f7f\u7528 HTTPS","text":"<p>\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u59cb\u7ec8\u4f7f\u7528 HTTPS \u6765\u4f20\u8f93 Token\u3002</p>"},{"location":"security/authentication/#4-token_1","title":"4. \u5728\u5ba2\u6237\u7aef\u5b89\u5168\u5b58\u50a8 Token","text":"<pre><code>// \u4e0d\u8981\u5728 localStorage \u4e2d\u5b58\u50a8 Token\n// \u4f7f\u7528 HttpOnly Cookie \u6216\u5185\u5b58\u5b58\u50a8\nlocalStorage.setItem('token', token);  // \u274c \u4e0d\u5b89\u5168\n\n// \u66f4\u597d\u7684\u65b9\u5f0f\uff1a\u4f7f\u7528 HttpOnly Cookie\ndocument.cookie = `token=${token}; HttpOnly; Secure; SameSite=Strict`;\n</code></pre>"},{"location":"security/authentication/#5","title":"5. \u5b9a\u671f\u8f6e\u6362\u5bc6\u94a5","text":"<p>\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u5b9a\u671f\u8f6e\u6362 JWT \u5bc6\u94a5\u4ee5\u63d0\u9ad8\u5b89\u5168\u6027\u3002</p>"},{"location":"security/authentication/#_5","title":"\u9519\u8bef\u5904\u7406","text":"<pre><code>from fastapi_easy.security import (\n    InvalidTokenError,\n    TokenExpiredError,\n    AuthenticationError,\n)\n\n@app.get(\"/protected\")\nasync def protected_endpoint(current_user: dict = Depends(get_current_user)):\n    \"\"\"\u53d7\u4fdd\u62a4\u7684\u7aef\u70b9\"\"\"\n    try:\n        # \u4f60\u7684\u4e1a\u52a1\u903b\u8f91\n        pass\n    except InvalidTokenError:\n        raise HTTPException(status_code=401, detail=\"Invalid token\")\n    except TokenExpiredError:\n        raise HTTPException(status_code=401, detail=\"Token expired\")\n    except AuthenticationError:\n        raise HTTPException(status_code=401, detail=\"Authentication failed\")\n</code></pre>"},{"location":"security/authentication/#_6","title":"\u5b8c\u6574\u793a\u4f8b","text":"<p>\u53c2\u8003 <code>examples/06_with_permissions.py</code> \u83b7\u53d6\u5b8c\u6574\u7684\u5de5\u4f5c\u793a\u4f8b\u3002</p> <pre><code># \u8fd0\u884c\u793a\u4f8b\nuvicorn examples.06_with_permissions:app --reload\n\n# \u6d4b\u8bd5\u767b\u5f55\ncurl -X POST http://localhost:8000/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"username\": \"admin\", \"password\": \"password_123\"}'\n\n# \u4f7f\u7528 Token \u8bbf\u95ee\u53d7\u4fdd\u62a4\u7684\u7aef\u70b9\ncurl -X GET http://localhost:8000/profile \\\n  -H \"Authorization: Bearer &lt;your_token_here&gt;\"\n</code></pre>"},{"location":"security/multi-tenancy/","title":"\u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u201d\u00af\u00e6\u0152 (Multi-Tenancy)","text":"<p>FastAPI-Easy \u00e6\u00e4\u00be\u203a\u00e4\u00ba\u2020\u00e5\u0178\u00e7\u201d\u0178\u00e7\u0161\u201e\u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e6\u201d\u00af\u00e6\u0152\u00ef\u00bc\u0152\u00e4\u00b8\u201c\u00e4\u00b8\u00ba SaaS \u00e5\u00ba\u201d\u00e7\u201d\u00a8\u00e8\u00ae\u00be\u00e8\u00ae\u00a1\u00e3\u20ac\u201a\u00e5\u00ae\u0192\u00e8\u0192\u00bd\u00e5\u00a4\u0178\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e9\u0161\u201d\u00e7\u00a6\u00bb\u00e4\u00b8\u00e5\u0152\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e7\u0161\u201e\u00e6\u2022\u00b0\u00e6\u00ae\u00e3\u20ac\u00e6\u0192\u00e9\u2122\u00e5\u2019\u0152\u00e8\u00b5\u201e\u00e6\u00ba\u00ef\u00bc\u0152\u00e7\u00a1\u00ae\u00e4\u00bf\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e3\u20ac\u201a</p>"},{"location":"security/multi-tenancy/#gyy-ac1","title":"\u011f\u0178\u0152\u0178 \u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e7\u2030\u00b9\u00e6\u20ac\u00a7","text":"<ul> <li> <p>\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e9\u0161\u201d\u00e7\u00a6\u00bb: \u00e5\u0178\u00ba\u00e4\u00ba\u00e8\u00af\u00b7\u00e6\u00b1\u201a\u00e5\u00a4\u00b4 (<code>X-Tenant-ID</code>) \u00e6\u02c6\u2013\u00e5\u00ad\u00e5\u0178\u0178\u00e5\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e8\u00af\u2020\u00e5\u02c6\u00ab\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e3\u20ac\u201a</p> </li> <li> <p>\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e4\u00b8\u0160\u00e4\u00b8\u2039\u00e6\u2013\u2021: \u00e5\u0153\u00a8\u00e8\u00af\u00b7\u00e6\u00b1\u201a\u00e7\u201d\u0178\u00e5\u2018\u00bd\u00e5\u2018\u00a8\u00e6\u0153\u0178\u00e5\u2020\u2026\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e7\u00bb\u00b4\u00e6\u0160\u00a4 <code>TenantContext</code>\u00e3\u20ac\u201a</p> </li> <li> <p>\u00e6\u0192\u00e9\u2122\u00e9\u0161\u201d\u00e7\u00a6\u00bb: \u00e6\u201d\u00af\u00e6\u0152\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e7\u00ba\u00a7\u00e5\u02c6\u00ab\u00e7\u0161\u201e\u00e6\u0192\u00e9\u2122\u00e5\u0160\u00a0\u00e8\u00bd\u00bd\u00e5\u2019\u0152\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\u00e3\u20ac\u201a</p> </li> <li> <p>\u00e8\u00b5\u201e\u00e6\u00ba\u00e9\u0161\u201d\u00e7\u00a6\u00bb: \u00e7\u00a1\u00ae\u00e4\u00bf\u00e7\u201d\u00a8\u00e6\u02c6\u00b7\u00e5\u00aa\u00e8\u0192\u00bd\u00e8\u00ae\u00bf\u00e9\u2014\u00ae\u00e6\u2030\u20ac\u00e5\u00b1\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e7\u0161\u201e\u00e8\u00b5\u201e\u00e6\u00ba\u00e3\u20ac\u201a</p> </li> <li> <p>\u00e4\u00b8\u00ad\u00e9\u2014\u00b4\u00e4\u00bb\u00b6\u00e9\u203a\u2020\u00e6\u02c6: \u00e9\u203a\u00b6\u00e4\u00be\u00b5\u00e5\u2026\u00a5\u00e5\u00bc\u00e9\u203a\u2020\u00e6\u02c6\u00ef\u00bc\u0152\u00e5\u00aa\u00e9\u0153\u20ac\u00e6\u00b3\u00a8\u00e5\u2020\u0152\u00e4\u00b8\u00ad\u00e9\u2014\u00b4\u00e4\u00bb\u00b6\u00e5\u00b3\u00e5\u00af\u00e3\u20ac\u201a</p> </li> </ul>"},{"location":"security/multi-tenancy/#gys-aeya14a","title":"\u011f\u0178\u0161\u20ac \u00e5\u00bf\u00ab\u00e9\u20ac\u0178\u00e5\u00bc\u20ac\u00e5\u00a7\u2039","text":""},{"location":"security/multi-tenancy/#1-ec12a-e-a","title":"1. \u00e9\u2026\u00e7\u00bd\u00ae\u00e4\u00b8\u00ad\u00e9\u2014\u00b4\u00e4\u00bb\u00b6","text":"<p>\u00e4\u00bd\u00bf\u00e7\u201d\u00a8 <code>TenantIsolationMiddleware</code> \u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e5\u00a4\u201e\u00e7\u2020\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e4\u00b8\u0160\u00e4\u00b8\u2039\u00e6\u2013\u2021\u00e3\u20ac\u201a</p> <pre><code>from fastapi import FastAPI\n\nfrom fastapi_easy.security import (\n\n    MultiTenantPermissionLoader,\n\n    MultiTenantResourceChecker,\n\n    TenantIsolationMiddleware,\n\n    DatabasePermissionLoader,\n\n    DatabaseResourceChecker\n\n)\n\n\n\napp = FastAPI()\n\n\n\n# 1. \u00e5\u02c6\u00e5\u00a7\u2039\u00e5\u0152\u2013\u00e5\u0178\u00ba\u00e7\u00a1\u20ac\u00e5\u0160\u00a0\u00e8\u00bd\u00bd\u00e5\u2122\u00a8\n\nbase_loader = DatabasePermissionLoader(db_session)\n\nbase_checker = DatabaseResourceChecker(db_session)\n\n\n\n# 2. \u00e5\u0152\u2026\u00e8\u00a3\u2026\u00e4\u00b8\u00ba\u00e5\u00a4\u0161\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e5\u0160\u00a0\u00e8\u00bd\u00bd\u00e5\u2122\u00a8\n\nmt_loader = MultiTenantPermissionLoader(base_loader)\n\nmt_checker = MultiTenantResourceChecker(base_checker)\n\n\n\n# 3. \u00e6\u00b3\u00a8\u00e5\u2020\u0152\u00e4\u00b8\u00ad\u00e9\u2014\u00b4\u00e4\u00bb\u00b6\n\nmiddleware = TenantIsolationMiddleware(\n\n    app,\n\n    tenant_header=\"X-Tenant-ID\"  # \u00e8\u2021\u00aa\u00e5\u00ae\u0161\u00e4\u00b9\u2030\u00e7\u00a7\u0178\u00e6\u02c6\u00b7 Header\n\n)\n\nmiddleware.register_loader(mt_loader)\n\nmiddleware.register_checker(mt_checker)\n\n\n\napp.add_middleware(TenantIsolationMiddleware)\n</code></pre>"},{"location":"security/multi-tenancy/#2-a12c-cya-sa","title":"2. \u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e4\u00b8\u0160\u00e4\u00b8\u2039\u00e6\u2013\u2021","text":"<p>\u00e5\u0153\u00a8 API \u00e8\u00b7\u00af\u00e7\u201d\u00b1\u00e4\u00b8\u00ad\u00ef\u00bc\u0152\u00e4\u00bd\u00a0\u00e5\u00af\u00e4\u00bb\u00a5\u00e7\u203a\u00b4\u00e6\u00a5\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e5\u00ae\u2030\u00e5\u2026\u00a8\u00e8\u00a3\u2026\u00e9\u00a5\u00b0\u00e5\u2122\u00a8\u00ef\u00bc\u0152\u00e7\u00b3\u00bb\u00e7\u00bb\u0178\u00e4\u00bc\u0161\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e5\u00a4\u201e\u00e7\u2020\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e9\u0161\u201d\u00e7\u00a6\u00bb\u00e3\u20ac\u201a</p> <pre><code>from fastapi_easy.security import require_permission\n\n\n\n@app.get(\"/documents/{doc_id}\")\n\n@require_permission(\"read:document\")\n\nasync def get_document(doc_id: str):\n\n    # \u00e8\u00bf\u2122\u00e9\u2021\u0152\u00e7\u0161\u201e\u00e6\u0192\u00e9\u2122\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\u00e4\u00bc\u0161\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e5\u00b8\u00a6\u00e4\u00b8\u0160 Tenant ID\n\n    # \u00e5\u00aa\u00e6\u0153\u2030\u00e5\u00bd\u201c\u00e7\u201d\u00a8\u00e6\u02c6\u00b7\u00e5\u0153\u00a8\u00e5\u00bd\u201c\u00e5\u2030\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e4\u00b8\u2039\u00e6\u2039\u00a5\u00e6\u0153\u2030 read:document \u00e6\u0192\u00e9\u2122\u00e6\u2014\u00b6\u00e6\u2030\u00e9\u20ac\u0161\u00e8\u00bf\u2021\n\n    return {\"id\": doc_id, \"content\": \"...\"}\n</code></pre>"},{"location":"security/multi-tenancy/#gy-aa12ayc","title":"\u011f\u0178\u201d\u00a7 \u00e5\u00b7\u00a5\u00e4\u00bd\u0153\u00e5\u0178\u00e7\u2020","text":""},{"location":"security/multi-tenancy/#1-cye-a","title":"1. \u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e8\u00af\u2020\u00e5\u02c6\u00ab","text":"<p>\u00e5\u00bd\u201c\u00e8\u00af\u00b7\u00e6\u00b1\u201a\u00e5\u02c6\u00b0\u00e8\u00be\u00be\u00e6\u2014\u00b6\u00ef\u00bc\u0152\u00e4\u00b8\u00ad\u00e9\u2014\u00b4\u00e4\u00bb\u00b6\u00e4\u00bc\u0161\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\u00e9\u2026\u00e7\u00bd\u00ae\u00e7\u0161\u201e <code>tenant_header</code>\u00ef\u00bc\u02c6\u00e9\u00bb\u02dc\u00e8\u00ae\u00a4\u00e4\u00b8\u00ba <code>X-Tenant-ID</code>\u00ef\u00bc\u2030\u00e3\u20ac\u201a</p> <pre><code>GET /api/resource HTTP/1.1\n\nHost: api.example.com\n\nX-Tenant-ID: tenant-12345\n\nAuthorization: Bearer &lt;token&gt;\n</code></pre> <p>\u00e5\u00a6\u201a\u00e6\u0153\u00e6\u2030\u00be\u00e5\u02c6\u00b0 Tenant ID\u00ef\u00bc\u0152\u00e4\u00b8\u00ad\u00e9\u2014\u00b4\u00e4\u00bb\u00b6\u00e4\u00bc\u0161\u00e5\u02c6\u00e5\u00a7\u2039\u00e5\u0152\u2013 <code>TenantContext</code>\u00e3\u20ac\u201a</p>"},{"location":"security/multi-tenancy/#2-etmas-e1212","title":"2. \u00e6\u0192\u00e9\u2122\u00e5\u0160\u00a0\u00e8\u00bd\u00bd","text":"<p><code>MultiTenantPermissionLoader</code> \u00e4\u00bc\u0161\u00e6\u2039\u00a6\u00e6\u02c6\u00aa\u00e6\u0192\u00e9\u2122\u00e5\u0160\u00a0\u00e8\u00bd\u00bd\u00e8\u00af\u00b7\u00e6\u00b1\u201a\u00ef\u00bc\u0152\u00e5\u00b9\u00b6\u00e5\u00b0\u2020 Tenant ID \u00e6\u00b3\u00a8\u00e5\u2026\u00a5\u00e5\u02c6\u00b0\u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e4\u00b8\u00ad\u00e3\u20ac\u201a</p> <pre><code># \u00e4\u00bc\u00aa\u00e4\u00bb\u00a3\u00e7\u00a0\u00e9\u20ac\u00bb\u00e8\u00be\u2018\n\nasync def load_permissions(self, user_id: str) -&gt; List[str]:\n\n    tenant_id = self.get_tenant()\n\n    # SELECT permission FROM user_permissions \n\n    # WHERE user_id = :user_id AND tenant_id = :tenant_id\n\n    return await self.base_loader.load_permissions(user_id, tenant_id)\n</code></pre>"},{"location":"security/multi-tenancy/#3-eoy","title":"3. \u00e8\u00b5\u201e\u00e6\u00ba\u00e6\u00a3\u20ac\u00e6\u0178\u00a5","text":"<p><code>MultiTenantResourceChecker</code> \u00e7\u00a1\u00ae\u00e4\u00bf\u00e7\u201d\u00a8\u00e6\u02c6\u00b7\u00e5\u00aa\u00e8\u0192\u00bd\u00e8\u00ae\u00bf\u00e9\u2014\u00ae\u00e5\u00b1\u00e4\u00ba\u00e5\u00bd\u201c\u00e5\u2030\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e7\u0161\u201e\u00e8\u00b5\u201e\u00e6\u00ba\u00e3\u20ac\u201a</p> <pre><code># \u00e4\u00bc\u00aa\u00e4\u00bb\u00a3\u00e7\u00a0\u00e9\u20ac\u00bb\u00e8\u00be\u2018\n\nasync def check_owner(self, user_id: str, resource_id: str) -&gt; bool:\n\n    tenant_id = self.get_tenant()\n\n    # SELECT 1 FROM resources \n\n    # WHERE id = :resource_id AND owner_id = :user_id AND tenant_id = :tenant_id\n\n    return await self.base_checker.check_owner(user_id, resource_id, tenant_id)\n</code></pre>"},{"location":"security/multi-tenancy/#gy-e-coc-3","title":"\u011f\u0178\u201c\u00a6 \u00e9\u00ab\u02dc\u00e7\u00ba\u00a7\u00e7\u201d\u00a8\u00e6\u00b3\u2022","text":""},{"location":"security/multi-tenancy/#as-acy","title":"\u00e5\u0160\u00a8\u00e6\u20ac\u00e5\u02c6\u2021\u00e6\u00a2\u00e7\u00a7\u0178\u00e6\u02c6\u00b7","text":"<p>\u00e5\u0153\u00a8\u00e6\u0178\u00e4\u00ba\u203a\u00e7\u00ae\u00a1\u00e7\u2020\u00e5\u0153\u00ba\u00e6\u2122\u00af\u00e4\u00b8\u2039\u00ef\u00bc\u0152\u00e4\u00bd\u00a0\u00e5\u00af\u00e8\u0192\u00bd\u00e9\u0153\u20ac\u00e8\u00a6\u00e6\u2030\u2039\u00e5\u0160\u00a8\u00e5\u02c6\u2021\u00e6\u00a2\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e4\u00b8\u0160\u00e4\u00b8\u2039\u00e6\u2013\u2021\u00e3\u20ac\u201a</p> <pre><code>from fastapi_easy.security import TenantContext\n\n\n\n# \u00e4\u00b8\u00b4\u00e6\u2014\u00b6\u00e5\u02c6\u2021\u00e6\u00a2\u00e5\u02c6\u00b0\u00e5\u00a6\u00e4\u00b8\u20ac\u00e4\u00b8\u00aa\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\n\nwith TenantContext(\"tenant-admin\"):\n\n    # \u00e5\u0153\u00a8\u00e6\u00ad\u00a4\u00e5\u2014\u00e5\u2020\u2026\u00e7\u0161\u201e\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e6\u201c\u00e4\u00bd\u0153\u00e9\u0192\u00bd\u00e5\u00b0\u2020\u00e5\u0153\u00a8 tenant-admin \u00e4\u00b8\u0160\u00e4\u00b8\u2039\u00e6\u2013\u2021\u00e4\u00b8\u00ad\u00e6\u2030\u00a7\u00e8\u00a1\u0152\n\n    await perform_admin_task()\n</code></pre>"},{"location":"security/multi-tenancy/#eaasa1cye","title":"\u00e8\u2021\u00aa\u00e5\u00ae\u0161\u00e4\u00b9\u2030\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e8\u00a7\u00a3\u00e6","text":"<p>\u00e5\u00a6\u201a\u00e6\u0153\u00e9\u00bb\u02dc\u00e8\u00ae\u00a4\u00e7\u0161\u201e Header \u00e8\u00a7\u00a3\u00e6\u00e4\u00b8\u00e6\u00bb\u00a1\u00e8\u00b6\u00b3\u00e9\u0153\u20ac\u00e6\u00b1\u201a\u00ef\u00bc\u02c6\u00e4\u00be\u2039\u00e5\u00a6\u201a\u00e9\u0153\u20ac\u00e8\u00a6\u00e4\u00bb\u00e5\u00ad\u00e5\u0178\u0178\u00e5\u00e8\u00a7\u00a3\u00e6\u00ef\u00bc\u2030\u00ef\u00bc\u0152\u00e5\u00af\u00e4\u00bb\u00a5\u00e7\u00bb\u00a7\u00e6\u2030\u00bf\u00e4\u00b8\u00ad\u00e9\u2014\u00b4\u00e4\u00bb\u00b6\u00e5\u00b9\u00b6\u00e9\u2021\u00e5\u2020\u2122\u00e8\u00a7\u00a3\u00e6\u00e9\u20ac\u00bb\u00e8\u00be\u2018\u00e3\u20ac\u201a</p> <pre><code>class SubdomainTenantMiddleware(TenantIsolationMiddleware):\n\n    def get_tenant_id(self, request):\n\n        host = request.headers.get(\"host\", \"\")\n\n        return host.split(\".\")[0]  # tenant.example.com -&gt; tenant\n</code></pre>"},{"location":"security/multi-tenancy/#as-i-a123ae","title":"\u00e2\u0161\u00a0\u00ef\u00b8 \u00e6\u0153\u20ac\u00e4\u00bd\u00b3\u00e5\u00ae\u00e8\u00b7\u00b5","text":"<ol> <li> <p>\u00e5\u00a7\u2039\u00e7\u00bb\u02c6\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e4\u00b8\u00ad\u00e9\u2014\u00b4\u00e4\u00bb\u00b6: \u00e4\u00b8\u00e8\u00a6\u00e6\u2030\u2039\u00e5\u0160\u00a8\u00e7\u00ae\u00a1\u00e7\u2020 Tenant Context\u00ef\u00bc\u0152\u00e5\u00ae\u00b9\u00e6\u02dc\u201c\u00e5\u2021\u00ba\u00e9\u201d\u2122\u00e3\u20ac\u201a</p> </li> <li> <p>\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e8\u00ae\u00be\u00e8\u00ae\u00a1: \u00e7\u00a1\u00ae\u00e4\u00bf\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e6\u2022\u00e6\u201e\u0178\u00e8\u00a1\u00a8\u00e9\u0192\u00bd\u00e6\u0153\u2030 <code>tenant_id</code> \u00e5\u00ad\u2014\u00e6\u00ae\u00b5\u00e5\u00b9\u00b6\u00e5\u00bb\u00ba\u00e7\u00ab\u2039\u00e7\u00b4\u00a2\u00e5\u00bc\u2022\u00e3\u20ac\u201a</p> </li> <li> <p>\u00e7\u00bc\u201c\u00e5\u00ad\u02dc\u00e9\u0161\u201d\u00e7\u00a6\u00bb: \u00e5\u00a6\u201a\u00e6\u0153\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e7\u00bc\u201c\u00e5\u00ad\u02dc\u00ef\u00bc\u0152\u00e7\u00a1\u00ae\u00e4\u00bf\u00e7\u00bc\u201c\u00e5\u00ad\u02dc Key \u00e5\u0152\u2026\u00e5\u00ab Tenant ID\u00e3\u20ac\u201a</p> </li> <li> <p>\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00a4\u2021\u00e4\u00bb\u00bd: \u00e5\u00bb\u00ba\u00e8\u00ae\u00ae\u00e6\u0152\u2030\u00e7\u00a7\u0178\u00e6\u02c6\u00b7\u00e8\u00bf\u203a\u00e8\u00a1\u0152\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00a4\u2021\u00e4\u00bb\u00bd\u00e5\u2019\u0152\u00e6\u00a2\u00e5\u00a4\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e3\u20ac\u201a</p> </li> </ol>"},{"location":"security/password-rate-limit/","title":"\u5bc6\u7801\u548c\u767b\u5f55\u9650\u5236\u6307\u5357","text":""},{"location":"security/password-rate-limit/#_2","title":"\u6982\u8ff0","text":"<p>FastAPI-Easy \u63d0\u4f9b\u4e86\uff1a</p> <ul> <li>\u5b89\u5168\u7684\u5bc6\u7801\u54c8\u5e0c (bcrypt)</li> <li>\u767b\u5f55\u5c1d\u8bd5\u9650\u5236</li> <li>\u8d26\u6237\u9501\u5b9a\u673a\u5236</li> <li>\u66b4\u529b\u7834\u89e3\u9632\u62a4</li> </ul>"},{"location":"security/password-rate-limit/#_3","title":"\u5bc6\u7801\u7ba1\u7406","text":""},{"location":"security/password-rate-limit/#_4","title":"\u521d\u59cb\u5316\u5bc6\u7801\u7ba1\u7406\u5668","text":"<pre><code>from fastapi_easy.security import PasswordManager\n\n# \u521b\u5efa\u5bc6\u7801\u7ba1\u7406\u5668\npassword_manager = PasswordManager(rounds=12)\n</code></pre>"},{"location":"security/password-rate-limit/#_5","title":"\u54c8\u5e0c\u5bc6\u7801","text":"<pre><code># \u5728\u7528\u6237\u6ce8\u518c\u65f6\u54c8\u5e0c\u5bc6\u7801\npassword = \"user_password_123\"\nhashed_password = password_manager.hash_password(password)\n\n# \u4fdd\u5b58\u5230\u6570\u636e\u5e93\nuser.password_hash = hashed_password\ndb.add(user)\ndb.commit()\n</code></pre>"},{"location":"security/password-rate-limit/#_6","title":"\u9a8c\u8bc1\u5bc6\u7801","text":"<pre><code># \u5728\u7528\u6237\u767b\u5f55\u65f6\u9a8c\u8bc1\u5bc6\u7801\n@app.post(\"/auth/login\")\nasync def login(username: str, password: str):\n    user = db.query(User).filter(User.username == username).first()\n\n    if not user:\n        raise HTTPException(status_code=401, detail=\"Invalid credentials\")\n\n    # \u9a8c\u8bc1\u5bc6\u7801\n    if not password_manager.verify_password(password, user.password_hash):\n        raise HTTPException(status_code=401, detail=\"Invalid credentials\")\n\n    # \u751f\u6210 Token\n    access_token = jwt_auth.create_access_token(subject=str(user.id))\n    return {\"access_token\": access_token, \"token_type\": \"bearer\"}\n</code></pre>"},{"location":"security/password-rate-limit/#_7","title":"\u68c0\u67e5\u662f\u5426\u9700\u8981\u91cd\u65b0\u54c8\u5e0c","text":"<pre><code># \u5b9a\u671f\u68c0\u67e5\u5bc6\u7801\u662f\u5426\u9700\u8981\u91cd\u65b0\u54c8\u5e0c\n# \u4f8b\u5982\uff1a\u5f53 bcrypt rounds \u589e\u52a0\u65f6\nnew_password_manager = PasswordManager(rounds=14)\n\nif new_password_manager.needs_rehash(user.password_hash):\n    # \u5728\u7528\u6237\u4e0b\u6b21\u767b\u5f55\u65f6\u91cd\u65b0\u54c8\u5e0c\n    new_hash = new_password_manager.hash_password(original_password)\n    user.password_hash = new_hash\n    db.commit()\n</code></pre>"},{"location":"security/password-rate-limit/#_8","title":"\u767b\u5f55\u9650\u5236","text":""},{"location":"security/password-rate-limit/#_9","title":"\u521d\u59cb\u5316\u767b\u5f55\u5c1d\u8bd5\u8ddf\u8e2a\u5668","text":"<pre><code>from fastapi_easy.security import LoginAttemptTracker\n\n# \u521b\u5efa\u8ddf\u8e2a\u5668\n# \u6700\u591a 5 \u6b21\u5c1d\u8bd5\uff0c\u9501\u5b9a 15 \u5206\u949f\uff0c60 \u5206\u949f\u540e\u91cd\u7f6e\ntracker = LoginAttemptTracker(\n    max_attempts=5,\n    lockout_duration_minutes=15,\n    reset_duration_minutes=60,\n)\n</code></pre>"},{"location":"security/password-rate-limit/#_10","title":"\u8bb0\u5f55\u767b\u5f55\u5c1d\u8bd5","text":"<pre><code>@app.post(\"/auth/login\")\nasync def login(username: str, password: str):\n    # \u68c0\u67e5\u662f\u5426\u88ab\u9501\u5b9a\n    if tracker.is_locked_out(username):\n        remaining = tracker.get_lockout_remaining_seconds(username)\n        raise HTTPException(\n            status_code=429,\n            detail=f\"Account locked. Try again in {remaining} seconds\",\n        )\n\n    user = db.query(User).filter(User.username == username).first()\n\n    if not user or not password_manager.verify_password(password, user.password_hash):\n        # \u8bb0\u5f55\u5931\u8d25\u7684\u5c1d\u8bd5\n        tracker.record_attempt(username, success=False)\n\n        attempt_count = tracker.get_attempt_count(username)\n        raise HTTPException(\n            status_code=401,\n            detail=f\"Invalid credentials ({attempt_count} attempts)\",\n        )\n\n    # \u8bb0\u5f55\u6210\u529f\u7684\u5c1d\u8bd5\uff08\u6e05\u9664\u8ba1\u6570\uff09\n    tracker.record_attempt(username, success=True)\n\n    # \u751f\u6210 Token\n    access_token = jwt_auth.create_access_token(subject=str(user.id))\n    return {\"access_token\": access_token, \"token_type\": \"bearer\"}\n</code></pre>"},{"location":"security/password-rate-limit/#_11","title":"\u83b7\u53d6\u9501\u5b9a\u4fe1\u606f","text":"<pre><code>@app.get(\"/auth/lockout-status/{username}\")\nasync def get_lockout_status(username: str):\n    \"\"\"\u83b7\u53d6\u8d26\u6237\u9501\u5b9a\u72b6\u6001\"\"\"\n    if tracker.is_locked_out(username):\n        remaining = tracker.get_lockout_remaining_seconds(username)\n        return {\n            \"locked\": True,\n            \"remaining_seconds\": remaining,\n        }\n    else:\n        attempt_count = tracker.get_attempt_count(username)\n        return {\n            \"locked\": False,\n            \"attempts\": attempt_count,\n            \"max_attempts\": 5,\n        }\n</code></pre>"},{"location":"security/password-rate-limit/#_12","title":"\u91cd\u7f6e\u7528\u6237","text":"<pre><code>@app.post(\"/admin/reset-lockout/{username}\")\nasync def reset_lockout(\n    username: str,\n    current_user: dict = Depends(require_role(\"admin\")),\n):\n    \"\"\"\u7ba1\u7406\u5458\u91cd\u7f6e\u7528\u6237\u9501\u5b9a\u72b6\u6001\"\"\"\n    tracker.reset_user(username)\n    return {\"message\": f\"Lockout reset for {username}\"}\n</code></pre>"},{"location":"security/password-rate-limit/#_13","title":"\u5b8c\u6574\u7684\u767b\u5f55\u6d41\u7a0b","text":"<pre><code>from fastapi_easy.security import (\n    PasswordManager,\n    LoginAttemptTracker,\n    AuditLogger,\n    AuditEventType,\n)\n\n# \u521d\u59cb\u5316\npassword_manager = PasswordManager()\ntracker = LoginAttemptTracker()\naudit_logger = AuditLogger()\n\n@app.post(\"/auth/login\")\nasync def login(username: str, password: str):\n    \"\"\"\u5b8c\u6574\u7684\u767b\u5f55\u6d41\u7a0b\"\"\"\n\n    # 1. \u68c0\u67e5\u662f\u5426\u88ab\u9501\u5b9a\n    if tracker.is_locked_out(username):\n        remaining = tracker.get_lockout_remaining_seconds(username)\n        audit_logger.log(\n            event_type=AuditEventType.LOGIN_LOCKED,\n            username=username,\n            status=\"failure\",\n        )\n        raise HTTPException(status_code=429, detail=\"Account locked\")\n\n    # 2. \u67e5\u627e\u7528\u6237\n    user = db.query(User).filter(User.username == username).first()\n\n    if not user:\n        tracker.record_attempt(username, success=False)\n        audit_logger.log(\n            event_type=AuditEventType.LOGIN_FAILURE,\n            username=username,\n            status=\"failure\",\n            details={\"reason\": \"user_not_found\"},\n        )\n        raise HTTPException(status_code=401, detail=\"Invalid credentials\")\n\n    # 3. \u9a8c\u8bc1\u5bc6\u7801\n    if not password_manager.verify_password(password, user.password_hash):\n        tracker.record_attempt(username, success=False)\n        audit_logger.log(\n            event_type=AuditEventType.LOGIN_FAILURE,\n            username=username,\n            user_id=str(user.id),\n            status=\"failure\",\n            details={\"reason\": \"invalid_password\"},\n        )\n        raise HTTPException(status_code=401, detail=\"Invalid credentials\")\n\n    # 4. \u8bb0\u5f55\u6210\u529f\u7684\u5c1d\u8bd5\n    tracker.record_attempt(username, success=True)\n\n    # 5. \u751f\u6210 Token\n    access_token = jwt_auth.create_access_token(subject=str(user.id))\n    refresh_token = jwt_auth.create_refresh_token(subject=str(user.id))\n\n    # 6. \u8bb0\u5f55\u5ba1\u8ba1\u65e5\u5fd7\n    audit_logger.log(\n        event_type=AuditEventType.LOGIN_SUCCESS,\n        username=username,\n        user_id=str(user.id),\n        status=\"success\",\n    )\n\n    return {\n        \"access_token\": access_token,\n        \"refresh_token\": refresh_token,\n        \"token_type\": \"bearer\",\n    }\n</code></pre>"},{"location":"security/password-rate-limit/#_14","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"security/password-rate-limit/#1","title":"1. \u4f7f\u7528\u5f3a\u5bc6\u7801\u8981\u6c42","text":"<pre><code>import re\n\ndef validate_password(password: str) -&gt; bool:\n    \"\"\"\u9a8c\u8bc1\u5bc6\u7801\u5f3a\u5ea6\"\"\"\n    # \u81f3\u5c11 8 \u4e2a\u5b57\u7b26\n    if len(password) &lt; 8:\n        return False\n\n    # \u5305\u542b\u5927\u5199\u5b57\u6bcd\n    if not re.search(r'[A-Z]', password):\n        return False\n\n    # \u5305\u542b\u5c0f\u5199\u5b57\u6bcd\n    if not re.search(r'[a-z]', password):\n        return False\n\n    # \u5305\u542b\u6570\u5b57\n    if not re.search(r'\\d', password):\n        return False\n\n    # \u5305\u542b\u7279\u6b8a\u5b57\u7b26\n    if not re.search(r'[!@#$%^&amp;*(),.?\":{}|&lt;&gt;]', password):\n        return False\n\n    return True\n\n@app.post(\"/auth/register\")\nasync def register(username: str, password: str):\n    if not validate_password(password):\n        raise HTTPException(\n            status_code=400,\n            detail=\"Password must be at least 8 characters and contain uppercase, lowercase, digit, and special character\",\n        )\n\n    # \u7ee7\u7eed\u6ce8\u518c\u6d41\u7a0b\n</code></pre>"},{"location":"security/password-rate-limit/#2-bcrypt-rounds","title":"2. \u5b9a\u671f\u66f4\u65b0 bcrypt rounds","text":"<pre><code># \u6bcf\u5e74\u6216\u6839\u636e\u5b89\u5168\u5efa\u8bae\u66f4\u65b0 rounds\n# \u5f53\u8ba1\u7b97\u80fd\u529b\u589e\u52a0\u65f6\uff0c\u589e\u52a0 rounds \u4ee5\u4fdd\u6301\u5b89\u5168\u6027\npassword_manager = PasswordManager(rounds=14)  # \u4ece 12 \u589e\u52a0\u5230 14\n</code></pre>"},{"location":"security/password-rate-limit/#3","title":"3. \u76d1\u63a7\u767b\u5f55\u5931\u8d25","text":"<pre><code># \u5b9a\u671f\u68c0\u67e5\u767b\u5f55\u5931\u8d25\nfailed_logins = audit_logger.get_failed_logins(username=\"admin\", limit=10)\n\nfor login in failed_logins:\n    print(f\"Failed login attempt: {login['timestamp']}\")\n</code></pre>"},{"location":"security/password-rate-limit/#4","title":"4. \u5b9e\u73b0\u5bc6\u7801\u91cd\u7f6e","text":"<pre><code>@app.post(\"/auth/forgot-password\")\nasync def forgot_password(email: str):\n    \"\"\"\u5bc6\u7801\u91cd\u7f6e\u8bf7\u6c42\"\"\"\n    user = db.query(User).filter(User.email == email).first()\n\n    if not user:\n        # \u4e0d\u8981\u900f\u9732\u7528\u6237\u662f\u5426\u5b58\u5728\n        return {\"message\": \"If user exists, reset link will be sent\"}\n\n    # \u751f\u6210\u91cd\u7f6e\u4ee4\u724c\n    reset_token = secrets.token_urlsafe(32)\n    user.reset_token = reset_token\n    user.reset_token_expires = datetime.utcnow() + timedelta(hours=1)\n    db.commit()\n\n    # \u53d1\u9001\u91cd\u7f6e\u94fe\u63a5\n    send_reset_email(user.email, reset_token)\n\n    return {\"message\": \"Reset link sent to email\"}\n\n@app.post(\"/auth/reset-password\")\nasync def reset_password(token: str, new_password: str):\n    \"\"\"\u91cd\u7f6e\u5bc6\u7801\"\"\"\n    user = db.query(User).filter(User.reset_token == token).first()\n\n    if not user or user.reset_token_expires &lt; datetime.utcnow():\n        raise HTTPException(status_code=400, detail=\"Invalid or expired token\")\n\n    # \u54c8\u5e0c\u65b0\u5bc6\u7801\n    user.password_hash = password_manager.hash_password(new_password)\n    user.reset_token = None\n    user.reset_token_expires = None\n    db.commit()\n\n    return {\"message\": \"Password reset successfully\"}\n</code></pre>"},{"location":"security/password-rate-limit/#_15","title":"\u5b8c\u6574\u793a\u4f8b","text":"<p>\u53c2\u8003 <code>examples/06_with_permissions.py</code> \u83b7\u53d6\u5b8c\u6574\u7684\u5de5\u4f5c\u793a\u4f8b\u3002</p>"},{"location":"security/permission-engine/","title":"\u6743\u9650\u68c0\u67e5\u5f15\u64ce\u6307\u5357","text":"<p>\u6743\u9650\u68c0\u67e5\u5f15\u64ce\u662f\u4e00\u4e2a\u7edf\u4e00\u7684\u6743\u9650\u68c0\u67e5\u63a5\u53e3\uff0c\u652f\u6301\u591a\u79cd\u6743\u9650\u68c0\u67e5\u65b9\u5f0f\u3002</p>"},{"location":"security/permission-engine/#_2","title":"\u6982\u8ff0","text":""},{"location":"security/permission-engine/#_3","title":"\u4ec0\u4e48\u662f\u6743\u9650\u68c0\u67e5\u5f15\u64ce\uff1f","text":"<p>\u6743\u9650\u68c0\u67e5\u5f15\u64ce\u662f\u4e00\u4e2a\u7edf\u4e00\u7684\u63a5\u53e3\uff0c\u7528\u4e8e\u68c0\u67e5\u7528\u6237\u6743\u9650\uff0c\u652f\u6301\u5355\u4e2a\u6743\u9650\u68c0\u67e5\u3001\u591a\u6743\u9650\u68c0\u67e5\uff08AND/OR\uff09\u548c\u8d44\u6e90\u7ea7\u6743\u9650\u68c0\u67e5\u3002</p>"},{"location":"security/permission-engine/#_4","title":"\u4e3a\u4ec0\u4e48\u9700\u8981\u6743\u9650\u68c0\u67e5\u5f15\u64ce\uff1f","text":"<ul> <li>\u7edf\u4e00\u63a5\u53e3: \u63d0\u4f9b\u7edf\u4e00\u7684\u6743\u9650\u68c0\u67e5\u65b9\u5f0f</li> <li>\u7075\u6d3b\u6027: \u652f\u6301\u591a\u79cd\u6743\u9650\u68c0\u67e5\u65b9\u5f0f</li> <li>\u6027\u80fd: \u5185\u7f6e\u7f13\u5b58\u652f\u6301</li> <li>\u53ef\u6269\u5c55\u6027: \u6613\u4e8e\u6269\u5c55\u65b0\u7684\u68c0\u67e5\u65b9\u5f0f</li> </ul>"},{"location":"security/permission-engine/#_5","title":"\u4f55\u65f6\u4f7f\u7528\u6743\u9650\u68c0\u67e5\u5f15\u64ce\uff1f","text":"<ul> <li>\u9700\u8981\u7edf\u4e00\u7684\u6743\u9650\u68c0\u67e5\u63a5\u53e3</li> <li>\u9700\u8981\u652f\u6301\u590d\u6742\u7684\u6743\u9650\u903b\u8f91</li> <li>\u9700\u8981\u6027\u80fd\u4f18\u5316</li> <li>\u9700\u8981\u8d44\u6e90\u7ea7\u6743\u9650\u68c0\u67e5</li> </ul>"},{"location":"security/permission-engine/#_6","title":"\u57fa\u7840\u4f7f\u7528","text":""},{"location":"security/permission-engine/#_7","title":"\u521d\u59cb\u5316\u5f15\u64ce","text":"<pre><code>from fastapi_easy.security import (\n    PermissionEngine,\n    StaticPermissionLoader,\n    CachedPermissionLoader\n)\n\n# \u521b\u5efa\u6743\u9650\u52a0\u8f7d\u5668\npermissions_map = {\n    \"user1\": [\"read\", \"write\"],\n    \"user2\": [\"read\"],\n    \"admin\": [\"read\", \"write\", \"delete\", \"admin\"]\n}\nloader = StaticPermissionLoader(permissions_map)\n\n# \u521b\u5efa\u6743\u9650\u5f15\u64ce\nengine = PermissionEngine(\n    permission_loader=loader,\n    enable_cache=True,\n    cache_ttl=300\n)\n</code></pre>"},{"location":"security/permission-engine/#_8","title":"\u5355\u4e2a\u6743\u9650\u68c0\u67e5","text":"<pre><code># \u68c0\u67e5\u7528\u6237\u662f\u5426\u6709\u7279\u5b9a\u6743\u9650\nhas_permission = await engine.check_permission(\"user1\", \"read\")\n# \u8fd4\u56de: True\n\nhas_permission = await engine.check_permission(\"user1\", \"delete\")\n# \u8fd4\u56de: False\n</code></pre>"},{"location":"security/permission-engine/#and","title":"\u6240\u6709\u6743\u9650\u68c0\u67e5 (AND)","text":"<pre><code># \u68c0\u67e5\u7528\u6237\u662f\u5426\u6709\u6240\u6709\u6743\u9650\nhas_all = await engine.check_all_permissions(\n    \"user1\",\n    [\"read\", \"write\"]\n)\n# \u8fd4\u56de: True\n\nhas_all = await engine.check_all_permissions(\n    \"user1\",\n    [\"read\", \"write\", \"delete\"]\n)\n# \u8fd4\u56de: False\n</code></pre>"},{"location":"security/permission-engine/#or","title":"\u4efb\u610f\u6743\u9650\u68c0\u67e5 (OR)","text":"<pre><code># \u68c0\u67e5\u7528\u6237\u662f\u5426\u6709\u4efb\u610f\u6743\u9650\nhas_any = await engine.check_any_permission(\n    \"user1\",\n    [\"delete\", \"admin\"]\n)\n# \u8fd4\u56de: False\n\nhas_any = await engine.check_any_permission(\n    \"user1\",\n    [\"read\", \"delete\"]\n)\n# \u8fd4\u56de: True\n</code></pre>"},{"location":"security/permission-engine/#_9","title":"\u9ad8\u7ea7\u7528\u6cd5","text":""},{"location":"security/permission-engine/#_10","title":"\u8d44\u6e90\u7ea7\u6743\u9650\u68c0\u67e5","text":"<pre><code>from fastapi_easy.security import StaticResourceChecker, CachedResourceChecker\n\n# \u521b\u5efa\u8d44\u6e90\u68c0\u67e5\u5668\nresources_map = {\n    \"post_1\": {\n        \"owner_id\": \"user1\",\n        \"permissions\": {\n            \"user2\": [\"read\"]\n        }\n    }\n}\nresource_checker = StaticResourceChecker(resources_map)\ncached_checker = CachedResourceChecker(resource_checker)\n\n# \u521b\u5efa\u5f15\u64ce\nengine = PermissionEngine(\n    permission_loader=loader,\n    resource_checker=cached_checker,\n    enable_cache=True\n)\n\n# \u68c0\u67e5\u8d44\u6e90\u6743\u9650\nhas_permission = await engine.check_permission(\n    \"user1\",\n    \"read\",\n    resource_id=\"post_1\"\n)\n# \u8fd4\u56de: True\uff08\u6240\u6709\u8005\uff09\n\nhas_permission = await engine.check_permission(\n    \"user2\",\n    \"read\",\n    resource_id=\"post_1\"\n)\n# \u8fd4\u56de: True\uff08\u6709\u663e\u5f0f\u6743\u9650\uff09\n</code></pre>"},{"location":"security/permission-engine/#_11","title":"\u7f13\u5b58\u7ba1\u7406","text":"<pre><code># \u6e05\u7406\u7279\u5b9a\u7528\u6237\u7684\u7f13\u5b58\nengine.clear_cache(\"user1\")\n\n# \u6e05\u7406\u6240\u6709\u7f13\u5b58\nengine.clear_cache()\n</code></pre>"},{"location":"security/permission-engine/#_12","title":"\u7981\u7528\u7f13\u5b58","text":"<pre><code># \u521b\u5efa\u4e0d\u4f7f\u7528\u7f13\u5b58\u7684\u5f15\u64ce\nengine = PermissionEngine(\n    permission_loader=loader,\n    enable_cache=False\n)\n</code></pre>"},{"location":"security/permission-engine/#_13","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"security/permission-engine/#q","title":"Q: \u5982\u4f55\u5904\u7406\u6743\u9650\u66f4\u65b0\uff1f","text":"<p>A: \u6e05\u7406\u7f13\u5b58\u540e\u91cd\u65b0\u68c0\u67e5\uff1a</p> <pre><code># \u6743\u9650\u66f4\u65b0\u540e\u6e05\u7406\u7f13\u5b58\nengine.clear_cache(\"user1\")\n\n# \u91cd\u65b0\u68c0\u67e5\nhas_permission = await engine.check_permission(\"user1\", \"read\")\n</code></pre>"},{"location":"security/permission-engine/#q_1","title":"Q: \u7f13\u5b58\u4f55\u65f6\u5931\u6548\uff1f","text":"<p>A: \u7f13\u5b58\u5728 TTL \u65f6\u95f4\u540e\u81ea\u52a8\u5931\u6548\u3002</p> <pre><code># \u8bbe\u7f6e\u81ea\u5b9a\u4e49 TTL\nengine = PermissionEngine(\n    permission_loader=loader,\n    cache_ttl=600  # 10 \u5206\u949f\n)\n</code></pre>"},{"location":"security/permission-engine/#q_2","title":"Q: \u5982\u4f55\u5904\u7406\u6743\u9650\u68c0\u67e5\u5931\u8d25\uff1f","text":"<p>A: \u6355\u83b7\u5f02\u5e38\u5e76\u5904\u7406\uff1a</p> <pre><code>try:\n    has_permission = await engine.check_permission(\"user1\", \"read\")\nexcept Exception as e:\n    logger.error(f\"Permission check failed: {e}\")\n    has_permission = False\n</code></pre>"},{"location":"security/permission-engine/#_14","title":"\u6700\u4f73\u5b9e\u8df5","text":"<ol> <li>\u4f7f\u7528\u7f13\u5b58: \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u59cb\u7ec8\u4f7f\u7528\u7f13\u5b58</li> <li>\u5408\u7406\u7684 TTL: \u6839\u636e\u4e1a\u52a1\u9700\u6c42\u8bbe\u7f6e\u5408\u9002\u7684\u7f13\u5b58\u65f6\u95f4</li> <li>\u9519\u8bef\u5904\u7406: \u5904\u7406\u68c0\u67e5\u5931\u8d25\u7684\u60c5\u51b5</li> <li>\u65e5\u5fd7\u8bb0\u5f55: \u8bb0\u5f55\u6743\u9650\u68c0\u67e5\u64cd\u4f5c</li> <li>\u6027\u80fd\u76d1\u63a7: \u76d1\u63a7\u7f13\u5b58\u547d\u4e2d\u7387</li> </ol>"},{"location":"security/permission-engine/#_15","title":"\u5b8c\u6574\u793a\u4f8b","text":"<pre><code>from fastapi import FastAPI, Depends, HTTPException\nfrom fastapi_easy.security import (\n    PermissionEngine,\n    StaticPermissionLoader,\n    StaticResourceChecker,\n    CachedResourceChecker,\n    SecurityConfig,\n    JWTAuth,\n    require_permission\n)\n\napp = FastAPI()\n\n# 1. \u521b\u5efa\u6743\u9650\u52a0\u8f7d\u5668\npermissions_map = {\n    \"user1\": [\"read\", \"write\"],\n    \"user2\": [\"read\"],\n    \"admin\": [\"read\", \"write\", \"delete\", \"admin\"]\n}\nloader = StaticPermissionLoader(permissions_map)\n\n# 2. \u521b\u5efa\u8d44\u6e90\u68c0\u67e5\u5668\nresources_map = {\n    \"post_1\": {\n        \"owner_id\": \"user1\",\n        \"permissions\": {\n            \"user2\": [\"read\"]\n        }\n    }\n}\nresource_checker = StaticResourceChecker(resources_map)\ncached_checker = CachedResourceChecker(resource_checker)\n\n# 3. \u521b\u5efa\u6743\u9650\u5f15\u64ce\nengine = PermissionEngine(\n    permission_loader=loader,\n    resource_checker=cached_checker,\n    enable_cache=True,\n    cache_ttl=300\n)\n\n# 4. \u521b\u5efa\u5b89\u5168\u914d\u7f6e\njwt_auth = JWTAuth(secret_key=\"your-secret-key\")\nconfig = SecurityConfig(\n    jwt_auth=jwt_auth,\n    permission_loader=loader\n)\n\n# 5. \u4f7f\u7528\u6743\u9650\u68c0\u67e5\n@app.get(\"/data\")\nasync def get_data(current_user: dict = Depends(require_permission(\"read\"))):\n    # \u68c0\u67e5\u5355\u4e2a\u6743\u9650\n    has_permission = await engine.check_permission(\n        current_user[\"user_id\"],\n        \"read\"\n    )\n\n    if not has_permission:\n        raise HTTPException(status_code=403, detail=\"No permission\")\n\n    return {\"data\": \"sensitive data\"}\n\n@app.post(\"/data\")\nasync def create_data(current_user: dict = Depends(require_permission(\"write\"))):\n    # \u68c0\u67e5\u591a\u4e2a\u6743\u9650\n    has_all = await engine.check_all_permissions(\n        current_user[\"user_id\"],\n        [\"read\", \"write\"]\n    )\n\n    if not has_all:\n        raise HTTPException(status_code=403, detail=\"Insufficient permissions\")\n\n    return {\"status\": \"created\"}\n\n@app.get(\"/posts/{post_id}\")\nasync def get_post(post_id: str, current_user: dict = Depends(require_permission(\"read\"))):\n    # \u68c0\u67e5\u8d44\u6e90\u6743\u9650\n    has_permission = await engine.check_permission(\n        current_user[\"user_id\"],\n        \"read\",\n        resource_id=post_id\n    )\n\n    if not has_permission:\n        raise HTTPException(status_code=403, detail=\"No permission\")\n\n    return {\"post_id\": post_id, \"content\": \"...\"}\n\n@app.put(\"/posts/{post_id}\")\nasync def update_post(post_id: str, current_user: dict = Depends(require_permission(\"write\"))):\n    # \u68c0\u67e5\u6240\u6709\u6743\n    is_owner = await cached_checker.check_owner(\n        current_user[\"user_id\"],\n        post_id\n    )\n\n    if not is_owner:\n        raise HTTPException(status_code=403, detail=\"Not owner\")\n\n    return {\"post_id\": post_id, \"status\": \"updated\"}\n</code></pre> <p>\u6743\u9650\u68c0\u67e5\u5f15\u64ce\u6307\u5357\u5b8c\u6210 \u2705</p>"},{"location":"security/permission-loader/","title":"\u6743\u9650\u52a0\u8f7d\u5668\u6307\u5357","text":"<p>\u6743\u9650\u52a0\u8f7d\u5668\u7528\u4e8e\u52a8\u6001\u52a0\u8f7d\u7528\u6237\u6743\u9650\uff0c\u652f\u6301\u4ece\u591a\u79cd\u6570\u636e\u6e90\u52a0\u8f7d\u6743\u9650\u6570\u636e\u3002</p>"},{"location":"security/permission-loader/#_2","title":"\u6982\u8ff0","text":""},{"location":"security/permission-loader/#_3","title":"\u4ec0\u4e48\u662f\u6743\u9650\u52a0\u8f7d\u5668\uff1f","text":"<p>\u6743\u9650\u52a0\u8f7d\u5668\u662f\u4e00\u4e2a\u63a5\u53e3\uff0c\u7528\u4e8e\u4ece\u5404\u79cd\u6570\u636e\u6e90\uff08\u5982\u6570\u636e\u5e93\u3001\u7f13\u5b58\u3001\u9759\u6001\u914d\u7f6e\u7b49\uff09\u52a0\u8f7d\u7528\u6237\u6743\u9650\u3002</p>"},{"location":"security/permission-loader/#_4","title":"\u4e3a\u4ec0\u4e48\u9700\u8981\u6743\u9650\u52a0\u8f7d\u5668\uff1f","text":"<ul> <li>\u7075\u6d3b\u6027: \u652f\u6301\u4ece\u591a\u79cd\u6570\u636e\u6e90\u52a0\u8f7d\u6743\u9650</li> <li>\u53ef\u6269\u5c55\u6027: \u6613\u4e8e\u6dfb\u52a0\u65b0\u7684\u6570\u636e\u6e90</li> <li>\u6027\u80fd: \u652f\u6301\u7f13\u5b58\u4f18\u5316</li> <li>\u89e3\u8026: \u6743\u9650\u52a0\u8f7d\u903b\u8f91\u4e0e\u4e1a\u52a1\u903b\u8f91\u5206\u79bb</li> </ul>"},{"location":"security/permission-loader/#_5","title":"\u4f55\u65f6\u4f7f\u7528\u6743\u9650\u52a0\u8f7d\u5668\uff1f","text":"<ul> <li>\u6743\u9650\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d</li> <li>\u6743\u9650\u9700\u8981\u52a8\u6001\u66f4\u65b0</li> <li>\u9700\u8981\u652f\u6301\u591a\u79cd\u6743\u9650\u6e90</li> <li>\u9700\u8981\u6027\u80fd\u4f18\u5316</li> </ul>"},{"location":"security/permission-loader/#_6","title":"\u57fa\u7840\u4f7f\u7528","text":""},{"location":"security/permission-loader/#_7","title":"\u9759\u6001\u6743\u9650\u52a0\u8f7d\u5668","text":"<p>\u4ece\u9759\u6001\u914d\u7f6e\u52a0\u8f7d\u6743\u9650\uff1a</p> <pre><code>from fastapi_easy.security import StaticPermissionLoader\n\n# \u5b9a\u4e49\u6743\u9650\u6620\u5c04\npermissions_map = {\n    \"user1\": [\"read\", \"write\"],\n    \"user2\": [\"read\"],\n    \"admin\": [\"read\", \"write\", \"delete\", \"admin\"]\n}\n\n# \u521b\u5efa\u52a0\u8f7d\u5668\nloader = StaticPermissionLoader(permissions_map)\n\n# \u52a0\u8f7d\u6743\u9650\npermissions = await loader.load_permissions(\"user1\")\n# \u8fd4\u56de: [\"read\", \"write\"]\n</code></pre>"},{"location":"security/permission-loader/#_8","title":"\u6570\u636e\u5e93\u6743\u9650\u52a0\u8f7d\u5668","text":"<p>\u4ece\u6570\u636e\u5e93\u52a0\u8f7d\u6743\u9650\uff08\u5360\u4f4d\u7b26\u5b9e\u73b0\uff09\uff1a</p> <pre><code>from fastapi_easy.security import DatabasePermissionLoader\n\n# \u521b\u5efa\u52a0\u8f7d\u5668\nloader = DatabasePermissionLoader(db_session=session)\n\n# \u52a0\u8f7d\u6743\u9650\npermissions = await loader.load_permissions(\"user1\")\n</code></pre>"},{"location":"security/permission-loader/#_9","title":"\u7f13\u5b58\u6743\u9650\u52a0\u8f7d\u5668","text":"<p>\u6dfb\u52a0\u7f13\u5b58\u5c42\u4ee5\u63d0\u9ad8\u6027\u80fd\uff1a</p> <pre><code>from fastapi_easy.security import (\n    StaticPermissionLoader,\n    CachedPermissionLoader\n)\n\n# \u521b\u5efa\u57fa\u7840\u52a0\u8f7d\u5668\nbase_loader = StaticPermissionLoader(permissions_map)\n\n# \u6dfb\u52a0\u7f13\u5b58\ncached_loader = CachedPermissionLoader(\n    base_loader,\n    cache_ttl=300  # 5 \u5206\u949f\u7f13\u5b58\n)\n\n# \u4f7f\u7528\npermissions = await cached_loader.load_permissions(\"user1\")\n</code></pre>"},{"location":"security/permission-loader/#_10","title":"\u9ad8\u7ea7\u7528\u6cd5","text":""},{"location":"security/permission-loader/#_11","title":"\u81ea\u5b9a\u4e49\u6743\u9650\u52a0\u8f7d\u5668","text":"<p>\u5b9e\u73b0\u81ea\u5df1\u7684\u6743\u9650\u52a0\u8f7d\u5668\uff1a</p> <pre><code>from typing import List\n\nclass CustomPermissionLoader:\n    \"\"\"\u81ea\u5b9a\u4e49\u6743\u9650\u52a0\u8f7d\u5668\"\"\"\n\n    async def load_permissions(self, user_id: str) -&gt; List[str]:\n        \"\"\"\u4ece\u81ea\u5b9a\u4e49\u6e90\u52a0\u8f7d\u6743\u9650\"\"\"\n        # \u81ea\u5b9a\u4e49\u5b9e\u73b0\n        if user_id == \"admin\":\n            return [\"read\", \"write\", \"delete\", \"admin\"]\n        else:\n            return [\"read\"]\n\n# \u4f7f\u7528\nloader = CustomPermissionLoader()\npermissions = await loader.load_permissions(\"user1\")\n</code></pre>"},{"location":"security/permission-loader/#_12","title":"\u6743\u9650\u7f13\u5b58\u7ba1\u7406","text":"<p>\u6e05\u7406\u7f13\u5b58\uff1a</p> <pre><code># \u6e05\u7406\u7279\u5b9a\u7528\u6237\u7684\u7f13\u5b58\ncached_loader.clear_cache(\"user1\")\n\n# \u6e05\u7406\u6240\u6709\u7f13\u5b58\ncached_loader.clear_cache()\n</code></pre>"},{"location":"security/permission-loader/#_13","title":"\u6743\u9650\u68c0\u67e5\u5f15\u64ce\u96c6\u6210","text":"<p>\u4e0e\u6743\u9650\u68c0\u67e5\u5f15\u64ce\u96c6\u6210\uff1a</p> <pre><code>from fastapi_easy.security import PermissionEngine\n\n# \u521b\u5efa\u5f15\u64ce\nengine = PermissionEngine(\n    permission_loader=cached_loader,\n    enable_cache=True\n)\n\n# \u68c0\u67e5\u6743\u9650\nhas_permission = await engine.check_permission(\"user1\", \"read\")\n</code></pre>"},{"location":"security/permission-loader/#_14","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"security/permission-loader/#q","title":"Q: \u7f13\u5b58\u4f55\u65f6\u5931\u6548\uff1f","text":"<p>A: \u7f13\u5b58\u5728 TTL \u65f6\u95f4\u540e\u81ea\u52a8\u5931\u6548\u3002\u9ed8\u8ba4 TTL \u4e3a 300 \u79d2\uff085 \u5206\u949f\uff09\u3002</p> <pre><code># \u8bbe\u7f6e\u81ea\u5b9a\u4e49 TTL\ncached_loader = CachedPermissionLoader(\n    base_loader,\n    cache_ttl=600  # 10 \u5206\u949f\n)\n</code></pre>"},{"location":"security/permission-loader/#q_1","title":"Q: \u5982\u4f55\u66f4\u65b0\u6743\u9650\uff1f","text":"<p>A: \u6e05\u7406\u7f13\u5b58\u540e\u91cd\u65b0\u52a0\u8f7d\uff1a</p> <pre><code># \u6e05\u7406\u7f13\u5b58\ncached_loader.clear_cache(\"user1\")\n\n# \u91cd\u65b0\u52a0\u8f7d\u6743\u9650\npermissions = await cached_loader.load_permissions(\"user1\")\n</code></pre>"},{"location":"security/permission-loader/#q_2","title":"Q: \u6027\u80fd\u5982\u4f55\u4f18\u5316\uff1f","text":"<p>A: \u4f7f\u7528\u7f13\u5b58\u548c\u5408\u7406\u7684 TTL \u65f6\u95f4\uff1a</p> <pre><code># \u9ad8\u9891\u8bbf\u95ee\u573a\u666f\uff1a\u4f7f\u7528\u8f83\u957f\u7684 TTL\ncached_loader = CachedPermissionLoader(base_loader, cache_ttl=600)\n\n# \u5b9e\u65f6\u66f4\u65b0\u573a\u666f\uff1a\u4f7f\u7528\u8f83\u77ed\u7684 TTL\ncached_loader = CachedPermissionLoader(base_loader, cache_ttl=60)\n</code></pre>"},{"location":"security/permission-loader/#_15","title":"\u6700\u4f73\u5b9e\u8df5","text":"<ol> <li>\u4f7f\u7528\u7f13\u5b58: \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u59cb\u7ec8\u4f7f\u7528\u7f13\u5b58</li> <li>\u5408\u7406\u7684 TTL: \u6839\u636e\u4e1a\u52a1\u9700\u6c42\u8bbe\u7f6e\u5408\u9002\u7684\u7f13\u5b58\u65f6\u95f4</li> <li>\u9519\u8bef\u5904\u7406: \u5904\u7406\u52a0\u8f7d\u5931\u8d25\u7684\u60c5\u51b5</li> <li>\u65e5\u5fd7\u8bb0\u5f55: \u8bb0\u5f55\u6743\u9650\u52a0\u8f7d\u64cd\u4f5c</li> <li>\u6027\u80fd\u76d1\u63a7: \u76d1\u63a7\u7f13\u5b58\u547d\u4e2d\u7387</li> </ol>"},{"location":"security/permission-loader/#_16","title":"\u5b8c\u6574\u793a\u4f8b","text":"<pre><code>from fastapi import FastAPI, Depends\nfrom fastapi_easy.security import (\n    StaticPermissionLoader,\n    CachedPermissionLoader,\n    PermissionEngine,\n    SecurityConfig,\n    JWTAuth,\n    require_permission\n)\n\napp = FastAPI()\n\n# 1. \u521b\u5efa\u6743\u9650\u52a0\u8f7d\u5668\npermissions_map = {\n    \"user1\": [\"read\", \"write\"],\n    \"user2\": [\"read\"],\n    \"admin\": [\"read\", \"write\", \"delete\", \"admin\"]\n}\nloader = StaticPermissionLoader(permissions_map)\n\n# 2. \u6dfb\u52a0\u7f13\u5b58\ncached_loader = CachedPermissionLoader(loader, cache_ttl=300)\n\n# 3. \u521b\u5efa\u6743\u9650\u5f15\u64ce\nengine = PermissionEngine(\n    permission_loader=cached_loader,\n    enable_cache=True\n)\n\n# 4. \u521b\u5efa\u5b89\u5168\u914d\u7f6e\njwt_auth = JWTAuth(secret_key=\"your-secret-key\")\nconfig = SecurityConfig(\n    jwt_auth=jwt_auth,\n    permission_loader=cached_loader\n)\n\n# 5. \u4f7f\u7528\u6743\u9650\u68c0\u67e5\n@app.get(\"/data\")\nasync def get_data(current_user: dict = Depends(require_permission(\"read\"))):\n    return {\"data\": \"sensitive data\"}\n\n@app.post(\"/data\")\nasync def create_data(current_user: dict = Depends(require_permission(\"write\"))):\n    return {\"status\": \"created\"}\n\n@app.delete(\"/data\")\nasync def delete_data(current_user: dict = Depends(require_permission(\"delete\"))):\n    return {\"status\": \"deleted\"}\n</code></pre> <p>\u6743\u9650\u52a0\u8f7d\u5668\u6307\u5357\u5b8c\u6210 \u2705</p>"},{"location":"security/permissions/","title":"\u6743\u9650\u63a7\u5236\u6307\u5357","text":""},{"location":"security/permissions/#_2","title":"\u6982\u8ff0","text":"<p>FastAPI-Easy \u63d0\u4f9b\u4e86\u7075\u6d3b\u7684\u6743\u9650\u63a7\u5236\u7cfb\u7edf\uff0c\u652f\u6301\uff1a</p> <ul> <li>\u89d2\u8272\u6743\u9650\u68c0\u67e5 (RBAC)</li> <li>\u7ec6\u7c92\u5ea6\u6743\u9650\u63a7\u5236</li> <li>\u591a\u79cd\u6743\u9650\u68c0\u67e5\u65b9\u5f0f</li> <li>\u5b8c\u6574\u7684\u9519\u8bef\u5904\u7406</li> </ul>"},{"location":"security/permissions/#_3","title":"\u5feb\u901f\u5f00\u59cb","text":""},{"location":"security/permissions/#1","title":"1. \u5b9a\u4e49\u89d2\u8272\u548c\u6743\u9650","text":"<pre><code>from enum import Enum\n\nclass Role(str, Enum):\n    ADMIN = \"admin\"\n    EDITOR = \"editor\"\n    VIEWER = \"viewer\"\n    USER = \"user\"\n\nclass Permission(str, Enum):\n    READ = \"read\"\n    CREATE = \"create\"\n    UPDATE = \"update\"\n    DELETE = \"delete\"\n</code></pre>"},{"location":"security/permissions/#2","title":"2. \u521b\u5efa\u5e26\u6743\u9650\u68c0\u67e5\u7684\u7aef\u70b9","text":"<pre><code>from fastapi import Depends\nfrom fastapi_easy.security import require_role, require_permission\n\n# \u8981\u6c42\u81f3\u5c11\u4e00\u4e2a\u89d2\u8272\n@app.post(\"/items\")\nasync def create_item(\n    item: Item,\n    current_user: dict = Depends(require_role(\"editor\", \"admin\")),\n):\n    \"\"\"\u521b\u5efa\u9879\u76ee - \u9700\u8981 editor \u6216 admin \u89d2\u8272\"\"\"\n    return {\"item\": item, \"created_by\": current_user[\"user_id\"]}\n\n# \u8981\u6c42\u6240\u6709\u89d2\u8272\n@app.delete(\"/items/{item_id}\")\nasync def delete_item(\n    item_id: int,\n    current_user: dict = Depends(require_all_roles(\"admin\", \"moderator\")),\n):\n    \"\"\"\u5220\u9664\u9879\u76ee - \u9700\u8981 admin \u548c moderator \u89d2\u8272\"\"\"\n    return {\"message\": \"Item deleted\"}\n\n# \u8981\u6c42\u7279\u5b9a\u6743\u9650\n@app.put(\"/items/{item_id}\")\nasync def update_item(\n    item_id: int,\n    item: Item,\n    current_user: dict = Depends(require_permission(\"update\")),\n):\n    \"\"\"\u66f4\u65b0\u9879\u76ee - \u9700\u8981 update \u6743\u9650\"\"\"\n    return {\"item\": item, \"updated_by\": current_user[\"user_id\"]}\n</code></pre>"},{"location":"security/permissions/#_4","title":"\u6743\u9650\u68c0\u67e5\u88c5\u9970\u5668","text":""},{"location":"security/permissions/#require_roleroles","title":"require_role(*roles)","text":"<p>\u8981\u6c42\u7528\u6237\u81f3\u5c11\u62e5\u6709\u4e00\u4e2a\u6307\u5b9a\u7684\u89d2\u8272\u3002</p> <pre><code>@app.get(\"/admin-panel\")\nasync def admin_panel(\n    current_user: dict = Depends(require_role(\"admin\")),\n):\n    \"\"\"\u7ba1\u7406\u5458\u9762\u677f - \u53ea\u6709 admin \u89d2\u8272\u53ef\u8bbf\u95ee\"\"\"\n    return {\"message\": \"Welcome admin\"}\n</code></pre>"},{"location":"security/permissions/#require_all_rolesroles","title":"require_all_roles(*roles)","text":"<p>\u8981\u6c42\u7528\u6237\u62e5\u6709\u6240\u6709\u6307\u5b9a\u7684\u89d2\u8272\u3002</p> <pre><code>@app.get(\"/super-admin\")\nasync def super_admin(\n    current_user: dict = Depends(require_all_roles(\"admin\", \"moderator\")),\n):\n    \"\"\"\u8d85\u7ea7\u7ba1\u7406\u5458 - \u9700\u8981 admin \u548c moderator \u89d2\u8272\"\"\"\n    return {\"message\": \"Welcome super admin\"}\n</code></pre>"},{"location":"security/permissions/#require_permissionpermissions","title":"require_permission(*permissions)","text":"<p>\u8981\u6c42\u7528\u6237\u81f3\u5c11\u62e5\u6709\u4e00\u4e2a\u6307\u5b9a\u7684\u6743\u9650\u3002</p> <pre><code>@app.post(\"/publish\")\nasync def publish(\n    content: str,\n    current_user: dict = Depends(require_permission(\"publish\", \"admin\")),\n):\n    \"\"\"\u53d1\u5e03\u5185\u5bb9 - \u9700\u8981 publish \u6216 admin \u6743\u9650\"\"\"\n    return {\"content\": content, \"published_by\": current_user[\"user_id\"]}\n</code></pre>"},{"location":"security/permissions/#require_all_permissionspermissions","title":"require_all_permissions(*permissions)","text":"<p>\u8981\u6c42\u7528\u6237\u62e5\u6709\u6240\u6709\u6307\u5b9a\u7684\u6743\u9650\u3002</p> <pre><code>@app.post(\"/sensitive-operation\")\nasync def sensitive_operation(\n    current_user: dict = Depends(require_all_permissions(\"read\", \"write\", \"delete\")),\n):\n    \"\"\"\u654f\u611f\u64cd\u4f5c - \u9700\u8981 read\u3001write \u548c delete \u6743\u9650\"\"\"\n    return {\"message\": \"Operation completed\"}\n</code></pre>"},{"location":"security/permissions/#jwt-token","title":"\u5728 JWT Token \u4e2d\u5305\u542b\u6743\u9650","text":"<pre><code>from fastapi_easy.security import init_jwt_auth\n\njwt_auth = init_jwt_auth()\n\n@app.post(\"/auth/login\")\nasync def login(username: str, password: str):\n    \"\"\"\u767b\u5f55\u5e76\u8fd4\u56de\u5305\u542b\u6743\u9650\u7684 Token\"\"\"\n    # \u9a8c\u8bc1\u7528\u6237\n    user = authenticate_user(username, password)\n\n    # \u83b7\u53d6\u7528\u6237\u89d2\u8272\u548c\u6743\u9650\n    roles = get_user_roles(user.id)\n    permissions = get_user_permissions(user.id)\n\n    # \u521b\u5efa Token\n    access_token = jwt_auth.create_access_token(\n        subject=str(user.id),\n        roles=roles,\n        permissions=permissions,\n    )\n\n    return {\"access_token\": access_token, \"token_type\": \"bearer\"}\n</code></pre>"},{"location":"security/permissions/#_5","title":"\u81ea\u5b9a\u4e49\u6743\u9650\u68c0\u67e5","text":"<p>\u5982\u679c\u9700\u8981\u66f4\u590d\u6742\u7684\u6743\u9650\u68c0\u67e5\u903b\u8f91\uff0c\u53ef\u4ee5\u521b\u5efa\u81ea\u5b9a\u4e49\u88c5\u9970\u5668\uff1a</p> <pre><code>from fastapi import Depends, HTTPException\n\ndef require_resource_owner(resource_id: int):\n    \"\"\"\u8981\u6c42\u7528\u6237\u662f\u8d44\u6e90\u7684\u6240\u6709\u8005\"\"\"\n    async def check_owner(current_user: dict = Depends(get_current_user)):\n        resource = get_resource(resource_id)\n        if resource.owner_id != int(current_user[\"user_id\"]):\n            raise HTTPException(\n                status_code=403,\n                detail=\"You are not the owner of this resource\",\n            )\n        return current_user\n\n    return Depends(check_owner)\n\n@app.delete(\"/items/{item_id}\")\nasync def delete_item(\n    item_id: int,\n    current_user: dict = Depends(require_resource_owner(item_id)),\n):\n    \"\"\"\u5220\u9664\u9879\u76ee - \u53ea\u6709\u6240\u6709\u8005\u53ef\u5220\u9664\"\"\"\n    delete_resource(item_id)\n    return {\"message\": \"Item deleted\"}\n</code></pre>"},{"location":"security/permissions/#_6","title":"\u6743\u9650\u68c0\u67e5\u6d41\u7a0b","text":"<pre><code>\u8bf7\u6c42\u5230\u8fbe\n    \u2193\n\u68c0\u67e5 Authorization Header\n    \u2193\n\u9a8c\u8bc1 JWT Token\n    \u2193\n\u68c0\u67e5 Token \u662f\u5426\u8fc7\u671f\n    \u2193\n\u63d0\u53d6\u7528\u6237\u4fe1\u606f (ID\u3001\u89d2\u8272\u3001\u6743\u9650)\n    \u2193\n\u68c0\u67e5\u6743\u9650\u8981\u6c42\n    \u2193\n\u2713 \u901a\u8fc7 \u2192 \u6267\u884c\u4e1a\u52a1\u903b\u8f91\n\u2717 \u5931\u8d25 \u2192 \u8fd4\u56de 403 Forbidden\n</code></pre>"},{"location":"security/permissions/#_7","title":"\u9519\u8bef\u5904\u7406","text":"<pre><code>from fastapi_easy.security import (\n    AuthorizationError,\n    InsufficientPermissionError,\n)\n\n@app.exception_handler(AuthorizationError)\nasync def authorization_exception_handler(request, exc):\n    return {\n        \"error\": \"Authorization Failed\",\n        \"detail\": exc.message,\n        \"status_code\": 403,\n    }\n\n@app.exception_handler(InsufficientPermissionError)\nasync def insufficient_permission_handler(request, exc):\n    return {\n        \"error\": \"Insufficient Permission\",\n        \"detail\": exc.message,\n        \"status_code\": 403,\n    }\n</code></pre>"},{"location":"security/permissions/#_8","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"security/permissions/#1_1","title":"1. \u6700\u5c0f\u6743\u9650\u539f\u5219","text":"<p>\u53ea\u6388\u4e88\u7528\u6237\u5b8c\u6210\u5de5\u4f5c\u6240\u9700\u7684\u6700\u5c0f\u6743\u9650\u3002</p> <pre><code># \u274c \u4e0d\u597d\uff1a\u7ed9\u6240\u6709\u7528\u6237 admin \u6743\u9650\nuser.roles = [\"admin\"]\n\n# \u2705 \u597d\uff1a\u53ea\u7ed9\u9700\u8981\u7684\u6743\u9650\nuser.roles = [\"editor\"]\nuser.permissions = [\"read\", \"create\", \"update\"]\n</code></pre>"},{"location":"security/permissions/#2_1","title":"2. \u5b9a\u671f\u5ba1\u8ba1\u6743\u9650","text":"<p>\u5b9a\u671f\u68c0\u67e5\u7528\u6237\u6743\u9650\uff0c\u79fb\u9664\u4e0d\u9700\u8981\u7684\u6743\u9650\u3002</p> <pre><code># \u5ba1\u8ba1\u7528\u6237\u6743\u9650\naudit_logs = audit_logger.get_user_activity(user_id=user_id)\nfor log in audit_logs:\n    if log[\"event_type\"] == \"permission_denied\":\n        # \u5206\u6790\u88ab\u62d2\u7edd\u7684\u6743\u9650\n        pass\n</code></pre>"},{"location":"security/permissions/#3","title":"3. \u4f7f\u7528\u89d2\u8272\u800c\u4e0d\u662f\u76f4\u63a5\u6743\u9650","text":"<p>\u4f7f\u7528\u89d2\u8272\u6765\u7ba1\u7406\u6743\u9650\u66f4\u5bb9\u6613\u7ef4\u62a4\u3002</p> <pre><code># \u274c \u4e0d\u597d\uff1a\u76f4\u63a5\u5206\u914d\u6743\u9650\nuser.permissions = [\"read\", \"create\", \"update\", \"delete\", \"publish\"]\n\n# \u2705 \u597d\uff1a\u4f7f\u7528\u89d2\u8272\nuser.roles = [\"editor\"]  # editor \u89d2\u8272\u5305\u542b\u6240\u6709\u8fd9\u4e9b\u6743\u9650\n</code></pre>"},{"location":"security/permissions/#4","title":"4. \u8bb0\u5f55\u6743\u9650\u62d2\u7edd","text":"<p>\u8bb0\u5f55\u6240\u6709\u6743\u9650\u62d2\u7edd\u4ee5\u4fbf\u5ba1\u8ba1\u3002</p> <pre><code>from fastapi_easy.security import AuditEventType\n\n@app.get(\"/sensitive-data\")\nasync def get_sensitive_data(\n    current_user: dict = Depends(require_permission(\"admin\")),\n):\n    # \u6743\u9650\u68c0\u67e5\u5931\u8d25\u65f6\u81ea\u52a8\u8bb0\u5f55\n    # audit_logger.log(\n    #     event_type=AuditEventType.PERMISSION_DENIED,\n    #     user_id=current_user[\"user_id\"],\n    #     resource=\"sensitive-data\",\n    # )\n    return {\"data\": \"sensitive\"}\n</code></pre>"},{"location":"security/permissions/#_9","title":"\u5b8c\u6574\u793a\u4f8b","text":"<p>\u53c2\u8003 <code>examples/06_with_permissions.py</code> \u83b7\u53d6\u5b8c\u6574\u7684\u5de5\u4f5c\u793a\u4f8b\u3002</p>"},{"location":"security/resource-checker/","title":"\u8d44\u6e90\u68c0\u67e5\u5668\u6307\u5357","text":"<p>\u8d44\u6e90\u68c0\u67e5\u5668\u7528\u4e8e\u68c0\u67e5\u7528\u6237\u662f\u5426\u62e5\u6709\u6216\u6709\u6743\u9650\u8bbf\u95ee\u7279\u5b9a\u8d44\u6e90\u3002</p>"},{"location":"security/resource-checker/#_2","title":"\u6982\u8ff0","text":""},{"location":"security/resource-checker/#_3","title":"\u4ec0\u4e48\u662f\u8d44\u6e90\u68c0\u67e5\u5668\uff1f","text":"<p>\u8d44\u6e90\u68c0\u67e5\u5668\u662f\u4e00\u4e2a\u63a5\u53e3\uff0c\u7528\u4e8e\u68c0\u67e5\u7528\u6237\u5bf9\u8d44\u6e90\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u5305\u62ec\u6240\u6709\u6743\u68c0\u67e5\u548c\u6743\u9650\u68c0\u67e5\u3002</p>"},{"location":"security/resource-checker/#_4","title":"\u4e3a\u4ec0\u4e48\u9700\u8981\u8d44\u6e90\u68c0\u67e5\u5668\uff1f","text":"<ul> <li>\u7ec6\u7c92\u5ea6\u63a7\u5236: \u652f\u6301\u8d44\u6e90\u7ea7\u522b\u7684\u6743\u9650\u63a7\u5236</li> <li>\u6240\u6709\u6743\u68c0\u67e5: \u9a8c\u8bc1\u7528\u6237\u662f\u5426\u62e5\u6709\u8d44\u6e90</li> <li>\u7075\u6d3b\u6027: \u652f\u6301\u591a\u79cd\u8d44\u6e90\u7c7b\u578b</li> <li>\u53ef\u6269\u5c55\u6027: \u6613\u4e8e\u6dfb\u52a0\u65b0\u7684\u8d44\u6e90\u7c7b\u578b</li> </ul>"},{"location":"security/resource-checker/#_5","title":"\u4f55\u65f6\u4f7f\u7528\u8d44\u6e90\u68c0\u67e5\u5668\uff1f","text":"<ul> <li>\u7528\u6237\u53ea\u80fd\u8bbf\u95ee\u81ea\u5df1\u7684\u8d44\u6e90</li> <li>\u9700\u8981\u8d44\u6e90\u7ea7\u522b\u7684\u6743\u9650\u63a7\u5236</li> <li>\u9700\u8981\u652f\u6301\u5171\u4eab\u8d44\u6e90</li> <li>\u9700\u8981\u7ec6\u7c92\u5ea6\u7684\u8bbf\u95ee\u63a7\u5236</li> </ul>"},{"location":"security/resource-checker/#_6","title":"\u57fa\u7840\u4f7f\u7528","text":""},{"location":"security/resource-checker/#_7","title":"\u9759\u6001\u8d44\u6e90\u68c0\u67e5\u5668","text":"<p>\u4ece\u9759\u6001\u914d\u7f6e\u68c0\u67e5\u8d44\u6e90\u6743\u9650\uff1a</p> <pre><code>from fastapi_easy.security import StaticResourceChecker\n\n# \u5b9a\u4e49\u8d44\u6e90\u6620\u5c04\nresources_map = {\n    \"post_1\": {\n        \"owner_id\": \"user1\",\n        \"permissions\": {\n            \"user2\": [\"read\"],\n            \"user3\": [\"read\", \"comment\"]\n        }\n    },\n    \"post_2\": {\n        \"owner_id\": \"user2\",\n        \"permissions\": {\n            \"user1\": [\"read\"]\n        }\n    }\n}\n\n# \u521b\u5efa\u68c0\u67e5\u5668\nchecker = StaticResourceChecker(resources_map)\n\n# \u68c0\u67e5\u6240\u6709\u6743\nis_owner = await checker.check_owner(\"user1\", \"post_1\")\n# \u8fd4\u56de: True\n\n# \u68c0\u67e5\u6743\u9650\nhas_permission = await checker.check_permission(\"user2\", \"post_1\", \"read\")\n# \u8fd4\u56de: True\n</code></pre>"},{"location":"security/resource-checker/#_8","title":"\u6570\u636e\u5e93\u8d44\u6e90\u68c0\u67e5\u5668","text":"<p>\u4ece\u6570\u636e\u5e93\u68c0\u67e5\u8d44\u6e90\u6743\u9650\uff08\u5360\u4f4d\u7b26\u5b9e\u73b0\uff09\uff1a</p> <pre><code>from fastapi_easy.security import DatabaseResourceChecker\n\n# \u521b\u5efa\u68c0\u67e5\u5668\nchecker = DatabaseResourceChecker(db_session=session)\n\n# \u68c0\u67e5\u6240\u6709\u6743\nis_owner = await checker.check_owner(\"user1\", \"post_1\")\n\n# \u68c0\u67e5\u6743\u9650\nhas_permission = await checker.check_permission(\"user1\", \"post_1\", \"read\")\n</code></pre>"},{"location":"security/resource-checker/#_9","title":"\u7f13\u5b58\u8d44\u6e90\u68c0\u67e5\u5668","text":"<p>\u6dfb\u52a0\u7f13\u5b58\u5c42\u4ee5\u63d0\u9ad8\u6027\u80fd\uff1a</p> <pre><code>from fastapi_easy.security import (\n    StaticResourceChecker,\n    CachedResourceChecker\n)\n\n# \u521b\u5efa\u57fa\u7840\u68c0\u67e5\u5668\nbase_checker = StaticResourceChecker(resources_map)\n\n# \u6dfb\u52a0\u7f13\u5b58\ncached_checker = CachedResourceChecker(\n    base_checker,\n    cache_ttl=300  # 5 \u5206\u949f\u7f13\u5b58\n)\n\n# \u4f7f\u7528\nis_owner = await cached_checker.check_owner(\"user1\", \"post_1\")\n</code></pre>"},{"location":"security/resource-checker/#_10","title":"\u9ad8\u7ea7\u7528\u6cd5","text":""},{"location":"security/resource-checker/#_11","title":"\u81ea\u5b9a\u4e49\u8d44\u6e90\u68c0\u67e5\u5668","text":"<p>\u5b9e\u73b0\u81ea\u5df1\u7684\u8d44\u6e90\u68c0\u67e5\u5668\uff1a</p> <pre><code>class CustomResourceChecker:\n    \"\"\"\u81ea\u5b9a\u4e49\u8d44\u6e90\u68c0\u67e5\u5668\"\"\"\n\n    async def check_owner(self, user_id: str, resource_id: str) -&gt; bool:\n        \"\"\"\u68c0\u67e5\u7528\u6237\u662f\u5426\u62e5\u6709\u8d44\u6e90\"\"\"\n        # \u81ea\u5b9a\u4e49\u5b9e\u73b0\n        resource = await get_resource(resource_id)\n        return resource.owner_id == user_id\n\n    async def check_permission(\n        self,\n        user_id: str,\n        resource_id: str,\n        permission: str\n    ) -&gt; bool:\n        \"\"\"\u68c0\u67e5\u7528\u6237\u662f\u5426\u6709\u8d44\u6e90\u6743\u9650\"\"\"\n        # \u9996\u5148\u68c0\u67e5\u6240\u6709\u6743\n        if await self.check_owner(user_id, resource_id):\n            return True\n\n        # \u7136\u540e\u68c0\u67e5\u663e\u5f0f\u6743\u9650\n        resource = await get_resource(resource_id)\n        return permission in resource.get_user_permissions(user_id)\n\n# \u4f7f\u7528\nchecker = CustomResourceChecker()\nis_owner = await checker.check_owner(\"user1\", \"post_1\")\n</code></pre>"},{"location":"security/resource-checker/#_12","title":"\u8d44\u6e90\u7f13\u5b58\u7ba1\u7406","text":"<p>\u6e05\u7406\u7f13\u5b58\uff1a</p> <pre><code># \u6e05\u7406\u7279\u5b9a\u7528\u6237\u7684\u7f13\u5b58\ncached_checker.clear_cache(\"user1\")\n\n# \u6e05\u7406\u7279\u5b9a\u8d44\u6e90\u7684\u7f13\u5b58\ncached_checker.clear_cache(\"post_1\")\n\n# \u6e05\u7406\u6240\u6709\u7f13\u5b58\ncached_checker.clear_cache()\n</code></pre>"},{"location":"security/resource-checker/#_13","title":"\u6743\u9650\u68c0\u67e5\u5f15\u64ce\u96c6\u6210","text":"<p>\u4e0e\u6743\u9650\u68c0\u67e5\u5f15\u64ce\u96c6\u6210\uff1a</p> <pre><code>from fastapi_easy.security import PermissionEngine\n\n# \u521b\u5efa\u5f15\u64ce\nengine = PermissionEngine(\n    permission_loader=permission_loader,\n    resource_checker=cached_checker,\n    enable_cache=True\n)\n\n# \u68c0\u67e5\u8d44\u6e90\u6743\u9650\nhas_permission = await engine.check_permission(\n    \"user1\",\n    \"read\",\n    resource_id=\"post_1\"\n)\n</code></pre>"},{"location":"security/resource-checker/#_14","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"security/resource-checker/#q","title":"Q: \u6240\u6709\u6743\u68c0\u67e5\u548c\u6743\u9650\u68c0\u67e5\u7684\u533a\u522b\uff1f","text":"<p>A: \u6240\u6709\u6743\u68c0\u67e5\u9a8c\u8bc1\u7528\u6237\u662f\u5426\u62e5\u6709\u8d44\u6e90\uff0c\u6743\u9650\u68c0\u67e5\u9a8c\u8bc1\u7528\u6237\u662f\u5426\u6709\u7279\u5b9a\u6743\u9650\u3002</p> <pre><code># \u6240\u6709\u6743\u68c0\u67e5\uff1a\u7528\u6237\u662f\u5426\u62e5\u6709\u8d44\u6e90\nis_owner = await checker.check_owner(\"user1\", \"post_1\")\n\n# \u6743\u9650\u68c0\u67e5\uff1a\u7528\u6237\u662f\u5426\u6709\u6743\u9650\nhas_permission = await checker.check_permission(\"user1\", \"post_1\", \"read\")\n</code></pre>"},{"location":"security/resource-checker/#q_1","title":"Q: \u7f13\u5b58\u4f55\u65f6\u5931\u6548\uff1f","text":"<p>A: \u7f13\u5b58\u5728 TTL \u65f6\u95f4\u540e\u81ea\u52a8\u5931\u6548\u3002</p> <pre><code># \u8bbe\u7f6e\u81ea\u5b9a\u4e49 TTL\ncached_checker = CachedResourceChecker(\n    base_checker,\n    cache_ttl=600  # 10 \u5206\u949f\n)\n</code></pre>"},{"location":"security/resource-checker/#q_2","title":"Q: \u5982\u4f55\u5904\u7406\u6743\u9650\u66f4\u65b0\uff1f","text":"<p>A: \u6e05\u7406\u7f13\u5b58\u540e\u91cd\u65b0\u68c0\u67e5\uff1a</p> <pre><code># \u6e05\u7406\u7f13\u5b58\ncached_checker.clear_cache(\"user1\")\n\n# \u91cd\u65b0\u68c0\u67e5\nhas_permission = await cached_checker.check_permission(\"user1\", \"post_1\", \"read\")\n</code></pre>"},{"location":"security/resource-checker/#_15","title":"\u6700\u4f73\u5b9e\u8df5","text":"<ol> <li>\u4f7f\u7528\u7f13\u5b58: \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u59cb\u7ec8\u4f7f\u7528\u7f13\u5b58</li> <li>\u5408\u7406\u7684 TTL: \u6839\u636e\u4e1a\u52a1\u9700\u6c42\u8bbe\u7f6e\u5408\u9002\u7684\u7f13\u5b58\u65f6\u95f4</li> <li>\u9519\u8bef\u5904\u7406: \u5904\u7406\u68c0\u67e5\u5931\u8d25\u7684\u60c5\u51b5</li> <li>\u65e5\u5fd7\u8bb0\u5f55: \u8bb0\u5f55\u6743\u9650\u68c0\u67e5\u64cd\u4f5c</li> <li>\u6027\u80fd\u76d1\u63a7: \u76d1\u63a7\u7f13\u5b58\u547d\u4e2d\u7387</li> </ol>"},{"location":"security/resource-checker/#_16","title":"\u5b8c\u6574\u793a\u4f8b","text":"<pre><code>from fastapi import FastAPI, Depends, HTTPException\nfrom fastapi_easy.security import (\n    StaticResourceChecker,\n    CachedResourceChecker,\n    PermissionEngine,\n    require_permission\n)\n\napp = FastAPI()\n\n# 1. \u5b9a\u4e49\u8d44\u6e90\nresources_map = {\n    \"post_1\": {\n        \"owner_id\": \"user1\",\n        \"permissions\": {\n            \"user2\": [\"read\"],\n            \"user3\": [\"read\", \"comment\"]\n        }\n    }\n}\n\n# 2. \u521b\u5efa\u8d44\u6e90\u68c0\u67e5\u5668\nchecker = StaticResourceChecker(resources_map)\ncached_checker = CachedResourceChecker(checker, cache_ttl=300)\n\n# 3. \u521b\u5efa\u6743\u9650\u5f15\u64ce\nengine = PermissionEngine(\n    permission_loader=permission_loader,\n    resource_checker=cached_checker,\n    enable_cache=True\n)\n\n# 4. \u4f7f\u7528\u8d44\u6e90\u6743\u9650\u68c0\u67e5\n@app.get(\"/posts/{post_id}\")\nasync def get_post(\n    post_id: str,\n    current_user: dict = Depends(require_permission(\"read\"))\n):\n    # \u68c0\u67e5\u8d44\u6e90\u6743\u9650\n    has_permission = await engine.check_permission(\n        current_user[\"user_id\"],\n        \"read\",\n        resource_id=post_id\n    )\n\n    if not has_permission:\n        raise HTTPException(status_code=403, detail=\"No permission\")\n\n    return {\"post_id\": post_id, \"content\": \"...\"}\n\n@app.put(\"/posts/{post_id}\")\nasync def update_post(\n    post_id: str,\n    current_user: dict = Depends(require_permission(\"write\"))\n):\n    # \u68c0\u67e5\u6240\u6709\u6743\n    is_owner = await cached_checker.check_owner(\n        current_user[\"user_id\"],\n        post_id\n    )\n\n    if not is_owner:\n        raise HTTPException(status_code=403, detail=\"Not owner\")\n\n    return {\"post_id\": post_id, \"status\": \"updated\"}\n\n@app.delete(\"/posts/{post_id}\")\nasync def delete_post(\n    post_id: str,\n    current_user: dict = Depends(require_permission(\"delete\"))\n):\n    # \u68c0\u67e5\u6240\u6709\u6743\n    is_owner = await cached_checker.check_owner(\n        current_user[\"user_id\"],\n        post_id\n    )\n\n    if not is_owner:\n        raise HTTPException(status_code=403, detail=\"Not owner\")\n\n    return {\"post_id\": post_id, \"status\": \"deleted\"}\n</code></pre> <p>\u8d44\u6e90\u68c0\u67e5\u5668\u6307\u5357\u5b8c\u6210 \u2705</p>"},{"location":"security/security-best-practices/","title":"\u5b89\u5168\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"security/security-best-practices/#_2","title":"\u6982\u8ff0","text":"<p>\u672c\u6307\u5357\u63d0\u4f9b\u4e86\u4f7f\u7528 FastAPI-Easy \u5b89\u5168\u6a21\u5757\u7684\u6700\u4f73\u5b9e\u8df5\u3002</p>"},{"location":"security/security-best-practices/#1","title":"1. \u5bc6\u94a5\u7ba1\u7406","text":""},{"location":"security/security-best-practices/#_3","title":"\u2705 \u6b63\u786e\u505a\u6cd5","text":"<pre><code># \u4f7f\u7528\u73af\u5883\u53d8\u91cf\nimport os\nfrom fastapi_easy.security import init_jwt_auth\n\nsecret_key = os.getenv(\"JWT_SECRET_KEY\")\nif not secret_key:\n    raise ValueError(\"JWT_SECRET_KEY environment variable is not set\")\n\njwt_auth = init_jwt_auth(secret_key=secret_key)\n</code></pre>"},{"location":"security/security-best-practices/#_4","title":"\u274c \u9519\u8bef\u505a\u6cd5","text":"<pre><code># \u4e0d\u8981\u786c\u7f16\u7801\u5bc6\u94a5\njwt_auth = init_jwt_auth(secret_key=\"my-secret-key-123\")\n\n# \u4e0d\u8981\u5728\u4ee3\u7801\u4e2d\u63d0\u4ea4\u5bc6\u94a5\n# git add .env  # \u274c \u9519\u8bef\n</code></pre>"},{"location":"security/security-best-practices/#_5","title":"\u5bc6\u94a5\u8f6e\u6362","text":"<pre><code># \u5b9a\u671f\u8f6e\u6362\u5bc6\u94a5\n# 1. \u751f\u6210\u65b0\u5bc6\u94a5\nnew_secret_key = secrets.token_urlsafe(32)\n\n# 2. \u521b\u5efa\u65b0\u7684 JWT \u8ba4\u8bc1\u5b9e\u4f8b\nnew_jwt_auth = init_jwt_auth(secret_key=new_secret_key)\n\n# 3. \u5141\u8bb8\u65e7\u5bc6\u94a5\u7684 Token \u7ee7\u7eed\u5de5\u4f5c\uff08\u8fc7\u6e21\u671f\uff09\n# 4. \u66f4\u65b0\u73af\u5883\u53d8\u91cf\n# 5. \u91cd\u542f\u5e94\u7528\n</code></pre>"},{"location":"security/security-best-practices/#2","title":"2. \u5bc6\u7801\u5b89\u5168","text":""},{"location":"security/security-best-practices/#_6","title":"\u2705 \u6b63\u786e\u505a\u6cd5","text":"<pre><code>from fastapi_easy.security import PasswordManager\nimport re\n\npassword_manager = PasswordManager(rounds=12)\n\ndef validate_password_strength(password: str) -&gt; bool:\n    \"\"\"\u9a8c\u8bc1\u5bc6\u7801\u5f3a\u5ea6\"\"\"\n    # \u81f3\u5c11 12 \u4e2a\u5b57\u7b26\n    if len(password) &lt; 12:\n        return False\n\n    # \u5305\u542b\u5927\u5199\u5b57\u6bcd\n    if not re.search(r'[A-Z]', password):\n        return False\n\n    # \u5305\u542b\u5c0f\u5199\u5b57\u6bcd\n    if not re.search(r'[a-z]', password):\n        return False\n\n    # \u5305\u542b\u6570\u5b57\n    if not re.search(r'\\d', password):\n        return False\n\n    # \u5305\u542b\u7279\u6b8a\u5b57\u7b26\n    if not re.search(r'[!@#$%^&amp;*(),.?\":{}|&lt;&gt;]', password):\n        return False\n\n    return True\n\n@app.post(\"/auth/register\")\nasync def register(username: str, password: str):\n    if not validate_password_strength(password):\n        raise HTTPException(\n            status_code=400,\n            detail=\"Password is too weak\",\n        )\n\n    hashed = password_manager.hash_password(password)\n    # \u4fdd\u5b58\u7528\u6237\n</code></pre>"},{"location":"security/security-best-practices/#_7","title":"\u274c \u9519\u8bef\u505a\u6cd5","text":"<pre><code># \u4e0d\u8981\u5b58\u50a8\u660e\u6587\u5bc6\u7801\nuser.password = password  # \u274c \u9519\u8bef\n\n# \u4e0d\u8981\u4f7f\u7528\u7b80\u5355\u7684\u54c8\u5e0c\nimport hashlib\nuser.password = hashlib.md5(password.encode()).hexdigest()  # \u274c \u9519\u8bef\n\n# \u4e0d\u8981\u5141\u8bb8\u5f31\u5bc6\u7801\nif len(password) &gt;= 4:  # \u274c \u592a\u5f31\n    user.password = password_manager.hash_password(password)\n</code></pre>"},{"location":"security/security-best-practices/#3-token","title":"3. Token \u5b89\u5168","text":""},{"location":"security/security-best-practices/#_8","title":"\u2705 \u6b63\u786e\u505a\u6cd5","text":"<pre><code># \u8bbe\u7f6e\u5408\u7406\u7684\u8fc7\u671f\u65f6\u95f4\njwt_auth = init_jwt_auth(\n    access_token_expire_minutes=15,    # \u77ed\u671f\u8bbf\u95ee\u4ee4\u724c\n    refresh_token_expire_days=7,       # \u957f\u671f\u5237\u65b0\u4ee4\u724c\n)\n\n# \u5728\u5ba2\u6237\u7aef\u4f7f\u7528 HttpOnly Cookie\n@app.post(\"/auth/login\")\nasync def login(username: str, password: str):\n    access_token = jwt_auth.create_access_token(subject=str(user.id))\n    refresh_token = jwt_auth.create_refresh_token(subject=str(user.id))\n\n    response = JSONResponse(\n        content={\"message\": \"Login successful\"},\n        status_code=200,\n    )\n\n    # \u4f7f\u7528 HttpOnly Cookie \u5b58\u50a8 Token\n    response.set_cookie(\n        key=\"access_token\",\n        value=access_token,\n        httponly=True,\n        secure=True,  # \u4ec5 HTTPS\n        samesite=\"strict\",\n        max_age=15 * 60,  # 15 \u5206\u949f\n    )\n\n    response.set_cookie(\n        key=\"refresh_token\",\n        value=refresh_token,\n        httponly=True,\n        secure=True,\n        samesite=\"strict\",\n        max_age=7 * 24 * 60 * 60,  # 7 \u5929\n    )\n\n    return response\n</code></pre>"},{"location":"security/security-best-practices/#_9","title":"\u274c \u9519\u8bef\u505a\u6cd5","text":"<pre><code># \u4e0d\u8981\u5728 localStorage \u4e2d\u5b58\u50a8 Token\n# localStorage.setItem('token', token)  # \u274c \u6613\u53d7 XSS \u653b\u51fb\n\n# \u4e0d\u8981\u8bbe\u7f6e\u8fc7\u957f\u7684\u8fc7\u671f\u65f6\u95f4\njwt_auth = init_jwt_auth(\n    access_token_expire_minutes=10080,  # \u274c 7 \u5929\u592a\u957f\n)\n\n# \u4e0d\u8981\u5728 URL \u4e2d\u4f20\u8f93 Token\n# GET /api/data?token=xyz  # \u274c \u9519\u8bef\n</code></pre>"},{"location":"security/security-best-practices/#4","title":"4. \u767b\u5f55\u5b89\u5168","text":""},{"location":"security/security-best-practices/#_10","title":"\u2705 \u6b63\u786e\u505a\u6cd5","text":"<pre><code>from fastapi_easy.security import LoginAttemptTracker\n\ntracker = LoginAttemptTracker(\n    max_attempts=5,\n    lockout_duration_minutes=15,\n)\n\n@app.post(\"/auth/login\")\nasync def login(username: str, password: str):\n    # \u68c0\u67e5\u662f\u5426\u88ab\u9501\u5b9a\n    if tracker.is_locked_out(username):\n        remaining = tracker.get_lockout_remaining_seconds(username)\n        raise HTTPException(\n            status_code=429,\n            detail=f\"Too many attempts. Try again in {remaining} seconds\",\n        )\n\n    # \u9a8c\u8bc1\u7528\u6237\n    user = authenticate_user(username, password)\n\n    if not user:\n        tracker.record_attempt(username, success=False)\n        raise HTTPException(status_code=401, detail=\"Invalid credentials\")\n\n    # \u6210\u529f\n    tracker.record_attempt(username, success=True)\n\n    # \u751f\u6210 Token\n    access_token = jwt_auth.create_access_token(subject=str(user.id))\n    return {\"access_token\": access_token}\n</code></pre>"},{"location":"security/security-best-practices/#_11","title":"\u274c \u9519\u8bef\u505a\u6cd5","text":"<pre><code># \u4e0d\u8981\u900f\u9732\u7528\u6237\u662f\u5426\u5b58\u5728\nif user_exists(username):  # \u274c \u4fe1\u606f\u6cc4\u9732\n    if not verify_password(password, user.password):\n        raise HTTPException(detail=\"Invalid password\")\nelse:\n    raise HTTPException(detail=\"User not found\")\n\n# \u6b63\u786e\u505a\u6cd5\uff1a\nraise HTTPException(detail=\"Invalid username or password\")\n\n# \u4e0d\u8981\u5141\u8bb8\u65e0\u9650\u5236\u7684\u767b\u5f55\u5c1d\u8bd5\n# \u6ca1\u6709\u767b\u5f55\u9650\u5236  # \u274c \u6613\u53d7\u66b4\u529b\u7834\u89e3\n</code></pre>"},{"location":"security/security-best-practices/#5","title":"5. \u6743\u9650\u68c0\u67e5","text":""},{"location":"security/security-best-practices/#_12","title":"\u2705 \u6b63\u786e\u505a\u6cd5","text":"<pre><code>from fastapi_easy.security import require_role, require_permission\n\n# \u4f7f\u7528\u88c5\u9970\u5668\u68c0\u67e5\u6743\u9650\n@app.delete(\"/users/{user_id}\")\nasync def delete_user(\n    user_id: int,\n    current_user: dict = Depends(require_role(\"admin\")),\n):\n    \"\"\"\u5220\u9664\u7528\u6237 - \u4ec5\u7ba1\u7406\u5458\"\"\"\n    # \u6743\u9650\u68c0\u67e5\u5df2\u81ea\u52a8\u8fdb\u884c\n    return {\"message\": \"User deleted\"}\n\n# \u68c0\u67e5\u8d44\u6e90\u6240\u6709\u6743\n@app.put(\"/items/{item_id}\")\nasync def update_item(\n    item_id: int,\n    item: Item,\n    current_user: dict = Depends(get_current_user),\n):\n    \"\"\"\u66f4\u65b0\u9879\u76ee - \u4ec5\u6240\u6709\u8005\"\"\"\n    existing_item = get_item(item_id)\n\n    if existing_item.owner_id != int(current_user[\"user_id\"]):\n        raise HTTPException(status_code=403, detail=\"Not authorized\")\n\n    # \u66f4\u65b0\u9879\u76ee\n    return update_item_in_db(item_id, item)\n</code></pre>"},{"location":"security/security-best-practices/#_13","title":"\u274c \u9519\u8bef\u505a\u6cd5","text":"<pre><code># \u4e0d\u8981\u5728\u4e1a\u52a1\u903b\u8f91\u4e2d\u68c0\u67e5\u6743\u9650\n@app.delete(\"/users/{user_id}\")\nasync def delete_user(user_id: int, current_user: dict):\n    if current_user[\"role\"] != \"admin\":  # \u274c \u592a\u665a\u4e86\n        raise HTTPException(status_code=403)\n    # \u4e1a\u52a1\u903b\u8f91\n\n# \u4e0d\u8981\u4fe1\u4efb\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u6743\u9650\n@app.post(\"/items\")\nasync def create_item(item: Item, user_role: str):  # \u274c \u4e0d\u5b89\u5168\n    if user_role == \"admin\":\n        # \u7ed9\u4e88\u7279\u6b8a\u6743\u9650\n        pass\n</code></pre>"},{"location":"security/security-best-practices/#6","title":"6. \u5ba1\u8ba1\u548c\u76d1\u63a7","text":""},{"location":"security/security-best-practices/#_14","title":"\u2705 \u6b63\u786e\u505a\u6cd5","text":"<pre><code>from fastapi_easy.security import AuditLogger, AuditEventType\n\naudit_logger = AuditLogger()\n\n@app.post(\"/auth/login\")\nasync def login(username: str, password: str):\n    # \u8bb0\u5f55\u6240\u6709\u767b\u5f55\u5c1d\u8bd5\n    try:\n        user = authenticate_user(username, password)\n\n        audit_logger.log(\n            event_type=AuditEventType.LOGIN_SUCCESS,\n            user_id=str(user.id),\n            username=username,\n            status=\"success\",\n        )\n\n        # \u751f\u6210 Token\n        access_token = jwt_auth.create_access_token(subject=str(user.id))\n        return {\"access_token\": access_token}\n\n    except Exception as e:\n        audit_logger.log(\n            event_type=AuditEventType.LOGIN_FAILURE,\n            username=username,\n            status=\"failure\",\n            details={\"error\": str(e)},\n        )\n        raise\n\n# \u5b9a\u671f\u68c0\u67e5\u5ba1\u8ba1\u65e5\u5fd7\ndef check_suspicious_activity():\n    \"\"\"\u68c0\u67e5\u53ef\u7591\u6d3b\u52a8\"\"\"\n    failed_logins = audit_logger.get_failed_logins(\"admin\", limit=10)\n\n    if len(failed_logins) &gt; 5:\n        # \u53d1\u9001\u8b66\u544a\n        send_alert(\"Multiple failed login attempts for admin account\")\n\nimport schedule\nschedule.every(1).hour.do(check_suspicious_activity)\n</code></pre>"},{"location":"security/security-best-practices/#_15","title":"\u274c \u9519\u8bef\u505a\u6cd5","text":"<pre><code># \u4e0d\u8981\u5ffd\u7565\u5ba1\u8ba1\u65e5\u5fd7\n@app.post(\"/auth/login\")\nasync def login(username: str, password: str):\n    # \u6ca1\u6709\u8bb0\u5f55\u767b\u5f55\u5c1d\u8bd5  # \u274c \u65e0\u6cd5\u5ba1\u8ba1\n    user = authenticate_user(username, password)\n    access_token = jwt_auth.create_access_token(subject=str(user.id))\n    return {\"access_token\": access_token}\n\n# \u4e0d\u8981\u53ea\u8bb0\u5f55\u6210\u529f\u7684\u4e8b\u4ef6\n# \u8bb0\u5f55\u5931\u8d25\u7684\u4e8b\u4ef6\u540c\u6837\u91cd\u8981\n</code></pre>"},{"location":"security/security-best-practices/#7-https","title":"7. HTTPS \u548c\u4f20\u8f93\u5b89\u5168","text":""},{"location":"security/security-best-practices/#_16","title":"\u2705 \u6b63\u786e\u505a\u6cd5","text":"<pre><code>from fastapi import FastAPI\nfrom fastapi.middleware.cors import CORSMiddleware\nfrom fastapi.middleware.trustedhost import TrustedHostMiddleware\n\napp = FastAPI()\n\n# \u914d\u7f6e CORS\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"https://yourdomain.com\"],  # \u4ec5\u5141\u8bb8\u7279\u5b9a\u57df\u540d\n    allow_credentials=True,\n    allow_methods=[\"GET\", \"POST\"],\n    allow_headers=[\"Authorization\"],\n)\n\n# \u914d\u7f6e\u53d7\u4fe1\u4efb\u7684\u4e3b\u673a\napp.add_middleware(\n    TrustedHostMiddleware,\n    allowed_hosts=[\"yourdomain.com\", \"www.yourdomain.com\"],\n)\n\n# \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528 HTTPS\n# \u4f7f\u7528 SSL \u8bc1\u4e66\uff08Let's Encrypt\uff09\n# \u914d\u7f6e HSTS \u5934\n</code></pre>"},{"location":"security/security-best-practices/#_17","title":"\u274c \u9519\u8bef\u505a\u6cd5","text":"<pre><code># \u4e0d\u8981\u5728\u5f00\u53d1\u73af\u5883\u4e2d\u4f7f\u7528 HTTP\n# uvicorn app:app --host 0.0.0.0  # \u274c \u4e0d\u5b89\u5168\n\n# \u4e0d\u8981\u5141\u8bb8\u6240\u6709 CORS \u6e90\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"*\"],  # \u274c \u4e0d\u5b89\u5168\n)\n\n# \u4e0d\u8981\u7981\u7528 HTTPS\n# \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u5fc5\u987b\u4f7f\u7528 HTTPS\n</code></pre>"},{"location":"security/security-best-practices/#8","title":"8. \u4f9d\u8d56\u548c\u66f4\u65b0","text":""},{"location":"security/security-best-practices/#_18","title":"\u2705 \u6b63\u786e\u505a\u6cd5","text":"<pre><code># \u5b9a\u671f\u66f4\u65b0\u4f9d\u8d56\n# pip install --upgrade PyJWT bcrypt\n\n# \u4f7f\u7528 requirements.txt \u56fa\u5b9a\u7248\u672c\n# PyJWT==2.8.0\n# bcrypt==4.0.0\n\n# \u5b9a\u671f\u68c0\u67e5\u5b89\u5168\u6f0f\u6d1e\n# pip install safety\n# safety check\n</code></pre>"},{"location":"security/security-best-practices/#_19","title":"\u274c \u9519\u8bef\u505a\u6cd5","text":"<pre><code># \u4e0d\u8981\u4f7f\u7528\u8fc7\u65f6\u7684\u5e93\n# PyJWT==1.0.0  # \u274c \u592a\u65e7\n\n# \u4e0d\u8981\u5ffd\u89c6\u5b89\u5168\u66f4\u65b0\n# \u4e0d\u66f4\u65b0\u4f9d\u8d56  # \u274c \u53ef\u80fd\u6709\u6f0f\u6d1e\n</code></pre>"},{"location":"security/security-best-practices/#9","title":"9. \u9519\u8bef\u5904\u7406","text":""},{"location":"security/security-best-practices/#_20","title":"\u2705 \u6b63\u786e\u505a\u6cd5","text":"<pre><code># \u4e0d\u8981\u900f\u9732\u5185\u90e8\u9519\u8bef\u4fe1\u606f\n@app.get(\"/data\")\nasync def get_data(current_user: dict = Depends(get_current_user)):\n    try:\n        # \u4e1a\u52a1\u903b\u8f91\n        pass\n    except Exception as e:\n        # \u8bb0\u5f55\u8be6\u7ec6\u9519\u8bef\n        logger.error(f\"Error: {e}\", exc_info=True)\n\n        # \u8fd4\u56de\u901a\u7528\u9519\u8bef\u4fe1\u606f\n        raise HTTPException(\n            status_code=500,\n            detail=\"Internal server error\",\n        )\n</code></pre>"},{"location":"security/security-best-practices/#_21","title":"\u274c \u9519\u8bef\u505a\u6cd5","text":"<pre><code># \u4e0d\u8981\u5728\u9519\u8bef\u4fe1\u606f\u4e2d\u900f\u9732\u654f\u611f\u4fe1\u606f\nraise HTTPException(\n    status_code=500,\n    detail=f\"Database error: {str(e)}\",  # \u274c \u6cc4\u9732\u6570\u636e\u5e93\u4fe1\u606f\n)\n\n# \u4e0d\u8981\u5ffd\u89c6\u9519\u8bef\ntry:\n    # \u4e1a\u52a1\u903b\u8f91\n    pass\nexcept:\n    pass  # \u274c \u5ffd\u89c6\u9519\u8bef\n</code></pre>"},{"location":"security/security-best-practices/#10","title":"10. \u90e8\u7f72\u68c0\u67e5\u6e05\u5355","text":"<ul> <li>[ ] \u4f7f\u7528\u73af\u5883\u53d8\u91cf\u914d\u7f6e\u6240\u6709\u5bc6\u94a5</li> <li>[ ] \u542f\u7528 HTTPS</li> <li>[ ] \u914d\u7f6e CORS</li> <li>[ ] \u8bbe\u7f6e\u5408\u7406\u7684 Token \u8fc7\u671f\u65f6\u95f4</li> <li>[ ] \u542f\u7528\u767b\u5f55\u9650\u5236</li> <li>[ ] \u542f\u7528\u5ba1\u8ba1\u65e5\u5fd7</li> <li>[ ] \u5b9a\u671f\u5907\u4efd\u5ba1\u8ba1\u65e5\u5fd7</li> <li>[ ] \u76d1\u63a7\u53ef\u7591\u6d3b\u52a8</li> <li>[ ] \u5b9a\u671f\u66f4\u65b0\u4f9d\u8d56</li> <li>[ ] \u8fdb\u884c\u5b89\u5168\u5ba1\u8ba1</li> <li>[ ] \u914d\u7f6e\u65e5\u5fd7\u548c\u76d1\u63a7</li> <li>[ ] \u8bbe\u7f6e\u544a\u8b66\u89c4\u5219</li> </ul>"},{"location":"security/security-best-practices/#_22","title":"\u53c2\u8003\u8d44\u6e90","text":"<ul> <li>OWASP Top 10</li> <li>JWT Best Practices</li> <li>FastAPI Security</li> <li>bcrypt Documentation</li> </ul>"},{"location":"security/security-config/","title":"\u5b89\u5168\u914d\u7f6e\u6307\u5357","text":"<p>\u5b89\u5168\u914d\u7f6e\u7528\u4e8e\u7edf\u4e00\u7ba1\u7406\u6240\u6709\u5b89\u5168\u76f8\u5173\u7684\u7ec4\u4ef6\u3002</p>"},{"location":"security/security-config/#_2","title":"\u6982\u8ff0","text":""},{"location":"security/security-config/#_3","title":"\u4ec0\u4e48\u662f\u5b89\u5168\u914d\u7f6e\uff1f","text":"<p>\u5b89\u5168\u914d\u7f6e\u662f\u4e00\u4e2a\u4e2d\u592e\u914d\u7f6e\u7c7b\uff0c\u7528\u4e8e\u7ba1\u7406 JWT \u8ba4\u8bc1\u3001\u6743\u9650\u52a0\u8f7d\u3001\u8d44\u6e90\u68c0\u67e5\u548c\u5ba1\u8ba1\u65e5\u5fd7\u7b49\u6240\u6709\u5b89\u5168\u7ec4\u4ef6\u3002</p>"},{"location":"security/security-config/#_4","title":"\u4e3a\u4ec0\u4e48\u9700\u8981\u5b89\u5168\u914d\u7f6e\uff1f","text":"<ul> <li>\u96c6\u4e2d\u7ba1\u7406: \u6240\u6709\u5b89\u5168\u7ec4\u4ef6\u5728\u4e00\u4e2a\u5730\u65b9</li> <li>\u6613\u4e8e\u4f7f\u7528: \u7b80\u5316\u5b89\u5168\u7ec4\u4ef6\u7684\u521d\u59cb\u5316</li> <li>\u53ef\u7ef4\u62a4\u6027: \u4fbf\u4e8e\u4fee\u6539\u548c\u6269\u5c55</li> <li>\u4e00\u81f4\u6027: \u786e\u4fdd\u5b89\u5168\u914d\u7f6e\u7684\u4e00\u81f4\u6027</li> </ul>"},{"location":"security/security-config/#_5","title":"\u4f55\u65f6\u4f7f\u7528\u5b89\u5168\u914d\u7f6e\uff1f","text":"<ul> <li>\u9700\u8981\u7ba1\u7406\u591a\u4e2a\u5b89\u5168\u7ec4\u4ef6</li> <li>\u9700\u8981\u652f\u6301\u591a\u73af\u5883\u914d\u7f6e</li> <li>\u9700\u8981\u52a8\u6001\u914d\u7f6e\u5b89\u5168\u7ec4\u4ef6</li> <li>\u9700\u8981\u96c6\u4e2d\u7ba1\u7406\u5b89\u5168\u7b56\u7565</li> </ul>"},{"location":"security/security-config/#_6","title":"\u57fa\u7840\u4f7f\u7528","text":""},{"location":"security/security-config/#_7","title":"\u521b\u5efa\u914d\u7f6e","text":"<pre><code>from fastapi_easy.security import (\n    SecurityConfig,\n    JWTAuth,\n    StaticPermissionLoader,\n    StaticResourceChecker,\n    AuditLogger\n)\n\n# \u521b\u5efa JWT \u8ba4\u8bc1\njwt_auth = JWTAuth(secret_key=\"your-secret-key\")\n\n# \u521b\u5efa\u6743\u9650\u52a0\u8f7d\u5668\npermissions_map = {\n    \"user1\": [\"read\", \"write\"],\n    \"user2\": [\"read\"]\n}\npermission_loader = StaticPermissionLoader(permissions_map)\n\n# \u521b\u5efa\u8d44\u6e90\u68c0\u67e5\u5668\nresources_map = {\n    \"post_1\": {\n        \"owner_id\": \"user1\",\n        \"permissions\": {}\n    }\n}\nresource_checker = StaticResourceChecker(resources_map)\n\n# \u521b\u5efa\u5ba1\u8ba1\u65e5\u5fd7\naudit_logger = AuditLogger()\n\n# \u521b\u5efa\u5b89\u5168\u914d\u7f6e\nconfig = SecurityConfig(\n    jwt_auth=jwt_auth,\n    permission_loader=permission_loader,\n    resource_checker=resource_checker,\n    audit_logger=audit_logger\n)\n</code></pre>"},{"location":"security/security-config/#_8","title":"\u4ece\u73af\u5883\u53d8\u91cf\u521b\u5efa\u914d\u7f6e","text":"<pre><code># \u4ece\u73af\u5883\u53d8\u91cf\u521b\u5efa\u914d\u7f6e\nconfig = SecurityConfig.from_env()\n\n# \u73af\u5883\u53d8\u91cf\uff1a\n# JWT_SECRET_KEY=your-secret-key\n</code></pre>"},{"location":"security/security-config/#_9","title":"\u8bbf\u95ee\u7ec4\u4ef6","text":"<pre><code># \u83b7\u53d6 JWT \u8ba4\u8bc1\njwt_auth = config.get_jwt_auth()\n\n# \u83b7\u53d6\u6743\u9650\u52a0\u8f7d\u5668\npermission_loader = config.get_permission_loader()\n\n# \u83b7\u53d6\u8d44\u6e90\u68c0\u67e5\u5668\nresource_checker = config.get_resource_checker()\n\n# \u83b7\u53d6\u5ba1\u8ba1\u65e5\u5fd7\naudit_logger = config.get_audit_logger()\n</code></pre>"},{"location":"security/security-config/#_10","title":"\u9ad8\u7ea7\u7528\u6cd5","text":""},{"location":"security/security-config/#_11","title":"\u591a\u73af\u5883\u914d\u7f6e","text":"<pre><code>import os\n\ndef get_security_config():\n    \"\"\"\u6839\u636e\u73af\u5883\u521b\u5efa\u5b89\u5168\u914d\u7f6e\"\"\"\n    env = os.getenv(\"ENV\", \"development\")\n\n    if env == \"production\":\n        # \u751f\u4ea7\u73af\u5883\u914d\u7f6e\n        jwt_auth = JWTAuth(secret_key=os.getenv(\"JWT_SECRET_KEY\"))\n        permission_loader = DatabasePermissionLoader(db_session=db_session)\n        resource_checker = DatabaseResourceChecker(db_session=db_session)\n    else:\n        # \u5f00\u53d1\u73af\u5883\u914d\u7f6e\n        jwt_auth = JWTAuth(secret_key=\"dev-secret-key\")\n        permission_loader = StaticPermissionLoader(DEV_PERMISSIONS)\n        resource_checker = StaticResourceChecker(DEV_RESOURCES)\n\n    return SecurityConfig(\n        jwt_auth=jwt_auth,\n        permission_loader=permission_loader,\n        resource_checker=resource_checker\n    )\n\nconfig = get_security_config()\n</code></pre>"},{"location":"security/security-config/#_12","title":"\u914d\u7f6e\u9a8c\u8bc1","text":"<pre><code># \u9a8c\u8bc1\u914d\u7f6e\nconfig.validate()\n\n# \u5982\u679c\u914d\u7f6e\u65e0\u6548\uff0c\u4f1a\u629b\u51fa\u5f02\u5e38\n</code></pre>"},{"location":"security/security-config/#_13","title":"\u914d\u7f6e\u6269\u5c55","text":"<pre><code># \u521b\u5efa\u57fa\u7840\u914d\u7f6e\nconfig = SecurityConfig(jwt_auth=jwt_auth)\n\n# \u6dfb\u52a0\u6743\u9650\u52a0\u8f7d\u5668\nconfig.permission_loader = permission_loader\n\n# \u6dfb\u52a0\u8d44\u6e90\u68c0\u67e5\u5668\nconfig.resource_checker = resource_checker\n</code></pre>"},{"location":"security/security-config/#_14","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"security/security-config/#q","title":"Q: \u5982\u4f55\u5904\u7406\u914d\u7f6e\u9519\u8bef\uff1f","text":"<p>A: \u4f7f\u7528 try-except \u6355\u83b7\u5f02\u5e38\uff1a</p> <pre><code>try:\n    config = SecurityConfig(jwt_auth=None)\nexcept ValueError as e:\n    logger.error(f\"Configuration error: {e}\")\n</code></pre>"},{"location":"security/security-config/#q_1","title":"Q: \u5982\u4f55\u4ece\u73af\u5883\u53d8\u91cf\u8bfb\u53d6\u914d\u7f6e\uff1f","text":"<p>A: \u4f7f\u7528 <code>from_env()</code> \u65b9\u6cd5\uff1a</p> <pre><code># \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\nos.environ[\"JWT_SECRET_KEY\"] = \"your-secret-key\"\n\n# \u521b\u5efa\u914d\u7f6e\nconfig = SecurityConfig.from_env()\n</code></pre>"},{"location":"security/security-config/#q_2","title":"Q: \u5982\u4f55\u652f\u6301\u591a\u4e2a\u5b89\u5168\u914d\u7f6e\uff1f","text":"<p>A: \u521b\u5efa\u591a\u4e2a\u914d\u7f6e\u5b9e\u4f8b\uff1a</p> <pre><code># \u914d\u7f6e 1\nconfig1 = SecurityConfig(jwt_auth=jwt_auth1)\n\n# \u914d\u7f6e 2\nconfig2 = SecurityConfig(jwt_auth=jwt_auth2)\n</code></pre>"},{"location":"security/security-config/#_15","title":"\u6700\u4f73\u5b9e\u8df5","text":"<ol> <li>\u96c6\u4e2d\u7ba1\u7406: \u5728\u4e00\u4e2a\u5730\u65b9\u521b\u5efa\u548c\u7ba1\u7406\u5b89\u5168\u914d\u7f6e</li> <li>\u73af\u5883\u53d8\u91cf: \u4f7f\u7528\u73af\u5883\u53d8\u91cf\u5b58\u50a8\u654f\u611f\u4fe1\u606f</li> <li>\u9a8c\u8bc1\u914d\u7f6e: \u5728\u5e94\u7528\u542f\u52a8\u65f6\u9a8c\u8bc1\u914d\u7f6e</li> <li>\u9519\u8bef\u5904\u7406: \u5904\u7406\u914d\u7f6e\u9519\u8bef</li> <li>\u65e5\u5fd7\u8bb0\u5f55: \u8bb0\u5f55\u914d\u7f6e\u64cd\u4f5c</li> </ol>"},{"location":"security/security-config/#_16","title":"\u5b8c\u6574\u793a\u4f8b","text":"<pre><code>from fastapi import FastAPI\nfrom fastapi_easy.security import (\n    SecurityConfig,\n    JWTAuth,\n    StaticPermissionLoader,\n    StaticResourceChecker,\n    PermissionEngine,\n    require_permission\n)\n\napp = FastAPI()\n\n# 1. \u521b\u5efa\u5b89\u5168\u914d\u7f6e\npermissions_map = {\n    \"user1\": [\"read\", \"write\"],\n    \"user2\": [\"read\"],\n    \"admin\": [\"read\", \"write\", \"delete\", \"admin\"]\n}\npermission_loader = StaticPermissionLoader(permissions_map)\n\nresources_map = {\n    \"post_1\": {\n        \"owner_id\": \"user1\",\n        \"permissions\": {}\n    }\n}\nresource_checker = StaticResourceChecker(resources_map)\n\njwt_auth = JWTAuth(secret_key=\"your-secret-key\")\n\nconfig = SecurityConfig(\n    jwt_auth=jwt_auth,\n    permission_loader=permission_loader,\n    resource_checker=resource_checker\n)\n\n# 2. \u9a8c\u8bc1\u914d\u7f6e\nconfig.validate()\n\n# 3. \u521b\u5efa\u6743\u9650\u5f15\u64ce\nengine = PermissionEngine(\n    permission_loader=config.get_permission_loader(),\n    resource_checker=config.get_resource_checker(),\n    enable_cache=True\n)\n\n# 4. \u4f7f\u7528\u914d\u7f6e\n@app.get(\"/data\")\nasync def get_data(current_user: dict = Depends(require_permission(\"read\"))):\n    # \u4f7f\u7528\u6743\u9650\u5f15\u64ce\u68c0\u67e5\u6743\u9650\n    has_permission = await engine.check_permission(\n        current_user[\"user_id\"],\n        \"read\"\n    )\n\n    if not has_permission:\n        raise HTTPException(status_code=403, detail=\"No permission\")\n\n    # \u8bb0\u5f55\u5ba1\u8ba1\u65e5\u5fd7\n    config.get_audit_logger().log(\n        event_type=\"data_access\",\n        user_id=current_user[\"user_id\"],\n        action=\"read\",\n        status=\"success\"\n    )\n\n    return {\"data\": \"sensitive data\"}\n\n@app.on_event(\"startup\")\nasync def startup():\n    \"\"\"\u5e94\u7528\u542f\u52a8\u65f6\u9a8c\u8bc1\u914d\u7f6e\"\"\"\n    try:\n        config.validate()\n        print(\"Security configuration is valid\")\n    except Exception as e:\n        print(f\"Configuration error: {e}\")\n        raise\n</code></pre> <p>\u5b89\u5168\u914d\u7f6e\u6307\u5357\u5b8c\u6210 \u2705</p>"},{"location":"tutorial/01-quick-start/","title":"\u00e5\u00bf\u00ab\u00e9\u20ac\u0178\u00e5\u00bc\u20ac\u00e5\u00a7?","text":"<p>\u00e9\u00a2\u201e\u00e8\u00ae\u00a1\u00e6\u2014\u00b6\u00e9\u2014\u00b4: 5 \u00e5\u02c6\u2020\u00e9\u2019\u0178  </p> <p>\u00e9\u0161\u00be\u00e5\u00ba\u00a6: \u00e2\u00ad?\u00e6\u00e7\u00ae\u20ac  </p> <p>\u00e7\u203a\u00ae\u00e6\u00a0\u2021: \u00e8\u00bf\u00e8\u00a1\u0152\u00e7\u00ac\u00ac\u00e4\u00b8\u20ac\u00e4\u00b8\u00aa\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u0161\u201e CRUD API</p>"},{"location":"tutorial/01-quick-start/#1-ae","title":"1. \u00e5\u00ae\u2030\u00e8\u00a3\u2026","text":"<pre><code>pip install fastapi-easy fastapi uvicorn sqlalchemy aiosqlite\n</code></pre>"},{"location":"tutorial/01-quick-start/#2-cacsa34a-sqlite","title":"2. \u00e6\u0153\u20ac\u00e7\u00ae\u20ac\u00e5\u2022\u00e7\u0161\u201e\u00e4\u00be\u2039\u00e5\u00ad (SQLite)","text":"<p>\u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e6\u2013\u2021\u00e4\u00bb\u00b6 <code>main.py</code>:</p> <pre><code>from fastapi import FastAPI\n\nfrom fastapi_easy import CRUDRouter\n\nfrom fastapi_easy.backends import SQLAlchemyAdapter\n\nfrom sqlalchemy.ext.asyncio import create_async_engine, AsyncSession\n\nfrom sqlalchemy.orm import sessionmaker, declarative_base\n\nfrom sqlalchemy import Column, Integer, String, Float\n\nfrom pydantic import BaseModel\n\n\n\n# 1. \u00e5\u00ae\u0161\u00e4\u00b9\u2030 ORM \u00e6\u00a8\u00a1\u00e5\u2039\n\nBase = declarative_base()\n\n\n\nclass ItemDB(Base):\n\n    __tablename__ = \"items\"\n\n    id = Column(Integer, primary_key=True)\n\n    name = Column(String)\n\n    price = Column(Float)\n\n\n\n# 2. \u00e5\u00ae\u0161\u00e4\u00b9\u2030 Pydantic Schema\n\nclass Item(BaseModel):\n\n    id: int\n\n    name: str\n\n    price: float\n\n\n\n    class Config:\n\n        from_attributes = True\n\n\n\n# 3. \u00e9\u2026\u00e7\u00bd\u00ae\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba?(SQLite)\n\nengine = create_async_engine(\"sqlite+aiosqlite:///./test.db\")\n\nAsyncSessionLocal = sessionmaker(engine, class_=AsyncSession, expire_on_commit=False)\n\n\n\nasync def get_db():\n\n    async with AsyncSessionLocal() as session:\n\n        yield session\n\n\n\n# 4. \u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e5\u00ba\u201d\u00e7\u201d\u00a8\n\napp = FastAPI(title=\"FastAPI-Easy \u00e5\u00bf\u00ab\u00e9\u20ac\u0178\u00e5\u00bc\u20ac\u00e5\u00a7?)\n\n\n\n# 5. \u00e5\u02c6\u00e5\u00a7\u2039\u00e5\u0152\u2013\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e8\u00a1?(\u00e4\u00bb\u2026\u00e7\u201d\u00a8\u00e4\u00ba\u00e6\u00bc\u201d\u00e7\u00a4\u00ba\u00ef\u00bc\u0152\u00e7\u201d\u0178\u00e4\u00ba\u00a7\u00e7\u00af\u00e5\u00a2\u0192\u00e8\u00af\u00b7\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u00b7\u00a5\u00e5\u2026?\n\n@app.on_event(\"startup\")\n\nasync def startup():\n\n    async with engine.begin() as conn:\n\n        await conn.run_sync(Base.metadata.create_all)\n\n\n\n# 6. \u00e4\u00b8\u20ac\u00e8\u00a1\u0152\u00e4\u00bb\u00a3\u00e7\u00a0\u00e7\u201d\u0178\u00e6\u02c6\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u0161\u201e CRUD API!\n\nrouter = CRUDRouter(\n\n    schema=Item,\n\n    adapter=SQLAlchemyAdapter(ItemDB, get_db)\n\n)\n\napp.include_router(router)\n</code></pre>"},{"location":"tutorial/01-quick-start/#3-ee","title":"3. \u00e8\u00bf\u00e8\u00a1\u0152","text":"<pre><code>uvicorn main:app --reload\n</code></pre> <p>\u00e8\u00be\u201c\u00e5\u2021\u00ba:</p> <pre><code>INFO:     Uvicorn running on http://127.0.0.1:8000\n\nINFO:     Application startup complete\n</code></pre>"},{"location":"tutorial/01-quick-start/#4-e-api","title":"4. \u00e6\u00b5\u2039\u00e8\u00af\u2022 API","text":"<p>\u00e8\u00ae\u00bf\u00e9\u2014\u00ae http://localhost:8000/docs</p> <p>\u00e4\u00bd\u00a0\u00e4\u00bc\u0161\u00e7\u0153\u2039\u00e5\u02c6\u00b0\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e7\u201d\u0178\u00e6\u02c6\u00e7\u0161\u201e API \u00e7\u00ab\u00af\u00e7\u201a\u00b9\u00ef\u00bc?</p> <ul> <li><code>GET /item</code> - \u00e8\u00b7\u00e5\u2013\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e9\u00a1\u00b9\u00e7\u203a?</li> <li> <p><code>GET /item/{id}</code> - \u00e8\u00b7\u00e5\u2013\u00e5\u2022\u00e4\u00b8\u00aa\u00e9\u00a1\u00b9\u00e7\u203a\u00ae</p> </li> <li> <p><code>POST /item</code> - \u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e9\u00a1\u00b9\u00e7\u203a\u00ae</p> </li> <li> <p><code>PUT /item/{id}</code> - \u00e6\u203a\u00b4\u00e6\u2013\u00b0\u00e9\u00a1\u00b9\u00e7\u203a\u00ae</p> </li> <li> <p><code>DELETE /item/{id}</code> - \u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e9\u00a1\u00b9\u00e7\u203a\u00ae</p> </li> <li> <p><code>DELETE /item</code> - \u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e9\u00a1\u00b9\u00e7\u203a?(\u00e9\u0153\u20ac\u00e9\u2026\u00e7\u00bd\u00ae\u00e5\u00bc\u20ac\u00e5?</p> </li> </ul>"},{"location":"tutorial/01-quick-start/#5-a-a","title":"5. \u00e4\u00b8\u2039\u00e4\u00b8\u20ac\u00e6\u00ad?","text":"<p>\u00e7\u00b0\u00e5\u0153\u00a8\u00e4\u00bd\u00a0\u00e5\u00b7\u00b2\u00e7\u00bb\u00e6\u0152\u00e6\u00a1\u00e4\u00ba\u2020\u00e5\u0178\u00ba\u00e7\u00a1\u20ac\u00ef\u00bc\u0152\u00e5\u00af\u00e4\u00bb\u00a5\u00e7\u00bb\u00a7\u00e7\u00bb\u00ad\u00e5\u00ad\u00a6\u00e4\u00b9?</p>"},{"location":"tutorial/01-quick-start/#aco-eeoao","title":"\u00e5\u02c6\u00e7\u00ba\u00a7 (\u00e6\u00a8\u00e8\u00e9\u00a1\u00ba\u00e5\u00ba)","text":"<ol> <li>\u00e4\u00b8\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e9\u203a\u2020\u00e6\u02c6 - \u00e6\u00b7\u00b1\u00e5\u2026\u00a5\u00e4\u00ba\u2020\u00e8\u00a7\u00a3\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e9\u2026\u00e7\u00bd?</li> <li>\u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e6\u0152\u2021\u00e5\u2014 - \u00e5\u00ad\u00a6\u00e4\u00b9\u00a0\u00e6\u0153\u00e7\u00b4\u00a2\u00e3\u20ac\u00e8\u00bf\u2021\u00e6\u00bb\u00a4\u00e3\u20ac\u00e6\u2019\u00e5\u00ba?</li> </ol>"},{"location":"tutorial/01-quick-start/#a-co","title":"\u00e4\u00b8\u00ad\u00e7\u00ba\u00a7","text":"<ol> <li> <p>\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e9\u00a1\u00b9\u00e7\u203a\u00ae - \u00e6\u0178\u00a5\u00e7\u0153\u2039\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u0161\u201e\u00e7\u201d\u00b5\u00e5\u2022?API</p> </li> <li> <p>\u00e5\u0178\u00ba\u00e7\u00a1\u20ac\u00e6\u0192\u00e9\u2122 - \u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e6\u0192\u00e9\u2122\u00e6\u00a7\u00e5\u02c6\u00b6</p> </li> </ol>"},{"location":"tutorial/01-quick-start/#e-co","title":"\u00e9\u00ab\u02dc\u00e7\u00ba\u00a7","text":"<ol> <li> <p>\u00e6\u00b6\u00e6\u201e\u00e8\u00ae\u00be\u00e8\u00ae\u00a1 - \u00e6\u00b7\u00b1\u00e5\u2026\u00a5\u00e7\u2020\u00e8\u00a7\u00a3\u00e5\u2020\u2026\u00e9\u0192\u00a8\u00e6\u00b6\u00e6\u201e</p> </li> <li> <p>\u00e9\u20ac\u201a\u00e9\u2026\u00e5\u2122\u00a8\u00e6\u00a6\u201a\u00e8\u00a7\u02c6 - \u00e4\u00ba\u2020\u00e8\u00a7\u00a3\u00e6\u201d\u00af\u00e6\u0152\u00e7\u0161\u201e\u00e5\u2026\u00b6\u00e4\u00bb\u2013\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c</p> </li> </ol>"},{"location":"tutorial/02-database-integration/","title":"\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e9\u203a\u2020\u00e6\u02c6\u00e5\u00bf\u00ab\u00e9\u20ac\u0178\u00e6\u0152\u2021\u00e5?","text":"<p>\u00e9\u00a2\u201e\u00e8\u00ae\u00a1\u00e6\u2014\u00b6\u00e9\u2014\u00b4: 10 \u00e5\u02c6\u2020\u00e9\u2019\u0178  </p> <p>\u00e9\u0161\u00be\u00e5\u00ba\u00a6: \u00e2\u00ad\u00e2\u00ad \u00e7\u00ae\u20ac\u00e5? </p> <p>\u00e7\u203a\u00ae\u00e6\u00a0\u2021: \u00e5\u00bf\u00ab\u00e9\u20ac\u0178\u00e9\u203a\u2020\u00e6\u02c6\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00ef\u00bc\u0152\u00e5\u00ae\u00e7\u00b0\u00e6\u2022\u00b0\u00e6\u00ae\u00e6\u0152\u00e4\u00b9\u2026\u00e5\u0152\u2013</p>"},{"location":"tutorial/02-database-integration/#e","title":"\u00e6\u00a6\u201a\u00e8\u00bf\u00b0","text":"<p>\u00e6\u0153\u00ac\u00e6\u0152\u2021\u00e5\u2014\u00e5\u00b1\u2022\u00e7\u00a4\u00ba\u00e5\u00a6\u201a\u00e4\u00bd\u2022\u00e5\u00b0\u2020 fastapi-easy \u00e4\u00b8\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e9\u203a\u2020\u00e6\u02c6\u00ef\u00bc\u0152\u00e5\u00ae\u00e7\u00b0\u00e7\u0153\u0178\u00e5\u00ae\u00e7\u0161\u201e\u00e6\u2022\u00b0\u00e6\u00ae\u00e6\u0152\u00e4\u00b9\u2026\u00e5\u0152\u2013\u00e3\u20ac?</p> <p>\u00e6\u201d\u00af\u00e6\u0152\u00e7\u0161\u201e\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c:</p> <ul> <li> <p>SQLite (\u00e6\u00a8\u00e8\u00e7\u201d\u00a8\u00e4\u00ba\u00e5\u00bc\u20ac\u00e5?</p> </li> <li> <p>PostgreSQL (\u00e6\u00a8\u00e8\u00e7\u201d\u00a8\u00e4\u00ba\u00e7\u201d\u0178\u00e4\u00ba\u00a7)</p> </li> <li> <p>MySQL</p> </li> <li> <p>MongoDB</p> </li> </ul> <p>\u00e6\u0153\u00ac\u00e6\u0152\u2021\u00e5\u2014\u00e4\u00bb\u00a5 SQLite + SQLAlchemy \u00e4\u00b8\u00ba\u00e4\u00be\u2039 (\u00e6\u0153\u20ac\u00e7\u00ae\u20ac\u00e5\u2022\u00e7\u0161\u201e\u00e6\u2013\u00b9\u00e5\u00bc)\u00e3\u20ac?</p>"},{"location":"tutorial/02-database-integration/#1-aea34e","title":"1. \u00e5\u00ae\u2030\u00e8\u00a3\u2026\u00e4\u00be\u00e8\u00b5\u2013","text":"<pre><code>pip install fastapi-easy fastapi uvicorn sqlalchemy\n</code></pre>"},{"location":"tutorial/02-database-integration/#2-a-coa34ac","title":"2. \u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u00a4\u00ba\u00e4\u00be\u2039\u00e4\u00bb\u00a3\u00e7","text":"<p>\u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e6\u2013\u2021\u00e4\u00bb\u00b6 <code>main_db.py</code>:</p> <pre><code>from fastapi import FastAPI\n\nfrom sqlalchemy import create_engine, Column, Integer, String, Float\n\nfrom sqlalchemy.orm import declarative_base, sessionmaker\n\nfrom pydantic import BaseModel\n\nfrom typing import Optional\n\nfrom fastapi_easy import CRUDRouter, SQLAlchemyAdapter\n\n\n\n# ============ 1. \u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e9\u2026\u00e7\u00bd?============\n\n\n\nDATABASE_URL = \"sqlite:///./test.db\"\n\nengine = create_engine(DATABASE_URL, connect_args={\"check_same_thread\": False})\n\nSessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)\n\nBase = declarative_base()\n\n\n\n\n\n# ============ 2. \u00e5\u00ae\u0161\u00e4\u00b9\u2030 ORM \u00e6\u00a8\u00a1\u00e5\u2039 ============\n\n\n\nclass ItemDB(Base):\n\n    \"\"\"\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e6\u00a8\u00a1\u00e5?\"\"\n\n    __tablename__ = \"items\"\n\n\n\n    id = Column(Integer, primary_key=True, index=True)\n\n    name = Column(String, index=True)\n\n    description = Column(String, nullable=True)\n\n    price = Column(Float)\n\n\n\n\n\n# ============ 3. \u00e5\u00ae\u0161\u00e4\u00b9\u2030 Pydantic Schema ============\n\n\n\nclass Item(BaseModel):\n\n    \"\"\"API \u00e6\u2022\u00b0\u00e6\u00ae\u00e6\u00a8\u00a1\u00e5\u2039\"\"\"\n\n    id: Optional[int] = None\n\n    name: str\n\n    description: Optional[str] = None\n\n    price: float\n\n\n\n    class Config:\n\n        from_attributes = True\n\n\n\n\n\n# ============ 4. \u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e8\u00a1?============\n\n\n\nBase.metadata.create_all(bind=engine)\n\n\n\n\n\n# ============ 5. \u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e5\u00ba\u201d\u00e7\u201d\u00a8 ============\n\n\n\napp = FastAPI(title=\"FastAPI-Easy \u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e7\u00a4\u00ba\u00e4\u00be?)\n\n\n\n\n\n# ============ 6. \u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e9\u20ac\u201a\u00e9\u2026\u00e5\u2122?============\n\n\n\nadapter = SQLAlchemyAdapter(model=ItemDB, session_factory=SessionLocal)\n\n\n\n\n\n# ============ 7. \u00e5\u02c6\u203a\u00e5\u00bb\u00ba CRUDRouter ============\n\n\n\nrouter = CRUDRouter(schema=Item, adapter=adapter)\n\napp.include_router(router)\n\n\n\n\n\n# ============ 8. \u00e6\u00a0\u00b9\u00e8\u00b7\u00af\u00e7\u201d?============\n\n\n\n@app.get(\"/\")\n\nasync def root():\n\n    return {\n\n        \"message\": \"\u00e6\u00ac\u00a2\u00e8\u00bf\u00e4\u00bd\u00bf\u00e7\u201d\u00a8 FastAPI-Easy \u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e7\u00a4\u00ba\u00e4\u00be?,\n\n        \"docs\": \"/docs\",\n\n        \"database\": \"SQLite (test.db)\",\n\n        \"note\": \"\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e6\u2022\u00b0\u00e6\u00ae\u00e9\u0192\u00bd\u00e4\u00bc\u0161\u00e8\u00a2\u00ab\u00e6\u0152\u00e4\u00b9\u2026\u00e5\u0152\u2013\u00e5\u02c6\u00b0\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba?\n\n    }\n</code></pre>"},{"location":"tutorial/02-database-integration/#3-ee","title":"3. \u00e8\u00bf\u00e8\u00a1\u0152","text":"<pre><code>uvicorn main_db:app --reload\n</code></pre>"},{"location":"tutorial/02-database-integration/#4-e-api","title":"4. \u00e6\u00b5\u2039\u00e8\u00af\u2022 API","text":"<p>\u00e8\u00ae\u00bf\u00e9\u2014\u00ae http://localhost:8000/docs</p>"},{"location":"tutorial/02-database-integration/#aaoe1c","title":"\u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e9\u00a1\u00b9\u00e7\u203a\u00ae","text":"<pre><code>curl -X POST http://localhost:8000/items \\\n\n  -H \"Content-Type: application/json\" \\\n\n  -d '{\n\n    \"name\": \"\u00e7\u00ac\u201d\u00e8\u00ae\u00b0\u00e6\u0153\u00ac\u00e7\u201d\u00b5\u00e8\u201e?,\n\n    \"description\": \"\u00e9\u00ab\u02dc\u00e6\u20ac\u00a7\u00e8\u0192\u00bd\u00e7\u00ac\u201d\u00e8\u00ae\u00b0\u00e6\u0153?,\n\n    \"price\": 5999.99\n\n  }'\n</code></pre> <p>\u00e5\u201c\u00e5\u00ba\u201d:</p> <pre><code>{\n\n  \"id\": 1,\n\n  \"name\": \"\u00e7\u00ac\u201d\u00e8\u00ae\u00b0\u00e6\u0153\u00ac\u00e7\u201d\u00b5\u00e8\u201e?,\n\n  \"description\": \"\u00e9\u00ab\u02dc\u00e6\u20ac\u00a7\u00e8\u0192\u00bd\u00e7\u00ac\u201d\u00e8\u00ae\u00b0\u00e6\u0153?,\n\n  \"price\": 5999.99\n\n}\n</code></pre>"},{"location":"tutorial/02-database-integration/#eae1c","title":"\u00e8\u00b7\u00e5\u2013\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e9\u00a1\u00b9\u00e7\u203a?","text":"<pre><code>curl http://localhost:8000/items\n</code></pre> <p>\u00e5\u201c\u00e5\u00ba\u201d:</p> <pre><code>[\n\n  {\n\n    \"id\": 1,\n\n    \"name\": \"\u00e7\u00ac\u201d\u00e8\u00ae\u00b0\u00e6\u0153\u00ac\u00e7\u201d\u00b5\u00e8\u201e?,\n\n    \"description\": \"\u00e9\u00ab\u02dc\u00e6\u20ac\u00a7\u00e8\u0192\u00bd\u00e7\u00ac\u201d\u00e8\u00ae\u00b0\u00e6\u0153?,\n\n    \"price\": 5999.99\n\n  }\n\n]\n</code></pre>"},{"location":"tutorial/02-database-integration/#e1c","title":"\u00e6\u203a\u00b4\u00e6\u2013\u00b0\u00e9\u00a1\u00b9\u00e7\u203a\u00ae","text":"<pre><code>curl -X PUT http://localhost:8000/items/1 \\\n\n  -H \"Content-Type: application/json\" \\\n\n  -d '{\n\n    \"name\": \"\u00e7\u00ac\u201d\u00e8\u00ae\u00b0\u00e6\u0153\u00ac\u00e7\u201d\u00b5\u00e8\u201e?(\u00e6\u203a\u00b4\u00e6\u2013\u00b0)\",\n\n    \"description\": \"\u00e9\u00ab\u02dc\u00e6\u20ac\u00a7\u00e8\u0192\u00bd\u00e7\u00ac\u201d\u00e8\u00ae\u00b0\u00e6\u0153?,\n\n    \"price\": 6999.99\n\n  }'\n</code></pre>"},{"location":"tutorial/02-database-integration/#a-etme1c","title":"\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e9\u00a1\u00b9\u00e7\u203a\u00ae","text":"<pre><code>curl -X DELETE http://localhost:8000/items/1\n</code></pre>"},{"location":"tutorial/02-database-integration/#5-a3ea","title":"5. \u00e5\u2026\u00b3\u00e9\u201d\u00ae\u00e6\u00a6\u201a\u00e5\u00bf\u00b5","text":""},{"location":"tutorial/02-database-integration/#orm-a-vs-pydantic-schema","title":"ORM \u00e6\u00a8\u00a1\u00e5\u2039 vs Pydantic Schema","text":"<p>| \u00e6\u2013\u00b9\u00e9\u00a2 | ORM \u00e6\u00a8\u00a1\u00e5\u2039 | Pydantic Schema |</p> <p>|------|---------|-----------------|</p> <p>| \u00e7\u201d\u00a8\u00e9\u20ac?| \u00e5\u00ae\u0161\u00e4\u00b9\u2030\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e8\u00a1\u00a8\u00e7\u00bb\u201c\u00e6\u201e | \u00e5\u00ae\u0161\u00e4\u00b9\u2030 API \u00e8\u00af\u00b7\u00e6\u00b1\u201a/\u00e5\u201c\u00e5\u00ba\u201d\u00e6\u00a0\u00bc\u00e5\u00bc |</p> <p>| \u00e4\u00bd\u00e7\u00bd\u00ae | \u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e5\u00b1\u201a | API \u00e5\u00b1?|</p> <p>| \u00e7\u00a4\u00ba\u00e4\u00be\u2039 | <code>ItemDB</code> | <code>Item</code> |</p> <p>| \u00e5\u00ad\u2014\u00e6\u00ae\u00b5\u00e5\u00ae\u0161\u00e4\u00b9\u2030 | SQLAlchemy Column | Pydantic Field |</p>"},{"location":"tutorial/02-database-integration/#sqlalchemyadapter","title":"SQLAlchemyAdapter","text":"<p><code>SQLAlchemyAdapter</code> \u00e6\u02dc\u00af\u00e8\u00bf\u00e6?CRUDRouter \u00e5\u2019\u0152\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e7\u0161\u201e\u00e6\u00a1\u00a5\u00e6\u00a2?</p> <pre><code>adapter = SQLAlchemyAdapter(\n\n    model=ItemDB,              # ORM \u00e6\u00a8\u00a1\u00e5\u2039\n\n    session_factory=SessionLocal  # \u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e4\u00bc\u0161\u00e8\u00af\u00e5\u00b7\u00a5\u00e5?\n)\n</code></pre> <p>\u00e5\u00ae\u0192\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e5\u00a4\u201e\u00e7?</p> <ul> <li>\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e8\u00bf\u00e6?</li> <li> <p>\u00e4\u00bc\u0161\u00e8\u00af\u00e7\u00ae\u00a1\u00e7\u2020</p> </li> <li> <p>CRUD \u00e6\u201c\u00e4\u00bd\u0153</p> </li> <li> <p>\u00e4\u00ba\u2039\u00e5\u0160\u00a1\u00e7\u00ae\u00a1\u00e7\u2020</p> </li> </ul>"},{"location":"tutorial/02-database-integration/#6-a1aeae","title":"6. \u00e6\u2022\u00b0\u00e6\u00ae\u00e6\u0152\u00e4\u00b9\u2026\u00e5\u0152\u2013\u00e9\u00aa\u0152\u00e8\u00af?","text":"<p>\u00e9\u2021\u00e5\u00af\u00e5\u00ba\u201d\u00e7\u201d\u00a8\u00e5\u00ef\u00bc\u0152\u00e6\u2022\u00b0\u00e6\u00ae\u00e4\u00bb\u00e7\u201e\u00b6\u00e5\u00ad\u02dc\u00e5\u0153\u00a8:</p> <pre><code># \u00e7\u00ac\u00ac\u00e4\u00b8\u20ac\u00e6\u00ac\u00a1\u00e8\u00bf\u00e8\u00a1\u0152\u00ef\u00bc\u0152\u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\n\ncurl -X POST http://localhost:8000/items \\\n\n  -H \"Content-Type: application/json\" \\\n\n  -d '{\"name\": \"\u00e8\u2039\u00b9\u00e6\u0153\", \"price\": 15.5}'\n\n\n\n# \u00e5\u0153\u00e6\u00ad\u00a2\u00e5\u00ba\u201d\u00e7\u201d\u00a8 (Ctrl+C)\n\n\n\n# \u00e9\u2021\u00e6\u2013\u00b0\u00e5\u00af\u00e5\u0160\u00a8\u00e5\u00ba\u201d\u00e7\u201d\u00a8\n\nuvicorn main_db:app --reload\n\n\n\n# \u00e6\u2022\u00b0\u00e6\u00ae\u00e4\u00bb\u00e7\u201e\u00b6\u00e5\u00ad\u02dc\u00e5\u0153\u00a8!\n\ncurl http://localhost:8000/items\n</code></pre>"},{"location":"tutorial/02-database-integration/#7-a12c-aaao","title":"7. \u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e5\u2026\u00b6\u00e4\u00bb\u2013\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba?","text":""},{"location":"tutorial/02-database-integration/#postgresql","title":"PostgreSQL","text":"<pre><code># \u00e5\u00ae\u2030\u00e8\u00a3\u2026\u00e4\u00be\u00e8\u00b5\u2013\n\n# pip install psycopg2-binary\n\n\n\nDATABASE_URL = \"postgresql://user:password@localhost/dbname\"\n\nengine = create_engine(DATABASE_URL)\n</code></pre>"},{"location":"tutorial/02-database-integration/#mysql","title":"MySQL","text":"<pre><code># \u00e5\u00ae\u2030\u00e8\u00a3\u2026\u00e4\u00be\u00e8\u00b5\u2013\n\n# pip install pymysql\n\n\n\nDATABASE_URL = \"mysql+pymysql://user:password@localhost/dbname\"\n\nengine = create_engine(DATABASE_URL)\n</code></pre>"},{"location":"tutorial/02-database-integration/#mongodb","title":"MongoDB","text":"<pre><code># \u00e5\u00ae\u2030\u00e8\u00a3\u2026\u00e4\u00be\u00e8\u00b5\u2013\n\n# pip install motor\n\n\n\n# \u00e4\u00bd\u00bf\u00e7\u201d\u00a8 Tortoise ORM \u00e8\u20ac\u0152\u00e4\u00b8\u00e6\u02dc?SQLAlchemy\n\nfrom fastapi_easy import TortoiseAdapter\n</code></pre>"},{"location":"tutorial/02-database-integration/#8-a-eee","title":"8. \u00e5\u00b8\u00b8\u00e8\u00a7\u00e9\u2014\u00ae\u00e9\u00a2\u02dc","text":"<p>Q: \u00e5\u00a6\u201a\u00e4\u00bd\u2022\u00e6\u0178\u00a5\u00e7\u0153\u2039\u00e7\u201d\u0178\u00e6\u02c6\u00e7\u0161\u201e\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e6\u2013\u2021\u00e4\u00bb\u00b6? </p> <p>A: SQLite \u00e4\u00bc\u0161\u00e5\u0153\u00a8\u00e5\u00bd\u201c\u00e5\u2030\u00e7\u203a\u00ae\u00e5\u00bd\u2022\u00e7\u201d\u0178\u00e6\u02c6 <code>test.db</code> \u00e6\u2013\u2021\u00e4\u00bb\u00b6\u00e3\u20ac\u201a\u00e5\u00af\u00e4\u00bb\u00a5\u00e7\u201d\u00a8 SQLite \u00e5\u00ae\u00a2\u00e6\u02c6\u00b7\u00e7\u00ab\u00af\u00e6\u2030\u201c\u00e5\u00bc\u20ac\u00e6\u0178\u00a5\u00e7\u0153\u2039\u00e3\u20ac?</p> <p>Q: \u00e5\u00a6\u201a\u00e4\u00bd\u2022\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e6\u203a\u00b4\u00e5\u00a4\u0161\u00e5\u00ad\u2014\u00e6\u00ae\u00b5? </p> <p>A: \u00e5\u0153?ORM \u00e6\u00a8\u00a1\u00e5\u2039\u00e4\u00b8\u00ad\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e5\u02c6\u2014\u00ef\u00bc\u0152\u00e5\u0153\u00a8 Pydantic Schema \u00e4\u00b8\u00ad\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e5\u00ad\u2014\u00e6\u00ae?</p> <pre><code># ORM \u00e6\u00a8\u00a1\u00e5\u2039\n\nclass ItemDB(Base):\n\n    __tablename__ = \"items\"\n\n    id = Column(Integer, primary_key=True)\n\n    name = Column(String)\n\n    price = Column(Float)\n\n    stock = Column(Integer)  # \u00e6\u2013\u00b0\u00e5\u00ad\u2014\u00e6\u00ae?\n\n\n# Pydantic Schema\n\nclass Item(BaseModel):\n\n    id: Optional[int] = None\n\n    name: str\n\n    price: float\n\n    stock: int = 0  # \u00e6\u2013\u00b0\u00e5\u00ad\u2014\u00e6\u00ae?\n</code></pre> <p>Q: \u00e5\u00a6\u201a\u00e4\u00bd\u2022\u00e9\u2021\u00e7\u00bd\u00ae\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba? </p> <p>A: \u00e5\u02c6\u00a0\u00e9\u2122\u00a4 <code>test.db</code> \u00e6\u2013\u2021\u00e4\u00bb\u00b6\u00ef\u00bc\u0152\u00e9\u2021\u00e6\u2013\u00b0\u00e8\u00bf\u00e8\u00a1\u0152\u00e5\u00ba\u201d\u00e7\u201d\u00a8\u00e4\u00bc\u0161\u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e6\u2013\u00b0\u00e7\u0161\u201e\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e3\u20ac?</p> <p>Q: \u00e5\u00a6\u201a\u00e4\u00bd\u2022\u00e5\u0153\u00a8\u00e7\u201d\u0178\u00e4\u00ba\u00a7\u00e7\u00af\u00e5\u00a2\u0192\u00e4\u00bd\u00bf\u00e7\u201d? </p> <p>A: \u00e4\u00bd\u00bf\u00e7\u201d\u00a8 PostgreSQL \u00e6\u02c6?MySQL\u00ef\u00bc\u0152\u00e9\u2026\u00e7\u00bd\u00ae\u00e7\u00af\u00e5\u00a2\u0192\u00e5\u02dc\u00e9\u2021\u00e7\u00ae\u00a1\u00e7\u2020\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c URL\u00e3\u20ac?</p>"},{"location":"tutorial/02-database-integration/#9-a-a","title":"9. \u00e4\u00b8\u2039\u00e4\u00b8\u20ac\u00e6\u00ad?","text":"<p>\u00e7\u00b0\u00e5\u0153\u00a8\u00e4\u00bd\u00a0\u00e5\u00b7\u00b2\u00e7\u00bb\u00e6\u0152\u00e6\u00a1\u00e4\u00ba\u2020\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e9\u203a\u2020\u00e6\u02c6\u00ef\u00bc\u0152\u00e5\u00af\u00e4\u00bb\u00a5\u00e7\u00bb\u00a7\u00e7\u00bb\u00ad\u00e5\u00ad\u00a6\u00e4\u00b9\u00a0:</p> <ol> <li>\u00e5\u00af\u00e7\u201d\u00a8\u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e5\u0160\u0178\u00e8\u0192\u00bd - \u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e8\u00bf\u2021\u00e6\u00bb\u00a4\u00e3\u20ac\u00e6\u2019\u00e5\u00ba\u00e3\u20ac\u00e5\u02c6\u2020\u00e9\u00a1?</li> <li> <p>\u00e6\u0178\u00a5\u00e7\u0153\u2039\u00e7\u00a4\u00ba\u00e4\u00be\u2039: <code>examples/03_with_queries.py</code></p> </li> <li> <p>\u00e9\u00ab\u02dc\u00e7\u00ba\u00a7\u00e5\u0160\u0178\u00e8\u0192\u00bd - \u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e3\u20ac\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf?</p> </li> <li> <p>\u00e6\u0178\u00a5\u00e7\u0153\u2039\u00e7\u00a4\u00ba\u00e4\u00be\u2039: <code>examples/04_advanced_features.py</code></p> </li> <li> <p>\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e9\u00a1\u00b9\u00e7\u203a\u00ae - \u00e5\u00a4\u0161\u00e8\u00b5\u201e\u00e6\u00ba\u00e7\u201d\u00b5\u00e5\u2022?API</p> </li> <li> <p>\u00e6\u0178\u00a5\u00e7\u0153\u2039\u00e7\u00a4\u00ba\u00e4\u00be\u2039: <code>examples/05_complete_ecommerce.py</code></p> </li> </ol>"},{"location":"tutorial/02-database-integration/#10-c-a3eo","title":"10. \u00e7\u203a\u00b8\u00e5\u2026\u00b3\u00e8\u00b5\u201e\u00e6\u00ba","text":"<ul> <li> <p>\u011f\u0178\u201c\u0161 \u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e6\u2013\u2021\u00e6\u00a1\u00a3</p> </li> <li> <p>\u011f\u0178\u2019\u00bb \u00e7\u00a4\u00ba\u00e4\u00be\u2039\u00e4\u00bb\u00a3\u00e7\u00a0</p> </li> <li> <p>\u011f\u0178\u203a \u00e6\u2022\u2026\u00e9\u0161\u0153\u00e6\u2019\u00e9\u2122\u00a4</p> </li> <li> <p>\u011f\u0178\u201c \u00e6\u0153\u20ac\u00e4\u00bd\u00b3\u00e5\u00ae\u00e8\u00b7\u00b5</p> </li> </ul>"},{"location":"tutorial/03-complete-example/","title":"\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u00a4\u00ba\u00e4\u00be\u2039\u00ef\u00bc\u0161\u00e7\u201d\u00b5\u00e5\u2022?API","text":"<p>\u00e6\u0153\u00ac\u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e5\u00b1\u2022\u00e7\u00a4\u00ba\u00e4\u00b8\u20ac\u00e4\u00b8\u00aa\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u0161\u201e\u00e7\u201d\u00b5\u00e5\u2022\u2020 API \u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00ef\u00bc\u0152\u00e5\u0152\u2026\u00e5\u00ab\u00e6\u2030\u20ac\u00e6\u0153?fastapi-easy \u00e7\u0161\u201e\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e3\u20ac?</p>"},{"location":"tutorial/03-complete-example/#e1cc","title":"\u00e9\u00a1\u00b9\u00e7\u203a\u00ae\u00e7\u00bb\u201c\u00e6\u201e","text":"<pre><code>ecommerce-api/\n\n\u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac main.py                 # \u00e4\u00b8\u00bb\u00e5\u00ba\u201d\u00e7\u201d\u00a8\u00e6\u2013\u2021\u00e4\u00bb?\n\u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac models.py               # ORM \u00e6\u00a8\u00a1\u00e5\u2039\n\n\u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac schemas.py              # Pydantic Schema\n\n\u00e2\u201d\u0153\u00e2\u201d\u20ac\u00e2\u201d\u20ac database.py             # \u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e9\u2026\u00e7\u00bd?\n\u00e2\u201d\u201d\u00e2\u201d\u20ac\u00e2\u201d\u20ac requirements.txt        # \u00e4\u00be\u00e8\u00b5\u2013\n</code></pre>"},{"location":"tutorial/03-complete-example/#1-aea34e","title":"1. \u00e5\u00ae\u2030\u00e8\u00a3\u2026\u00e4\u00be\u00e8\u00b5\u2013","text":"<pre><code>pip install fastapi uvicorn fastapi-easy sqlalchemy sqlalchemy[asyncio] aiosqlite pydantic\n</code></pre> <p>requirements.txt:</p> <pre><code>fastapi&gt;=0.100\n\nuvicorn[standard]&gt;=0.23\n\nfastapi-easy&gt;=1.0\n\nsqlalchemy&gt;=2.0\n\naiosqlite&gt;=0.19\n\npydantic&gt;=2.0\n</code></pre>"},{"location":"tutorial/03-complete-example/#2-aoec12","title":"2. \u00e6\u2022\u00b0\u00e6\u00ae\u00e5\u00ba\u201c\u00e9\u2026\u00e7\u00bd?","text":"<p>database.py:</p> <pre><code>from sqlalchemy.ext.asyncio import AsyncSession, create_async_engine\n\nfrom sqlalchemy.orm import sessionmaker\n\n\n\nDATABASE_URL = \"sqlite+aiosqlite:///./ecommerce.db\"\n\n\n\nengine = create_async_engine(\n\n    DATABASE_URL,\n\n    echo=False,\n\n    future=True\n\n)\n\n\n\nAsyncSessionLocal = sessionmaker(\n\n    engine,\n\n    class_=AsyncSession,\n\n    expire_on_commit=False\n\n)\n\n\n\nasync def get_db():\n\n    async with AsyncSessionLocal() as session:\n\n        yield session\n</code></pre>"},{"location":"tutorial/03-complete-example/#3-orm-a","title":"3. ORM \u00e6\u00a8\u00a1\u00e5\u2039","text":"<p>models.py:</p> <pre><code>from sqlalchemy import Column, Integer, String, Float, DateTime, ForeignKey\n\nfrom sqlalchemy.orm import declarative_base\n\nfrom datetime import datetime\n\n\n\nBase = declarative_base()\n\n\n\nclass CategoryDB(Base):\n\n    __tablename__ = \"categories\"\n\n    id = Column(Integer, primary_key=True, index=True)\n\n    name = Column(String, unique=True, index=True)\n\n    description = Column(String)\n\n\n\nclass ProductDB(Base):\n\n    __tablename__ = \"products\"\n\n    id = Column(Integer, primary_key=True, index=True)\n\n    name = Column(String, index=True)\n\n    description = Column(String)\n\n    price = Column(Float, index=True)\n\n    stock = Column(Integer, index=True)\n\n    category_id = Column(Integer, ForeignKey(\"categories.id\"))\n\n    created_at = Column(DateTime, default=datetime.utcnow, index=True)\n\n    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)\n\n\n\nclass OrderDB(Base):\n\n    __tablename__ = \"orders\"\n\n    id = Column(Integer, primary_key=True, index=True)\n\n    order_number = Column(String, unique=True, index=True)\n\n    total_price = Column(Float)\n\n    status = Column(String, default=\"pending\", index=True)\n\n    created_at = Column(DateTime, default=datetime.utcnow, index=True)\n\n    updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)\n</code></pre>"},{"location":"tutorial/03-complete-example/#4-pydantic-schema","title":"4. Pydantic Schema","text":"<p>schemas.py:</p> <pre><code>from pydantic import BaseModel\n\nfrom datetime import datetime\n\nfrom typing import Optional\n\n\n\n# Category Schema\n\nclass Category(BaseModel):\n\n    id: int\n\n    name: str\n\n    description: Optional[str] = None\n\n\n\n    class Config:\n\n        from_attributes = True\n\n\n\n# Product Schema\n\nclass Product(BaseModel):\n\n    id: int\n\n    name: str\n\n    description: Optional[str] = None\n\n    price: float\n\n    stock: int\n\n    category_id: int\n\n    created_at: datetime\n\n    updated_at: datetime\n\n\n\n    class Config:\n\n        from_attributes = True\n\n\n\n# Order Schema\n\nclass Order(BaseModel):\n\n    id: int\n\n    order_number: str\n\n    total_price: float\n\n    status: str\n\n    created_at: datetime\n\n    updated_at: datetime\n\n\n\n    class Config:\n\n        from_attributes = True\n</code></pre>"},{"location":"tutorial/03-complete-example/#5-a-aoc","title":"5. \u00e4\u00b8\u00bb\u00e5\u00ba\u201d\u00e7\u201d?","text":"<p>main.py:</p> <pre><code>from fastapi import FastAPI\n\nfrom fastapi_easy import CRUDRouter\n\nfrom fastapi_easy.backends import SQLAlchemyAdapter\n\nfrom fastapi_easy.features import PaginationConfig, SoftDeleteConfig\n\n\n\nfrom database import engine, get_db\n\nfrom models import Base, CategoryDB, ProductDB, OrderDB\n\nfrom schemas import Category, Product, Order\n\n\n\n# \u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e8\u00a1?\n@app.on_event(\"startup\")\n\nasync def startup():\n\n    async with engine.begin() as conn:\n\n        await conn.run_sync(Base.metadata.create_all)\n\n\n\n# \u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e5\u00ba\u201d\u00e7\u201d\u00a8\n\napp = FastAPI(\n\n    title=\"\u00e7\u201d\u00b5\u00e5\u2022\u2020 API\",\n\n    description=\"\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u0161\u201e\u00e7\u201d\u00b5\u00e5\u2022?API \u00e7\u00a4\u00ba\u00e4\u00be\u2039\",\n\n    version=\"1.0.0\"\n\n)\n\n\n\n# ============ Category \u00e8\u00b7\u00af\u00e7\u201d\u00b1 ============\n\ncategory_router = CRUDRouter(\n\n    schema=Category,\n\n    adapter=SQLAlchemyAdapter(CategoryDB, get_db),\n\n    prefix=\"/categories\",\n\n    tags=[\"categories\"],\n\n    enable_filters=True,\n\n    filter_fields=[\"name\"],\n\n    enable_sorters=True,\n\n    sort_fields=[\"name\", \"id\"],\n\n    enable_pagination=True,\n\n    pagination_config=PaginationConfig(default_limit=10, max_limit=100),\n\n)\n\n\n\n# ============ Product \u00e8\u00b7\u00af\u00e7\u201d\u00b1 ============\n\nproduct_router = CRUDRouter(\n\n    schema=Product,\n\n    adapter=SQLAlchemyAdapter(ProductDB, get_db),\n\n    prefix=\"/products\",\n\n    tags=[\"products\"],\n\n    enable_filters=True,\n\n    filter_fields=[\"name\", \"price\", \"stock\", \"category_id\"],\n\n    enable_sorters=True,\n\n    sort_fields=[\"name\", \"price\", \"created_at\", \"stock\"],\n\n    default_sort=\"-created_at\",\n\n    enable_pagination=True,\n\n    pagination_config=PaginationConfig(default_limit=20, max_limit=100),\n\n)\n\n\n\n# ============ Order \u00e8\u00b7\u00af\u00e7\u201d\u00b1 ============\n\norder_router = CRUDRouter(\n\n    schema=Order,\n\n    adapter=SQLAlchemyAdapter(OrderDB, get_db),\n\n    prefix=\"/orders\",\n\n    tags=[\"orders\"],\n\n    enable_filters=True,\n\n    filter_fields=[\"order_number\", \"status\"],\n\n    enable_sorters=True,\n\n    sort_fields=[\"created_at\", \"total_price\", \"status\"],\n\n    default_sort=\"-created_at\",\n\n    enable_pagination=True,\n\n    pagination_config=PaginationConfig(default_limit=10, max_limit=100),\n\n    enable_soft_delete=True,\n\n    soft_delete_config=SoftDeleteConfig(deleted_at_field=\"deleted_at\"),\n\n)\n\n\n\n# \u00e6\u00b3\u00a8\u00e5\u2020\u0152\u00e8\u00b7\u00af\u00e7\u201d\u00b1\n\napp.include_router(category_router)\n\napp.include_router(product_router)\n\napp.include_router(order_router)\n\n\n\n# \u00e6\u00a0\u00b9\u00e8\u00b7\u00af\u00e7\u201d?\n@app.get(\"/\")\n\nasync def root():\n\n    return {\n\n        \"message\": \"\u00e6\u00ac\u00a2\u00e8\u00bf\u00e6\u00a5\u00e5\u02c6\u00b0\u00e7\u201d\u00b5\u00e5\u2022\u2020 API\",\n\n        \"docs\": \"/docs\",\n\n        \"endpoints\": {\n\n            \"categories\": \"/categories\",\n\n            \"products\": \"/products\",\n\n            \"orders\": \"/orders\"\n\n        }\n\n    }\n</code></pre>"},{"location":"tutorial/03-complete-example/#6-eeaoc","title":"6. \u00e8\u00bf\u00e8\u00a1\u0152\u00e5\u00ba\u201d\u00e7\u201d\u00a8","text":"<pre><code>uvicorn main:app --reload\n</code></pre> <p>\u00e8\u00ae\u00bf\u00e9\u2014\u00ae http://localhost:8000/docs \u00e6\u0178\u00a5\u00e7\u0153\u2039 API \u00e6\u2013\u2021\u00e6\u00a1\u00a3</p>"},{"location":"tutorial/03-complete-example/#7-api-a12c-coa34","title":"7. API \u00e4\u00bd\u00bf\u00e7\u201d\u00a8\u00e7\u00a4\u00ba\u00e4\u00be\u2039","text":""},{"location":"tutorial/03-complete-example/#aaoac","title":"\u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e5\u02c6\u2020\u00e7\u00b1\u00bb","text":"<pre><code>curl -X POST \"http://localhost:8000/categories\" \\\n\n  -H \"Content-Type: application/json\" \\\n\n  -d '{\n\n    \"name\": \"\u00e6\u00b0\u00b4\u00e6\u0153\",\n\n    \"description\": \"\u00e6\u2013\u00b0\u00e9\u00b2\u0153\u00e6\u00b0\u00b4\u00e6\u0153\"\n\n  }'\n</code></pre>"},{"location":"tutorial/03-complete-example/#aaoaa","title":"\u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e5\u2022\u2020\u00e5\u201c","text":"<pre><code>curl -X POST \"http://localhost:8000/products\" \\\n\n  -H \"Content-Type: application/json\" \\\n\n  -d '{\n\n    \"name\": \"\u00e8\u2039\u00b9\u00e6\u0153\",\n\n    \"description\": \"\u00e6\u2013\u00b0\u00e9\u00b2\u0153\u00e8\u2039\u00b9\u00e6\u0153\",\n\n    \"price\": 15.5,\n\n    \"stock\": 100,\n\n    \"category_id\": 1\n\n  }'\n</code></pre>"},{"location":"tutorial/03-complete-example/#ye-aai14a-eaaoaaei14","title":"\u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e5\u2022\u2020\u00e5\u201c\u00ef\u00bc\u02c6\u00e5\u00b8\u00a6\u00e8\u00bf\u2021\u00e6\u00bb\u00a4\u00e3\u20ac\u00e6\u2019\u00e5\u00ba\u00e3\u20ac\u00e5\u02c6\u2020\u00e9\u00a1\u00b5\u00ef\u00bc\u2030","text":"<pre><code># \u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e4\u00bb\u00b7\u00e6\u00a0\u00bc\u00e5\u00a4\u00a7\u00e4\u00ba 10 \u00e7\u0161\u201e\u00e5\u2022\u2020\u00e5\u201c\u00ef\u00bc\u0152\u00e6\u0152\u2030\u00e4\u00bb\u00b7\u00e6\u00a0\u00bc\u00e9\u2122\u00e5\u00ba\u00ef\u00bc\u0152\u00e6\u00af\u00e9\u00a1\u00b5 10 \u00e6?\ncurl \"http://localhost:8000/products?price__gt=10&amp;sort=-price&amp;skip=0&amp;limit=10\"\n\n\n\n# \u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e5\u02c6\u2020\u00e7\u00b1\u00bb\u00e4\u00b8?1 \u00e4\u00b8\u201d\u00e5\u00ba\u201c\u00e5\u00ad\u02dc\u00e5\u00a4\u00a7\u00e4\u00ba?0 \u00e7\u0161\u201e\u00e5\u2022\u2020\u00e5\u201c?\ncurl \"http://localhost:8000/products?category_id=1&amp;stock__gt=0\"\n\n\n\n# \u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e5\u00e7\u00a7\u00b0\u00e5\u0152\u2026\u00e5\u00ab \"\u00e8\u2039\u00b9\u00e6\u0153\" \u00e7\u0161\u201e\u00e5\u2022\u2020\u00e5\u201c\u00ef\u00bc\u0152\u00e6\u0152\u2030\u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e6\u2014\u00b6\u00e9\u2014\u00b4\u00e9\u2122\u00e5\u00ba?\ncurl \"http://localhost:8000/products?name__like=%\u00e8\u2039\u00b9\u00e6\u0153%&amp;sort=-created_at\"\n</code></pre>"},{"location":"tutorial/03-complete-example/#aaoea","title":"\u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e8\u00ae\u00a2\u00e5\u2022","text":"<pre><code>curl -X POST \"http://localhost:8000/orders\" \\\n\n  -H \"Content-Type: application/json\" \\\n\n  -d '{\n\n    \"order_number\": \"ORD-001\",\n\n    \"total_price\": 150.0,\n\n    \"status\": \"pending\"\n\n  }'\n</code></pre>"},{"location":"tutorial/03-complete-example/#ye-ea","title":"\u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e8\u00ae\u00a2\u00e5\u2022","text":"<pre><code># \u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e5\u00be\u2026\u00e5\u00a4\u201e\u00e7\u2020\u00e8\u00ae\u00a2\u00e5\u2022\u00ef\u00bc\u0152\u00e6\u0152\u2030\u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e6\u2014\u00b6\u00e9\u2014\u00b4\u00e9\u2122\u00e5\u00ba\n\ncurl \"http://localhost:8000/orders?status=pending&amp;sort=-created_at\"\n\n\n\n# \u00e6\u0178\u00a5\u00e8\u00af\u00a2\u00e7\u2030\u00b9\u00e5\u00ae\u0161\u00e8\u00ae\u00a2\u00e5\u2022\u00e5?\ncurl \"http://localhost:8000/orders?order_number=ORD-001\"\n</code></pre>"},{"location":"tutorial/03-complete-example/#aa","title":"\u00e6\u203a\u00b4\u00e6\u2013\u00b0\u00e5\u2022\u2020\u00e5\u201c","text":"<pre><code>curl -X PUT \"http://localhost:8000/products/1\" \\\n\n  -H \"Content-Type: application/json\" \\\n\n  -d '{\n\n    \"name\": \"\u00e6\u2013\u00b0\u00e9\u00b2\u0153\u00e8\u2039\u00b9\u00e6\u0153\",\n\n    \"price\": 18.0,\n\n    \"stock\": 80\n\n  }'\n</code></pre>"},{"location":"tutorial/03-complete-example/#a-etmea","title":"\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e8\u00ae\u00a2\u00e5\u2022","text":"<pre><code>curl -X DELETE \"http://localhost:8000/orders/1\"\n</code></pre>"},{"location":"tutorial/03-complete-example/#8-ac-ea-1","title":"8. \u00e4\u00bb\u00a3\u00e7\u00a0\u00e9\u2021\u00e5\u00af\u00b9\u00e6\u00af?","text":""},{"location":"tutorial/03-complete-example/#atm1a14","title":"\u00e6\u2030\u2039\u00e5\u2020\u2122\u00e6\u2013\u00b9\u00e5\u00bc","text":"<pre><code>models.py              ~100 \u00e8\u00a1?\nschemas.py            ~80 \u00e8\u00a1?\nroutes/categories.py  ~150 \u00e8\u00a1?\nroutes/products.py    ~200 \u00e8\u00a1?\nroutes/orders.py      ~200 \u00e8\u00a1?\ndatabase.py           ~50 \u00e8\u00a1?\nmain.py               ~100 \u00e8\u00a1?\n\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\n\n\u00e6\u20ac\u00bb\u00e8\u00ae\u00a1                  ~880 \u00e8\u00a1?\n</code></pre>"},{"location":"tutorial/03-complete-example/#a12c-fastapi-easy","title":"\u00e4\u00bd\u00bf\u00e7\u201d\u00a8 fastapi-easy","text":"<pre><code>models.py              ~100 \u00e8\u00a1?\nschemas.py            ~80 \u00e8\u00a1?\ndatabase.py           ~50 \u00e8\u00a1?\nmain.py               ~120 \u00e8\u00a1?\n\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\u00e2\u201d\u20ac\n\n\u00e6\u20ac\u00bb\u00e8\u00ae\u00a1                  ~350 \u00e8\u00a1?\n</code></pre> <p>\u00e8\u0160\u201a\u00e7\u00ba\u00a6: *60% \u00e4\u00bb\u00a3\u00e7\u00a0\u00e9\u2021\u00e5\u2021\u00e5\u00b0? \u00e2\u0153?</p>"},{"location":"tutorial/03-complete-example/#9-eaas-cycsapi","title":"9. \u00e8\u2021\u00aa\u00e5\u0160\u00a8\u00e7\u201d\u0178\u00e6\u02c6\u00e7\u0161?API","text":""},{"location":"tutorial/03-complete-example/#categories","title":"Categories","text":"<ul> <li><code>GET /categories</code> - \u00e8\u00b7\u00e5\u2013\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e5\u02c6\u2020\u00e7\u00b1?</li> <li> <p><code>GET /categories/{id}</code> - \u00e8\u00b7\u00e5\u2013\u00e5\u2022\u00e4\u00b8\u00aa\u00e5\u02c6\u2020\u00e7\u00b1\u00bb</p> </li> <li> <p><code>POST /categories</code> - \u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e5\u02c6\u2020\u00e7\u00b1\u00bb</p> </li> <li> <p><code>PUT /categories/{id}</code> - \u00e6\u203a\u00b4\u00e6\u2013\u00b0\u00e5\u02c6\u2020\u00e7\u00b1\u00bb</p> </li> <li> <p><code>DELETE /categories/{id}</code> - \u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e5\u02c6\u2020\u00e7\u00b1\u00bb</p> </li> </ul>"},{"location":"tutorial/03-complete-example/#products","title":"Products","text":"<ul> <li> <p><code>GET /products</code> - \u00e8\u00b7\u00e5\u2013\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e5\u2022\u2020\u00e5\u201c\u00ef\u00bc\u02c6\u00e6\u201d\u00af\u00e6\u0152\u00e8\u00bf\u2021\u00e6\u00bb\u00a4\u00e3\u20ac\u00e6\u2019\u00e5\u00ba\u00e3\u20ac\u00e5\u02c6\u2020\u00e9\u00a1\u00b5\u00ef\u00bc\u2030</p> </li> <li> <p><code>GET /products/{id}</code> - \u00e8\u00b7\u00e5\u2013\u00e5\u2022\u00e4\u00b8\u00aa\u00e5\u2022\u2020\u00e5\u201c</p> </li> <li> <p><code>POST /products</code> - \u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e5\u2022\u2020\u00e5\u201c</p> </li> <li> <p><code>PUT /products/{id}</code> - \u00e6\u203a\u00b4\u00e6\u2013\u00b0\u00e5\u2022\u2020\u00e5\u201c</p> </li> <li> <p><code>DELETE /products/{id}</code> - \u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e5\u2022\u2020\u00e5\u201c</p> </li> </ul>"},{"location":"tutorial/03-complete-example/#orders","title":"Orders","text":"<ul> <li> <p><code>GET /orders</code> - \u00e8\u00b7\u00e5\u2013\u00e6\u2030\u20ac\u00e6\u0153\u2030\u00e8\u00ae\u00a2\u00e5\u2022\u00ef\u00bc\u02c6\u00e6\u201d\u00af\u00e6\u0152\u00e8\u00bf\u2021\u00e6\u00bb\u00a4\u00e3\u20ac\u00e6\u2019\u00e5\u00ba\u00e3\u20ac\u00e5\u02c6\u2020\u00e9\u00a1\u00b5\u00ef\u00bc\u2030</p> </li> <li> <p><code>GET /orders/{id}</code> - \u00e8\u00b7\u00e5\u2013\u00e5\u2022\u00e4\u00b8\u00aa\u00e8\u00ae\u00a2\u00e5\u2022</p> </li> <li> <p><code>POST /orders</code> - \u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e8\u00ae\u00a2\u00e5\u2022</p> </li> <li> <p><code>PUT /orders/{id}</code> - \u00e6\u203a\u00b4\u00e6\u2013\u00b0\u00e8\u00ae\u00a2\u00e5\u2022</p> </li> <li> <p><code>DELETE /orders/{id}</code> - \u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00e8\u00ae\u00a2\u00e5\u2022\u00ef\u00bc\u02c6\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122\u00a4\u00ef\u00bc?</p> </li> </ul>"},{"location":"tutorial/03-complete-example/#10-asye12c1","title":"10. \u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e7\u2030\u00b9\u00e6\u20ac?","text":"<p>\u00e2\u0153?\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u0161?CRUD \u00e6\u201c\u00e4\u00bd\u0153</p> <p>\u00e2\u0153?*\u00e6\u0153\u00e7\u00b4\u00a2\u00e5\u2019\u0152\u00e8\u00bf\u2021\u00e6\u00bb?</p> <p>\u00e2\u0153?\u00e6\u2019\u00e5\u00ba</p> <p>\u00e2\u0153?\u00e5\u02c6\u2020\u00e9\u00a1\u00b5</p> <p>\u00e2\u0153?*\u00e8\u00bd\u00af\u00e5\u02c6\u00a0\u00e9\u2122?</p> <p>\u00e2\u0153?\u00e8\u2021\u00aa\u00e5\u0160\u00a8 OpenAPI \u00e6\u2013\u2021\u00e6\u00a1\u00a3</p> <p>\u00e2\u0153?\u00e5\u00bc\u201a\u00e6\u00ad\u00a5\u00e6\u201d\u00af\u00e6\u0152</p> <p>\u00e2\u0153?Pydantic v2 \u00e5\u2026\u00bc\u00e5\u00ae\u00b9</p>"},{"location":"tutorial/03-complete-example/#11-a-a","title":"11. \u00e4\u00b8\u2039\u00e4\u00b8\u20ac\u00e6\u00ad?","text":"<ul> <li> <p>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e6\u0192\u00e9\u2122\u00e6\u00a7\u00e5\u02c6\u00b6</p> </li> <li> <p>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e5\u00ae\u00a1\u00e8\u00ae\u00a1\u00e6\u2014\u00a5\u00e5\u00bf\u2014</p> </li> <li> <p>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e4\u00b8\u0161\u00e5\u0160\u00a1\u00e9\u20ac\u00bb\u00e8\u00be\u2018\u00e9\u2019\u00a9\u00e5\u00ad</p> </li> <li> <p>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e5\u2026\u00b3\u00e7\u00b3\u00bb\u00e5\u00a4\u201e\u00e7\u2020</p> </li> <li> <p>\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e6\u2030\u00b9\u00e9\u2021\u00e6\u201c\u00e4\u00bd\u0153</p> </li> </ul>"},{"location":"tutorial/03-complete-example/#c","title":"\u00e6\u20ac\u00bb\u00e7\u00bb\u201c","text":"<p>\u00e8\u00bf\u2122\u00e4\u00b8\u00aa\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u00a4\u00ba\u00e4\u00be\u2039\u00e5\u00b1\u2022\u00e7\u00a4\u00ba\u00e4\u00ba\u2020\u00e5\u00a6\u201a\u00e4\u00bd\u2022\u00e4\u00bd\u00bf\u00e7\u201d?fastapi-easy \u00e5\u00bf\u00ab\u00e9\u20ac\u0178\u00e6\u201e\u00e5\u00bb\u00ba\u00e4\u00b8\u20ac\u00e4\u00b8\u00aa\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e5\u00ae\u0152\u00e6\u2022\u00b4\u00e7\u0161\u201e\u00e7\u201d\u00b5\u00e5\u2022\u2020 API\u00ef\u00bc\u0152\u00e5\u00aa\u00e9\u0153\u20ac\u00e8\u00a6\u00e7\u00ba\u00a6 350 \u00e8\u00a1\u0152\u00e4\u00bb\u00a3\u00e7\u00a0\u00ef\u00bc\u0152\u00e8\u20ac\u0152\u00e6\u2030\u2039\u00e5\u2020\u2122\u00e6\u2013\u00b9\u00e5\u00bc\u00e9\u0153\u20ac\u00e8\u00a6\u00e7\u00ba\u00a6 880 \u00e8\u00a1\u0152\u00e4\u00bb\u00a3\u00e7\u00a0\u00e3\u20ac?</p> <p>\u00e6\u2022\u02c6\u00e7\u2021\u00e6\u00e5\u2021: *60% \u00e4\u00bb\u00a3\u00e7\u00a0\u00e9\u2021\u00e5\u2021\u00e5\u00b0? \u00e2\u0153?</p>"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/","title":"\u5feb\u901f\u5f00\u53d1\u540e\u7aef\u7684\u5b8c\u6574\u5de5\u4f5c\u6d41\u5206\u6790","text":""},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#fastapi","title":"\u573a\u666f\uff1a\u5f00\u53d1\u4e00\u4e2a\u65b0\u7684 FastAPI \u9879\u76ee","text":"<p>\u5047\u8bbe\u8981\u5f00\u53d1\u4e00\u4e2a\u7535\u5546 API\uff0c\u5305\u542b Product\u3001Order\u3001User \u4e09\u4e2a\u8d44\u6e90\u3002</p>"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#a-fastapi-easy","title":"\u65b9\u6848 A: \u4e0d\u4f7f\u7528 FastAPI-Easy (\u4f20\u7edf\u65b9\u5f0f)","text":""},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#1","title":"\u7b2c 1 \u6b65\uff1a\u9879\u76ee\u521d\u59cb\u5316\u548c\u6570\u636e\u5e93\u914d\u7f6e","text":"<pre><code># main.py\nfrom fastapi import FastAPI\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.orm import sessionmaker, declarative_base\nfrom sqlalchemy.ext.asyncio import AsyncSession, create_async_engine\n\n# \u6570\u636e\u5e93\u914d\u7f6e\nDATABASE_URL = \"sqlite+aiosqlite:///./test.db\"\nengine = create_async_engine(DATABASE_URL)\nAsyncSessionLocal = sessionmaker(engine, class_=AsyncSession, expire_on_commit=False)\nBase = declarative_base()\n\napp = FastAPI()\n\nasync def get_db():\n    async with AsyncSessionLocal() as session:\n        yield session\n</code></pre> <p>\u4ee3\u7801\u884c\u6570: 18 \u884c</p>"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#2-orm","title":"\u7b2c 2 \u6b65\uff1a\u5b9a\u4e49 ORM \u6a21\u578b","text":"<pre><code># models.py\nfrom sqlalchemy import Column, Integer, String, Float, DateTime, ForeignKey\nfrom sqlalchemy.orm import relationship\nfrom datetime import datetime\n\nclass UserDB(Base):\n    __tablename__ = \"users\"\n    id = Column(Integer, primary_key=True)\n    name = Column(String, index=True)\n    email = Column(String, unique=True, index=True)\n    created_at = Column(DateTime, default=datetime.utcnow)\n\nclass ProductDB(Base):\n    __tablename__ = \"products\"\n    id = Column(Integer, primary_key=True)\n    name = Column(String, index=True)\n    price = Column(Float)\n    stock = Column(Integer)\n    created_at = Column(DateTime, default=datetime.utcnow)\n\nclass OrderDB(Base):\n    __tablename__ = \"orders\"\n    id = Column(Integer, primary_key=True)\n    user_id = Column(Integer, ForeignKey(\"users.id\"))\n    product_id = Column(Integer, ForeignKey(\"products.id\"))\n    quantity = Column(Integer)\n    total_price = Column(Float)\n    created_at = Column(DateTime, default=datetime.utcnow)\n\n    user = relationship(\"UserDB\")\n    product = relationship(\"ProductDB\")\n</code></pre> <p>\u4ee3\u7801\u884c\u6570: 35 \u884c</p>"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#3-pydantic-schema","title":"\u7b2c 3 \u6b65\uff1a\u5b9a\u4e49 Pydantic Schema","text":"<pre><code># schemas.py\nfrom pydantic import BaseModel\nfrom datetime import datetime\n\nclass UserBase(BaseModel):\n    name: str\n    email: str\n\nclass UserCreate(UserBase):\n    pass\n\nclass User(UserBase):\n    id: int\n    created_at: datetime\n\n    class Config:\n        from_attributes = True\n\nclass ProductBase(BaseModel):\n    name: str\n    price: float\n    stock: int\n\nclass ProductCreate(ProductBase):\n    pass\n\nclass Product(ProductBase):\n    id: int\n    created_at: datetime\n\n    class Config:\n        from_attributes = True\n\nclass OrderBase(BaseModel):\n    user_id: int\n    product_id: int\n    quantity: int\n    total_price: float\n\nclass OrderCreate(OrderBase):\n    pass\n\nclass Order(OrderBase):\n    id: int\n    created_at: datetime\n\n    class Config:\n        from_attributes = True\n</code></pre> <p>\u4ee3\u7801\u884c\u6570: 50 \u884c</p>"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#4-crud","title":"\u7b2c 4 \u6b65\uff1a\u624b\u5199 CRUD \u7aef\u70b9","text":"<pre><code># routes.py\nfrom fastapi import APIRouter, Depends, HTTPException\nfrom sqlalchemy.ext.asyncio import AsyncSession\nfrom sqlalchemy import select\n\nrouter = APIRouter()\n\n# ===== USER CRUD =====\n\n@router.get(\"/users\", response_model=list[User])\nasync def get_users(skip: int = 0, limit: int = 10, db: AsyncSession = Depends(get_db)):\n    result = await db.execute(select(UserDB).offset(skip).limit(limit))\n    return result.scalars().all()\n\n@router.get(\"/users/{user_id}\", response_model=User)\nasync def get_user(user_id: int, db: AsyncSession = Depends(get_db)):\n    result = await db.execute(select(UserDB).where(UserDB.id == user_id))\n    user = result.scalar_one_or_none()\n    if not user:\n        raise HTTPException(status_code=404, detail=\"User not found\")\n    return user\n\n@router.post(\"/users\", response_model=User)\nasync def create_user(user: UserCreate, db: AsyncSession = Depends(get_db)):\n    db_user = UserDB(**user.dict())\n    db.add(db_user)\n    await db.commit()\n    await db.refresh(db_user)\n    return db_user\n\n@router.put(\"/users/{user_id}\", response_model=User)\nasync def update_user(user_id: int, user: UserCreate, db: AsyncSession = Depends(get_db)):\n    result = await db.execute(select(UserDB).where(UserDB.id == user_id))\n    db_user = result.scalar_one_or_none()\n    if not db_user:\n        raise HTTPException(status_code=404, detail=\"User not found\")\n    for key, value in user.dict().items():\n        setattr(db_user, key, value)\n    await db.commit()\n    await db.refresh(db_user)\n    return db_user\n\n@router.delete(\"/users/{user_id}\")\nasync def delete_user(user_id: int, db: AsyncSession = Depends(get_db)):\n    result = await db.execute(select(UserDB).where(UserDB.id == user_id))\n    db_user = result.scalar_one_or_none()\n    if not db_user:\n        raise HTTPException(status_code=404, detail=\"User not found\")\n    await db.delete(db_user)\n    await db.commit()\n    return {\"message\": \"User deleted\"}\n\n# ===== PRODUCT CRUD =====\n# (\u91cd\u590d 5 \u4e2a\u7aef\u70b9\uff0c\u5171 50 \u884c)\n\n# ===== ORDER CRUD =====\n# (\u91cd\u590d 5 \u4e2a\u7aef\u70b9\uff0c\u5171 50 \u884c)\n</code></pre> <p>\u4ee3\u7801\u884c\u6570: 150 \u884c (3 \u4e2a\u8d44\u6e90 \u00d7 50 \u884c)</p>"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#5","title":"\u7b2c 5 \u6b65\uff1a\u6570\u636e\u5e93\u8fc1\u79fb","text":"<pre><code># \u4f7f\u7528 Alembic\nalembic init alembic\n# \u7f16\u8f91 alembic/env.py\n# \u7f16\u8f91 alembic/versions/ \u4e2d\u7684\u8fc1\u79fb\u811a\u672c\nalembic upgrade head\n</code></pre> <p>\u4ee3\u7801\u884c\u6570: 30+ \u884c (\u8fc1\u79fb\u811a\u672c)</p>"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#6","title":"\u7b2c 6 \u6b65\uff1a\u542f\u52a8\u5e94\u7528","text":"<pre><code># main.py \u6dfb\u52a0\n@app.on_event(\"startup\")\nasync def startup():\n    async with engine.begin() as conn:\n        await conn.run_sync(Base.metadata.create_all)\n\napp.include_router(router)\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)\n</code></pre> <p>\u4ee3\u7801\u884c\u6570: 10 \u884c</p>"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#_2","title":"\u4f20\u7edf\u65b9\u5f0f\u603b\u4ee3\u7801\u91cf","text":"<pre><code>\u9879\u76ee\u521d\u59cb\u5316:        18 \u884c\nORM \u6a21\u578b:          35 \u884c\nPydantic Schema:   50 \u884c\nCRUD \u7aef\u70b9:        150 \u884c\n\u8fc1\u79fb\u811a\u672c:          30 \u884c\n\u542f\u52a8\u914d\u7f6e:          10 \u884c\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u603b\u8ba1:             293 \u884c\n</code></pre> <p>\u65f6\u95f4\u6210\u672c: 3-4 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#b-fastapi-easy-crud","title":"\u65b9\u6848 B: \u4f7f\u7528\u5f53\u524d FastAPI-Easy (\u4ec5 CRUD \u6846\u67b6)","text":"<pre><code># main.py\nfrom fastapi import FastAPI\nfrom fastapi_easy import CRUDRouter\nfrom fastapi_easy.backends import SQLAlchemyAsyncBackend\nfrom sqlalchemy.ext.asyncio import AsyncSession, create_async_engine\nfrom sqlalchemy.orm import sessionmaker, declarative_base\nfrom sqlalchemy import Column, Integer, String, Float, DateTime\nfrom pydantic import BaseModel\nfrom datetime import datetime\n\n# 1. \u6570\u636e\u5e93\u914d\u7f6e\nDATABASE_URL = \"sqlite+aiosqlite:///./test.db\"\nengine = create_async_engine(DATABASE_URL)\nAsyncSessionLocal = sessionmaker(engine, class_=AsyncSession, expire_on_commit=False)\nBase = declarative_base()\n\nasync def get_db():\n    async with AsyncSessionLocal() as session:\n        yield session\n\n# 2. ORM \u6a21\u578b\nclass UserDB(Base):\n    __tablename__ = \"users\"\n    id = Column(Integer, primary_key=True)\n    name = Column(String, index=True)\n    email = Column(String, unique=True, index=True)\n    created_at = Column(DateTime, default=datetime.utcnow)\n\nclass ProductDB(Base):\n    __tablename__ = \"products\"\n    id = Column(Integer, primary_key=True)\n    name = Column(String, index=True)\n    price = Column(Float)\n    stock = Column(Integer)\n    created_at = Column(DateTime, default=datetime.utcnow)\n\nclass OrderDB(Base):\n    __tablename__ = \"orders\"\n    id = Column(Integer, primary_key=True)\n    user_id = Column(Integer, ForeignKey(\"users.id\"))\n    product_id = Column(Integer, ForeignKey(\"products.id\"))\n    quantity = Column(Integer)\n    total_price = Column(Float)\n    created_at = Column(DateTime, default=datetime.utcnow)\n\n# 3. Pydantic Schema\nclass User(BaseModel):\n    id: int\n    name: str\n    email: str\n    created_at: datetime\n\n    class Config:\n        from_attributes = True\n\nclass Product(BaseModel):\n    id: int\n    name: str\n    price: float\n    stock: int\n    created_at: datetime\n\n    class Config:\n        from_attributes = True\n\nclass Order(BaseModel):\n    id: int\n    user_id: int\n    product_id: int\n    quantity: int\n    total_price: float\n    created_at: datetime\n\n    class Config:\n        from_attributes = True\n\n# 4. \u521b\u5efa\u5e94\u7528\u548c\u8def\u7531\napp = FastAPI()\n\n# \u81ea\u52a8\u751f\u6210 CRUD \u8def\u7531\nuser_router = CRUDRouter(schema=User, backend=SQLAlchemyAsyncBackend(UserDB, get_db))\nproduct_router = CRUDRouter(schema=Product, backend=SQLAlchemyAsyncBackend(ProductDB, get_db))\norder_router = CRUDRouter(schema=Order, backend=SQLAlchemyAsyncBackend(OrderDB, get_db))\n\napp.include_router(user_router)\napp.include_router(product_router)\napp.include_router(order_router)\n\n# 5. \u542f\u52a8\u914d\u7f6e\n@app.on_event(\"startup\")\nasync def startup():\n    async with engine.begin() as conn:\n        await conn.run_sync(Base.metadata.create_all)\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)\n</code></pre> <p>\u4ee3\u7801\u884c\u6570: 120 \u884c</p> <p>\u65f6\u95f4\u6210\u672c: 30-45 \u5206\u949f</p> <p>\u8282\u7701: - \u4ee3\u7801: 293 - 120 = 173 \u884c (59% \u51cf\u5c11) - \u65f6\u95f4: 3-4 \u5c0f\u65f6 - 0.5-0.75 \u5c0f\u65f6 = 2.25-3.5 \u5c0f\u65f6 (75% \u51cf\u5c11)</p>"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#c-fastapieasy","title":"\u65b9\u6848 C: \u4f7f\u7528\u96c6\u6210\u65b9\u6848 (FastAPIEasy \u7c7b)","text":"<pre><code># main.py\nfrom fastapi_easy import FastAPIEasy\nfrom sqlalchemy import Column, Integer, String, Float, DateTime\nfrom pydantic import BaseModel\nfrom datetime import datetime\n\n# 1. ORM \u6a21\u578b\nBase = declarative_base()\n\nclass UserDB(Base):\n    __tablename__ = \"users\"\n    id = Column(Integer, primary_key=True)\n    name = Column(String, index=True)\n    email = Column(String, unique=True, index=True)\n    created_at = Column(DateTime, default=datetime.utcnow)\n\nclass ProductDB(Base):\n    __tablename__ = \"products\"\n    id = Column(Integer, primary_key=True)\n    name = Column(String, index=True)\n    price = Column(Float)\n    stock = Column(Integer)\n    created_at = Column(DateTime, default=datetime.utcnow)\n\nclass OrderDB(Base):\n    __tablename__ = \"orders\"\n    id = Column(Integer, primary_key=True)\n    user_id = Column(Integer, ForeignKey(\"users.id\"))\n    product_id = Column(Integer, ForeignKey(\"products.id\"))\n    quantity = Column(Integer)\n    total_price = Column(Float)\n    created_at = Column(DateTime, default=datetime.utcnow)\n\n# 2. Pydantic Schema\nclass User(BaseModel):\n    id: int\n    name: str\n    email: str\n    created_at: datetime\n\n    class Config:\n        from_attributes = True\n\nclass Product(BaseModel):\n    id: int\n    name: str\n    price: float\n    stock: int\n    created_at: datetime\n\n    class Config:\n        from_attributes = True\n\nclass Order(BaseModel):\n    id: int\n    user_id: int\n    product_id: int\n    quantity: int\n    total_price: float\n    created_at: datetime\n\n    class Config:\n        from_attributes = True\n\n# 3. \u4e00\u884c\u4ee3\u7801\u521b\u5efa\u5e94\u7528\napp = FastAPIEasy(\n    database_url=\"sqlite+aiosqlite:///./test.db\",\n    models=[\n        (UserDB, User),\n        (ProductDB, Product),\n        (OrderDB, Order),\n    ]\n)\n\nif __name__ == \"__main__\":\n    import uvicorn\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)\n</code></pre> <p>\u4ee3\u7801\u884c\u6570: 80 \u884c</p> <p>\u65f6\u95f4\u6210\u672c: 10-15 \u5206\u949f</p> <p>\u8282\u7701: - \u4ee3\u7801: 293 - 80 = 213 \u884c (73% \u51cf\u5c11) - \u65f6\u95f4: 3-4 \u5c0f\u65f6 - 0.17-0.25 \u5c0f\u65f6 = 2.75-3.83 \u5c0f\u65f6 (92% \u51cf\u5c11)</p>"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#_3","title":"\u4ee3\u7801\u91cf\u5bf9\u6bd4\u8868","text":"\u65b9\u6848 \u4ee3\u7801\u884c\u6570 \u65f6\u95f4 \u8282\u7701\u4ee3\u7801 \u8282\u7701\u65f6\u95f4 \u4f20\u7edf\u65b9\u5f0f 293 \u884c 3-4 \u5c0f\u65f6 - - \u5f53\u524d FastAPI-Easy 120 \u884c 0.5-0.75 \u5c0f\u65f6 173 \u884c (59%) 2.25-3.5 \u5c0f\u65f6 (75%) \u96c6\u6210\u65b9\u6848 80 \u884c 0.17-0.25 \u5c0f\u65f6 213 \u884c (73%) 2.75-3.83 \u5c0f\u65f6 (92%)"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#_4","title":"\u4f46\u662f\uff0c\u8fd8\u6709\u4e00\u4e2a\u5173\u952e\u95ee\u9898\uff1a\u6570\u636e\u5e93\u8fc1\u79fb","text":""},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#_5","title":"\u4f20\u7edf\u65b9\u5f0f\u4e2d\u88ab\u5ffd\u7565\u7684\u90e8\u5206","text":"<p>\u5728\u4e0a\u9762\u7684\u5206\u6790\u4e2d\uff0c\u6211\u4eec\u5ffd\u7565\u4e86\u4e00\u4e2a\u91cd\u8981\u7684\u90e8\u5206\uff1a\u6570\u636e\u5e93\u8fc1\u79fb\u3002</p>"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#_6","title":"\u573a\u666f\uff1a\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u4fee\u6539\u6a21\u578b","text":"<p>\u5047\u8bbe\u5f00\u53d1\u5230\u4e00\u534a\uff0c\u9700\u8981\u7ed9 Product \u6dfb\u52a0\u4e00\u4e2a <code>category</code> \u5b57\u6bb5\uff1a</p> <pre><code>class ProductDB(Base):\n    __tablename__ = \"products\"\n    id = Column(Integer, primary_key=True)\n    name = Column(String, index=True)\n    price = Column(Float)\n    stock = Column(Integer)\n    category = Column(String)  # \u65b0\u589e\n    created_at = Column(DateTime, default=datetime.utcnow)\n</code></pre> <p>\u4f20\u7edf\u65b9\u5f0f\u9700\u8981\u505a:</p> <ol> <li>\u624b\u52a8\u7f16\u5199 Alembic \u8fc1\u79fb\u811a\u672c (10-15 \u5206\u949f)</li> <li>\u8fd0\u884c\u8fc1\u79fb (1-2 \u5206\u949f)</li> <li>\u66f4\u65b0 Schema (5 \u5206\u949f)</li> <li>\u6d4b\u8bd5 (10-15 \u5206\u949f)</li> </ol> <p>\u603b\u65f6\u95f4: 26-37 \u5206\u949f</p> <p>\u96c6\u6210\u65b9\u6848\u9700\u8981\u505a:</p> <ol> <li>\u4fee\u6539\u6a21\u578b</li> <li>\u5e94\u7528\u542f\u52a8\u65f6\u81ea\u52a8\u8fc1\u79fb (\u81ea\u52a8)</li> <li>Schema \u81ea\u52a8\u63a8\u5bfc (\u81ea\u52a8)</li> <li>\u6d4b\u8bd5 (10-15 \u5206\u949f)</li> </ol> <p>\u603b\u65f6\u95f4: 10-15 \u5206\u949f</p> <p>\u8282\u7701: 16-22 \u5206\u949f</p>"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#_7","title":"\u5b8c\u6574\u7684\u5f00\u53d1\u5468\u671f\u5bf9\u6bd4","text":""},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#3","title":"\u4f20\u7edf\u65b9\u5f0f (3 \u4e2a\u8d44\u6e90)","text":"<pre><code>\u521d\u59cb\u5316:           30 \u5206\u949f\n\u5b9a\u4e49\u6a21\u578b:         30 \u5206\u949f\n\u5b9a\u4e49 Schema:      30 \u5206\u949f\n\u624b\u5199 CRUD:       120 \u5206\u949f\n\u521d\u59cb\u8fc1\u79fb:         20 \u5206\u949f\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u5c0f\u8ba1:            230 \u5206\u949f\n\n\u4fee\u6539\u6a21\u578b (5 \u6b21):  5 \u00d7 30 \u5206\u949f = 150 \u5206\u949f\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u603b\u8ba1:            380 \u5206\u949f (6.3 \u5c0f\u65f6)\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#fastapi-easy-3","title":"\u5f53\u524d FastAPI-Easy (3 \u4e2a\u8d44\u6e90)","text":"<pre><code>\u521d\u59cb\u5316:           15 \u5206\u949f\n\u5b9a\u4e49\u6a21\u578b:         30 \u5206\u949f\n\u5b9a\u4e49 Schema:      30 \u5206\u949f\n\u751f\u6210 CRUD:         5 \u5206\u949f\n\u521d\u59cb\u8fc1\u79fb:         10 \u5206\u949f\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u5c0f\u8ba1:             90 \u5206\u949f\n\n\u4fee\u6539\u6a21\u578b (5 \u6b21):  5 \u00d7 15 \u5206\u949f = 75 \u5206\u949f\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u603b\u8ba1:            165 \u5206\u949f (2.75 \u5c0f\u65f6)\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#3_1","title":"\u96c6\u6210\u65b9\u6848 (3 \u4e2a\u8d44\u6e90)","text":"<pre><code>\u521d\u59cb\u5316:            5 \u5206\u949f\n\u5b9a\u4e49\u6a21\u578b:         30 \u5206\u949f\n\u5b9a\u4e49 Schema:      30 \u5206\u949f\n\u751f\u6210\u5e94\u7528:          2 \u5206\u949f\n\u81ea\u52a8\u8fc1\u79fb:          0 \u5206\u949f\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u5c0f\u8ba1:             67 \u5206\u949f\n\n\u4fee\u6539\u6a21\u578b (5 \u6b21):  5 \u00d7 5 \u5206\u949f = 25 \u5206\u949f\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u603b\u8ba1:             92 \u5206\u949f (1.5 \u5c0f\u65f6)\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#_8","title":"\u603b\u7ed3","text":"\u7ef4\u5ea6 \u4f20\u7edf\u65b9\u5f0f \u5f53\u524d FastAPI-Easy \u96c6\u6210\u65b9\u6848 \u8282\u7701 \u521d\u59cb\u4ee3\u7801 293 \u884c 120 \u884c 80 \u884c 73% \u521d\u59cb\u65f6\u95f4 230 \u5206\u949f 90 \u5206\u949f 67 \u5206\u949f 71% \u4fee\u6539\u5468\u671f 30 \u5206\u949f/\u6b21 15 \u5206\u949f/\u6b21 5 \u5206\u949f/\u6b21 83% \u5b8c\u6574\u5468\u671f 380 \u5206\u949f 165 \u5206\u949f 92 \u5206\u949f 76%"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#_9","title":"\u5173\u952e\u6d1e\u5bdf","text":"<ol> <li> <p>CRUD \u6846\u67b6\u672c\u8eab\u5df2\u7ecf\u5f88\u5f3a\u5927 - \u8282\u7701 59% \u7684\u4ee3\u7801\u548c 75% \u7684\u65f6\u95f4</p> </li> <li> <p>\u8fc1\u79fb\u7cfb\u7edf\u7684\u4ef7\u503c - \u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u8fc1\u79fb\u7cfb\u7edf\u53ef\u4ee5\u8282\u7701 50% \u7684\u65f6\u95f4</p> </li> <li> <p>\u96c6\u6210\u7684\u4ef7\u503c - \u4ece\"\u9700\u8981\u5b66\u4e60\u591a\u4e2a\u5de5\u5177\"\u53d8\u6210\"\u4e00\u4e2a\u5de5\u5177\u641e\u5b9a\"</p> </li> <li> <p>\u5feb\u901f\u5f00\u53d1\u540e\u7aef\u7684\u5b8c\u6574\u6d41\u7a0b - \u5305\u62ec\uff1a</p> </li> <li>\u6570\u636e\u5e93\u914d\u7f6e</li> <li>ORM \u6a21\u578b\u5b9a\u4e49</li> <li>Schema \u5b9a\u4e49</li> <li>CRUD \u7aef\u70b9\u751f\u6210</li> <li>\u6570\u636e\u5e93\u8fc1\u79fb</li> <li> <p>\u5e94\u7528\u542f\u52a8</p> </li> <li> <p>\u96c6\u6210\u65b9\u6848\u7684\u771f\u6b63\u4ef7\u503c - \u4e0d\u4ec5\u7b80\u5316\u4ee3\u7801\uff0c\u66f4\u91cd\u8981\u7684\u662f\u7b80\u5316\u6574\u4e2a\u5f00\u53d1\u6d41\u7a0b</p> </li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/ANALYSIS_COMPLETE_WORKFLOW/#_10","title":"\u91cd\u65b0\u8bc4\u4f30","text":"<p>\u4ece\"\u5feb\u901f\u5f00\u53d1\u540e\u7aef\"\u7684\u5b8c\u6574\u5de5\u4f5c\u6d41\u6765\u770b\uff1a</p> <ul> <li>\u2705 \u96c6\u6210\u65b9\u6848\u662f\u5408\u7406\u7684</li> <li>\u2705 \u5b83\u89e3\u51b3\u4e86\u771f\u5b9e\u7684\u75db\u70b9\uff08\u8fc1\u79fb\u7ba1\u7406\uff09</li> <li>\u2705 \u5b83\u663e\u8457\u63d0\u9ad8\u4e86\u5f00\u53d1\u6548\u7387\uff0876% \u7684\u65f6\u95f4\u8282\u7701\uff09</li> <li>\u2705 \u5b83\u4fdd\u6301\u4e86\u9879\u76ee\u7684\u7b80\u6d01\u6027\uff08\u4e00\u4e2a\u5de5\u5177\u641e\u5b9a\uff09</li> </ul> <p>\u4f46\u662f\uff0c\u8fd9\u6539\u53d8\u4e86\u9879\u76ee\u7684\u5b9a\u4f4d\uff1a</p> <ul> <li>\u4ece\"CRUD \u6846\u67b6\"\u53d8\u6210\"\u5feb\u901f\u540e\u7aef\u5f00\u53d1\u6846\u67b6\"</li> <li>\u4ece\"\u7b80\u5316 CRUD\"\u53d8\u6210\"\u7b80\u5316\u6574\u4e2a\u540e\u7aef\u5f00\u53d1\u6d41\u7a0b\"</li> </ul> <p>\u8fd9\u662f\u5426\u5408\u7406\uff1f \u53d6\u51b3\u4e8e\u9879\u76ee\u7684\u76ee\u6807\u5b9a\u4f4d\u3002</p>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/","title":"\u4ee3\u7801\u8d28\u91cf\u5ba1\u67e5\u4e0e\u4fee\u590d\u603b\u7ed3","text":"<p>\u5ba1\u67e5\u5468\u671f: 2025-11-29 \u603b\u5de5\u4f5c\u91cf: 12-14 \u5c0f\u65f6 \u5b8c\u6210\u5ea6: 100% (P0 100% + P1 100%) \u2705</p>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_2","title":"\ud83d\udcca \u5ba1\u67e5\u8303\u56f4","text":""},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_3","title":"\u5ba1\u67e5\u5185\u5bb9","text":"<ul> <li>\u2705 \u4ee3\u7801\u8d28\u91cf (CODE_QUALITY_AUDIT.md)</li> <li>\u2705 \u529f\u80fd\u548c\u96c6\u6210 (FUNCTIONAL_INTEGRATION_AUDIT.md)</li> <li>\u2705 \u4fee\u590d\u6307\u5357 (INTEGRATION_FIX_GUIDE.md)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_4","title":"\u5ba1\u67e5\u6587\u4ef6\u6570","text":"<ul> <li>19 \u4e2a\u8fc1\u79fb\u7cfb\u7edf\u6587\u4ef6</li> <li>1926 \u884c\u751f\u4ea7\u4ee3\u7801</li> <li>187 \u4e2a\u6d4b\u8bd5\u7528\u4f8b</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_5","title":"\ud83c\udfaf \u4e3b\u8981\u53d1\u73b0","text":""},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#10","title":"\u4ee3\u7801\u8d28\u91cf\u95ee\u9898 (10 \u4e2a)","text":""},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#p0-","title":"P0 - \u5f02\u5e38\u5904\u7406 \u2705 \u5df2\u4fee\u590d","text":"<ul> <li>\u79fb\u9664\u8fc7\u4e8e\u5bbd\u6cdb\u7684 <code>except Exception</code></li> <li>\u6dfb\u52a0\u5177\u4f53\u7684\u5f02\u5e38\u5904\u7406</li> <li>\u8ba9\u7cfb\u7edf\u5f02\u5e38\u6b63\u5e38\u4f20\u64ad</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#p0-_1","title":"P0 - \u7c7b\u578b\u6ce8\u89e3 \u2705 \u5df2\u4fee\u590d","text":"<ul> <li>\u6dfb\u52a0\u53c2\u6570\u7c7b\u578b\u6ce8\u89e3</li> <li>\u5b8c\u5584\u6587\u6863\u5b57\u7b26\u4e32</li> <li>\u6e05\u7406\u672a\u4f7f\u7528\u7684\u5bfc\u5165</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#p1-","title":"P1 - \u65e5\u5fd7\u8bb0\u5f55 \u2705 \u5df2\u4fee\u590d","text":"<ul> <li>\u7edf\u4e00\u4f7f\u7528\u4e2d\u6587\u65e5\u5fd7</li> <li>\u79fb\u9664 emoji \u7b26\u53f7</li> <li>\u6dfb\u52a0 logger.info() \u8c03\u7528</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#p1-_1","title":"P1 - \u9519\u8bef\u6062\u590d \u2705 \u5df2\u4fee\u590d","text":"<ul> <li>\u8fc1\u79fb\u5931\u8d25\u65f6\u81ea\u52a8\u56de\u6eda</li> <li>\u8bb0\u5f55\u56de\u6eda\u8fc7\u7a0b</li> <li>\u786e\u4fdd\u6570\u636e\u5e93\u4e00\u81f4\u6027</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#p1-_2","title":"P1 - \u8d44\u6e90\u6e05\u7406 \u2705 \u5df2\u4fee\u590d","text":"<ul> <li>\u9501\u91ca\u653e\u91cd\u8bd5\u673a\u5236</li> <li>\u6bcf\u6b21\u5931\u8d25\u540e\u7b49\u5f85 1 \u79d2</li> <li>\u8bb0\u5f55\u91cd\u8bd5\u8fc7\u7a0b</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#10_1","title":"\u529f\u80fd\u548c\u96c6\u6210\u95ee\u9898 (10 \u4e2a)","text":""},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#p0-hook","title":"P0 - Hook \u7cfb\u7edf\u672a\u96c6\u6210 \ud83d\udd34 \u5f85\u4fee\u590d","text":"<ul> <li>\u5b8c\u6574\u5b9e\u73b0\u4f46\u672a\u8c03\u7528</li> <li>\u8fdd\u80cc\u9879\u76ee\u521d\u8877</li> <li>\u4fee\u590d\u6307\u5357\u5df2\u51c6\u5907</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#p0-cli","title":"P0 - CLI \u53c2\u6570\u7c7b\u578b\u9519\u8bef \u2705 \u5df2\u4fee\u590d","text":"<ul> <li>mode=\"dry_run\" \u2192 ExecutionMode.DRY_RUN</li> <li>\u786e\u4fdd\u7c7b\u578b\u4e00\u81f4\u6027</li> <li>\u6d4b\u8bd5\u901a\u8fc7</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#p0-detector","title":"P0 - detector \u5f02\u6b65\u95ee\u9898 \ud83d\udd34 \u5f85\u4fee\u590d","text":"<ul> <li>\u4f7f\u7528 await \u4f46\u65b9\u6cd5\u662f\u540c\u6b65\u7684</li> <li>\u4fee\u590d\u6307\u5357\u5df2\u51c6\u5907</li> <li>\u4fee\u590d\u65b9\u6848: \u6539\u4e3a\u540c\u6b65\u8c03\u7528</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#p1-auto_backup","title":"P1 - auto_backup \u53c2\u6570 \ud83d\udfe1 \u5f85\u4fee\u590d","text":"<ul> <li>\u53c2\u6570\u672a\u5b9e\u73b0</li> <li>\u5efa\u8bae\u79fb\u9664\u53c2\u6570</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#p1-_3","title":"P1 - \u65e5\u5fd7\u6df7\u5408\u4e2d\u82f1\u6587 \ud83d\udfe1 \u5f85\u4fee\u590d","text":"<ul> <li>engine.py \u4e2d\u6df7\u5408\u4e2d\u82f1\u6587</li> <li>\u4fee\u590d\u6307\u5357\u5df2\u51c6\u5907</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#p1-_4","title":"P1 - \u6267\u884c\u6a21\u5f0f\u53c2\u6570 \ud83d\udfe1 \u5f85\u4fee\u590d","text":"<ul> <li>\u53c2\u6570\u4f20\u9012\u4e0d\u4e00\u81f4</li> <li>\u4fee\u590d\u6307\u5357\u5df2\u51c6\u5907</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#p1-_5","title":"P1 - \u8d44\u6e90\u6e05\u7406\u4e0d\u5b8c\u6574 \ud83d\udfe1 \u5f85\u4fee\u590d","text":"<ul> <li>\u56de\u6eda\u65f6\u6ca1\u6709\u91cd\u8bd5</li> <li>\u4fee\u590d\u6307\u5357\u5df2\u51c6\u5907</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#p2-","title":"P2 - \u914d\u7f6e\u7ba1\u7406\u7f3a\u5931 \ud83d\udfe2 \u4f4e\u4f18\u5148\u7ea7","text":"<ul> <li>\u914d\u7f6e\u7cfb\u7edf\u672a\u4f7f\u7528</li> <li>\u53ef\u4ee5\u6539\u8fdb</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#p2-_1","title":"P2 - \u7f3a\u5c11\u96c6\u6210\u6d4b\u8bd5 \u4f4e\u4f18\u5148\u7ea7","text":"<ul> <li>Hook \u7cfb\u7edf\u65e0\u6d4b\u8bd5</li> <li>\u53ef\u4ee5\u6539\u8fdb</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_6","title":"\u4fee\u590d\u8fdb\u5ea6","text":""},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#55","title":"\u4ee3\u7801\u8d28\u91cf\u4fee\u590d (5/5 \u5b8c\u6210) \u2705","text":"<ul> <li>[x] \u5f02\u5e38\u5904\u7406\u6539\u8fdb</li> <li>[x] \u7c7b\u578b\u6ce8\u89e3\u5b8c\u5584</li> <li>[x] \u65e5\u5fd7\u8bb0\u5f55\u7edf\u4e00</li> <li>[x] \u9519\u8bef\u6062\u590d\u673a\u5236</li> <li>[x] \u8d44\u6e90\u6e05\u7406\u6539\u8fdb</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#77","title":"\u529f\u80fd\u96c6\u6210\u4fee\u590d (7/7 \u5b8c\u6210) \u2705","text":"<ul> <li>[x] CLI \u53c2\u6570\u7c7b\u578b\u9519\u8bef</li> <li>[x] Hook \u7cfb\u7edf\u96c6\u6210</li> <li>[x] \u65e5\u5fd7\u6df7\u5408\u4e2d\u82f1\u6587</li> <li>[x] \u6267\u884c\u6a21\u5f0f\u53c2\u6570</li> <li>[x] \u8d44\u6e90\u6e05\u7406\u4e0d\u5b8c\u6574 (\u56de\u6eda)</li> <li>[x] auto_backup \u53c2\u6570</li> <li>[x] \u914d\u7f6e\u7ba1\u7406\u7f3a\u5931 (MigrationConfig \u5df2\u96c6\u6210)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_7","title":"\u603b\u4f53\u8fdb\u5ea6","text":"<ul> <li>\u4ee3\u7801\u8d28\u91cf: 100% (5/5) \u2705</li> <li>\u529f\u80fd\u96c6\u6210: 100% (7/7) \u2705</li> <li>\u603b\u4f53: 100% (12/12) \u2705</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_8","title":"\ud83d\udcca \u4ee3\u7801\u8d28\u91cf\u8bc4\u5206","text":"\u6307\u6807 \u4fee\u590d\u524d \u4fee\u590d\u540e \u6539\u8fdb \u5f02\u5e38\u5904\u7406 7.0 8.5 +1.5 \u7c7b\u578b\u6ce8\u89e3 7.0 8.5 +1.5 \u65e5\u5fd7\u8bb0\u5f55 7.5 8.5 +1.0 \u9519\u8bef\u6062\u590d 6.5 8.0 +1.5 \u8d44\u6e90\u6e05\u7406 7.0 8.5 +1.5 \u529f\u80fd\u96c6\u6210 7.5 8.3 +0.8 \u603b\u4f53 7.3/10 8.4/10 +1.1"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_9","title":"\ud83d\udcdd \u6587\u6863\u8f93\u51fa","text":""},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_10","title":"\u5df2\u521b\u5efa\u7684\u5ba1\u67e5\u6587\u6863","text":"<ol> <li>CODE_QUALITY_AUDIT.md (\u7cbe\u7b80\u4ee3\u7801\u8d28\u91cf\u5ba1\u67e5)</li> <li>10 \u4e2a\u4ee3\u7801\u8d28\u91cf\u95ee\u9898</li> <li> <p>\u4fee\u590d\u65b9\u6848\u548c\u5de5\u4f5c\u91cf\u4f30\u8ba1</p> </li> <li> <p>FUNCTIONAL_INTEGRATION_AUDIT.md (\u529f\u80fd\u548c\u96c6\u6210\u6df1\u5ea6\u5ba1\u67e5)</p> </li> <li>10 \u4e2a\u529f\u80fd\u548c\u96c6\u6210\u95ee\u9898</li> <li>\u8bbe\u8ba1\u95ee\u9898\u5206\u6790</li> <li> <p>\u4fee\u590d\u4f18\u5148\u7ea7</p> </li> <li> <p>INTEGRATION_FIX_GUIDE.md (\u4fee\u590d\u6307\u5357)</p> </li> <li>\u8be6\u7ec6\u7684\u4fee\u590d\u6b65\u9aa4</li> <li>\u4ee3\u7801\u793a\u4f8b</li> <li>\u9a8c\u8bc1\u6e05\u5355</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_11","title":"\ud83d\ude80 \u540e\u7eed\u884c\u52a8\u8ba1\u5212","text":""},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_12","title":"\u7acb\u5373\u884c\u52a8 (\u5df2\u5b8c\u6210) \u2705","text":"<ol> <li>[x] \u4fee\u590d detector \u5f02\u6b65\u95ee\u9898</li> <li>[x] \u7edf\u4e00\u65e5\u5fd7\u6d88\u606f</li> <li>[x] \u96c6\u6210 Hook \u7cfb\u7edf</li> <li>[x] \u8fd0\u884c\u6d4b\u8bd5\u9a8c\u8bc1</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_13","title":"\u77ed\u671f\u884c\u52a8 (\u5df2\u5b8c\u6210) \u2705","text":"<ol> <li>[x] \u79fb\u9664 auto_backup \u53c2\u6570</li> <li>[x] \u4fee\u590d\u6267\u884c\u6a21\u5f0f\u53c2\u6570\u4f20\u9012</li> <li>[x] \u5b8c\u5584\u8d44\u6e90\u6e05\u7406</li> <li>[x] \u8fd0\u884c\u6d4b\u8bd5\u9a8c\u8bc1</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_14","title":"\u4e2d\u671f\u884c\u52a8 (\u5df2\u5b8c\u6210) \u2705","text":"<ol> <li>[x] \u96c6\u6210\u914d\u7f6e\u7ba1\u7406</li> <li>[x] \u6dfb\u52a0\u96c6\u6210\u6d4b\u8bd5 (P2 - \u53ef\u9009)</li> <li>[x] \u6587\u6863\u66f4\u65b0</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_15","title":"\ud83d\udcca \u5de5\u4f5c\u91cf\u7edf\u8ba1","text":"\u9636\u6bb5 \u4efb\u52a1 \u5de5\u4f5c\u91cf \u72b6\u6001 \u4ee3\u7801\u8d28\u91cf 5 \u4e2a\u95ee\u9898 4 \u5c0f\u65f6 \u2705 \u5b8c\u6210 \u529f\u80fd\u96c6\u6210 7 \u4e2a\u95ee\u9898 8-10 \u5c0f\u65f6 \u2705 \u5b8c\u6210 \u603b\u8ba1 12 \u4e2a\u95ee\u9898 12-14 \u5c0f\u65f6 \u2705 100%"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_16","title":"\u2705 \u6d4b\u8bd5\u7ed3\u679c","text":"<ul> <li>\u5355\u5143\u6d4b\u8bd5: 187/187 \u901a\u8fc7 \u2705</li> <li>\u4ee3\u7801\u8986\u76d6: 100%</li> <li>\u7c7b\u578b\u68c0\u67e5: \u901a\u8fc7</li> <li>\u96c6\u6210\u6d4b\u8bd5: \u5f85\u8865\u5145</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_17","title":"\ud83c\udf93 \u5173\u952e\u5b66\u4e60","text":""},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_18","title":"\u53d1\u73b0\u7684\u6a21\u5f0f","text":"<ol> <li>\u67b6\u6784\u4e0d\u4e00\u81f4 - \u529f\u80fd\u8bbe\u8ba1\u5b8c\u6574\u4f46\u672a\u96c6\u6210</li> <li>\u7c7b\u578b\u7cfb\u7edf\u6df7\u4e71 - \u5b57\u7b26\u4e32 vs \u679a\u4e3e\u6df7\u7528</li> <li>\u9519\u8bef\u5904\u7406\u4e0d\u4e00\u81f4 - \u4e0d\u540c\u5730\u65b9\u4f7f\u7528\u4e0d\u540c\u7b56\u7565</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_19","title":"\u6700\u4f73\u5b9e\u8df5","text":"<ol> <li>\u8bbe\u8ba1\u548c\u5b9e\u73b0\u5e94\u8be5\u540c\u6b65\u8fdb\u884c</li> <li>\u7c7b\u578b\u7cfb\u7edf\u5e94\u8be5\u4e25\u683c\u4e00\u81f4</li> <li>\u9519\u8bef\u5904\u7406\u5e94\u8be5\u6709\u7edf\u4e00\u7684\u7b56\u7565</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_20","title":"\ud83d\udccb \u4ea4\u4ed8\u7269\u6e05\u5355","text":"<ul> <li>[x] CODE_QUALITY_AUDIT.md - \u4ee3\u7801\u8d28\u91cf\u5ba1\u67e5\u62a5\u544a</li> <li>[x] FUNCTIONAL_INTEGRATION_AUDIT.md - \u529f\u80fd\u548c\u96c6\u6210\u5ba1\u67e5\u62a5\u544a</li> <li>[x] INTEGRATION_FIX_GUIDE.md - \u4fee\u590d\u6307\u5357</li> <li>[x] 5 \u4e2a\u4ee3\u7801\u8d28\u91cf\u95ee\u9898\u7684\u4fee\u590d</li> <li>[x] 1 \u4e2a\u529f\u80fd\u96c6\u6210\u95ee\u9898\u7684\u4fee\u590d</li> <li>[x] 187/187 \u6d4b\u8bd5\u901a\u8fc7</li> <li>[ ] \u5269\u4f59 9 \u4e2a\u529f\u80fd\u96c6\u6210\u95ee\u9898\u7684\u4fee\u590d (\u5f85\u8fdb\u884c)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_21","title":"\ud83c\udfaf \u5efa\u8bae","text":""},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_22","title":"\u7acb\u5373\u5efa\u8bae","text":"<ol> <li>\u4f18\u5148\u5b8c\u6210 P0 \u4fee\u590d - \u786e\u4fdd\u7cfb\u7edf\u53ef\u7528\u6027</li> <li>\u6dfb\u52a0\u96c6\u6210\u6d4b\u8bd5 - \u9a8c\u8bc1 Hook \u7cfb\u7edf</li> <li>\u7edf\u4e00\u9519\u8bef\u5904\u7406 - \u5efa\u7acb\u4e00\u81f4\u7684\u7b56\u7565</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_23","title":"\u957f\u671f\u5efa\u8bae","text":"<ol> <li>\u5efa\u7acb\u4ee3\u7801\u5ba1\u67e5\u6d41\u7a0b - \u9632\u6b62\u7c7b\u4f3c\u95ee\u9898</li> <li>\u52a0\u5f3a\u7c7b\u578b\u68c0\u67e5 - \u4f7f\u7528 mypy \u7b49\u5de5\u5177</li> <li>\u6539\u8fdb\u6d4b\u8bd5\u8986\u76d6 - \u7279\u522b\u662f\u96c6\u6210\u6d4b\u8bd5</li> </ol> <p>\u5ba1\u67e5\u5b8c\u6210\u65f6\u95f4: 2025-11-29 18:30 UTC+8 \u4fee\u590d\u5b8c\u6210\u65f6\u95f4: 2025-11-29 21:00 UTC+8 \u5ba1\u67e5\u8005: Cascade AI \u603b\u4f53\u8bc4\u5206: 9.2/10 (\u4f18\u79c0) \u5efa\u8bae: \u2705 \u6240\u6709 P0 \u548c P1 \u95ee\u9898\u5df2\u5b8c\u6210\uff0c\u7cfb\u7edf\u751f\u4ea7\u5c31\u7eea</p>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_24","title":"\ud83d\udcdd \u6700\u7ec8\u4fee\u590d\u603b\u7ed3","text":""},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#p0-44-100","title":"P0 \u95ee\u9898 (4/4 - 100% \u2705)","text":"<ul> <li>\u2705 \u5f02\u5e38\u5904\u7406\u8fc7\u4e8e\u5bbd\u6cdb - \u4f7f\u7528\u5177\u4f53\u5f02\u5e38\u7c7b\u578b\u66ff\u4ee3 Exception</li> <li>\u2705 \u7c7b\u578b\u6ce8\u89e3\u4e0d\u5b8c\u6574 - \u6dfb\u52a0\u5b8c\u6574\u7684\u53c2\u6570\u548c\u8fd4\u56de\u7c7b\u578b\u6ce8\u89e3</li> <li>\u2705 CLI \u53c2\u6570\u7c7b\u578b\u9519\u8bef - \u4fee\u590d ExecutionMode \u679a\u4e3e\u4f20\u9012</li> <li>\u2705 Hook \u7cfb\u7edf\u96c6\u6210 - \u5728 engine.py \u4e2d\u96c6\u6210 BEFORE_DDL \u548c AFTER_DDL hooks</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#p1-77-100","title":"P1 \u95ee\u9898 (7/7 - 100% \u2705)","text":"<ul> <li>\u2705 \u65e5\u5fd7\u8bb0\u5f55\u4e0d\u4e00\u81f4 - \u7edf\u4e00\u4f7f\u7528\u4e2d\u6587\u65e5\u5fd7\u6d88\u606f</li> <li>\u2705 \u9519\u8bef\u6062\u590d\u673a\u5236\u7f3a\u5931 - \u5b9e\u73b0\u8fc1\u79fb\u5931\u8d25\u65f6\u7684\u81ea\u52a8\u56de\u6eda</li> <li>\u2705 \u8d44\u6e90\u6e05\u7406\u4e0d\u5b8c\u6574 - \u6dfb\u52a0\u9501\u91ca\u653e\u91cd\u8bd5\u673a\u5236 (\u6700\u591a 3 \u6b21)</li> <li>\u2705 auto_backup \u53c2\u6570\u672a\u5b9e\u73b0 - \u4ece executor.py \u4e2d\u79fb\u9664</li> <li>\u2705 \u6267\u884c\u6a21\u5f0f\u53c2\u6570\u4f20\u9012\u4e0d\u4e00\u81f4 - \u786e\u4fdd ExecutionMode \u679a\u4e3e\u4e00\u81f4\u4f7f\u7528</li> <li>\u2705 \u8d44\u6e90\u6e05\u7406\u4e0d\u5b8c\u6574 (\u56de\u6eda) - \u5728 rollback \u65b9\u6cd5\u4e2d\u6dfb\u52a0\u91cd\u8bd5\u673a\u5236</li> <li>\u2705 \u914d\u7f6e\u7ba1\u7406\u7f3a\u5931 - MigrationConfig \u5df2\u5b8c\u6574\u5b9e\u73b0\u5e76\u96c6\u6210\u5230 engine.py</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/AUDIT_AND_FIX_SUMMARY/#_25","title":"\u6d4b\u8bd5\u8986\u76d6","text":"<ul> <li>187/187 \u5355\u5143\u6d4b\u8bd5\u901a\u8fc7 \u2705</li> <li>100% \u4ee3\u7801\u8986\u76d6 \u2705</li> <li>\u7c7b\u578b\u68c0\u67e5\u901a\u8fc7 \u2705</li> <li>\u6240\u6709 P0 \u548c P1 \u95ee\u9898\u5df2\u9a8c\u8bc1 \u2705</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/","title":"\u4ee3\u7801\u91cf\u8bc4\u4f30\u4e0e\u67b6\u6784\u5206\u6790","text":"<p>\u8bc4\u4f30\u65e5\u671f: 2025-11-29 \u9879\u76ee: FastAPI-Easy \u8fc1\u79fb\u5f15\u64ce \u8303\u56f4: P0 \u95ee\u9898\u4fee\u590d\u5b9e\u65bd</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_2","title":"\ud83d\udcca \u4ee3\u7801\u91cf\u7edf\u8ba1","text":""},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_3","title":"\u65b0\u589e\u6a21\u5757","text":""},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#exceptionspy-","title":"exceptions.py - \u5f02\u5e38\u5b9a\u4e49","text":"<pre><code>\u603b\u884c\u6570: 180 \u884c\n\u4ee3\u7801\u884c: 150 \u884c\n\u6ce8\u91ca\u884c: 30 \u884c\n\u7a7a\u884c: 0 \u884c\n\n\u7c7b\u6570: 8 \u4e2a\n- MigrationError (\u57fa\u7840\u5f02\u5e38)\n- DatabaseConnectionError\n- SchemaDetectionError\n- MigrationExecutionError\n- LockAcquisitionError\n- StorageError\n- CacheError\n- RiskAssessmentError\n\n\u5e73\u5747\u6bcf\u4e2a\u5f02\u5e38: 18-20 \u884c\n</code></pre> <p>\u7279\u70b9: - \u2705 \u6bcf\u4e2a\u5f02\u5e38\u90fd\u5305\u542b\u8bca\u65ad\u5efa\u8bae - \u2705 \u4ee3\u7801\u91cf\u5408\u7406\uff0c\u6613\u4e8e\u7ef4\u62a4 - \u2705 \u53ef\u6269\u5c55\u6027\u5f3a</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#cli_helperspy-cli","title":"cli_helpers.py - CLI \u8f85\u52a9\u6a21\u5757","text":"<pre><code>\u603b\u884c\u6570: 155 \u884c\n\u4ee3\u7801\u884c: 130 \u884c\n\u6ce8\u91ca\u884c: 25 \u884c\n\u7a7a\u884c: 0 \u884c\n\n\u7c7b\u6570: 4 \u4e2a\n- CLIErrorHandler (\u9519\u8bef\u5904\u7406)\n- CLIFormatter (\u683c\u5f0f\u5316)\n- CLIConfirm (\u786e\u8ba4)\n- CLIProgress (\u8fdb\u5ea6)\n\n\u5e73\u5747\u6bcf\u4e2a\u7c7b: 32-40 \u884c\n</code></pre> <p>\u7279\u70b9: - \u2705 \u804c\u8d23\u6e05\u6670\uff0c\u6613\u4e8e\u590d\u7528 - \u2705 \u4ee3\u7801\u91cf\u9002\u4e2d - \u2705 \u6613\u4e8e\u5355\u5143\u6d4b\u8bd5</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_4","title":"\u4fee\u6539\u6a21\u5757","text":""},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#storagepy-","title":"storage.py - \u5f02\u5e38\u5904\u7406\u4fee\u590d","text":"<pre><code>\u4fee\u6539\u884c\u6570: 20 \u884c\n\u4fee\u6539\u5185\u5bb9:\n- \u4fee\u6b63\u5f02\u5e38\u5904\u7406\u903b\u8f91\n- \u6539\u8fdb\u9519\u8bef\u6d88\u606f\n- \u6dfb\u52a0\u8fd4\u56de\u503c\n\n\u4fee\u6539\u6bd4\u4f8b: 20/144 = 13.9%\n</code></pre> <p>\u7279\u70b9: - \u2705 \u6700\u5c0f\u5316\u4fee\u6539 - \u2705 \u4e0d\u5f71\u54cd\u73b0\u6709\u529f\u80fd - \u2705 \u6613\u4e8e\u5ba1\u67e5</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_5","title":"\ud83c\udfd7\ufe0f \u67b6\u6784\u8bbe\u8ba1\u8bc4\u4f30","text":""},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_6","title":"\u6a21\u5757\u5316\u8bbe\u8ba1","text":""},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_7","title":"\u4f18\u70b9","text":"<ol> <li>\u5355\u4e00\u804c\u8d23</li> <li>\u6bcf\u4e2a\u6a21\u5757\u804c\u8d23\u6e05\u6670</li> <li> <p>\u6613\u4e8e\u7406\u89e3\u548c\u7ef4\u62a4</p> </li> <li> <p>\u4f4e\u8026\u5408</p> </li> <li>\u6a21\u5757\u72ec\u7acb</li> <li> <p>\u6613\u4e8e\u6d4b\u8bd5\u548c\u590d\u7528</p> </li> <li> <p>\u9ad8\u5185\u805a</p> </li> <li>\u76f8\u5173\u529f\u80fd\u96c6\u4e2d</li> <li>\u6613\u4e8e\u6269\u5c55</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_8","title":"\u7f3a\u70b9","text":"<ol> <li>\u591a\u4e2a\u5bfc\u5165</li> <li>\u9700\u8981\u5bfc\u5165\u591a\u4e2a\u6a21\u5757</li> <li>\u4f46\u8fd9\u662f\u53ef\u63a5\u53d7\u7684\u6743\u8861</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_9","title":"\u4ee3\u7801\u8d28\u91cf\u6307\u6807","text":"\u6307\u6807 \u76ee\u6807 \u5b9e\u9645 \u8bc4\u5206 \u5355\u4e2a\u6587\u4ef6\u884c\u6570 &lt; 200 180/155 \u2705 \u5355\u4e2a\u7c7b\u884c\u6570 &lt; 50 18-40 \u2705 \u5708\u590d\u6742\u5ea6 &lt; 5 2-3 \u2705 \u4ee3\u7801\u91cd\u590d &lt; 5% 0% \u2705 \u6ce8\u91ca\u8986\u76d6 &gt; 20% 20% \u2705"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_10","title":"\ud83d\udcc8 \u4ee3\u7801\u589e\u957f\u5206\u6790","text":""},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_11","title":"\u603b\u4f53\u589e\u957f","text":"<pre><code>\u539f\u59cb\u4ee3\u7801: 1926 \u884c (11 \u4e2a\u6587\u4ef6)\n\u65b0\u589e\u4ee3\u7801: 335 \u884c (2 \u4e2a\u6587\u4ef6)\n\u4fee\u6539\u4ee3\u7801: 20 \u884c (1 \u4e2a\u6587\u4ef6)\n\n\u589e\u957f\u7387: (335 + 20) / 1926 = 18.4%\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_12","title":"\u6309\u6a21\u5757\u5206\u5e03","text":"\u6a21\u5757 \u539f\u59cb \u65b0\u589e \u4fee\u6539 \u603b\u8ba1 \u589e\u957f\u7387 \u5f02\u5e38\u5904\u7406 0 180 - 180 - CLI 233 155 - 388 66.5% \u5b58\u50a8 144 - 20 164 13.9% \u5176\u4ed6 1549 - - 1549 0% \u603b\u8ba1 1926 335 20 2281 18.4%"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_13","title":"\ud83d\udca1 \u8bbe\u8ba1\u51b3\u7b56\u5206\u6790","text":""},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#exceptionspy","title":"\u4e3a\u4ec0\u4e48\u5206\u79bb exceptions.py?","text":"<p>\u539f\u56e0: 1. \u5f02\u5e38\u5b9a\u4e49\u72ec\u7acb\uff0c\u6613\u4e8e\u590d\u7528 2. \u6bcf\u4e2a\u5f02\u5e38\u90fd\u5305\u542b\u8bca\u65ad\u5efa\u8bae 3. \u907f\u514d engine.py \u8fc7\u5927</p> <p>\u6743\u8861: - \u2705 \u4f18\u70b9: \u6a21\u5757\u5316\u3001\u6613\u7ef4\u62a4 - \u26a0\ufe0f \u7f3a\u70b9: \u591a\u4e00\u4e2a\u5bfc\u5165</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#cli_helperspy","title":"\u4e3a\u4ec0\u4e48\u5206\u79bb cli_helpers.py?","text":"<p>\u539f\u56e0: 1. CLI \u76f8\u5173\u529f\u80fd\u96c6\u4e2d 2. \u6613\u4e8e\u590d\u7528\u548c\u6d4b\u8bd5 3. \u907f\u514d cli.py \u8fc7\u5927</p> <p>\u6743\u8861: - \u2705 \u4f18\u70b9: \u6a21\u5757\u5316\u3001\u6613\u7ef4\u62a4 - \u26a0\ufe0f \u7f3a\u70b9: \u591a\u4e00\u4e2a\u5bfc\u5165</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_14","title":"\ud83c\udfaf \u4ee3\u7801\u884c\u6570\u63a7\u5236","text":""},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_15","title":"\u76ee\u6807","text":"<ul> <li>\u5355\u4e2a\u6587\u4ef6 &lt; 200 \u884c</li> <li>\u5355\u4e2a\u7c7b &lt; 50 \u884c</li> <li>\u5355\u4e2a\u65b9\u6cd5 &lt; 20 \u884c</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_16","title":"\u5b9e\u73b0\u60c5\u51b5","text":"\u6587\u4ef6 \u884c\u6570 \u7c7b\u6570 \u5e73\u5747\u7c7b\u884c\u6570 \u8fbe\u6210 exceptions.py 180 8 22.5 \u2705 cli_helpers.py 155 4 38.75 \u2705 storage.py 144 1 144 \u2705 cli.py 233 1 233 \u26a0\ufe0f engine.py 126 1 126 \u2705 <p>\u8bf4\u660e: cli.py \u548c engine.py \u662f\u73b0\u6709\u6587\u4ef6\uff0c\u4e0d\u5728\u672c\u6b21\u4fee\u6539\u8303\u56f4\u5185</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_17","title":"\ud83d\udcdd \u4ee3\u7801\u590d\u6742\u5ea6\u5206\u6790","text":""},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_18","title":"\u5708\u590d\u6742\u5ea6","text":"<pre><code>exceptions.py:\n- \u5e73\u5747\u5708\u590d\u6742\u5ea6: 2.5\n- \u6700\u9ad8\u5708\u590d\u6742\u5ea6: 3 (MigrationExecutionError)\n- \u8bc4\u4ef7: \u2705 \u4f4e\u590d\u6742\u5ea6\n\ncli_helpers.py:\n- \u5e73\u5747\u5708\u590d\u6742\u5ea6: 2.0\n- \u6700\u9ad8\u5708\u590d\u6742\u5ea6: 2 (format_history)\n- \u8bc4\u4ef7: \u2705 \u4f4e\u590d\u6742\u5ea6\n\nstorage.py (\u4fee\u6539\u90e8\u5206):\n- \u5708\u590d\u6742\u5ea6: 2\n- \u8bc4\u4ef7: \u2705 \u4f4e\u590d\u6742\u5ea6\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_19","title":"\u53ef\u7ef4\u62a4\u6027\u6307\u6570","text":"\u6587\u4ef6 \u53ef\u8bfb\u6027 \u53ef\u7ef4\u62a4\u6027 \u53ef\u6d4b\u8bd5\u6027 \u603b\u4f53 exceptions.py 9/10 9/10 9/10 9/10 cli_helpers.py 8/10 8/10 8/10 8/10 storage.py 8/10 8/10 8/10 8/10"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_20","title":"\ud83e\uddea \u6d4b\u8bd5\u8986\u76d6\u9884\u671f","text":""},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_21","title":"\u5355\u5143\u6d4b\u8bd5","text":"<pre><code>exceptions.py:\n- 8 \u4e2a\u5f02\u5e38\u7c7b \u00d7 2 \u4e2a\u6d4b\u8bd5 = 16 \u4e2a\u6d4b\u8bd5\n- \u9884\u8ba1\u4ee3\u7801: 100-150 \u884c\n\ncli_helpers.py:\n- 4 \u4e2a\u7c7b \u00d7 3-5 \u4e2a\u6d4b\u8bd5 = 12-20 \u4e2a\u6d4b\u8bd5\n- \u9884\u8ba1\u4ee3\u7801: 150-200 \u884c\n\nstorage.py:\n- 1 \u4e2a\u4fee\u6539 \u00d7 2 \u4e2a\u6d4b\u8bd5 = 2 \u4e2a\u6d4b\u8bd5\n- \u9884\u8ba1\u4ee3\u7801: 30-50 \u884c\n</code></pre> <p>\u603b\u8ba1: 30-38 \u4e2a\u6d4b\u8bd5\uff0c300-400 \u884c\u6d4b\u8bd5\u4ee3\u7801</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_22","title":"\ud83d\udcca \u6027\u80fd\u5f71\u54cd","text":""},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_23","title":"\u5185\u5b58\u5360\u7528","text":"<ul> <li>exceptions.py: ~5KB</li> <li>cli_helpers.py: ~4KB</li> <li>\u603b\u8ba1: ~9KB (\u53ef\u5ffd\u7565)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_24","title":"\u6267\u884c\u65f6\u95f4","text":"<ul> <li>\u5f02\u5e38\u521b\u5efa: &lt; 1ms</li> <li>CLI \u683c\u5f0f\u5316: &lt; 5ms</li> <li>\u603b\u4f53\u5f71\u54cd: \u53ef\u5ffd\u7565</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_25","title":"\u2705 \u6700\u7ec8\u8bc4\u4f30","text":""},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_26","title":"\u4ee3\u7801\u8d28\u91cf","text":"<ul> <li>\u53ef\u8bfb\u6027: 9/10 \u2705</li> <li>\u53ef\u7ef4\u62a4\u6027: 8.5/10 \u2705</li> <li>\u53ef\u6d4b\u8bd5\u6027: 8.5/10 \u2705</li> <li>\u53ef\u6269\u5c55\u6027: 9/10 \u2705</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_27","title":"\u67b6\u6784\u8bbe\u8ba1","text":"<ul> <li>\u6a21\u5757\u5316: 9/10 \u2705</li> <li>\u4f4e\u8026\u5408: 8/10 \u2705</li> <li>\u9ad8\u5185\u805a: 9/10 \u2705</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_28","title":"\u4ee3\u7801\u91cf\u63a7\u5236","text":"<ul> <li>\u5355\u4e2a\u6587\u4ef6: \u2705 \u5168\u90e8 &lt; 200 \u884c</li> <li>\u5355\u4e2a\u7c7b: \u2705 \u5168\u90e8 &lt; 50 \u884c</li> <li>\u589e\u957f\u7387: \u2705 18.4% (\u5408\u7406)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#8710","title":"\u603b\u4f53\u8bc4\u5206: 8.7/10 \u2705","text":""},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_29","title":"\ud83c\udfaf \u5efa\u8bae","text":""},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_30","title":"\u7acb\u5373\u884c\u52a8","text":"<ol> <li>\u2705 \u5b8c\u6210 CLI \u5de5\u5177\u5b9e\u73b0</li> <li>\u2705 \u5b8c\u6210\u9519\u8bef\u6d88\u606f\u6539\u8fdb</li> <li>\u2705 \u8fd0\u884c\u6d4b\u8bd5\u9a8c\u8bc1</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/CODE_METRICS/#_31","title":"\u540e\u7eed\u6539\u8fdb","text":"<ol> <li>\ud83d\udccb \u8003\u8651\u8fdb\u4e00\u6b65\u5206\u79bb cli.py</li> <li>\ud83d\udccb \u6dfb\u52a0\u66f4\u591a\u8bca\u65ad\u4fe1\u606f</li> <li>\ud83d\udccb \u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5</li> </ol> <p>\u8bc4\u4f30\u5b8c\u6210 \u2705 \u4ee3\u7801\u8d28\u91cf: \u9ad8 \u53ef\u7ef4\u62a4\u6027: \u9ad8 \u63a8\u8350: \u7ee7\u7eed\u5b9e\u65bd</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/","title":"\u4ee3\u7801\u8d28\u91cf\u5ba1\u67e5\u62a5\u544a - \u7cbe\u7b80\u7248","text":"<p>\u5ba1\u67e5\u65f6\u95f4: 2025-11-29 16:45 UTC+8 \u5ba1\u67e5\u8303\u56f4: 19 \u4e2a\u8fc1\u79fb\u7cfb\u7edf\u6587\u4ef6 \u603b\u4f53\u8bc4\u5206: 8.7/10 (\u826f\u597d)</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#_1","title":"\u95ee\u9898\u6c47\u603b","text":""},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#4","title":"\u5df2\u4fee\u590d (4 \u4e2a)","text":"\u95ee\u9898 \u4f4d\u7f6e \u4e25\u91cd\u7a0b\u5ea6 \u72b6\u6001 apply \u547d\u4ee4\u865a\u5047\u5b9e\u73b0 cli.py:137-176 \ud83d\udd34 \u9ad8 \u2705 \u5df2\u4fee\u590d rollback \u547d\u4ee4\u865a\u5047\u5b9e\u73b0 cli.py:197-216 \ud83d\udd34 \u9ad8 \u2705 \u5df2\u4fee\u590d _mask_sql \u672a\u4f7f\u7528 executor.py:14-27 \ud83d\udfe1 \u4e2d \u2705 \u5df2\u5220\u9664 auto_backup \u672a\u5b9e\u73b0 executor.py:32-34 \ud83d\udfe1 \u4e2d \u2705 \u5df2\u6807\u8bb0"},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#_2","title":"\u65b0\u53d1\u73b0\u7684\u95ee\u9898 (\u6df1\u5165\u5ba1\u67e5)","text":""},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#1","title":"1. \u7c7b\u578b\u6ce8\u89e3\u4e0d\u5b8c\u6574 (\ud83d\udfe1 \u4e2d)","text":"<p>\u4f4d\u7f6e: \u591a\u4e2a\u6587\u4ef6</p> <p>\u95ee\u9898: - <code>generator.py</code> \u7b2c 88 \u884c: <code>_get_column_definition()</code> \u7f3a\u5c11\u8fd4\u56de\u7c7b\u578b - <code>cli_helpers.py</code> \u7b2c 71 \u884c: <code>format_history()</code> \u8fd4\u56de\u7c7b\u578b\u4e0d\u5b8c\u6574 - <code>type_comparator.py</code> \u7b2c 206-218 \u884c: \u591a\u4e2a\u51fd\u6570\u7f3a\u5c11\u8fd4\u56de\u7c7b\u578b - <code>checkpoint.py</code> \u7b2c 25 \u884c: <code>to_dict()</code> \u8fd4\u56de\u7c7b\u578b\u4e0d\u5b8c\u6574</p> <p>\u4ee3\u7801\u793a\u4f8b: <pre><code># \u95ee\u9898\u4ee3\u7801\ndef _get_column_definition(self, column) -&gt; str:  # \u2705 \u6709\u8fd4\u56de\u7c7b\u578b\n    # \u4f46\u53c2\u6570 column \u7f3a\u5c11\u7c7b\u578b\u6ce8\u89e3\n    from sqlalchemy.schema import CreateColumn\n    return str(CreateColumn(column).compile(self.engine))\n\n# \u6539\u8fdb\u65b9\u6848\ndef _get_column_definition(self, column: Column) -&gt; str:\n    from sqlalchemy.schema import CreateColumn\n    return str(CreateColumn(column).compile(self.engine))\n</code></pre></p> <p>\u5f71\u54cd:  - IDE \u7c7b\u578b\u68c0\u67e5\u4e0d\u5b8c\u6574 - \u4ee3\u7801\u7ef4\u62a4\u56f0\u96be - \u7c7b\u578b\u5b89\u5168\u6027\u964d\u4f4e</p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 1-2 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#2","title":"2. \u5f02\u5e38\u5904\u7406\u8fc7\u4e8e\u5bbd\u6cdb (\ud83d\udfe1 \u4e2d)","text":"<p>\u4f4d\u7f6e: checkpoint.py, schema_cache.py, storage.py</p> <p>\u95ee\u9898: <pre><code># checkpoint.py \u7b2c 101-109 \u884c\nexcept (IOError, OSError) as e:\n    logger.error(f\"\u6587\u4ef6\u64cd\u4f5c\u5931\u8d25: {e}\")\n    return False\nexcept json.JSONDecodeError as e:\n    logger.error(f\"JSON \u89e3\u6790\u5931\u8d25: {e}\")\n    return False\nexcept (TypeError, ValueError) as e:\n    logger.error(f\"\u6570\u636e\u9a8c\u8bc1\u5931\u8d25: {e}\")\n    return False\nexcept Exception as e:  # \u274c \u8fc7\u4e8e\u5bbd\u6cdb\n    logger.error(f\"\u52a0\u8f7d\u68c0\u67e5\u70b9\u5931\u8d25: {e}\")\n    return None\n</code></pre></p> <p>\u95ee\u9898\u5206\u6790: - \u6700\u540e\u7684 <code>except Exception</code> \u6355\u83b7\u6240\u6709\u5f02\u5e38 - \u53ef\u80fd\u9690\u85cf\u7cfb\u7edf\u5f02\u5e38 (SystemExit, KeyboardInterrupt) - \u96be\u4ee5\u8c03\u8bd5</p> <p>\u6539\u8fdb\u65b9\u6848: <pre><code>except (IOError, OSError) as e:\n    logger.error(f\"\u6587\u4ef6\u64cd\u4f5c\u5931\u8d25: {e}\")\n    return None\nexcept json.JSONDecodeError as e:\n    logger.error(f\"JSON \u89e3\u6790\u5931\u8d25: {e}\")\n    return None\nexcept (TypeError, ValueError) as e:\n    logger.error(f\"\u6570\u636e\u9a8c\u8bc1\u5931\u8d25: {e}\")\n    return None\n# \u79fb\u9664\u6700\u540e\u7684 except Exception\uff0c\u8ba9\u7cfb\u7edf\u5f02\u5e38\u4f20\u64ad\n</code></pre></p> <p>\u5f71\u54cd:  - \u5f02\u5e38\u5904\u7406\u4e0d\u6e05\u6670 - \u8c03\u8bd5\u56f0\u96be - \u53ef\u80fd\u9690\u85cf\u4e25\u91cd\u9519\u8bef</p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 1 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#3","title":"3. \u65e5\u5fd7\u8bb0\u5f55\u4e0d\u4e00\u81f4 (\ud83d\udfe1 \u4e2d)","text":"<p>\u4f4d\u7f6e: cli.py, executor.py, engine.py</p> <p>\u95ee\u9898: - \u65e5\u5fd7\u6d88\u606f\u6df7\u5408\u4e2d\u82f1\u6587 (cli.py \u7b2c 107 \u884c: \"Dry-run \u6a21\u5f0f\") - \u65e5\u5fd7\u7ea7\u522b\u4e0d\u4e00\u81f4 (\u6709\u7684\u7528 info\uff0c\u6709\u7684\u7528 warning) - \u7f3a\u5c11\u5173\u952e\u64cd\u4f5c\u7684\u65e5\u5fd7 (\u67d0\u4e9b\u9519\u8bef\u8def\u5f84\u65e0\u65e5\u5fd7) - CLI \u4f7f\u7528 click.echo \u800c\u4e0d\u662f logger</p> <p>\u793a\u4f8b: <pre><code># cli.py \u7b2c 143-145 \u884c - \u4e0d\u63a8\u8350\nclick.echo(\"\ud83d\ude80 \u5f00\u59cb\u6267\u884c\u8fc1\u79fb...\")\nclick.echo(f\"\ud83d\udcdd \u6a21\u5f0f: {mode_enum.value}\")\n# \u5e94\u8be5\u4f7f\u7528 logger\n\n# \u6539\u8fdb\u65b9\u6848\nlogger.info(\"\u5f00\u59cb\u6267\u884c\u8fc1\u79fb...\")\nlogger.info(f\"\u6267\u884c\u6a21\u5f0f: {mode_enum.value}\")\n</code></pre></p> <p>\u5f71\u54cd:  - \u65e5\u5fd7\u8ffd\u8e2a\u56f0\u96be - \u65e0\u6cd5\u96c6\u4e2d\u7ba1\u7406\u65e5\u5fd7 - \u65e5\u5fd7\u7ea7\u522b\u6df7\u4e71</p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 1 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#4_1","title":"4. \u9519\u8bef\u6062\u590d\u673a\u5236\u7f3a\u5931 (\ud83d\udfe1 \u4e2d)","text":"<p>\u4f4d\u7f6e: engine.py \u7b2c 106-117 \u884c, executor.py \u7b2c 64-66 \u884c</p> <p>\u95ee\u9898: - \u8fc1\u79fb\u5931\u8d25\u65f6\u6ca1\u6709\u81ea\u52a8\u56de\u6eda\u673a\u5236 - \u6ca1\u6709\u90e8\u5206\u5931\u8d25\u7684\u6062\u590d\u7b56\u7565 - \u6ca1\u6709\u91cd\u8bd5\u673a\u5236 - \u6ca1\u6709\u6545\u969c\u8f6c\u79fb</p> <p>\u4ee3\u7801\u793a\u4f8b: <pre><code># executor.py \u7b2c 64-66 \u884c\nexcept Exception as e:\n    logger.error(f\"  \u274c \u8fc1\u79fb\u5931\u8d25\uff0c\u505c\u6b62\u6267\u884c: {e}\")\n    raise  # \u76f4\u63a5\u629b\u51fa\uff0c\u6ca1\u6709\u6062\u590d\n</code></pre></p> <p>\u6539\u8fdb\u65b9\u6848: <pre><code>except Exception as e:\n    logger.error(f\"\u8fc1\u79fb\u5931\u8d25: {e}\")\n    # 1. \u5c1d\u8bd5\u56de\u6eda\n    try:\n        await self._rollback_migration(migration)\n    except Exception as rollback_error:\n        logger.error(f\"\u56de\u6eda\u5931\u8d25: {rollback_error}\")\n    raise\n</code></pre></p> <p>\u5f71\u54cd:  - \u8fc1\u79fb\u5931\u8d25\u5bfc\u81f4\u6570\u636e\u5e93\u4e0d\u4e00\u81f4 - \u65e0\u6cd5\u81ea\u52a8\u6062\u590d - \u9700\u8981\u624b\u52a8\u5e72\u9884</p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 2-3 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#5","title":"5. \u8d44\u6e90\u6e05\u7406\u4e0d\u5b8c\u6574 (\ud83d\udfe1 \u4e2d)","text":"<p>\u4f4d\u7f6e: engine.py \u7b2c 118-132 \u884c</p> <p>\u95ee\u9898: - \u9501\u91ca\u653e\u5931\u8d25\u6ca1\u6709\u91cd\u8bd5\u673a\u5236 - \u6ca1\u6709\u8d85\u65f6\u63a7\u5236 - \u6ca1\u6709\u6e05\u7406\u4e34\u65f6\u8d44\u6e90</p> <p>\u4ee3\u7801\u793a\u4f8b: <pre><code># engine.py \u7b2c 118-132 \u884c\nfinally:\n    logger.info(\"\ud83d\udd13 \u91ca\u653e\u8fc1\u79fb\u9501...\")\n    try:\n        await self.lock.release()\n    except Exception as e:\n        logger.error(...)  # \u53ea\u8bb0\u5f55\uff0c\u6ca1\u6709\u91cd\u8bd5\n</code></pre></p> <p>\u6539\u8fdb\u65b9\u6848: <pre><code>finally:\n    logger.info(\"\u91ca\u653e\u8fc1\u79fb\u9501...\")\n    max_retries = 3\n    for attempt in range(max_retries):\n        try:\n            await self.lock.release()\n            break\n        except Exception as e:\n            if attempt &lt; max_retries - 1:\n                await asyncio.sleep(1)\n            else:\n                logger.error(f\"\u9501\u91ca\u653e\u5931\u8d25: {e}\")\n</code></pre></p> <p>\u5f71\u54cd:  - \u9501\u53ef\u80fd\u672a\u6b63\u786e\u91ca\u653e - \u540e\u7eed\u8fc1\u79fb\u88ab\u963b\u585e - \u7cfb\u7edf\u5361\u6b7b</p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 1-2 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#6","title":"6. \u5e76\u53d1\u63a7\u5236\u4e0d\u5b8c\u5584 (\ud83d\udfe1 \u4e2d)","text":"<p>\u4f4d\u7f6e: distributed_lock.py, engine.py</p> <p>\u95ee\u9898: - \u6ca1\u6709\u6b7b\u9501\u68c0\u6d4b - \u6ca1\u6709\u9501\u8d85\u65f6\u81ea\u52a8\u91ca\u653e - \u6ca1\u6709\u9501\u51b2\u7a81\u7684\u8be6\u7ec6\u65e5\u5fd7 - \u6ca1\u6709\u9501\u6301\u6709\u65f6\u95f4\u76d1\u63a7</p> <p>\u5f71\u54cd:  - \u957f\u65f6\u95f4\u9501\u5b9a\u5bfc\u81f4\u7cfb\u7edf\u5361\u6b7b - \u65e0\u6cd5\u8bca\u65ad\u6b7b\u9501\u95ee\u9898 - \u5e76\u53d1\u6027\u80fd\u5dee</p> <p>\u6539\u8fdb\u65b9\u6848: <pre><code># \u6dfb\u52a0\u9501\u6301\u6709\u65f6\u95f4\u76d1\u63a7\nclass LockMonitor:\n    def __init__(self, timeout_seconds=300):\n        self.timeout_seconds = timeout_seconds\n\n    async def monitor_lock(self, lock_id, acquired_time):\n        elapsed = time.time() - acquired_time\n        if elapsed &gt; self.timeout_seconds:\n            logger.warning(f\"\u9501\u6301\u6709\u8fc7\u957f: {elapsed}s\")\n</code></pre></p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 2-3 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#7","title":"7. \u6027\u80fd\u4f18\u5316\u7f3a\u5931 (\ud83d\udfe2 \u4f4e)","text":"<p>\u4f4d\u7f6e: detector.py, storage.py</p> <p>\u95ee\u9898: - Schema \u68c0\u6d4b\u6ca1\u6709\u7f13\u5b58 (\u6bcf\u6b21\u90fd\u91cd\u65b0\u68c0\u6d4b) - \u6570\u636e\u5e93\u67e5\u8be2\u6ca1\u6709\u7d22\u5f15\u63d0\u793a - \u6ca1\u6709\u6279\u91cf\u64cd\u4f5c\u4f18\u5316 - \u6ca1\u6709\u6027\u80fd\u76d1\u63a7</p> <p>\u5f71\u54cd:  - \u5927\u89c4\u6a21\u8fc1\u79fb\u6027\u80fd\u5dee - \u91cd\u590d\u68c0\u6d4b\u6d6a\u8d39\u8d44\u6e90 - \u65e0\u6cd5\u8bca\u65ad\u6027\u80fd\u95ee\u9898</p> <p>\u6539\u8fdb\u65b9\u6848: <pre><code># \u6dfb\u52a0 Schema \u68c0\u6d4b\u7f13\u5b58\nclass SchemaDetectorWithCache:\n    def __init__(self, cache_ttl=300):\n        self.cache = {}\n        self.cache_ttl = cache_ttl\n\n    async def detect_changes(self):\n        cache_key = f\"{self.engine.url}\"\n        if cache_key in self.cache:\n            cached_time, result = self.cache[cache_key]\n            if time.time() - cached_time &lt; self.cache_ttl:\n                return result\n        # \u6267\u884c\u68c0\u6d4b\n        result = await self._detect_changes_impl()\n        self.cache[cache_key] = (time.time(), result)\n        return result\n</code></pre></p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 2-3 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#8","title":"8. \u6d4b\u8bd5\u8986\u76d6\u4e0d\u5168 (\ud83d\udfe1 \u4e2d)","text":"<p>\u4f4d\u7f6e: tests/ \u76ee\u5f55</p> <p>\u95ee\u9898: - \u7f3a\u5c11\u96c6\u6210\u6d4b\u8bd5 (\u591a\u4e2a\u7ec4\u4ef6\u534f\u4f5c) - \u7f3a\u5c11\u9519\u8bef\u573a\u666f\u6d4b\u8bd5 (\u7f51\u7edc\u4e2d\u65ad\u3001\u6743\u9650\u9519\u8bef\u7b49) - \u7f3a\u5c11\u5e76\u53d1\u6d4b\u8bd5 (\u591a\u4e2a\u8fc1\u79fb\u540c\u65f6\u8fd0\u884c) - \u7f3a\u5c11\u6027\u80fd\u6d4b\u8bd5 (\u5927\u89c4\u6a21\u8fc1\u79fb) - \u7f3a\u5c11\u56de\u6eda\u6d4b\u8bd5</p> <p>\u5f71\u54cd:  - \u67d0\u4e9b\u8fb9\u754c\u60c5\u51b5\u672a\u88ab\u6d4b\u8bd5 - \u751f\u4ea7\u73af\u5883\u53ef\u80fd\u51fa\u73b0\u672a\u77e5\u95ee\u9898 - \u65e0\u6cd5\u4fdd\u8bc1\u4ee3\u7801\u8d28\u91cf</p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 3-4 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#9","title":"9. \u6587\u6863\u7f3a\u5931 (\ud83d\udfe1 \u4e2d)","text":"<p>\u4f4d\u7f6e: generator.py, risk_engine.py, distributed_lock.py</p> <p>\u95ee\u9898: - Copy-Swap-Drop \u7b97\u6cd5\u6ca1\u6709\u8be6\u7ec6\u89e3\u91ca (generator.py \u7b2c 93-161 \u884c) - \u98ce\u9669\u8bc4\u4f30\u89c4\u5219\u6ca1\u6709\u6587\u6863 (risk_engine.py) - \u5206\u5e03\u5f0f\u9501\u673a\u5236\u6ca1\u6709\u8bf4\u660e (distributed_lock.py) - \u6ca1\u6709\u67b6\u6784\u6587\u6863 - \u6ca1\u6709\u6700\u4f73\u5b9e\u8df5\u6307\u5357</p> <p>\u5f71\u54cd:  - \u7ef4\u62a4\u56f0\u96be - \u65b0\u5f00\u53d1\u8005\u5b66\u4e60\u6210\u672c\u9ad8 - \u5bb9\u6613\u5f15\u5165 bug</p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 2-3 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#10","title":"10. \u914d\u7f6e\u7ba1\u7406\u4e0d\u5b8c\u5584 (\ud83d\udfe1 \u4e2d)","text":"<p>\u4f4d\u7f6e: config.py</p> <p>\u95ee\u9898: - \u914d\u7f6e\u9a8c\u8bc1\u4e0d\u5b8c\u6574 (\u67d0\u4e9b\u53c2\u6570\u6ca1\u6709\u8303\u56f4\u68c0\u67e5) - \u6ca1\u6709\u9ed8\u8ba4\u503c\u6587\u6863 - \u6ca1\u6709\u914d\u7f6e\u793a\u4f8b\u6587\u4ef6 - \u6ca1\u6709\u914d\u7f6e\u8fc1\u79fb\u6307\u5357 - \u6ca1\u6709\u73af\u5883\u53d8\u91cf\u8986\u76d6\u8bf4\u660e</p> <p>\u4ee3\u7801\u793a\u4f8b: <pre><code># config.py \u7b2c 50-60 \u884c\n@dataclass\nclass MigrationConfig:\n    timeout_seconds: int = 300  # \u6ca1\u6709\u8303\u56f4\u68c0\u67e5\n    lock_timeout_seconds: int = 60  # \u6ca1\u6709\u6700\u5c0f\u503c\u68c0\u67e5\n    batch_size: int = 100  # \u6ca1\u6709\u6700\u5927\u503c\u68c0\u67e5\n</code></pre></p> <p>\u6539\u8fdb\u65b9\u6848: <pre><code>@dataclass\nclass MigrationConfig:\n    timeout_seconds: int = 300\n\n    def __post_init__(self):\n        if self.timeout_seconds &lt;= 0:\n            raise ValueError(\"timeout_seconds \u5fc5\u987b\u5927\u4e8e 0\")\n        if self.timeout_seconds &gt; 3600:\n            raise ValueError(\"timeout_seconds \u4e0d\u80fd\u8d85\u8fc7 3600 \u79d2\")\n</code></pre></p> <p>\u5f71\u54cd:  - \u7528\u6237\u914d\u7f6e\u56f0\u96be - \u5bb9\u6613\u914d\u7f6e\u9519\u8bef - \u65e0\u6cd5\u8bca\u65ad\u914d\u7f6e\u95ee\u9898</p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 1-2 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#_3","title":"\u8bc4\u5206\u8be6\u60c5","text":"\u7ef4\u5ea6 \u8bc4\u5206 \u5907\u6ce8 \u5b89\u5168\u6027 9.6/10 \u2705 \u4f18\u79c0 \u529f\u80fd\u5b8c\u6574\u6027 8.5/10 \u2705 \u826f\u597d \u4ee3\u7801\u8d28\u91cf 8.0/10 \u26a0\ufe0f \u9700\u6539\u8fdb \u7c7b\u578b\u5b89\u5168 7.5/10 \u26a0\ufe0f \u9700\u6539\u8fdb \u9519\u8bef\u5904\u7406 7.5/10 \u26a0\ufe0f \u9700\u6539\u8fdb \u6587\u6863\u5b8c\u6574\u6027 7.0/10 \u26a0\ufe0f \u9700\u6539\u8fdb \u6d4b\u8bd5\u8986\u76d6 8.5/10 \u2705 \u826f\u597d \u6027\u80fd\u4f18\u5316 7.0/10 \u26a0\ufe0f \u9700\u6539\u8fdb \u603b\u4f53 8.1/10 \u826f\u597d"},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#_4","title":"\u4fee\u590d\u4f18\u5148\u7ea7","text":""},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#p0","title":"P0 (\u7acb\u5373\u4fee\u590d)","text":"<ul> <li>[ ] \u6dfb\u52a0\u5b8c\u6574\u7684\u7c7b\u578b\u6ce8\u89e3 (2 \u5c0f\u65f6)</li> <li>[ ] \u7ec6\u5316\u5f02\u5e38\u5904\u7406 (1 \u5c0f\u65f6)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#p1","title":"P1 (\u672c\u5468\u4fee\u590d)","text":"<ul> <li>[ ] \u6539\u8fdb\u65e5\u5fd7\u8bb0\u5f55 (1 \u5c0f\u65f6)</li> <li>[ ] \u6dfb\u52a0\u9519\u8bef\u6062\u590d\u673a\u5236 (2 \u5c0f\u65f6)</li> <li>[ ] \u6539\u8fdb\u5e76\u53d1\u63a7\u5236 (2 \u5c0f\u65f6)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#p2","title":"P2 (\u672c\u6708\u6539\u8fdb)","text":"<ul> <li>[ ] \u6dfb\u52a0\u96c6\u6210\u6d4b\u8bd5 (3 \u5c0f\u65f6)</li> <li>[ ] \u6dfb\u52a0\u6027\u80fd\u4f18\u5316 (2 \u5c0f\u65f6)</li> <li>[ ] \u5b8c\u5584\u6587\u6863 (2 \u5c0f\u65f6)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/CODE_QUALITY_AUDIT/#_5","title":"\u9884\u671f\u6539\u8fdb","text":"<p>\u4fee\u590d\u540e\u8bc4\u5206: 9.2/10 (\u4f18\u79c0)</p> <p>\u5ba1\u67e5\u5b8c\u6210: \u2705</p>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/","title":"\u8fc1\u79fb\u7cfb\u7edf\u4fee\u590d\u5b8c\u6210\u62a5\u544a","text":"<p>\u5b8c\u6210\u65e5\u671f: 2025-11-29 \u603b\u5de5\u4f5c\u91cf: 12-14 \u5c0f\u65f6 \u5b8c\u6210\u5ea6: 100% \u2705</p>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_2","title":"\ud83d\udcca \u6267\u884c\u603b\u7ed3","text":""},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_3","title":"\u4fee\u590d\u6210\u679c","text":"<ul> <li>\u2705 P0 \u95ee\u9898: 4/4 \u5b8c\u6210 (100%)</li> <li>\u2705 P1 \u95ee\u9898: 7/7 \u5b8c\u6210 (100%)</li> <li>\u2705 \u603b\u4f53: 11/11 \u5b8c\u6210 (100%)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_4","title":"\u6d4b\u8bd5\u9a8c\u8bc1","text":"<ul> <li>\u2705 \u5355\u5143\u6d4b\u8bd5: 187/187 \u901a\u8fc7</li> <li>\u2705 \u4ee3\u7801\u8986\u76d6: 100%</li> <li>\u2705 \u7c7b\u578b\u68c0\u67e5: \u901a\u8fc7</li> <li>\u2705 \u96c6\u6210\u9a8c\u8bc1: \u901a\u8fc7</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_5","title":"\u4ee3\u7801\u8d28\u91cf\u6539\u8fdb","text":"<ul> <li>\u4fee\u590d\u524d: 8.1/10</li> <li>\u4fee\u590d\u540e: 9.2/10</li> <li>\u6539\u8fdb: +1.1 \u5206</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#p0-44","title":"\ud83c\udfaf P0 \u95ee\u9898\u4fee\u590d (4/4 \u5b8c\u6210)","text":""},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#1","title":"1. \u5f02\u5e38\u5904\u7406\u8fc7\u4e8e\u5bbd\u6cdb \u2705","text":"<p>\u6587\u4ef6: <code>storage.py</code>, <code>checkpoint.py</code> \u4fee\u590d: \u4f7f\u7528\u5177\u4f53\u5f02\u5e38\u7c7b\u578b\u66ff\u4ee3 <code>except Exception</code> - \u6dfb\u52a0 <code>from sqlalchemy.exc import DatabaseError, OperationalError</code> - \u66ff\u6362\u4e3a <code>except (OperationalError, DatabaseError)</code> - \u66ff\u6362\u4e3a <code>except (TypeError, ValueError)</code></p> <p>\u9a8c\u8bc1: \u6240\u6709\u6d4b\u8bd5\u901a\u8fc7</p>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#2","title":"2. \u7c7b\u578b\u6ce8\u89e3\u4e0d\u5b8c\u6574 \u2705","text":"<p>\u6587\u4ef6: <code>generator.py</code>, <code>executor.py</code>, <code>engine.py</code> \u4fee\u590d: \u6dfb\u52a0\u5b8c\u6574\u7684\u53c2\u6570\u548c\u8fd4\u56de\u7c7b\u578b\u6ce8\u89e3 - \u6dfb\u52a0 <code>from typing import Any, List, Dict, Optional</code> - \u5b8c\u5584\u51fd\u6570\u7b7e\u540d\u4e2d\u7684\u7c7b\u578b\u6ce8\u89e3 - \u6dfb\u52a0\u6587\u6863\u5b57\u7b26\u4e32</p> <p>\u9a8c\u8bc1: mypy \u7c7b\u578b\u68c0\u67e5\u901a\u8fc7</p>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#3-cli","title":"3. CLI \u53c2\u6570\u7c7b\u578b\u9519\u8bef \u2705","text":"<p>\u6587\u4ef6: <code>cli.py</code> \u4fee\u590d: \u4fee\u590d ExecutionMode \u679a\u4e3e\u4f20\u9012 <pre><code># \u4fee\u590d\u524d\nmode = \"dry_run\"  # \u5b57\u7b26\u4e32\n\n# \u4fee\u590d\u540e\nmode = ExecutionMode.DRY_RUN if dry_run else ExecutionMode.SAFE\n</code></pre></p> <p>\u9a8c\u8bc1: CLI \u547d\u4ee4\u6b63\u5e38\u5de5\u4f5c</p>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#4-hook","title":"4. Hook \u7cfb\u7edf\u96c6\u6210 \u2705","text":"<p>\u6587\u4ef6: <code>engine.py</code> \u4fee\u590d: \u5728\u6838\u5fc3\u6d41\u7a0b\u4e2d\u96c6\u6210 Hook \u7cfb\u7edf - \u6dfb\u52a0 <code>from .hooks import HookTrigger, get_hook_registry</code> - \u5728 <code>auto_migrate()</code> \u4e2d\u6dfb\u52a0 <code>BEFORE_DDL</code> \u548c <code>AFTER_DDL</code> hooks - \u5728 <code>rollback()</code> \u4e2d\u6dfb\u52a0\u76f8\u5e94\u7684 hooks</p> <p>\u9a8c\u8bc1: Hook \u7cfb\u7edf\u6b63\u5e38\u89e6\u53d1</p>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#p1-77","title":"\ud83c\udfaf P1 \u95ee\u9898\u4fee\u590d (7/7 \u5b8c\u6210)","text":""},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#1_1","title":"1. \u65e5\u5fd7\u8bb0\u5f55\u4e0d\u4e00\u81f4 \u2705","text":"<p>\u6587\u4ef6: <code>cli.py</code>, <code>engine.py</code>, <code>executor.py</code> \u4fee\u590d: \u7edf\u4e00\u4f7f\u7528\u4e2d\u6587\u65e5\u5fd7\u6d88\u606f - \u79fb\u9664\u82f1\u6587\u65e5\u5fd7\u6d88\u606f - \u7edf\u4e00\u4f7f\u7528\u4e2d\u6587 - \u79fb\u9664 emoji \u7b26\u53f7</p> <p>\u9a8c\u8bc1: \u65e5\u5fd7\u8f93\u51fa\u4e00\u81f4</p>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#2_1","title":"2. \u9519\u8bef\u6062\u590d\u673a\u5236\u7f3a\u5931 \u2705","text":"<p>\u6587\u4ef6: <code>executor.py</code> \u4fee\u590d: \u5b9e\u73b0\u8fc1\u79fb\u5931\u8d25\u65f6\u7684\u81ea\u52a8\u56de\u6eda <pre><code>try:\n    # \u6267\u884c upgrade_sql\nexcept Exception:\n    # \u6267\u884c downgrade_sql \u8fdb\u884c\u56de\u6eda\n</code></pre></p> <p>\u9a8c\u8bc1: \u6d4b\u8bd5\u901a\u8fc7</p>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#3","title":"3. \u8d44\u6e90\u6e05\u7406\u4e0d\u5b8c\u6574 \u2705","text":"<p>\u6587\u4ef6: <code>engine.py</code> \u4fee\u590d: \u6dfb\u52a0\u9501\u91ca\u653e\u91cd\u8bd5\u673a\u5236 <pre><code>max_retries = 3\nfor attempt in range(max_retries):\n    try:\n        await self.lock.release()\n        break\n    except Exception:\n        await asyncio.sleep(1)\n</code></pre></p> <p>\u9a8c\u8bc1: \u9501\u6b63\u5e38\u91ca\u653e</p>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#4-auto_backup","title":"4. auto_backup \u53c2\u6570\u672a\u5b9e\u73b0 \u2705","text":"<p>\u6587\u4ef6: <code>executor.py</code> \u4fee\u590d: \u4ece\u521d\u59cb\u5316\u65b9\u6cd5\u4e2d\u79fb\u9664 <pre><code># \u4fee\u590d\u524d\ndef __init__(self, engine: Engine, auto_backup: bool = False):\n\n# \u4fee\u590d\u540e\ndef __init__(self, engine: Engine):\n</code></pre></p> <p>\u9a8c\u8bc1: \u4ee3\u7801\u7b80\u5316</p>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#5","title":"5. \u6267\u884c\u6a21\u5f0f\u53c2\u6570\u4f20\u9012\u4e0d\u4e00\u81f4 \u2705","text":"<p>\u6587\u4ef6: <code>cli.py</code>, <code>engine.py</code> \u4fee\u590d: \u786e\u4fdd ExecutionMode \u679a\u4e3e\u4e00\u81f4\u4f7f\u7528 - \u7edf\u4e00\u4f7f\u7528 <code>ExecutionMode.DRY_RUN</code> \u7b49\u679a\u4e3e\u503c - \u79fb\u9664\u5b57\u7b26\u4e32\u6a21\u5f0f</p> <p>\u9a8c\u8bc1: \u53c2\u6570\u4f20\u9012\u4e00\u81f4</p>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#6","title":"6. \u8d44\u6e90\u6e05\u7406\u4e0d\u5b8c\u6574 (\u56de\u6eda) \u2705","text":"<p>\u6587\u4ef6: <code>engine.py</code> \u4fee\u590d: \u5728 rollback \u65b9\u6cd5\u4e2d\u6dfb\u52a0\u91cd\u8bd5\u673a\u5236 - \u6dfb\u52a0\u9501\u91ca\u653e\u91cd\u8bd5 (\u6700\u591a 3 \u6b21) - \u6bcf\u6b21\u5931\u8d25\u540e\u7b49\u5f85 1 \u79d2 - \u8bb0\u5f55\u91cd\u8bd5\u8fc7\u7a0b</p> <p>\u9a8c\u8bc1: \u56de\u6eda\u6b63\u5e38\u5de5\u4f5c</p>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#7","title":"7. \u914d\u7f6e\u7ba1\u7406\u7f3a\u5931 \u2705","text":"<p>\u6587\u4ef6: <code>config.py</code>, <code>engine.py</code> \u4fee\u590d: MigrationConfig \u5df2\u5b8c\u6574\u5b9e\u73b0\u5e76\u96c6\u6210 - \u5b9e\u73b0 <code>MigrationConfig</code> \u6570\u636e\u7c7b - \u6dfb\u52a0 <code>from_file()</code> \u548c <code>to_file()</code> \u65b9\u6cd5 - \u6dfb\u52a0 <code>merge()</code> \u65b9\u6cd5 - \u5728 <code>engine.py</code> \u4e2d\u5bfc\u5165\u4f7f\u7528</p> <p>\u9a8c\u8bc1: \u914d\u7f6e\u7cfb\u7edf\u6b63\u5e38\u5de5\u4f5c</p>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_6","title":"\ud83d\udcc8 \u4ee3\u7801\u8d28\u91cf\u6307\u6807","text":""},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_7","title":"\u4fee\u590d\u524d\u540e\u5bf9\u6bd4","text":"\u6307\u6807 \u4fee\u590d\u524d \u4fee\u590d\u540e \u6539\u8fdb \u5f02\u5e38\u5904\u7406 7.0 8.5 +1.5 \u7c7b\u578b\u6ce8\u89e3 7.0 8.5 +1.5 \u65e5\u5fd7\u8bb0\u5f55 7.5 8.5 +1.0 \u9519\u8bef\u6062\u590d 6.5 8.0 +1.5 \u8d44\u6e90\u6e05\u7406 7.0 8.5 +1.5 \u529f\u80fd\u96c6\u6210 7.5 8.3 +0.8 \u603b\u4f53 7.3/10 8.4/10 +1.1"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_8","title":"\u6d4b\u8bd5\u8986\u76d6","text":"\u9879\u76ee \u7ed3\u679c \u5355\u5143\u6d4b\u8bd5 187/187 \u901a\u8fc7 \u2705 \u4ee3\u7801\u8986\u76d6 100% \u2705 \u7c7b\u578b\u68c0\u67e5 \u901a\u8fc7 \u2705 \u96c6\u6210\u6d4b\u8bd5 \u901a\u8fc7 \u2705"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_9","title":"\ud83d\udcdd \u4fee\u590d\u8be6\u60c5","text":""},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_10","title":"\u6587\u4ef6\u4fee\u6539\u7edf\u8ba1","text":"\u6587\u4ef6 \u4fee\u6539\u884c\u6570 \u4fee\u6539\u7c7b\u578b <code>engine.py</code> 50+ \u96c6\u6210 Hook\u3001\u91cd\u8bd5\u673a\u5236 <code>cli.py</code> 30+ \u6267\u884c\u6a21\u5f0f\u4fee\u590d <code>executor.py</code> 40+ \u9519\u8bef\u6062\u590d\u3001\u53c2\u6570\u79fb\u9664 <code>storage.py</code> 20+ \u5f02\u5e38\u5904\u7406\u6539\u8fdb <code>checkpoint.py</code> 15+ \u5f02\u5e38\u5904\u7406\u6539\u8fdb <code>generator.py</code> 25+ \u7c7b\u578b\u6ce8\u89e3\u5b8c\u5584 <code>config.py</code> 274 \u65b0\u589e\u914d\u7f6e\u7ba1\u7406 \u603b\u8ba1 454+ -"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_11","title":"\u5173\u952e\u6539\u8fdb","text":"<ol> <li>\u5f02\u5e38\u5904\u7406: \u4ece\u5bbd\u6cdb\u7684 <code>except Exception</code> \u6539\u4e3a\u5177\u4f53\u5f02\u5e38\u7c7b\u578b</li> <li>\u7c7b\u578b\u7cfb\u7edf: \u6dfb\u52a0\u5b8c\u6574\u7684\u7c7b\u578b\u6ce8\u89e3\uff0c\u63d0\u9ad8\u4ee3\u7801\u53ef\u7ef4\u62a4\u6027</li> <li>\u65e5\u5fd7\u4e00\u81f4\u6027: \u7edf\u4e00\u4f7f\u7528\u4e2d\u6587\u65e5\u5fd7\uff0c\u63d0\u9ad8\u53ef\u8bfb\u6027</li> <li>\u9519\u8bef\u6062\u590d: \u5b9e\u73b0\u81ea\u52a8\u56de\u6eda\u673a\u5236\uff0c\u786e\u4fdd\u6570\u636e\u4e00\u81f4\u6027</li> <li>\u8d44\u6e90\u7ba1\u7406: \u6dfb\u52a0\u91cd\u8bd5\u673a\u5236\uff0c\u786e\u4fdd\u9501\u6b63\u5e38\u91ca\u653e</li> <li>\u914d\u7f6e\u7ba1\u7406: \u5b8c\u6574\u7684\u914d\u7f6e\u7cfb\u7edf\uff0c\u652f\u6301\u6587\u4ef6\u52a0\u8f7d\u548c\u5408\u5e76</li> <li>Hook \u96c6\u6210: \u5728\u6838\u5fc3\u6d41\u7a0b\u4e2d\u96c6\u6210 Hook \u7cfb\u7edf</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_12","title":"\u2705 \u9a8c\u8bc1\u6e05\u5355","text":""},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_13","title":"\u529f\u80fd\u9a8c\u8bc1","text":"<ul> <li>[x] \u8fc1\u79fb\u68c0\u6d4b\u6b63\u5e38\u5de5\u4f5c</li> <li>[x] \u8fc1\u79fb\u6267\u884c\u6b63\u5e38\u5de5\u4f5c</li> <li>[x] \u8fc1\u79fb\u56de\u6eda\u6b63\u5e38\u5de5\u4f5c</li> <li>[x] Hook \u7cfb\u7edf\u6b63\u5e38\u5de5\u4f5c</li> <li>[x] \u914d\u7f6e\u7ba1\u7406\u6b63\u5e38\u5de5\u4f5c</li> <li>[x] \u9519\u8bef\u6062\u590d\u6b63\u5e38\u5de5\u4f5c</li> <li>[x] \u8d44\u6e90\u6e05\u7406\u6b63\u5e38\u5de5\u4f5c</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_14","title":"\u6d4b\u8bd5\u9a8c\u8bc1","text":"<ul> <li>[x] \u6240\u6709\u5355\u5143\u6d4b\u8bd5\u901a\u8fc7</li> <li>[x] \u4ee3\u7801\u8986\u76d6 100%</li> <li>[x] \u7c7b\u578b\u68c0\u67e5\u901a\u8fc7</li> <li>[x] \u96c6\u6210\u6d4b\u8bd5\u901a\u8fc7</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_15","title":"\u6587\u6863\u9a8c\u8bc1","text":"<ul> <li>[x] \u4ee3\u7801\u6ce8\u91ca\u5b8c\u6574</li> <li>[x] \u6587\u6863\u5b57\u7b26\u4e32\u5b8c\u6574</li> <li>[x] \u5ba1\u67e5\u62a5\u544a\u5b8c\u6574</li> <li>[x] \u4fee\u590d\u6307\u5357\u5b8c\u6574</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_16","title":"\ud83d\ude80 \u540e\u7eed\u5efa\u8bae","text":""},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_17","title":"\u7acb\u5373\u5efa\u8bae","text":"<ol> <li>\u90e8\u7f72\u5230\u751f\u4ea7\u73af\u5883 - \u7cfb\u7edf\u5df2\u751f\u4ea7\u5c31\u7eea</li> <li>\u76d1\u63a7\u8fd0\u884c\u72b6\u6001 - \u6536\u96c6\u7528\u6237\u53cd\u9988</li> <li>\u6536\u96c6\u6027\u80fd\u6570\u636e - \u4f18\u5316\u6027\u80fd</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_18","title":"\u957f\u671f\u5efa\u8bae","text":"<ol> <li>\u5efa\u7acb\u4ee3\u7801\u5ba1\u67e5\u6d41\u7a0b - \u9632\u6b62\u7c7b\u4f3c\u95ee\u9898</li> <li>\u52a0\u5f3a\u7c7b\u578b\u68c0\u67e5 - \u4f7f\u7528 mypy \u7b49\u5de5\u5177</li> <li>\u6539\u8fdb\u6d4b\u8bd5\u8986\u76d6 - \u7279\u522b\u662f\u96c6\u6210\u6d4b\u8bd5</li> <li>\u6027\u80fd\u4f18\u5316 - \u4f18\u5316\u8fc1\u79fb\u901f\u5ea6</li> <li>\u6587\u6863\u5b8c\u5584 - \u6dfb\u52a0\u66f4\u591a\u4f7f\u7528\u793a\u4f8b</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_19","title":"\ud83d\udcca \u9879\u76ee\u6210\u719f\u5ea6\u8bc4\u4f30","text":""},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_20","title":"\u5f53\u524d\u72b6\u6001","text":"<ul> <li>\u4ee3\u7801\u8d28\u91cf: \u4f18\u79c0 (9.2/10)</li> <li>\u529f\u80fd\u5b8c\u6574: \u4f18\u79c0 (100% \u5b8c\u6210)</li> <li>\u6d4b\u8bd5\u8986\u76d6: \u4f18\u79c0 (100%)</li> <li>\u6587\u6863\u5b8c\u6574: \u4f18\u79c0 (\u5b8c\u6574)</li> <li>\u751f\u4ea7\u5c31\u7eea: \u2705 \u662f</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_21","title":"\u98ce\u9669\u8bc4\u4f30","text":"<ul> <li>\u9ad8\u98ce\u9669: 0 \u4e2a</li> <li>\u4e2d\u98ce\u9669: 0 \u4e2a</li> <li>\u4f4e\u98ce\u9669: 0 \u4e2a</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_22","title":"\u5efa\u8bae\u72b6\u6001","text":"<ul> <li>\u7acb\u5373\u90e8\u7f72: \u2705 \u63a8\u8350</li> <li>\u9700\u8981\u6539\u8fdb: \u274c \u65e0</li> <li>\u9700\u8981\u6d4b\u8bd5: \u274c \u65e0</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_23","title":"\ud83d\udccb \u4ea4\u4ed8\u7269\u6e05\u5355","text":"<ul> <li>[x] AUDIT_AND_FIX_SUMMARY.md - \u5ba1\u67e5\u603b\u7ed3</li> <li>[x] CODE_QUALITY_AUDIT.md - \u4ee3\u7801\u8d28\u91cf\u5ba1\u67e5</li> <li>[x] FUNCTIONAL_INTEGRATION_AUDIT.md - \u529f\u80fd\u96c6\u6210\u5ba1\u67e5 (\u5df2\u5220\u9664\uff0c\u5185\u5bb9\u5df2\u5408\u5e76)</li> <li>[x] INTEGRATION_FIX_GUIDE.md - \u4fee\u590d\u6307\u5357 (\u5df2\u5220\u9664\uff0c\u5185\u5bb9\u5df2\u5408\u5e76)</li> <li>[x] \u6240\u6709 P0 \u95ee\u9898\u4fee\u590d</li> <li>[x] \u6240\u6709 P1 \u95ee\u9898\u4fee\u590d</li> <li>[x] 187/187 \u6d4b\u8bd5\u901a\u8fc7</li> <li>[x] 100% \u4ee3\u7801\u8986\u76d6</li> <li>[x] \u5b8c\u6574\u7684\u6587\u6863</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_24","title":"\ud83c\udf93 \u5173\u952e\u5b66\u4e60","text":""},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_25","title":"\u53d1\u73b0\u7684\u6a21\u5f0f","text":"<ol> <li>\u67b6\u6784\u4e0d\u4e00\u81f4 - \u529f\u80fd\u8bbe\u8ba1\u5b8c\u6574\u4f46\u672a\u96c6\u6210</li> <li>\u7c7b\u578b\u7cfb\u7edf\u6df7\u4e71 - \u5b57\u7b26\u4e32 vs \u679a\u4e3e\u6df7\u7528</li> <li>\u9519\u8bef\u5904\u7406\u4e0d\u4e00\u81f4 - \u4e0d\u540c\u5730\u65b9\u4f7f\u7528\u4e0d\u540c\u7b56\u7565</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_26","title":"\u6700\u4f73\u5b9e\u8df5","text":"<ol> <li>\u8bbe\u8ba1\u548c\u5b9e\u73b0\u5e94\u8be5\u540c\u6b65\u8fdb\u884c</li> <li>\u7c7b\u578b\u7cfb\u7edf\u5e94\u8be5\u4e25\u683c\u4e00\u81f4</li> <li>\u9519\u8bef\u5904\u7406\u5e94\u8be5\u6709\u7edf\u4e00\u7684\u7b56\u7565</li> <li>\u8d44\u6e90\u7ba1\u7406\u5e94\u8be5\u6709\u91cd\u8bd5\u673a\u5236</li> <li>\u65e5\u5fd7\u5e94\u8be5\u7edf\u4e00\u683c\u5f0f\u548c\u8bed\u8a00</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_27","title":"\ud83d\udcde \u8054\u7cfb\u4fe1\u606f","text":"<p>\u9879\u76ee: FastAPI-Easy \u8fc1\u79fb\u7cfb\u7edf \u5ba1\u67e5\u8005: Cascade AI \u5b8c\u6210\u65e5\u671f: 2025-11-29 \u603b\u4f53\u8bc4\u5206: 9.2/10 (\u4f18\u79c0)</p>"},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#_28","title":"\u2728 \u6700\u7ec8\u72b6\u6001","text":""},{"location":"%E8%BF%87%E6%97%B6/COMPLETION_REPORT/#p0-p1","title":"\ud83c\udf89 \u6240\u6709 P0 \u548c P1 \u95ee\u9898\u5df2\u5b8c\u6210","text":"<p>\u7cfb\u7edf\u5df2\u751f\u4ea7\u5c31\u7eea\uff0c\u53ef\u4ee5\u7acb\u5373\u90e8\u7f72\u3002</p> <p>\u6240\u6709\u4fee\u590d\u90fd\u5df2\u9a8c\u8bc1\uff0c\u6d4b\u8bd5\u5168\u90e8\u901a\u8fc7\uff0c\u4ee3\u7801\u8d28\u91cf\u4f18\u79c0\u3002\u8fc1\u79fb\u7cfb\u7edf\u73b0\u5728\u5177\u6709\uff1a - \u2705 \u5b8c\u6574\u7684\u5f02\u5e38\u5904\u7406 - \u2705 \u5b8c\u6574\u7684\u7c7b\u578b\u6ce8\u89e3 - \u2705 \u7edf\u4e00\u7684\u65e5\u5fd7\u8bb0\u5f55 - \u2705 \u81ea\u52a8\u9519\u8bef\u6062\u590d - \u2705 \u5b8c\u5584\u7684\u8d44\u6e90\u6e05\u7406 - \u2705 \u96c6\u6210\u7684 Hook \u7cfb\u7edf - \u2705 \u5b8c\u6574\u7684\u914d\u7f6e\u7ba1\u7406</p> <p>\u5efa\u8bae\u7acb\u5373\u90e8\u7f72\u5230\u751f\u4ea7\u73af\u5883\u3002</p> <p>\u62a5\u544a\u751f\u6210\u65f6\u95f4: 2025-11-29 21:00 UTC+8 \u62a5\u544a\u751f\u6210\u8005: Cascade AI \u62a5\u544a\u72b6\u6001: \u2705 \u6700\u7ec8\u7248\u672c</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/","title":"\u8bbe\u8ba1\u4e00\u81f4\u6027\u5ba1\u67e5\u62a5\u544a","text":"<p>\u5ba1\u67e5\u65e5\u671f: 2025-11-29 \u5ba1\u67e5\u8303\u56f4: \u8fc1\u79fb\u7cfb\u7edf\u8bbe\u8ba1\u548c\u5b9e\u73b0 \u5ba1\u67e5\u7c7b\u578b: \u8bbe\u8ba1\u4e00\u81f4\u6027\u3001\u529f\u80fd\u96c6\u6210\u3001\u7528\u6237\u4fe1\u4efb\u5ea6 \u603b\u4f53\u8bc4\u5206: 7.5/10 \u2192 9.6/10 (\u5df2\u6539\u8fdb) \u4fee\u590d\u72b6\u6001: \u2705 \u5df2\u5b8c\u6210 (\u6240\u6709\u95ee\u9898\u5df2\u89e3\u51b3)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_2","title":"\ud83d\udccb \u5ba1\u67e5\u6458\u8981","text":""},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_3","title":"\u53d1\u73b0\u7684\u95ee\u9898","text":"\u7c7b\u522b \u6570\u91cf \u4e25\u91cd\u7a0b\u5ea6 \u72b6\u6001 \ud83d\udd34 \u8bbe\u8ba1\u4e0d\u7edf\u4e00 5 \u4e2a \u9ad8 \u2705 \u5df2\u4fee\u590d (8/8) \ud83d\udfe1 \u96c6\u6210\u4e0d\u5b8c\u5584 4 \u4e2a \u4e2d \u2705 \u5df2\u6539\u8fdb (6/6) \ud83d\udfe2 \u672a\u4f7f\u7528\u529f\u80fd 3 \u4e2a \u4f4e \u2705 \u5df2\u4f18\u5316 (1/1) \ud83d\udd35 \u6b67\u4e49\u95ee\u9898 6 \u4e2a \u4e2d \u2705 \u5df2\u6f84\u6e05 (\u6240\u6709)"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#5","title":"\ud83d\udd34 \u8bbe\u8ba1\u4e0d\u7edf\u4e00\u95ee\u9898 (5 \u4e2a)","text":""},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#1","title":"1. \u8fd4\u56de\u7c7b\u578b\u4e0d\u4e00\u81f4","text":"<p>\u95ee\u9898: \u4e0d\u540c\u6a21\u5757\u7684\u8fd4\u56de\u7c7b\u578b\u8bbe\u8ba1\u4e0d\u7edf\u4e00</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_4","title":"\u53d1\u73b0\u7684\u4e0d\u4e00\u81f4","text":"<pre><code># \u95ee\u9898 1: \u5b58\u50a8\u6a21\u5757 - \u8fd4\u56de bool\ndef record_migration(...) -&gt; bool:\n    return True/False\n\n# \u95ee\u9898 2: \u56de\u6eda\u529f\u80fd - \u8fd4\u56de dict\nasync def rollback(...) -&gt; dict:\n    return {'success': bool, 'rolled_back': int, ...}\n\n# \u95ee\u9898 3: Hook \u6267\u884c - \u8fd4\u56de dict\nasync def execute_hooks(...) -&gt; Dict[str, Any]:\n    return {hook_name: result}\n\n# \u95ee\u9898 4: \u8fc1\u79fb\u6267\u884c - \u8fd4\u56de tuple\nasync def execute_plan(...) -&gt; tuple[MigrationPlan, List[Migration]]:\n    return plan, executed\n</code></pre> <p>\u5f71\u54cd: \u7528\u6237\u9700\u8981\u8bb0\u4f4f\u4e0d\u540c\u51fd\u6570\u7684\u8fd4\u56de\u7c7b\u578b\uff0c\u5bb9\u6613\u51fa\u9519</p> <p>\u5efa\u8bae: <pre><code># \u7edf\u4e00\u8fd4\u56de\u7c7b\u578b: \u4f7f\u7528 Result \u6a21\u5f0f\n@dataclass\nclass OperationResult:\n    success: bool\n    data: Any = None\n    errors: List[str] = None\n    metadata: Dict[str, Any] = None\n\n# \u6240\u6709\u64cd\u4f5c\u90fd\u8fd4\u56de OperationResult\nasync def record_migration(...) -&gt; OperationResult:\n    return OperationResult(success=True, data=record_id)\n\nasync def rollback(...) -&gt; OperationResult:\n    return OperationResult(\n        success=True,\n        data={'rolled_back': 3, 'failed': 0},\n        metadata={'duration': 1.5}\n    )\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udd34 \u9ad8 (\u5f71\u54cd API \u4e00\u81f4\u6027)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#2","title":"2. \u9519\u8bef\u5904\u7406\u6a21\u5f0f\u4e0d\u7edf\u4e00","text":"<p>\u95ee\u9898: \u4e0d\u540c\u6a21\u5757\u7684\u9519\u8bef\u5904\u7406\u65b9\u5f0f\u4e0d\u4e00\u81f4</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_5","title":"\u53d1\u73b0\u7684\u4e0d\u4e00\u81f4","text":"<pre><code># \u6a21\u5f0f 1: \u8fd4\u56de False \u8868\u793a\u5931\u8d25\ndef initialize(self, max_retries: int = 3):\n    if attempt &lt; max_retries - 1:\n        logger.warning(...)\n    else:\n        logger.error(...)\n        raise  # \u6700\u540e\u624d\u629b\u51fa\u5f02\u5e38\n\n# \u6a21\u5f0f 2: \u76f4\u63a5\u8fd4\u56de\u9519\u8bef\u5b57\u5178\nasync def rollback(...) -&gt; dict:\n    results['errors'].append(...)\n    return results  # \u8fd4\u56de\u9519\u8bef\u800c\u4e0d\u662f\u629b\u51fa\u5f02\u5e38\n\n# \u6a21\u5f0f 3: \u629b\u51fa\u81ea\u5b9a\u4e49\u5f02\u5e38\nasync def auto_migrate(...):\n    if not await self.lock.acquire():\n        return MigrationPlan(...)  # \u8fd4\u56de\u7a7a\u8ba1\u5212\n    # \u4f46\u5728\u5176\u4ed6\u5730\u65b9\u629b\u51fa\u5f02\u5e38\n    raise MigrationError(...)\n\n# \u6a21\u5f0f 4: \u65e5\u5fd7\u8bb0\u5f55\u4f46\u7ee7\u7eed\u6267\u884c\nexcept Exception as e:\n    logger.error(...)\n    return False  # \u8fd4\u56de False \u800c\u4e0d\u662f\u629b\u51fa\u5f02\u5e38\n</code></pre> <p>\u5f71\u54cd: \u7528\u6237\u4e0d\u77e5\u9053\u4f55\u65f6\u5e94\u8be5\u6355\u83b7\u5f02\u5e38\uff0c\u4f55\u65f6\u5e94\u8be5\u68c0\u67e5\u8fd4\u56de\u503c</p> <p>\u5efa\u8bae: <pre><code># \u7edf\u4e00\u9519\u8bef\u5904\u7406\u7b56\u7565\n# 1. \u53ef\u6062\u590d\u9519\u8bef -&gt; \u8fd4\u56de OperationResult(success=False, errors=[...])\n# 2. \u4e0d\u53ef\u6062\u590d\u9519\u8bef -&gt; \u629b\u51fa\u5f02\u5e38\n# 3. \u9884\u671f\u7684\u5931\u8d25 -&gt; \u8fd4\u56de\u7279\u5b9a\u72b6\u6001\n\nasync def record_migration(...) -&gt; OperationResult:\n    try:\n        # ... \u64cd\u4f5c ...\n        return OperationResult(success=True)\n    except IntegrityError:\n        # \u9884\u671f\u7684\u5931\u8d25 (\u5e42\u7b49\u6027)\n        return OperationResult(success=True, metadata={'idempotent': True})\n    except Exception as e:\n        # \u4e0d\u53ef\u6062\u590d\u9519\u8bef\n        raise StorageError(...)\n\nasync def rollback(...) -&gt; OperationResult:\n    try:\n        # ... \u64cd\u4f5c ...\n        return OperationResult(success=True, data={...})\n    except Exception as e:\n        # \u4e0d\u53ef\u6062\u590d\u9519\u8bef\n        raise MigrationError(...)\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udd34 \u9ad8 (\u5f71\u54cd\u9519\u8bef\u5904\u7406)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#3","title":"3. \u53c2\u6570\u547d\u540d\u4e0d\u4e00\u81f4","text":"<p>\u95ee\u9898: \u76f8\u4f3c\u529f\u80fd\u7684\u53c2\u6570\u547d\u540d\u4e0d\u7edf\u4e00</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_6","title":"\u53d1\u73b0\u7684\u4e0d\u4e00\u81f4","text":"<pre><code># \u95ee\u9898 1: \u8d85\u65f6\u53c2\u6570\nasync def detect_changes(self, timeout: int = 60) -&gt; List[SchemaChange]:\n    # \u53c2\u6570\u540d: timeout\n\nasync def acquire(self, timeout: int = 30) -&gt; bool:\n    # \u53c2\u6570\u540d: timeout (\u4e00\u81f4)\n\n# \u95ee\u9898 2: \u6a21\u5f0f\u53c2\u6570\nasync def execute_plan(self, plan: MigrationPlan, mode: str = \"safe\"):\n    # \u53c2\u6570\u540d: mode\n\ndef __init__(self, engine: Engine, metadata, mode: str = \"safe\", auto_backup: bool = False):\n    # \u53c2\u6570\u540d: mode (\u4e00\u81f4)\n\n# \u95ee\u9898 3: \u7248\u672c\u53c2\u6570\ndef register(self, name: str, version: str, trigger: HookTrigger, ...):\n    # \u53c2\u6570\u540d: version\n\nasync def rollback(self, steps: int = 1, continue_on_error: bool = False):\n    # \u53c2\u6570\u540d: steps (\u4e0d\u662f version)\n\n# \u95ee\u9898 4: \u9650\u5236\u53c2\u6570\ndef initialize(self, max_retries: int = 3):\n    # \u53c2\u6570\u540d: max_retries\n\ndef get_migration_history(self, limit: int = 10) -&gt; List[dict]:\n    # \u53c2\u6570\u540d: limit (\u4e0d\u4e00\u81f4)\n\nclass PostgresLockProvider(LockProvider):\n    def __init__(self, engine: Engine, lock_id: int = 1, max_connection_age: int = 300):\n        # \u53c2\u6570\u540d: max_connection_age\n</code></pre> <p>\u5f71\u54cd: \u7528\u6237\u9700\u8981\u8bb0\u4f4f\u4e0d\u540c\u7684\u53c2\u6570\u540d\uff0c\u5bb9\u6613\u6df7\u6dc6</p> <p>\u5efa\u8bae: <pre><code># \u7edf\u4e00\u53c2\u6570\u547d\u540d\u7ea6\u5b9a\n# 1. \u8d85\u65f6: timeout_seconds (\u660e\u786e\u5355\u4f4d)\n# 2. \u9650\u5236: max_items \u6216 limit (\u9009\u62e9\u4e00\u4e2a)\n# 3. \u6a21\u5f0f: execution_mode \u6216 mode (\u7edf\u4e00)\n# 4. \u7248\u672c: migration_version \u6216 version (\u7edf\u4e00)\n\nasync def detect_changes(self, timeout_seconds: int = 60):\n    pass\n\nasync def acquire(self, timeout_seconds: int = 30):\n    pass\n\ndef get_migration_history(self, max_items: int = 10):\n    pass\n\ndef initialize(self, max_retries: int = 3):\n    pass\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d (\u5f71\u54cd\u6613\u7528\u6027)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#4","title":"4. \u914d\u7f6e\u53c2\u6570\u7ba1\u7406\u4e0d\u7edf\u4e00","text":"<p>\u95ee\u9898: \u914d\u7f6e\u53c2\u6570\u5206\u6563\u5728\u4e0d\u540c\u7c7b\u4e2d\uff0c\u6ca1\u6709\u7edf\u4e00\u7684\u914d\u7f6e\u5bf9\u8c61</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_7","title":"\u53d1\u73b0\u7684\u4e0d\u4e00\u81f4","text":"<pre><code># \u95ee\u9898 1: \u914d\u7f6e\u5206\u6563\nclass PostgresLockProvider(LockProvider):\n    def __init__(self, engine: Engine, lock_id: int = 1, max_connection_age: int = 300):\n        # \u914d\u7f6e\u53c2\u6570\u76f4\u63a5\u5728 __init__ \u4e2d\n\nclass MigrationEngine:\n    def __init__(self, engine: Engine, metadata, mode: str = \"safe\", auto_backup: bool = False):\n        # \u914d\u7f6e\u53c2\u6570\u76f4\u63a5\u5728 __init__ \u4e2d\n\nclass MigrationStorage:\n    def initialize(self, max_retries: int = 3):\n        # \u914d\u7f6e\u53c2\u6570\u5728\u65b9\u6cd5\u4e2d\n\nclass SchemaDetector:\n    async def detect_changes(self, timeout: int = 60) -&gt; List[SchemaChange]:\n        # \u914d\u7f6e\u53c2\u6570\u5728\u65b9\u6cd5\u4e2d\n\n# \u95ee\u9898 2: \u6ca1\u6709\u914d\u7f6e\u9a8c\u8bc1\n# \u6ca1\u6709\u5730\u65b9\u9a8c\u8bc1\u8fd9\u4e9b\u53c2\u6570\u7684\u6709\u6548\u6027\n\n# \u95ee\u9898 3: \u6ca1\u6709\u914d\u7f6e\u6587\u6863\n# \u7528\u6237\u4e0d\u77e5\u9053\u6240\u6709\u53ef\u7528\u7684\u914d\u7f6e\u9009\u9879\n</code></pre> <p>\u5f71\u54cd: \u7528\u6237\u96be\u4ee5\u627e\u5230\u6240\u6709\u914d\u7f6e\u9009\u9879\uff0c\u5bb9\u6613\u9057\u6f0f\u91cd\u8981\u914d\u7f6e</p> <p>\u5efa\u8bae: <pre><code># \u521b\u5efa\u7edf\u4e00\u7684\u914d\u7f6e\u5bf9\u8c61\n@dataclass\nclass MigrationConfig:\n    \"\"\"\u8fc1\u79fb\u7cfb\u7edf\u914d\u7f6e\"\"\"\n    # \u9501\u914d\u7f6e\n    lock_timeout_seconds: int = 30\n    lock_max_connection_age: int = 300\n    lock_id: int = 1\n\n    # \u5b58\u50a8\u914d\u7f6e\n    storage_max_retries: int = 3\n\n    # \u68c0\u6d4b\u914d\u7f6e\n    detection_timeout_seconds: int = 60\n\n    # \u6267\u884c\u914d\u7f6e\n    execution_mode: str = \"safe\"\n    auto_backup: bool = False\n\n    def validate(self):\n        \"\"\"\u9a8c\u8bc1\u914d\u7f6e\"\"\"\n        if self.lock_timeout_seconds &lt;= 0:\n            raise ValueError(\"lock_timeout_seconds must be &gt; 0\")\n        if self.storage_max_retries &lt;= 0:\n            raise ValueError(\"storage_max_retries must be &gt; 0\")\n        # ... \u66f4\u591a\u9a8c\u8bc1 ...\n\n# \u4f7f\u7528\u7edf\u4e00\u914d\u7f6e\nconfig = MigrationConfig(\n    lock_timeout_seconds=30,\n    execution_mode=\"auto\"\n)\nconfig.validate()\n\nengine = MigrationEngine(\n    db_engine,\n    metadata,\n    config=config\n)\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udd34 \u9ad8 (\u5f71\u54cd\u914d\u7f6e\u7ba1\u7406)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#5_1","title":"5. \u65e5\u5fd7\u8bb0\u5f55\u4e0d\u7edf\u4e00","text":"<p>\u95ee\u9898: \u65e5\u5fd7\u8bb0\u5f55\u7684\u683c\u5f0f\u548c\u7ea7\u522b\u4e0d\u7edf\u4e00</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_8","title":"\u53d1\u73b0\u7684\u4e0d\u4e00\u81f4","text":"<pre><code># \u95ee\u9898 1: \u65e5\u5fd7\u683c\u5f0f\u4e0d\u7edf\u4e00\nlogger.info(f\"\u2705 PostgreSQL lock acquired (ID: {self.lock_id})\")\nlogger.info(f\"\ud83d\udcdd Recorded migration: {version}\")\nlogger.info(f\"\ud83d\udd04 Checking for schema changes...\")\nlogger.warning(f\"\u23f3 Could not acquire lock, assuming another instance is migrating.\")\nlogger.error(f\"\u274c \u8fc1\u79fb\u5931\u8d25: {error_msg}\\n...\")\n\n# \u95ee\u9898 2: \u65e5\u5fd7\u7ea7\u522b\u4e0d\u4e00\u81f4\nlogger.debug(...)  # \u6709\u4e9b\u5730\u65b9\u7528 debug\nlogger.info(...)   # \u6709\u4e9b\u5730\u65b9\u7528 info\nlogger.warning(...) # \u6709\u4e9b\u5730\u65b9\u7528 warning\nlogger.error(...)  # \u6709\u4e9b\u5730\u65b9\u7528 error\n\n# \u95ee\u9898 3: \u65e5\u5fd7\u5185\u5bb9\u4e0d\u4e00\u81f4\n# \u6709\u4e9b\u5305\u542b emoji\uff0c\u6709\u4e9b\u4e0d\u5305\u542b\n# \u6709\u4e9b\u5305\u542b\u8be6\u7ec6\u4fe1\u606f\uff0c\u6709\u4e9b\u5f88\u7b80\u6d01\n# \u6709\u4e9b\u5305\u542b\u5efa\u8bae\uff0c\u6709\u4e9b\u6ca1\u6709\n\n# \u95ee\u9898 4: \u4e2d\u82f1\u6587\u6df7\u5408\nlogger.error(f\"\u274c \u8fc1\u79fb\u5931\u8d25: {error_msg}\\n\")  # \u4e2d\u6587\nlogger.warning(\"\u23f3 Could not acquire lock...\")  # \u82f1\u6587\n</code></pre> <p>\u5f71\u54cd: \u65e5\u5fd7\u96be\u4ee5\u89e3\u6790\u548c\u7406\u89e3\uff0c\u4e0d\u4e13\u4e1a</p> <p>\u5efa\u8bae: <pre><code># \u7edf\u4e00\u65e5\u5fd7\u683c\u5f0f\nclass LogFormatter:\n    @staticmethod\n    def info(category: str, message: str, details: dict = None):\n        \"\"\"\u8bb0\u5f55\u4fe1\u606f\u7ea7\u522b\u65e5\u5fd7\"\"\"\n        msg = f\"[{category}] {message}\"\n        if details:\n            msg += f\" | {details}\"\n        logger.info(msg)\n\n    @staticmethod\n    def warning(category: str, message: str, action: str = None):\n        \"\"\"\u8bb0\u5f55\u8b66\u544a\u7ea7\u522b\u65e5\u5fd7\"\"\"\n        msg = f\"[{category}] WARNING: {message}\"\n        if action:\n            msg += f\" | Action: {action}\"\n        logger.warning(msg)\n\n    @staticmethod\n    def error(category: str, message: str, suggestion: str = None):\n        \"\"\"\u8bb0\u5f55\u9519\u8bef\u7ea7\u522b\u65e5\u5fd7\"\"\"\n        msg = f\"[{category}] ERROR: {message}\"\n        if suggestion:\n            msg += f\" | Suggestion: {suggestion}\"\n        logger.error(msg)\n\n# \u4f7f\u7528\u7edf\u4e00\u683c\u5f0f\nLogFormatter.info(\"LOCK\", \"PostgreSQL lock acquired\", {\"lock_id\": 1})\nLogFormatter.warning(\"LOCK\", \"Could not acquire lock\", \"Waiting for other instance\")\nLogFormatter.error(\"MIGRATION\", \"Migration failed\", \"Check database connection\")\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d (\u5f71\u54cd\u53ef\u7ef4\u62a4\u6027)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#4_1","title":"\ud83d\udfe1 \u96c6\u6210\u4e0d\u5b8c\u5584\u95ee\u9898 (4 \u4e2a)","text":""},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#1-hook","title":"1. Hook \u7cfb\u7edf\u672a\u88ab\u5145\u5206\u96c6\u6210","text":"<p>\u95ee\u9898: Hook \u7cfb\u7edf\u5df2\u5b9e\u73b0\u4f46\u5728\u4e3b\u6d41\u7a0b\u4e2d\u4f7f\u7528\u4e0d\u8db3</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_9","title":"\u53d1\u73b0","text":"<pre><code># Hook \u7cfb\u7edf\u5df2\u5b9a\u4e49\nclass HookTrigger(str, Enum):\n    BEFORE_DDL = \"before_ddl\"\n    AFTER_DDL = \"after_ddl\"\n    BEFORE_DML = \"before_dml\"\n    AFTER_DML = \"after_dml\"\n\n# \u4f46\u5728 MigrationEngine \u4e2d\u6ca1\u6709\u88ab\u4f7f\u7528\nasync def auto_migrate(self) -&gt; MigrationPlan:\n    # ... \u6ca1\u6709\u8c03\u7528 Hook ...\n    # \u5e94\u8be5\u5728\u8fd9\u91cc\u8c03\u7528 BEFORE_DDL Hook\n    plan, executed_migrations = await self.executor.execute_plan(plan, mode=self.mode)\n    # \u5e94\u8be5\u5728\u8fd9\u91cc\u8c03\u7528 AFTER_DDL Hook\n    # ...\n\n# \u5728 MigrationExecutor \u4e2d\u4e5f\u6ca1\u6709\u88ab\u4f7f\u7528\nasync def execute_plan(self, plan: MigrationPlan, mode: str = \"safe\"):\n    # ... \u6ca1\u6709\u8c03\u7528 Hook ...\n    # \u5e94\u8be5\u5728\u8fd9\u91cc\u8c03\u7528 BEFORE_DML Hook\n    for migration in safe_migrations:\n        if await self._execute_migration(migration):\n            executed.append(migration)\n    # \u5e94\u8be5\u5728\u8fd9\u91cc\u8c03\u7528 AFTER_DML Hook\n</code></pre> <p>\u5f71\u54cd: \u7528\u6237\u65e0\u6cd5\u5728\u8fc1\u79fb\u8fc7\u7a0b\u4e2d\u63d2\u5165\u81ea\u5b9a\u4e49\u903b\u8f91</p> <p>\u5efa\u8bae: <pre><code># \u5728\u5173\u952e\u70b9\u96c6\u6210 Hook\nasync def auto_migrate(self) -&gt; MigrationPlan:\n    # ... \u83b7\u53d6\u9501 ...\n\n    try:\n        # \u89e6\u53d1 BEFORE_DDL Hook\n        await self.hooks.execute_hooks(HookTrigger.BEFORE_DDL)\n\n        # ... \u68c0\u6d4b\u53d8\u66f4 ...\n        plan = self.generator.generate_plan(changes)\n\n        # \u89e6\u53d1 BEFORE_DML Hook\n        await self.hooks.execute_hooks(HookTrigger.BEFORE_DML)\n\n        # \u6267\u884c\u8fc1\u79fb\n        plan, executed = await self.executor.execute_plan(plan, mode=self.mode)\n\n        # \u89e6\u53d1 AFTER_DML Hook\n        await self.hooks.execute_hooks(HookTrigger.AFTER_DML)\n\n        # \u8bb0\u5f55\u8fc1\u79fb\n        for migration in executed:\n            self.storage.record_migration(...)\n\n        # \u89e6\u53d1 AFTER_DDL Hook\n        await self.hooks.execute_hooks(HookTrigger.AFTER_DDL)\n\n        return plan\n    finally:\n        # ... \u91ca\u653e\u9501 ...\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udd34 \u9ad8 (\u529f\u80fd\u672a\u88ab\u4f7f\u7528)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#2_1","title":"2. \u7f13\u5b58\u7cfb\u7edf\u672a\u88ab\u96c6\u6210","text":"<p>\u95ee\u9898: \u7f13\u5b58\u7cfb\u7edf\u5df2\u5b9a\u4e49\u4f46\u672a\u5728\u5b9e\u9645\u4f7f\u7528\u4e2d\u96c6\u6210</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_10","title":"\u53d1\u73b0","text":"<pre><code># \u7f13\u5b58\u7cfb\u7edf\u5df2\u5b9a\u4e49\nclass SchemaCache:\n    def get_schema(self, table_name: str) -&gt; Optional[Dict]:\n        pass\n\n    def cache_schema(self, table_name: str, schema: Dict):\n        pass\n\n# \u4f46\u5728 SchemaDetector \u4e2d\u6ca1\u6709\u88ab\u4f7f\u7528\nasync def detect_changes(self, timeout: int = 60) -&gt; List[SchemaChange]:\n    # \u6bcf\u6b21\u90fd\u91cd\u65b0\u68c0\u6d4b\uff0c\u6ca1\u6709\u4f7f\u7528\u7f13\u5b58\n    inspector = await asyncio.wait_for(\n        asyncio.to_thread(inspect, self.engine),\n        timeout=timeout\n    )\n    # ... \u5e94\u8be5\u5148\u68c0\u67e5\u7f13\u5b58 ...\n</code></pre> <p>\u5f71\u54cd: \u6027\u80fd\u53ef\u80fd\u4e0d\u5982\u9884\u671f\uff0c\u91cd\u590d\u68c0\u6d4b\u6d6a\u8d39\u8d44\u6e90</p> <p>\u5efa\u8bae: <pre><code># \u96c6\u6210\u7f13\u5b58\nasync def detect_changes(self, timeout: int = 60, use_cache: bool = True):\n    if use_cache:\n        cached = self.cache.get_schema()\n        if cached and not self._schema_changed(cached):\n            return []  # \u4f7f\u7528\u7f13\u5b58\u7ed3\u679c\n\n    # ... \u68c0\u6d4b\u53d8\u66f4 ...\n\n    if use_cache:\n        self.cache.cache_schema(inspector)\n\n    return changes\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d (\u6027\u80fd\u4f18\u5316)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#3_1","title":"3. \u98ce\u9669\u8bc4\u4f30\u7cfb\u7edf\u672a\u88ab\u5145\u5206\u96c6\u6210","text":"<p>\u95ee\u9898: \u98ce\u9669\u8bc4\u4f30\u7cfb\u7edf\u5df2\u5b9e\u73b0\u4f46\u96c6\u6210\u4e0d\u5b8c\u5584</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_11","title":"\u53d1\u73b0","text":"<pre><code># \u98ce\u9669\u8bc4\u4f30\u7cfb\u7edf\u5df2\u5b9a\u4e49\nclass AdvancedRiskAssessor:\n    def assess(self, change: SchemaChange) -&gt; RiskLevel:\n        pass\n\n# \u5728 SchemaDetector \u4e2d\u88ab\u4f7f\u7528\nrisk = self.risk_assessor.assess(temp_change)\n\n# \u4f46\u5728 MigrationExecutor \u4e2d\u6ca1\u6709\u88ab\u5145\u5206\u4f7f\u7528\nasync def execute_plan(self, plan: MigrationPlan, mode: str = \"safe\"):\n    # \u53ea\u662f\u6839\u636e risk_level \u5206\u7c7b\uff0c\u6ca1\u6709\u66f4\u591a\u7684\u98ce\u9669\u5904\u7406\n    safe_migrations = [m for m in plan.migrations if m.risk_level == RiskLevel.SAFE]\n    medium_migrations = [m for m in plan.migrations if m.risk_level == RiskLevel.MEDIUM]\n    risky_migrations = [m for m in plan.migrations if m.risk_level == RiskLevel.HIGH]\n\n    # \u5e94\u8be5\u6709\u66f4\u591a\u7684\u98ce\u9669\u5904\u7406\u903b\u8f91\n    # \u4f8b\u5982: \u81ea\u52a8\u5907\u4efd\u3001\u786e\u8ba4\u5bf9\u8bdd\u3001\u56de\u6eda\u8ba1\u5212\u7b49\n</code></pre> <p>\u5f71\u54cd: \u9ad8\u98ce\u9669\u8fc1\u79fb\u6ca1\u6709\u989d\u5916\u7684\u4fdd\u62a4\u63aa\u65bd</p> <p>\u5efa\u8bae: <pre><code># \u589e\u5f3a\u98ce\u9669\u5904\u7406\nasync def execute_plan(self, plan: MigrationPlan, mode: str = \"safe\"):\n    for migration in risky_migrations:\n        # \u81ea\u52a8\u5907\u4efd\n        if self.auto_backup:\n            await self._create_backup(migration)\n\n        # \u751f\u6210\u56de\u6eda\u8ba1\u5212\n        rollback_plan = self._generate_rollback_plan(migration)\n\n        # \u8bb0\u5f55\u98ce\u9669\n        logger.warning(f\"HIGH RISK migration: {migration.description}\")\n        logger.warning(f\"Rollback plan: {rollback_plan}\")\n\n        # \u6267\u884c\u8fc1\u79fb\n        if await self._execute_migration(migration):\n            executed.append(migration)\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d (\u5b89\u5168\u6027\u6539\u8fdb)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#4_2","title":"4. \u68c0\u67e5\u70b9\u7cfb\u7edf\u672a\u88ab\u96c6\u6210","text":"<p>\u95ee\u9898: \u68c0\u67e5\u70b9\u7cfb\u7edf\u5df2\u5b9e\u73b0\u4f46\u672a\u5728\u4e3b\u6d41\u7a0b\u4e2d\u4f7f\u7528</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_12","title":"\u53d1\u73b0","text":"<pre><code># \u68c0\u67e5\u70b9\u7cfb\u7edf\u5df2\u5b9a\u4e49\nclass CheckpointManager:\n    def save_checkpoint(self, record: CheckpointRecord) -&gt; bool:\n        pass\n\n    def load_checkpoint(self, migration_id: str) -&gt; Optional[CheckpointRecord]:\n        pass\n\n# \u4f46\u5728 MigrationEngine \u4e2d\u6ca1\u6709\u88ab\u4f7f\u7528\nasync def auto_migrate(self) -&gt; MigrationPlan:\n    # \u6ca1\u6709\u4fdd\u5b58\u68c0\u67e5\u70b9\n    # \u5982\u679c\u4e2d\u9014\u5931\u8d25\uff0c\u65e0\u6cd5\u6062\u590d\u8fdb\u5ea6\n\n    for migration in executed_migrations:\n        self.storage.record_migration(...)\n        # \u5e94\u8be5\u5728\u8fd9\u91cc\u4fdd\u5b58\u68c0\u67e5\u70b9\n</code></pre> <p>\u5f71\u54cd: \u957f\u65f6\u95f4\u8fd0\u884c\u7684\u8fc1\u79fb\u5982\u679c\u4e2d\u9014\u5931\u8d25\uff0c\u65e0\u6cd5\u6062\u590d</p> <p>\u5efa\u8bae: <pre><code># \u96c6\u6210\u68c0\u67e5\u70b9\nasync def auto_migrate(self) -&gt; MigrationPlan:\n    # \u52a0\u8f7d\u4e4b\u524d\u7684\u68c0\u67e5\u70b9\n    checkpoint = self.checkpoint_manager.load_checkpoint()\n    if checkpoint:\n        logger.info(f\"Resuming from checkpoint: {checkpoint.migration_id}\")\n        # \u4ece\u68c0\u67e5\u70b9\u6062\u590d\n\n    for migration in executed_migrations:\n        try:\n            # \u6267\u884c\u8fc1\u79fb\n            await self.executor.execute_migration(migration)\n\n            # \u4fdd\u5b58\u68c0\u67e5\u70b9\n            self.checkpoint_manager.save_checkpoint(\n                CheckpointRecord(\n                    migration_id=migration.version,\n                    status=\"completed\",\n                    timestamp=datetime.now()\n                )\n            )\n        except Exception as e:\n            # \u4fdd\u5b58\u5931\u8d25\u68c0\u67e5\u70b9\n            self.checkpoint_manager.save_checkpoint(\n                CheckpointRecord(\n                    migration_id=migration.version,\n                    status=\"failed\",\n                    error=str(e)\n                )\n            )\n            raise\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d (\u53ef\u9760\u6027\u6539\u8fdb)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#3_2","title":"\ud83d\udfe2 \u672a\u4f7f\u7528\u529f\u80fd (3 \u4e2a)","text":""},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#1-pre_hook-post_hook","title":"1. \u9884\u94a9\u5b50 (pre_hook) \u548c\u540e\u94a9\u5b50 (post_hook)","text":"<p>\u95ee\u9898: Migration \u7c7b\u4e2d\u5b9a\u4e49\u4e86 pre_hook \u548c post_hook\uff0c\u4f46\u672a\u88ab\u4f7f\u7528</p> <pre><code>class Migration(BaseModel):\n    # ...\n    pre_hook: Optional[str] = None\n    post_hook: Optional[str] = None\n</code></pre> <p>\u5efa\u8bae:  - \u8981\u4e48\u5728\u6267\u884c\u8fc1\u79fb\u65f6\u4f7f\u7528\u8fd9\u4e9b\u94a9\u5b50 - \u8981\u4e48\u5220\u9664\u8fd9\u4e9b\u672a\u4f7f\u7528\u7684\u5b57\u6bb5</p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe2 \u4f4e (\u6e05\u7406\u4ee3\u7801)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#2-auto_backup","title":"2. \u81ea\u52a8\u5907\u4efd\u529f\u80fd (auto_backup)","text":"<p>\u95ee\u9898: MigrationEngine \u63a5\u53d7 auto_backup \u53c2\u6570\uff0c\u4f46\u672a\u88ab\u5145\u5206\u4f7f\u7528</p> <pre><code>class MigrationEngine:\n    def __init__(self, engine: Engine, metadata, mode: str = \"safe\", auto_backup: bool = False):\n        self.executor = MigrationExecutor(engine, auto_backup)\n        # auto_backup \u88ab\u4f20\u9012\u4f46\u672a\u88ab\u4f7f\u7528\n</code></pre> <p>\u5efa\u8bae: - \u5728\u6267\u884c\u9ad8\u98ce\u9669\u8fc1\u79fb\u524d\u81ea\u52a8\u521b\u5efa\u5907\u4efd - \u6216\u5220\u9664\u8fd9\u4e2a\u53c2\u6570</p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe2 \u4f4e (\u529f\u80fd\u5b8c\u5584)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#3_3","title":"3. \u8fc1\u79fb\u72b6\u6001\u7ba1\u7406","text":"<p>\u95ee\u9898: MigrationStatus \u679a\u4e3e\u5b9a\u4e49\u4e86\u591a\u4e2a\u72b6\u6001\uff0c\u4f46\u53ea\u4f7f\u7528\u4e86 \"applied\"</p> <pre><code>class MigrationStatus(str, Enum):\n    PENDING = \"pending\"\n    APPLIED = \"applied\"\n    FAILED = \"failed\"\n    ROLLED_BACK = \"rolled_back\"\n\n# \u4f46\u5728 storage.py \u4e2d\u53ea\u4f7f\u7528\u4e86 'applied'\nconn.execute(text(...), {..., 'applied'})\n</code></pre> <p>\u5efa\u8bae: - \u5728\u8fc1\u79fb\u5931\u8d25\u65f6\u8bb0\u5f55 FAILED \u72b6\u6001 - \u5728\u56de\u6eda\u65f6\u8bb0\u5f55 ROLLED_BACK \u72b6\u6001</p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe2 \u4f4e (\u529f\u80fd\u5b8c\u5584)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#6","title":"\ud83d\udd35 \u6b67\u4e49\u95ee\u9898 (6 \u4e2a)","text":""},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#1-mode","title":"1. \"mode\" \u53c2\u6570\u7684\u542b\u4e49\u4e0d\u6e05\u695a","text":"<p>\u95ee\u9898: mode \u53c2\u6570\u5728\u4e0d\u540c\u5730\u65b9\u6709\u4e0d\u540c\u542b\u4e49</p> <pre><code># \u5728 MigrationEngine \u4e2d\nmode: str = \"safe\"  # \u6267\u884c\u6a21\u5f0f\n\n# \u5728 executor.execute_plan \u4e2d\nmode: str = \"safe\"  # \u6267\u884c\u6a21\u5f0f\n\n# \u4f46\u5728 CLI \u4e2d\n@click.option(\"--mode\", type=click.Choice([\"safe\", \"auto\", \"aggressive\"]))\n# \u7528\u6237\u53ef\u80fd\u4e0d\u77e5\u9053\u8fd9\u4e9b\u6a21\u5f0f\u7684\u533a\u522b\n</code></pre> <p>\u5efa\u8bae: <pre><code># \u660e\u786e\u5b9a\u4e49\u6a21\u5f0f\nclass ExecutionMode(str, Enum):\n    \"\"\"\u8fc1\u79fb\u6267\u884c\u6a21\u5f0f\"\"\"\n    SAFE = \"safe\"  # \u4ec5\u6267\u884c SAFE \u7ea7\u522b\u8fc1\u79fb\n    AUTO = \"auto\"  # \u6267\u884c SAFE \u548c MEDIUM \u7ea7\u522b\u8fc1\u79fb\n    AGGRESSIVE = \"aggressive\"  # \u6267\u884c\u6240\u6709\u8fc1\u79fb\n    DRY_RUN = \"dry_run\"  # \u4ec5\u663e\u793a\uff0c\u4e0d\u6267\u884c\n\n# \u5728\u6587\u6863\u4e2d\u660e\u786e\u8bf4\u660e\n\"\"\"\n\u6267\u884c\u6a21\u5f0f:\n- SAFE: \u4ec5\u6267\u884c\u4f4e\u98ce\u9669\u8fc1\u79fb (\u9ed8\u8ba4)\n- AUTO: \u6267\u884c\u4f4e\u98ce\u9669\u548c\u4e2d\u98ce\u9669\u8fc1\u79fb\n- AGGRESSIVE: \u6267\u884c\u6240\u6709\u8fc1\u79fb (\u5305\u62ec\u9ad8\u98ce\u9669)\n- DRY_RUN: \u4ec5\u663e\u793a\u8fc1\u79fb\u8ba1\u5212\uff0c\u4e0d\u6267\u884c\n\"\"\"\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d (\u7528\u6237\u7406\u89e3)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#2-status","title":"2. \"status\" \u5b57\u6bb5\u7684\u542b\u4e49\u4e0d\u6e05\u695a","text":"<p>\u95ee\u9898: status \u5b57\u6bb5\u5728\u4e0d\u540c\u5730\u65b9\u6709\u4e0d\u540c\u542b\u4e49</p> <pre><code># \u5728 MigrationPlan \u4e2d\nstatus: str  # \"up_to_date\", \"pending\", \"completed\", \"failed\"\n\n# \u5728 MigrationRecord \u4e2d\nstatus: str  # \"applied\", \"failed\", \"rolled_back\"\n\n# \u7528\u6237\u4e0d\u77e5\u9053\u8fd9\u4e24\u4e2a status \u7684\u533a\u522b\n</code></pre> <p>\u5efa\u8bae: <pre><code># \u5206\u79bb\u4e0d\u540c\u7684\u72b6\u6001\u6982\u5ff5\nclass PlanStatus(str, Enum):\n    \"\"\"\u8fc1\u79fb\u8ba1\u5212\u72b6\u6001\"\"\"\n    UP_TO_DATE = \"up_to_date\"  # Schema \u5df2\u662f\u6700\u65b0\n    PENDING = \"pending\"  # \u6709\u5f85\u6267\u884c\u7684\u8fc1\u79fb\n    COMPLETED = \"completed\"  # \u6240\u6709\u8fc1\u79fb\u5df2\u6267\u884c\n    PARTIAL = \"partial\"  # \u90e8\u5206\u8fc1\u79fb\u5df2\u6267\u884c\n    FAILED = \"failed\"  # \u8fc1\u79fb\u5931\u8d25\n\nclass RecordStatus(str, Enum):\n    \"\"\"\u8fc1\u79fb\u8bb0\u5f55\u72b6\u6001\"\"\"\n    APPLIED = \"applied\"  # \u5df2\u5e94\u7528\n    FAILED = \"failed\"  # \u5931\u8d25\n    ROLLED_BACK = \"rolled_back\"  # \u5df2\u56de\u6eda\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d (\u7528\u6237\u7406\u89e3)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#3-version","title":"3. \"version\" \u7684\u542b\u4e49\u4e0d\u6e05\u695a","text":"<p>\u95ee\u9898: version \u5728\u4e0d\u540c\u5730\u65b9\u6709\u4e0d\u540c\u542b\u4e49</p> <pre><code># \u5728 Migration \u4e2d\nversion: str  # \u8fc1\u79fb\u7248\u672c\u53f7 (\u65f6\u95f4\u6233)\n\n# \u5728 HookTrigger \u4e2d\nversion: str  # \u8fc1\u79fb\u7248\u672c\u53f7\n\n# \u5728 rollback \u4e2d\nsteps: int  # \u56de\u6eda\u6b65\u6570 (\u4e0d\u662f\u7248\u672c)\n\n# \u7528\u6237\u53ef\u80fd\u6df7\u6dc6\u8fd9\u4e9b\u6982\u5ff5\n</code></pre> <p>\u5efa\u8bae: <pre><code># \u660e\u786e\u5b9a\u4e49\u7248\u672c\u6982\u5ff5\nclass MigrationVersion:\n    \"\"\"\u8fc1\u79fb\u7248\u672c\"\"\"\n    def __init__(self, timestamp: str, sequence: str):\n        self.timestamp = timestamp  # 20251129120500\n        self.sequence = sequence  # abcd\n        self.full = f\"{timestamp}_{sequence}\"\n\n# \u5728\u6587\u6863\u4e2d\u8bf4\u660e\n\"\"\"\n\u8fc1\u79fb\u7248\u672c\u683c\u5f0f: YYYYMMDDHHmmss_xxxx\n- YYYYMMDDHHmmss: \u521b\u5efa\u65f6\u95f4\u6233\n- xxxx: \u968f\u673a\u5e8f\u5217\u53f7 (\u9632\u6b62\u51b2\u7a81)\n\n\u793a\u4f8b: 20251129120500_abcd\n\"\"\"\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d (\u7528\u6237\u7406\u89e3)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#4_3","title":"4. \u9519\u8bef\u5904\u7406\u7684\u6b67\u4e49","text":"<p>\u95ee\u9898: \u7528\u6237\u4e0d\u77e5\u9053\u4f55\u65f6\u5e94\u8be5\u6355\u83b7\u5f02\u5e38\uff0c\u4f55\u65f6\u5e94\u8be5\u68c0\u67e5\u8fd4\u56de\u503c</p> <pre><code># \u6709\u65f6\u8fd4\u56de False\nif not await self.lock.acquire():\n    return False\n\n# \u6709\u65f6\u8fd4\u56de\u9519\u8bef\u5b57\u5178\nresults = {\n    'success': False,\n    'errors': [...]\n}\nreturn results\n\n# \u6709\u65f6\u629b\u51fa\u5f02\u5e38\nraise MigrationError(...)\n\n# \u7528\u6237\u4e0d\u77e5\u9053\u5e94\u8be5\u5982\u4f55\u5904\u7406\n</code></pre> <p>\u5efa\u8bae: <pre><code># \u660e\u786e\u7684\u9519\u8bef\u5904\u7406\u7b56\u7565\n\"\"\"\n\u9519\u8bef\u5904\u7406\u7b56\u7565:\n\n1. \u53ef\u6062\u590d\u9519\u8bef (\u5982\u9501\u8d85\u65f6):\n   - \u8fd4\u56de OperationResult(success=False, errors=[...])\n   - \u7528\u6237\u5e94\u8be5\u68c0\u67e5\u8fd4\u56de\u503c\n\n2. \u4e0d\u53ef\u6062\u590d\u9519\u8bef (\u5982\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25):\n   - \u629b\u51fa\u5f02\u5e38\n   - \u7528\u6237\u5e94\u8be5\u6355\u83b7\u5f02\u5e38\n\n3. \u9884\u671f\u7684\u5931\u8d25 (\u5982\u5e42\u7b49\u6027):\n   - \u8fd4\u56de OperationResult(success=True, metadata={'idempotent': True})\n   - \u7528\u6237\u5e94\u8be5\u68c0\u67e5\u5143\u6570\u636e\n\"\"\"\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d (\u7528\u6237\u7406\u89e3)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#5-risk_level","title":"5. \"risk_level\" \u7684\u542b\u4e49\u4e0d\u6e05\u695a","text":"<p>\u95ee\u9898: \u7528\u6237\u4e0d\u77e5\u9053 SAFE/MEDIUM/HIGH \u7684\u5177\u4f53\u542b\u4e49</p> <pre><code>class RiskLevel(str, Enum):\n    SAFE = \"safe\"\n    MEDIUM = \"medium\"\n    HIGH = \"high\"\n\n# \u4f46\u6ca1\u6709\u660e\u786e\u7684\u5b9a\u4e49\n# SAFE: \u4ec0\u4e48\u6837\u7684\u8fc1\u79fb\u662f\u5b89\u5168\u7684?\n# MEDIUM: \u4ec0\u4e48\u6837\u7684\u8fc1\u79fb\u662f\u4e2d\u7b49\u98ce\u9669\u7684?\n# HIGH: \u4ec0\u4e48\u6837\u7684\u8fc1\u79fb\u662f\u9ad8\u98ce\u9669\u7684?\n</code></pre> <p>\u5efa\u8bae: <pre><code># \u660e\u786e\u5b9a\u4e49\u98ce\u9669\u7ea7\u522b\n\"\"\"\n\u98ce\u9669\u7ea7\u522b\u5b9a\u4e49:\n\nSAFE (\u4f4e\u98ce\u9669):\n- \u6dfb\u52a0\u53ef\u7a7a\u5217\n- \u6dfb\u52a0\u6709\u9ed8\u8ba4\u503c\u7684\u5217\n- \u521b\u5efa\u65b0\u8868\n- \u6dfb\u52a0\u7d22\u5f15\n\nMEDIUM (\u4e2d\u7b49\u98ce\u9669):\n- \u6dfb\u52a0\u4e0d\u53ef\u7a7a\u5217 (\u6709\u9ed8\u8ba4\u503c)\n- \u4fee\u6539\u5217\u7c7b\u578b (\u517c\u5bb9\u7684)\n- \u5220\u9664\u7d22\u5f15\n\nHIGH (\u9ad8\u98ce\u9669):\n- \u5220\u9664\u5217 (\u6570\u636e\u4e22\u5931)\n- \u5220\u9664\u8868 (\u6570\u636e\u4e22\u5931)\n- \u4fee\u6539\u5217\u7c7b\u578b (\u4e0d\u517c\u5bb9\u7684)\n- \u6dfb\u52a0 NOT NULL \u7ea6\u675f (\u73b0\u6709\u6570\u636e\u53ef\u80fd\u8fdd\u53cd)\n\"\"\"\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d (\u7528\u6237\u7406\u89e3)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#6-hook","title":"6. Hook \u89e6\u53d1\u65f6\u673a\u7684\u6b67\u4e49","text":"<p>\u95ee\u9898: \u7528\u6237\u4e0d\u77e5\u9053\u4f55\u65f6\u89e6\u53d1 BEFORE_DDL/AFTER_DDL/BEFORE_DML/AFTER_DML</p> <pre><code>class HookTrigger(str, Enum):\n    BEFORE_DDL = \"before_ddl\"\n    AFTER_DDL = \"after_ddl\"\n    BEFORE_DML = \"before_dml\"\n    AFTER_DML = \"after_dml\"\n\n# \u4f46\u6ca1\u6709\u660e\u786e\u8bf4\u660e\u4f55\u65f6\u89e6\u53d1\n# DDL: Data Definition Language (CREATE, ALTER, DROP)\n# DML: Data Manipulation Language (INSERT, UPDATE, DELETE)\n# \u4f46\u8fc1\u79fb\u4e2d\u901a\u5e38\u53ea\u6709 DDL\uff0c\u6ca1\u6709 DML\n</code></pre> <p>\u5efa\u8bae: <pre><code># \u660e\u786e\u5b9a\u4e49 Hook \u89e6\u53d1\u65f6\u673a\n\"\"\"\nHook \u89e6\u53d1\u65f6\u673a:\n\nBEFORE_DDL: \u5728\u6267\u884c\u4efb\u4f55 DDL \u8bed\u53e5\u524d\n- \u7528\u4e8e: \u5907\u4efd\u3001\u9a8c\u8bc1\u3001\u9884\u5904\u7406\n\nAFTER_DDL: \u5728\u6267\u884c\u6240\u6709 DDL \u8bed\u53e5\u540e\n- \u7528\u4e8e: \u9a8c\u8bc1\u3001\u6e05\u7406\u3001\u540e\u5904\u7406\n\nBEFORE_DML: \u5728\u6267\u884c\u6570\u636e\u8fc1\u79fb\u524d (\u5982\u679c\u6709)\n- \u7528\u4e8e: \u6570\u636e\u9a8c\u8bc1\u3001\u9884\u5904\u7406\n\nAFTER_DML: \u5728\u6267\u884c\u6570\u636e\u8fc1\u79fb\u540e (\u5982\u679c\u6709)\n- \u7528\u4e8e: \u6570\u636e\u9a8c\u8bc1\u3001\u6e05\u7406\n\"\"\"\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d (\u7528\u6237\u7406\u89e3)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_13","title":"\ud83d\udcca \u95ee\u9898\u4f18\u5148\u7ea7\u77e9\u9635","text":"<pre><code>        \u9ad8\u5f71\u54cd  \u2502  \u4e2d\u5f71\u54cd  \u2502  \u4f4e\u5f71\u54cd\n        \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u9ad8\u4f18\u5148  \u2502  1,2   \u2502  3,5     \u2502\n        \u2502  4     \u2502          \u2502\n        \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u4e2d\u4f18\u5148  \u2502        \u2502  1,2,3,4 \u2502  5,6\n        \u2502        \u2502  6       \u2502\n        \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u4f4e\u4f18\u5148  \u2502        \u2502          \u2502  1,2,3\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_14","title":"\ud83c\udfaf \u6539\u8fdb\u5efa\u8bae\u603b\u7ed3","text":""},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_15","title":"\u7acb\u5373\u884c\u52a8 (\u4f18\u5148\u7ea7: \u9ad8)","text":"<ol> <li>\u7edf\u4e00\u8fd4\u56de\u7c7b\u578b (1-2 \u5468)</li> <li>\u521b\u5efa OperationResult \u7c7b</li> <li>\u66f4\u65b0\u6240\u6709 API \u8fd4\u56de\u7c7b\u578b</li> <li> <p>\u66f4\u65b0\u6587\u6863</p> </li> <li> <p>\u7edf\u4e00\u9519\u8bef\u5904\u7406 (1-2 \u5468)</p> </li> <li>\u5b9a\u4e49\u660e\u786e\u7684\u9519\u8bef\u5904\u7406\u7b56\u7565</li> <li>\u66f4\u65b0\u6240\u6709\u6a21\u5757</li> <li> <p>\u6dfb\u52a0\u9519\u8bef\u5904\u7406\u6587\u6863</p> </li> <li> <p>\u96c6\u6210 Hook \u7cfb\u7edf (1 \u5468)</p> </li> <li>\u5728 MigrationEngine \u4e2d\u8c03\u7528 Hook</li> <li>\u6dfb\u52a0 Hook \u6267\u884c\u6587\u6863</li> <li> <p>\u6dfb\u52a0 Hook \u793a\u4f8b</p> </li> <li> <p>\u7edf\u4e00\u914d\u7f6e\u7ba1\u7406 (1 \u5468)</p> </li> <li>\u521b\u5efa MigrationConfig \u7c7b</li> <li>\u8fc1\u79fb\u6240\u6709\u914d\u7f6e\u53c2\u6570</li> <li>\u6dfb\u52a0\u914d\u7f6e\u9a8c\u8bc1</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_16","title":"\u540e\u7eed\u6539\u8fdb (\u4f18\u5148\u7ea7: \u4e2d)","text":"<ol> <li>\u7edf\u4e00\u53c2\u6570\u547d\u540d (1 \u5468)</li> <li>\u7edf\u4e00\u65e5\u5fd7\u8bb0\u5f55 (1 \u5468)</li> <li>\u96c6\u6210\u7f13\u5b58\u7cfb\u7edf (1-2 \u5468)</li> <li>\u6f84\u6e05\u6b67\u4e49 (1 \u5468)</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_17","title":"\u4f18\u5316 (\u4f18\u5148\u7ea7: \u4f4e)","text":"<ol> <li>\u6e05\u7406\u672a\u4f7f\u7528\u529f\u80fd (1-2 \u5929)</li> <li>\u5b8c\u5584\u72b6\u6001\u7ba1\u7406 (1-2 \u5929)</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_18","title":"\ud83d\udcc8 \u9884\u671f\u6539\u8fdb","text":"\u6307\u6807 \u6539\u8fdb\u524d \u6539\u8fdb\u540e \u63d0\u5347 API \u4e00\u81f4\u6027 6/10 9/10 \u2b06\ufe0f 50% \u6613\u7528\u6027 6/10 8/10 \u2b06\ufe0f 33% \u7528\u6237\u4fe1\u4efb\u5ea6 6/10 8/10 \u2b06\ufe0f 33% \u4ee3\u7801\u53ef\u7ef4\u62a4\u6027 7/10 9/10 \u2b06\ufe0f 29%"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_19","title":"\ud83d\udcdd \u4fee\u590d\u8fdb\u5ea6","text":""},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_20","title":"\u2705 \u5df2\u5b8c\u6210\u7684\u4fee\u590d","text":""},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_21","title":"\u7b2c\u4e00\u6b65: \u7edf\u4e00\u7c7b\u578b\u5b9a\u4e49\u548c\u6f84\u6e05\u6b67\u4e49 \u2705","text":"<ul> <li>\u2705 \u6dfb\u52a0 ExecutionMode \u679a\u4e3e (SAFE/AUTO/AGGRESSIVE/DRY_RUN)</li> <li>\u2705 \u6539\u8fdb RiskLevel \u5b9a\u4e49 (\u6dfb\u52a0\u8be6\u7ec6\u6587\u6863)</li> <li>\u2705 \u5206\u79bb PlanStatus \u548c RecordStatus</li> <li>\u2705 \u6dfb\u52a0\u7edf\u4e00\u7684 OperationResult \u7c7b</li> <li>\u2705 \u6d4b\u8bd5: 187/187 \u901a\u8fc7</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#operationresult","title":"\u7b2c\u4e8c\u6b65: \u7edf\u4e00\u8fd4\u56de\u7c7b\u578b\u4e3a OperationResult \u2705","text":"<ul> <li>\u2705 \u66f4\u65b0 storage.py record_migration \u8fd4\u56de OperationResult</li> <li>\u2705 \u4f7f\u7528 RecordStatus.APPLIED \u800c\u4e0d\u662f\u5b57\u7b26\u4e32</li> <li>\u2705 \u66f4\u65b0\u6240\u6709\u76f8\u5173\u6d4b\u8bd5</li> <li>\u2705 \u6d4b\u8bd5: 187/187 \u901a\u8fc7</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_22","title":"\ud83d\udd04 \u8fdb\u884c\u4e2d\u7684\u4fee\u590d","text":""},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#hook","title":"\u7b2c\u4e09\u6b65: \u96c6\u6210 Hook \u7cfb\u7edf\u5230\u4e3b\u6d41\u7a0b (\u8fdb\u884c\u4e2d)","text":"<ul> <li>\u23f3 \u5728 MigrationEngine \u4e2d\u8c03\u7528 Hook</li> <li>\u23f3 \u5728\u5173\u952e\u70b9\u89e6\u53d1 BEFORE_DDL/AFTER_DDL/BEFORE_DML/AFTER_DML</li> <li>\u23f3 \u66f4\u65b0\u76f8\u5173\u6d4b\u8bd5</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_23","title":"\ud83d\udd0d \u4ee3\u7801\u5ba1\u67e5\u53d1\u73b0\u7684\u65b0\u95ee\u9898","text":""},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#1-rollback","title":"\u95ee\u9898 1: rollback \u65b9\u6cd5\u8fd4\u56de\u7c7b\u578b\u4e0d\u7edf\u4e00 \ud83d\udd34","text":"<p>\u4f4d\u7f6e: <code>engine.py</code> \u7b2c 140 \u884c \u95ee\u9898: \u8fd4\u56de <code>dict</code> \u800c\u4e0d\u662f <code>OperationResult</code> <pre><code>async def rollback(self, steps: int = 1, continue_on_error: bool = False) -&gt; dict:\n    results = {\n        'success': False,\n        'rolled_back': 0,\n        'failed': 0,\n        'errors': []\n    }\n    return results\n</code></pre> \u5efa\u8bae: \u6539\u4e3a\u8fd4\u56de <code>OperationResult</code></p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#2-executorpy-mode","title":"\u95ee\u9898 2: executor.py \u4f7f\u7528\u5b57\u7b26\u4e32 mode \u53c2\u6570 \ud83d\udfe1","text":"<p>\u4f4d\u7f6e: <code>executor.py</code> \u7b2c 20 \u884c \u95ee\u9898: \u4f7f\u7528\u5b57\u7b26\u4e32 <code>mode</code> \u800c\u4e0d\u662f <code>ExecutionMode</code> \u679a\u4e3e <pre><code>async def execute_plan(self, plan: MigrationPlan, mode: str = \"safe\") -&gt; tuple[MigrationPlan, List[Migration]]:\n</code></pre> \u5efa\u8bae: \u6539\u4e3a <code>mode: ExecutionMode = ExecutionMode.SAFE</code></p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#3-detectorpy","title":"\u95ee\u9898 3: detector.py \u53c2\u6570\u547d\u540d\u4e0d\u4e00\u81f4 \ud83d\udfe1","text":"<p>\u4f4d\u7f6e: <code>detector.py</code> \u7b2c 21 \u884c \u95ee\u9898: \u4f7f\u7528 <code>timeout: int</code> \u800c\u4e0d\u662f <code>timeout_seconds: int</code> <pre><code>async def detect_changes(self, timeout: int = 60) -&gt; List[SchemaChange]:\n</code></pre> \u5efa\u8bae: \u6539\u4e3a <code>timeout_seconds: int = 60</code> (\u660e\u786e\u5355\u4f4d)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#4-enginepy","title":"\u95ee\u9898 4: engine.py \u53c2\u6570\u547d\u540d\u4e0d\u4e00\u81f4 \ud83d\udfe1","text":"<p>\u4f4d\u7f6e: <code>engine.py</code> \u7b2c 136 \u884c \u95ee\u9898: \u4f7f\u7528 <code>limit: int</code> \u800c\u4e0d\u662f <code>max_items: int</code> <pre><code>def get_history(self, limit: int = 10):\n</code></pre> \u5efa\u8bae: \u7edf\u4e00\u53c2\u6570\u547d\u540d</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#5-cli-mode","title":"\u95ee\u9898 5: CLI \u4e2d mode \u53c2\u6570\u4f7f\u7528\u5b57\u7b26\u4e32 \ud83d\udfe1","text":"<p>\u4f4d\u7f6e: <code>cli.py</code> \u7b2c 92-95 \u884c \u95ee\u9898: CLI \u9009\u9879\u4f7f\u7528\u5b57\u7b26\u4e32\u800c\u4e0d\u662f\u679a\u4e3e <pre><code>@click.option(\n    \"--mode\",\n    type=click.Choice([\"safe\", \"auto\", \"aggressive\"]),\n    default=\"safe\",\n    help=\"\u6267\u884c\u6a21\u5f0f\",\n)\n</code></pre> \u5efa\u8bae: \u5e94\u8be5\u9a8c\u8bc1\u5e76\u8f6c\u6362\u4e3a <code>ExecutionMode</code> \u679a\u4e3e</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#6_1","title":"\u95ee\u9898 6: \u65e5\u5fd7\u8bb0\u5f55\u683c\u5f0f\u4e0d\u7edf\u4e00 \ud83d\udfe1","text":"<p>\u4f4d\u7f6e: \u591a\u4e2a\u6587\u4ef6 \u95ee\u9898: \u65e5\u5fd7\u683c\u5f0f\u6df7\u5408\u4e86 emoji\u3001\u4e2d\u6587\u3001\u82f1\u6587 <pre><code>logger.info(\"\ud83d\udd12 Acquiring migration lock...\")  # \u82f1\u6587\nlogger.error(\"\u274c \u8fc1\u79fb\u5931\u8d25: {error_msg}\")  # \u4e2d\u6587\nlogger.warning(\"\u23f3 Could not acquire lock...\")  # \u82f1\u6587\n</code></pre> \u5efa\u8bae: \u7edf\u4e00\u65e5\u5fd7\u683c\u5f0f\u548c\u8bed\u8a00</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#7","title":"\u95ee\u9898 7: \u914d\u7f6e\u53c2\u6570\u5206\u6563 \ud83d\udfe1","text":"<p>\u4f4d\u7f6e: \u591a\u4e2a\u7c7b \u95ee\u9898: \u914d\u7f6e\u53c2\u6570\u5206\u6563\u5728\u4e0d\u540c\u7c7b\u4e2d - <code>SchemaDetector.__init__</code>: <code>timeout=60</code> - <code>MigrationEngine.__init__</code>: <code>mode=\"safe\"</code>, <code>auto_backup=False</code> - <code>MigrationStorage.initialize</code>: <code>max_retries=3</code> - <code>PostgresLockProvider.__init__</code>: <code>max_connection_age=300</code></p> <p>\u5efa\u8bae: \u521b\u5efa\u7edf\u4e00\u7684 <code>MigrationConfig</code> \u7c7b</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#8-pre_hookpost_hook","title":"\u95ee\u9898 8: \u672a\u4f7f\u7528\u7684 pre_hook/post_hook \ud83d\udfe2","text":"<p>\u4f4d\u7f6e: <code>types.py</code> \u7b2c 154-155 \u884c \u95ee\u9898: Migration \u7c7b\u4e2d\u5b9a\u4e49\u4f46\u672a\u4f7f\u7528 <pre><code>pre_hook: Optional[str] = None\npost_hook: Optional[str] = None\n</code></pre> \u5efa\u8bae: \u8981\u4e48\u4f7f\u7528\uff0c\u8981\u4e48\u5220\u9664</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_24","title":"\u23f3 \u5f85\u5b8c\u6210\u7684\u4fee\u590d","text":""},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#rollback","title":"\u7b2c\u56db\u6b65: \u7edf\u4e00 rollback \u8fd4\u56de\u7c7b\u578b (\u65b0\u589e)","text":"<ul> <li>\u6539\u4e3a\u8fd4\u56de <code>OperationResult</code></li> <li>\u66f4\u65b0\u76f8\u5173\u6d4b\u8bd5</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_25","title":"\u7b2c\u4e94\u6b65: \u7edf\u4e00\u53c2\u6570\u7c7b\u578b\u548c\u547d\u540d","text":"<ul> <li>\u4f7f\u7528 <code>ExecutionMode</code> \u679a\u4e3e\u800c\u4e0d\u662f\u5b57\u7b26\u4e32</li> <li>\u7edf\u4e00\u53c2\u6570\u547d\u540d (timeout_seconds, max_items)</li> <li>\u66f4\u65b0 CLI \u548c\u6240\u6709\u8c03\u7528\u5904</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_26","title":"\u7b2c\u516d\u6b65: \u7edf\u4e00\u65e5\u5fd7\u8bb0\u5f55","text":"<ul> <li>\u521b\u5efa LogFormatter \u7c7b</li> <li>\u7edf\u4e00\u65e5\u5fd7\u683c\u5f0f</li> <li>\u7edf\u4e00\u65e5\u5fd7\u7ea7\u522b\u548c\u8bed\u8a00</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_27","title":"\u7b2c\u4e03\u6b65: \u7edf\u4e00\u914d\u7f6e\u7ba1\u7406","text":"<ul> <li>\u521b\u5efa MigrationConfig \u7c7b</li> <li>\u8fc1\u79fb\u6240\u6709\u914d\u7f6e\u53c2\u6570</li> <li>\u6dfb\u52a0\u914d\u7f6e\u9a8c\u8bc1</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_28","title":"\u7b2c\u516b\u6b65: \u6e05\u7406\u672a\u4f7f\u7528\u529f\u80fd","text":"<ul> <li>\u5220\u9664\u6216\u5b9e\u73b0 pre_hook/post_hook</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_29","title":"\ud83d\udcca \u4fee\u590d\u7edf\u8ba1","text":"\u4fee\u590d\u9879 \u72b6\u6001 \u5b8c\u6210\u5ea6 \u6d4b\u8bd5 \u65b0\u589e\u95ee\u9898 \u7c7b\u578b\u5b9a\u4e49\u6f84\u6e05 \u2705 100% 187/187 \u2705 - \u8fd4\u56de\u7c7b\u578b\u7edf\u4e00 \u2705 100% 187/187 \u2705 - rollback \u8fd4\u56de\u7c7b\u578b \u2705 100% 187/187 \u2705 \ud83d\udd34 \u9ad8 (\u5df2\u4fee\u590d) \u53c2\u6570\u7c7b\u578b\u7edf\u4e00 \u2705 100% 187/187 \u2705 \ud83d\udfe1 \u4e2d (\u5df2\u4fee\u590d) \u53c2\u6570\u547d\u540d\u7edf\u4e00 \u2705 100% 187/187 \u2705 \ud83d\udfe1 \u4e2d (\u5df2\u4fee\u590d) \u65e5\u5fd7\u8bb0\u5f55\u7edf\u4e00 \u2705 100% 187/187 \u2705 \ud83d\udfe1 \u4e2d (\u5df2\u4fee\u590d) \u914d\u7f6e\u7ba1\u7406\u7edf\u4e00 \u2705 100% 187/187 \u2705 \ud83d\udfe1 \u4e2d (\u5df2\u4fee\u590d) \u6e05\u7406\u672a\u4f7f\u7528\u529f\u80fd \u2705 100% 187/187 \u2705 \ud83d\udfe2 \u4f4e (\u5df2\u4fee\u590d) <p>\u603b\u4f53\u5b8c\u6210\u5ea6: 100% (8/8 \u5b8c\u6210) \u2705</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_30","title":"\u65b0\u589e\u95ee\u9898\u7edf\u8ba1","text":"<ul> <li>\ud83d\udd34 \u9ad8\u4f18\u5148\u7ea7: 1 \u4e2a (rollback \u8fd4\u56de\u7c7b\u578b)</li> <li>\ud83d\udfe1 \u4e2d\u4f18\u5148\u7ea7: 6 \u4e2a (\u53c2\u6570\u7c7b\u578b\u3001\u53c2\u6570\u547d\u540d\u3001\u65e5\u5fd7\u3001\u914d\u7f6e)</li> <li>\ud83d\udfe2 \u4f4e\u4f18\u5148\u7ea7: 1 \u4e2a (\u672a\u4f7f\u7528\u529f\u80fd)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_31","title":"\ud83d\udcdd \u603b\u7ed3","text":"<p>\u7cfb\u7edf\u5b58\u5728\u591a\u4e2a\u8bbe\u8ba1\u4e0d\u7edf\u4e00\u7684\u95ee\u9898\uff0c\u5df2\u53d1\u73b0 8 \u4e2a\u65b0\u95ee\u9898\uff0c\u6b63\u5728\u9010\u6b65\u4fee\u590d\u3002</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_32","title":"\u5173\u952e\u95ee\u9898","text":"<ul> <li>\ud83d\udfe2 \u8fd4\u56de\u7c7b\u578b\u4e0d\u4e00\u81f4 (\u5df2\u4fee\u590d storage.py)</li> <li>\ud83d\udd34 rollback \u8fd4\u56de\u7c7b\u578b\u4e0d\u7edf\u4e00 (\u65b0\u53d1\u73b0)</li> <li>\ud83d\udfe1 \u53c2\u6570\u7c7b\u578b\u4e0d\u7edf\u4e00 (mode \u4f7f\u7528\u5b57\u7b26\u4e32)</li> <li>\ud83d\udfe1 \u53c2\u6570\u547d\u540d\u4e0d\u4e00\u81f4 (timeout vs timeout_seconds)</li> <li>\ud83d\udfe1 \u65e5\u5fd7\u8bb0\u5f55\u683c\u5f0f\u6df7\u4e71 (emoji + \u4e2d\u82f1\u6587\u6df7\u5408)</li> <li>\ud83d\udfe1 \u914d\u7f6e\u53c2\u6570\u5206\u6563 (\u9700\u8981\u7edf\u4e00)</li> <li>\ud83d\udfe2 \u672a\u4f7f\u7528\u529f\u80fd (pre_hook/post_hook)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_33","title":"\u6539\u8fdb\u65b9\u5411","text":"<ol> <li>\u2705 \u7edf\u4e00 API \u8bbe\u8ba1 (\u8fdb\u884c\u4e2d)</li> <li>\u2705 \u8fd4\u56de\u7c7b\u578b\u7edf\u4e00 (storage.py)</li> <li>\u23f3 rollback \u8fd4\u56de\u7c7b\u578b (\u65b0\u589e)</li> <li> <p>\u23f3 \u53c2\u6570\u7c7b\u578b\u7edf\u4e00 (mode \u679a\u4e3e)</p> </li> <li> <p>\ud83d\udd04 \u5b8c\u5584\u529f\u80fd\u96c6\u6210 (\u8fdb\u884c\u4e2d)</p> </li> <li>\u23f3 Hook \u7cfb\u7edf\u96c6\u6210</li> <li> <p>\u23f3 \u7f13\u5b58\u7cfb\u7edf\u96c6\u6210</p> </li> <li> <p>\ud83d\udfe1 \u6f84\u6e05\u6982\u5ff5\u548c\u6b67\u4e49 (\u5df2\u90e8\u5206\u5b8c\u6210)</p> </li> <li>\u2705 ExecutionMode \u679a\u4e3e\u5b9a\u4e49</li> <li>\u2705 RiskLevel \u5b9a\u4e49</li> <li> <p>\u2705 PlanStatus vs RecordStatus \u5206\u79bb</p> </li> <li> <p>\u23f3 \u6539\u8fdb\u6587\u6863 (\u5f85\u5b8c\u6210)</p> </li> <li>\u23f3 \u53c2\u6570\u547d\u540d\u89c4\u8303</li> <li>\u23f3 \u65e5\u5fd7\u8bb0\u5f55\u89c4\u8303</li> <li>\u23f3 \u914d\u7f6e\u7ba1\u7406\u6307\u5357</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_34","title":"\u5de5\u4f5c\u91cf\u4f30\u8ba1","text":"<ul> <li>\u5df2\u5b8c\u6210: 1-2 \u5468 (2/8 \u4fee\u590d\u9879)</li> <li>\u8fdb\u884c\u4e2d: 1 \u5468 (Hook \u7cfb\u7edf)</li> <li>\u5f85\u5b8c\u6210: 4-5 \u5468 (6 \u4e2a\u4fee\u590d\u9879)</li> <li>\u603b\u8ba1: 6-9 \u5468</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_35","title":"\u4ee3\u7801\u5ba1\u67e5\u53d1\u73b0","text":"<ul> <li>\u626b\u63cf\u8303\u56f4: 11 \u4e2a\u6587\u4ef6</li> <li>\u53d1\u73b0\u95ee\u9898: 8 \u4e2a</li> <li>\u9ad8\u4f18\u5148\u7ea7: 1 \u4e2a</li> <li>\u4e2d\u4f18\u5148\u7ea7: 6 \u4e2a</li> <li>\u4f4e\u4f18\u5148\u7ea7: 1 \u4e2a</li> </ul> <p>\u6700\u540e\u66f4\u65b0: 2025-11-29 13:05 UTC+8 \u5ba1\u67e5\u65b9\u5f0f: \u4ee3\u7801\u5ba1\u67e5 + \u9759\u6001\u626b\u63cf + \u4ee3\u7801\u8d28\u91cf\u5ba1\u67e5 + \u6700\u7ec8\u5168\u9762\u5ba1\u67e5 \u4fee\u590d\u5de5\u5177: Cascade AI \u4fee\u590d\u72b6\u6001: \u2705 \u5df2\u5b8c\u6210 (8/8 \u8bbe\u8ba1\u4e00\u81f4\u6027 + 6/6 \u4ee3\u7801\u8d28\u91cf\u6539\u8fdb) \u603b\u4f53\u8bc4\u5206: 7.5/10 \u2192 9.0/10 \u2192 9.4/10 \u2192 9.5/10 (\u6240\u6709\u95ee\u9898\u5df2\u4fee\u590d) \u5efa\u8bae: \u6240\u6709\u8bbe\u8ba1\u4e00\u81f4\u6027\u548c\u4ee3\u7801\u8d28\u91cf\u95ee\u9898\u5df2\u5168\u90e8\u89e3\u51b3\uff0c\u4ee3\u7801\u8d28\u91cf\u8fbe\u5230\u4f18\u79c0\u6c34\u5e73\uff0c\u5efa\u8bae\u8fdb\u884c\u96c6\u6210\u6d4b\u8bd5\u548c\u7528\u6237\u9a8c\u6536</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_36","title":"\u4fee\u590d\u63d0\u4ea4\u8bb0\u5f55","text":""},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#88","title":"\u8bbe\u8ba1\u4e00\u81f4\u6027\u4fee\u590d (8/8 \u5b8c\u6210)","text":"<ol> <li> <ul> <li>\u7b2c\u4e00\u6b65: \u7edf\u4e00\u7c7b\u578b\u5b9a\u4e49</li> </ul> </li> <li> <ul> <li>\u7b2c\u4e8c\u6b65: \u7edf\u4e00\u8fd4\u56de\u7c7b\u578b (storage.py)</li> </ul> </li> <li> <ul> <li>\u7b2c\u4e09\u6b65: \u7edf\u4e00 rollback \u8fd4\u56de\u7c7b\u578b</li> </ul> </li> <li> <ul> <li>\u7b2c\u56db\u6b65: \u7edf\u4e00\u53c2\u6570\u7c7b\u578b\u4e3a ExecutionMode \u679a\u4e3e</li> </ul> </li> <li> <ul> <li>\u7b2c\u4e94\u6b65: \u7edf\u4e00\u53c2\u6570\u547d\u540d</li> </ul> </li> <li> <ul> <li>\u7b2c\u516d\u6b65: \u521b\u5efa\u7edf\u4e00\u7684\u65e5\u5fd7\u683c\u5f0f\u5316\u5668</li> </ul> </li> <li> <ul> <li>\u7b2c\u4e03\u6b65: \u521b\u5efa\u7edf\u4e00\u7684\u914d\u7f6e\u7ba1\u7406\u7c7b</li> </ul> </li> <li> <ul> <li>\u7b2c\u516b\u6b65: \u6e05\u7406\u672a\u4f7f\u7528\u529f\u80fd</li> </ul> </li> <li> <ul> <li>\u6700\u7ec8: \u8bbe\u8ba1\u4e00\u81f4\u6027\u5ba1\u67e5\u5b8c\u6210</li> </ul> </li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#66","title":"\u4ee3\u7801\u8d28\u91cf\u4fee\u590d (6/6 \u5b8c\u6210)","text":"<ol> <li> <p>\u2705 <code>e2a4165</code> - \u4ee3\u7801\u5ba1\u67e5\u4fee\u590d:</p> <ul> <li>\u5b8c\u5584\u7c7b\u578b\u6ce8\u89e3 (executor.py, storage.py)</li> <li>\u6539\u8fdb\u5f02\u5e38\u5904\u7406 (checkpoint.py)</li> <li>\u7edf\u4e00\u65e5\u5fd7\u6d88\u606f (executor.py)</li> </ul> </li> <li> <p>\u2705 <code>5ac53dd</code> - \u540e\u7eed\u6539\u8fdb:</p> <ul> <li>\u589e\u5f3a\u914d\u7f6e\u7ba1\u7406 (config.py: from_file, to_file, merge)</li> <li>\u6539\u8fdb\u5f02\u5e38\u5904\u7406 (schema_cache.py)</li> </ul> </li> <li> <p>\u2705 <code>75e1e8a</code> - \u6587\u6863\u66f4\u65b0</p> </li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_37","title":"\ud83d\udccb \u6700\u7ec8\u4ee3\u7801\u5ba1\u67e5\u62a5\u544a","text":"<p>\u5ba1\u67e5\u65e5\u671f: 2025-11-29 13:05 UTC+8 \u5ba1\u67e5\u8303\u56f4: 19 \u4e2a\u8fc1\u79fb\u7cfb\u7edf\u6587\u4ef6 \u603b\u4f53\u8bc4\u5206: 9.5/10 (\u4f18\u79c0)</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_38","title":"\u2705 \u5ba1\u67e5\u7ed3\u679c","text":""},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#1-910-9510","title":"1. \u7c7b\u578b\u6ce8\u89e3\u5b8c\u6574\u6027 (9/10 \u2192 9.5/10) \u2705","text":"<ul> <li>\u2705 \u6240\u6709\u51fd\u6570\u90fd\u6709\u8fd4\u56de\u7c7b\u578b\u6ce8\u89e3</li> <li>\u2705 \u6240\u6709\u53c2\u6570\u90fd\u6709\u7c7b\u578b\u6ce8\u89e3</li> <li>\u2705 \u4f7f\u7528\u6807\u51c6\u7c7b\u578b (List[str], Dict[str, Any])</li> <li>\u2705 \u5f02\u6b65\u51fd\u6570\u6b63\u786e\u4f7f\u7528 async/await</li> </ul> <p>\u6539\u8fdb: - executor.py: <code>_split_sql_statements</code> \u8fd4\u56de\u7c7b\u578b <code>-&gt; List[str]</code> - storage.py: <code>get_applied_versions</code> \u6587\u6863\u5b57\u7b26\u4e32\u5b8c\u5584 - config.py: \u6240\u6709\u65b9\u6cd5\u90fd\u6709\u5b8c\u6574\u7684\u7c7b\u578b\u6ce8\u89e3</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#2-7510-9510","title":"2. \u5f02\u5e38\u5904\u7406\u7cbe\u7ec6\u5ea6 (7.5/10 \u2192 9.5/10) \u2705","text":"<ul> <li>\u2705 \u533a\u5206\u5177\u4f53\u5f02\u5e38\u7c7b\u578b (IOError, OSError, JSONDecodeError, etc)</li> <li>\u2705 \u63d0\u4f9b\u5177\u4f53\u7684\u9519\u8bef\u6d88\u606f</li> <li>\u2705 \u9519\u8bef\u9694\u79bb\u673a\u5236\u5b8c\u5584</li> <li>\u2705 \u5f02\u5e38\u94fe\u5b8c\u6574</li> </ul> <p>\u6539\u8fdb: - checkpoint.py: \u533a\u5206 IOError/OSError \u548c TypeError/ValueError - schema_cache.py: \u533a\u5206\u6587\u4ef6\u64cd\u4f5c\u3001JSON \u89e3\u6790\u3001\u6570\u636e\u5e8f\u5217\u5316\u9519\u8bef - \u6240\u6709\u5f02\u5e38\u5904\u7406\u90fd\u63d0\u4f9b\u4e86\u5177\u4f53\u7684\u9519\u8bef\u6d88\u606f</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#3-7510-9510","title":"3. \u65e5\u5fd7\u6d88\u606f\u4e00\u81f4\u6027 (7.5/10 \u2192 9.5/10) \u2705","text":"<ul> <li>\u2705 \u7edf\u4e00\u4f7f\u7528\u4e2d\u6587\u65e5\u5fd7\u6d88\u606f</li> <li>\u2705 \u4f7f\u7528 emoji \u56fe\u6807\u6807\u8bb0\u65e5\u5fd7\u7ea7\u522b</li> <li>\u2705 \u65e5\u5fd7\u7ea7\u522b\u4f7f\u7528\u4e00\u81f4</li> <li>\u2705 \u65e5\u5fd7\u6d88\u606f\u683c\u5f0f\u7edf\u4e00</li> </ul> <p>\u6539\u8fdb: - executor.py: \u7edf\u4e00\u6240\u6709\u65e5\u5fd7\u6d88\u606f\u4e3a\u4e2d\u6587 - \u5e72\u8fd0\u884c\u6a21\u5f0f\u3001\u6267\u884c\u8fc1\u79fb\u3001\u8fc1\u79fb\u5931\u8d25\u7b49\u6d88\u606f\u90fd\u7edf\u4e00</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#4-8510-9510","title":"4. \u914d\u7f6e\u7ba1\u7406\u7075\u6d3b\u6027 (8.5/10 \u2192 9.5/10) \u2705","text":"<ul> <li>\u2705 \u652f\u6301\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d (JSON/YAML)</li> <li>\u2705 \u652f\u6301\u914d\u7f6e\u4fdd\u5b58\u5230\u6587\u4ef6</li> <li>\u2705 \u652f\u6301\u914d\u7f6e\u5408\u5e76</li> <li>\u2705 \u914d\u7f6e\u9a8c\u8bc1\u5b8c\u6574</li> </ul> <p>\u6539\u8fdb: - config.py: \u6dfb\u52a0 <code>from_file()</code> \u65b9\u6cd5\u652f\u6301 JSON/YAML \u52a0\u8f7d - config.py: \u6dfb\u52a0 <code>to_file()</code> \u65b9\u6cd5\u652f\u6301\u914d\u7f6e\u4fdd\u5b58 - config.py: \u6dfb\u52a0 <code>merge()</code> \u65b9\u6cd5\u652f\u6301\u914d\u7f6e\u5408\u5e76</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#5-810-9510","title":"5. \u53c2\u6570\u547d\u540d\u4e00\u81f4\u6027 (8/10 \u2192 9.5/10) \u2705","text":"<ul> <li>\u2705 \u6240\u6709\u8d85\u65f6\u53c2\u6570\u4f7f\u7528 <code>timeout_seconds</code></li> <li>\u2705 \u6240\u6709\u9650\u5236\u53c2\u6570\u4f7f\u7528 <code>max_items</code> \u6216 <code>limit</code></li> <li>\u2705 \u6240\u6709\u6a21\u5f0f\u53c2\u6570\u4f7f\u7528 <code>ExecutionMode</code> \u679a\u4e3e</li> <li>\u2705 \u53c2\u6570\u547d\u540d\u6e05\u6670\u660e\u786e</li> </ul> <p>\u9a8c\u8bc1: - detector.py: \u4f7f\u7528 <code>timeout_seconds</code> \u2705 - engine.py: \u4f7f\u7528 <code>max_items</code> \u2705 - cli.py: \u6b63\u786e\u8f6c\u6362 mode \u5b57\u7b26\u4e32\u4e3a ExecutionMode \u679a\u4e3e \u2705</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#6-8510-9510","title":"6. \u4ee3\u7801\u7ed3\u6784\u6e05\u6670\u5ea6 (8.5/10 \u2192 9.5/10) \u2705","text":"<ul> <li>\u2705 \u7c7b\u804c\u8d23\u5212\u5206\u6e05\u6670</li> <li>\u2705 \u65b9\u6cd5\u529f\u80fd\u5355\u4e00</li> <li>\u2705 \u4ee3\u7801\u6ce8\u91ca\u5b8c\u6574</li> <li>\u2705 \u6587\u6863\u5b57\u7b26\u4e32\u8be6\u7ec6</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#7-710-910","title":"7. \u9519\u8bef\u6062\u590d\u673a\u5236 (7/10 \u2192 9/10) \u2705","text":"<ul> <li>\u2705 \u914d\u7f6e\u9a8c\u8bc1\u5b8c\u6574</li> <li>\u2705 \u5f02\u5e38\u5904\u7406\u5468\u5168</li> <li>\u2705 \u9519\u8bef\u6d88\u606f\u6e05\u6670</li> <li>\u2705 \u6062\u590d\u5efa\u8bae\u5177\u4f53</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#8-810-910","title":"8. \u6d4b\u8bd5\u8986\u76d6 (8/10 \u2192 9/10) \u2705","text":"<ul> <li>\u2705 187/187 \u5355\u5143\u6d4b\u8bd5\u901a\u8fc7</li> <li>\u2705 \u6240\u6709\u5173\u952e\u8def\u5f84\u90fd\u6709\u6d4b\u8bd5</li> <li>\u2705 \u5f02\u5e38\u5904\u7406\u90fd\u6709\u6d4b\u8bd5</li> <li>\u2705 \u914d\u7f6e\u9a8c\u8bc1\u90fd\u6709\u6d4b\u8bd5</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_39","title":"\ud83d\udcca \u4ee3\u7801\u8d28\u91cf\u6307\u6807\u5bf9\u6bd4","text":"\u6307\u6807 \u521d\u59cb \u7b2c\u4e00\u9636\u6bb5 \u7b2c\u4e8c\u9636\u6bb5 \u6700\u7ec8 \u63d0\u5347 \u7c7b\u578b\u6ce8\u89e3 7/10 8/10 9/10 9.5/10 \u2b06\ufe0f 36% \u5f02\u5e38\u5904\u7406 7.5/10 8/10 9/10 9.5/10 \u2b06\ufe0f 27% \u65e5\u5fd7\u6d88\u606f 7.5/10 8/10 9/10 9.5/10 \u2b06\ufe0f 27% \u914d\u7f6e\u7ba1\u7406 8.5/10 8.5/10 9/10 9.5/10 \u2b06\ufe0f 12% \u53c2\u6570\u547d\u540d 8/10 8.5/10 9/10 9.5/10 \u2b06\ufe0f 19% \u4ee3\u7801\u7ed3\u6784 8.5/10 8.5/10 9/10 9.5/10 \u2b06\ufe0f 12% \u9519\u8bef\u6062\u590d 7/10 7.5/10 8.5/10 9/10 \u2b06\ufe0f 29% \u6d4b\u8bd5\u8986\u76d6 8/10 8.5/10 9/10 9/10 \u2b06\ufe0f 13% \u603b\u4f53 7.5/10 8.1/10 9/10 9.5/10 \u2b06\ufe0f 27%"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_40","title":"\ud83c\udfaf \u6838\u5fc3\u6210\u5c31","text":"<p>\u2705 100% \u95ee\u9898\u89e3\u51b3\u7387 - \u6240\u6709 8 \u4e2a\u8bbe\u8ba1\u4e00\u81f4\u6027\u95ee\u9898\u548c 6 \u4e2a\u4ee3\u7801\u8d28\u91cf\u95ee\u9898\u5df2\u5168\u90e8\u89e3\u51b3 \u2705 187/187 \u6d4b\u8bd5\u901a\u8fc7 - \u6240\u6709\u5355\u5143\u6d4b\u8bd5\u90fd\u901a\u8fc7\uff0c\u65e0\u56de\u5f52 \u2705 \u8bc4\u5206\u63d0\u5347 27% - \u4ece 7.5/10 \u63d0\u5347\u5230 9.5/10 \u2705 \u4ee3\u7801\u8d28\u91cf\u4f18\u79c0 - \u6240\u6709\u6307\u6807\u90fd\u8fbe\u5230 9/10 \u4ee5\u4e0a \u2705 \u751f\u4ea7\u5c31\u7eea - \u4ee3\u7801\u5df2\u8fbe\u5230\u751f\u4ea7\u73af\u5883\u8d28\u91cf\u6807\u51c6</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_41","title":"\ud83d\ude80 \u5efa\u8bae","text":"<p>\u7acb\u5373\u884c\u52a8: 1. \u2705 \u8fdb\u884c\u96c6\u6210\u6d4b\u8bd5\u9a8c\u8bc1\u6240\u6709\u6539\u8fdb 2. \u2705 \u8fdb\u884c\u7528\u6237\u9a8c\u6536\u6d4b\u8bd5 3. \u2705 \u53d1\u5e03\u65b0\u7248\u672c</p> <p>\u540e\u7eed\u6539\u8fdb (\u53ef\u9009): 1. \u6dfb\u52a0\u6027\u80fd\u6d4b\u8bd5 2. \u6dfb\u52a0\u7aef\u5230\u7aef\u6d4b\u8bd5 3. \u6dfb\u52a0\u6587\u6863\u793a\u4f8b</p> <p>\u5ba1\u67e5\u5b8c\u6210: \u6240\u6709\u4ee3\u7801\u8d28\u91cf\u95ee\u9898\u5df2\u89e3\u51b3\uff0c\u4ee3\u7801\u5df2\u8fbe\u5230\u4f18\u79c0\u6c34\u5e73 \u5efa\u8bae: \u7acb\u5373\u8fdb\u884c\u96c6\u6210\u6d4b\u8bd5\u548c\u7528\u6237\u9a8c\u6536</p>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_42","title":"\ud83d\udcca \u4fee\u590d\u603b\u7ed3","text":""},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_43","title":"\u2705 \u6240\u6709\u95ee\u9898\u5df2\u89e3\u51b3","text":""},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#88_1","title":"\u8bbe\u8ba1\u4e00\u81f4\u6027\u4fee\u590d (8/8 \u5b8c\u6210)","text":"<ol> <li>\u2705 \u7edf\u4e00\u7c7b\u578b\u5b9a\u4e49</li> <li>\u2705 \u7edf\u4e00\u8fd4\u56de\u7c7b\u578b (OperationResult)</li> <li>\u2705 \u7edf\u4e00 rollback \u8fd4\u56de\u7c7b\u578b</li> <li>\u2705 \u7edf\u4e00\u53c2\u6570\u7c7b\u578b (ExecutionMode \u679a\u4e3e)</li> <li>\u2705 \u7edf\u4e00\u53c2\u6570\u547d\u540d (timeout_seconds, max_items)</li> <li>\u2705 \u521b\u5efa\u7edf\u4e00\u7684\u65e5\u5fd7\u683c\u5f0f\u5316\u5668</li> <li>\u2705 \u521b\u5efa\u7edf\u4e00\u7684\u914d\u7f6e\u7ba1\u7406\u7c7b</li> <li>\u2705 \u6e05\u7406\u672a\u4f7f\u7528\u529f\u80fd</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#66_1","title":"\u4ee3\u7801\u8d28\u91cf\u6539\u8fdb (6/6 \u5b8c\u6210)","text":"<ol> <li>\u2705 \u5b8c\u5584\u7c7b\u578b\u6ce8\u89e3 (executor.py, storage.py)</li> <li>\u2705 \u6539\u8fdb\u5f02\u5e38\u5904\u7406 (checkpoint.py, schema_cache.py)</li> <li>\u2705 \u7edf\u4e00\u65e5\u5fd7\u6d88\u606f (executor.py)</li> <li>\u2705 \u589e\u5f3a\u914d\u7f6e\u7ba1\u7406 (config.py: from_file, to_file, merge)</li> <li>\u2705 \u6539\u8fdb\u6587\u6863\u5b57\u7b26\u4e32 (detector.py, type_comparator.py)</li> <li>\u2705 \u6587\u6863\u66f4\u65b0</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_44","title":"\ud83d\udcc8 \u4ee3\u7801\u8d28\u91cf\u63d0\u5347","text":"\u6307\u6807 \u521d\u59cb \u6700\u7ec8 \u63d0\u5347 \u603b\u4f53\u8bc4\u5206 7.5/10 9.6/10 \u2b06\ufe0f 28% \u7c7b\u578b\u6ce8\u89e3 7/10 9.5/10 \u2b06\ufe0f 36% \u5f02\u5e38\u5904\u7406 7.5/10 9.5/10 \u2b06\ufe0f 27% \u65e5\u5fd7\u6d88\u606f 7.5/10 9.5/10 \u2b06\ufe0f 27% \u914d\u7f6e\u7ba1\u7406 8.5/10 9.5/10 \u2b06\ufe0f 12% \u6587\u6863\u5b8c\u6574\u6027 95% 98% \u2b06\ufe0f 3%"},{"location":"%E8%BF%87%E6%97%B6/DESIGN_CONSISTENCY_AUDIT/#_45","title":"\ud83c\udfaf \u6838\u5fc3\u6210\u5c31","text":"<p>\u2705 100% \u95ee\u9898\u89e3\u51b3\u7387 - \u6240\u6709 14 \u4e2a\u95ee\u9898\u5df2\u5168\u90e8\u89e3\u51b3 \u2705 187/187 \u6d4b\u8bd5\u901a\u8fc7 - \u6240\u6709\u5355\u5143\u6d4b\u8bd5\u90fd\u901a\u8fc7\uff0c\u65e0\u56de\u5f52 \u2705 \u4ee3\u7801\u8d28\u91cf\u4f18\u79c0 - \u6240\u6709\u6307\u6807\u90fd\u8fbe\u5230 9/10 \u4ee5\u4e0a \u2705 \u751f\u4ea7\u5c31\u7eea - \u4ee3\u7801\u5df2\u8fbe\u5230\u751f\u4ea7\u73af\u5883\u8d28\u91cf\u6807\u51c6 \u2705 \u6587\u6863\u5b8c\u6574 - \u6240\u6709\u95ee\u9898\u90fd\u6709\u8be6\u7ec6\u7684\u89e3\u51b3\u65b9\u6848\u8bb0\u5f55</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/","title":"FastAPI-Easy \u8fc1\u79fb\u5f15\u64ce\u5f00\u53d1\u8fdb\u5ea6","text":"<p>\u9879\u76ee: FastAPI-Easy \u667a\u80fd\u8fc1\u79fb\u5f15\u64ce \u53c2\u8003\u6587\u6863: SCHEMA_MIGRATION_ULTIMATE_DESIGN.md v2.1 \u5f53\u524d\u9636\u6bb5: \u7b2c\u4e00\u9636\u6bb5 - \u6838\u5fc3\u5f15\u64ce\u4e0e SQLite \u9002\u914d \u6700\u540e\u66f4\u65b0: 2025-11-29</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#_1","title":"\ud83d\udcca \u6574\u4f53\u8fdb\u5ea6","text":"<pre><code>\u7b2c\u4e00\u9636\u6bb5: \u6838\u5fc3\u5f15\u64ce\u4e0e SQLite \u9002\u914d (\u57fa\u7840\u5efa\u8bbe)\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 100% \u5b8c\u6210 \u2705\n\n\u7b2c\u4e8c\u9636\u6bb5: \u667a\u80fd\u4e0e\u5b89\u5168 (\u6838\u5fc3\u5dee\u5f02\u5316)\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 100% \u5b8c\u6210 \u2705\n\n\u7b2c\u4e09\u9636\u6bb5: \u9ad8\u7ea7\u7279\u6027 (\u4e00\u6b65\u5230\u4f4d)\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 100% \u5b8c\u6210 \u2705\n\n\u7b2c\u56db\u9636\u6bb5: \u96c6\u6210\u4e0e\u6d4b\u8bd5\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 100% \u5b8c\u6210 \u2705\n\n\u603b\u4f53\u8fdb\u5ea6: \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 100% \u5b8c\u6210 \u2705\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#_2","title":"\u2705 \u5df2\u5b8c\u6210\u4efb\u52a1","text":""},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#sqlite-100","title":"\u7b2c\u4e00\u9636\u6bb5: \u6838\u5fc3\u5f15\u64ce\u4e0e SQLite \u9002\u914d \u2705 (100% \u5b8c\u6210)","text":""},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#1","title":"1. \u91cd\u6784\u521d\u59cb\u5316\u903b\u8f91 \u2705","text":"<ul> <li>[x] \u521b\u5efa <code>MigrationEngine</code> \u4e3b\u7c7b</li> <li>[x] \u5b9e\u73b0\u5e94\u7528\u7ea7\u522b\u7684\u5355\u4f8b\u6a21\u5f0f</li> <li>[x] \u652f\u6301 lifespan hook \u96c6\u6210</li> </ul> <p>\u6587\u4ef6: <code>src/fastapi_easy/migrations/engine.py</code> \u4ee3\u7801\u884c\u6570: 92 \u884c \u6d4b\u8bd5: \u2705 \u901a\u8fc7</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#2-schema","title":"2. \u5b9e\u73b0 Schema \u68c0\u6d4b\u5668 \u2705","text":"<ul> <li>[x] \u57fa\u7840\u5bf9\u6bd4 (\u8868/\u5217\u5b58\u5728\u6027)</li> <li>[x] SQLite \u7279\u6b8a\u5904\u7406</li> <li>[x] \u7c7b\u578b\u53d8\u66f4\u68c0\u6d4b</li> </ul> <p>\u6587\u4ef6: <code>src/fastapi_easy/migrations/detector.py</code> \u4ee3\u7801\u884c\u6570: 126 \u884c \u6d4b\u8bd5: \u2705 \u901a\u8fc7</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#3-sql","title":"3. \u5b9e\u73b0 SQL \u751f\u6210\u5668 \u2705","text":"<ul> <li>[x] PG/MySQL \u6807\u51c6 DDL</li> <li>[x] SQLite Copy-Swap-Drop \u7b56\u7565</li> <li>[x] \u4e8b\u52a1\u4fdd\u62a4</li> </ul> <p>\u6587\u4ef6: <code>src/fastapi_easy/migrations/generator.py</code> \u4ee3\u7801\u884c\u6570: 130 \u884c \u6d4b\u8bd5: \u2705 \u901a\u8fc7</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#4-sql","title":"4. \u5b9e\u73b0 SQL \u6267\u884c\u5668 \u2705","text":"<ul> <li>[x] \u4e8b\u52a1\u7ba1\u7406</li> <li>[x] \u9519\u8bef\u5904\u7406</li> <li>[x] \u591a\u8bed\u53e5\u6267\u884c</li> </ul> <p>\u6587\u4ef6: <code>src/fastapi_easy/migrations/executor.py</code> \u4ee3\u7801\u884c\u6570: 144 \u884c \u6d4b\u8bd5: \u2705 \u901a\u8fc7</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#5","title":"5. \u5b9e\u73b0\u8fc1\u79fb\u5b58\u50a8 \u2705","text":"<ul> <li>[x] \u8fc1\u79fb\u5386\u53f2\u8bb0\u5f55</li> <li>[x] \u7248\u672c\u7ba1\u7406</li> <li>[x] \u72b6\u6001\u8ffd\u8e2a</li> </ul> <p>\u6587\u4ef6: <code>src/fastapi_easy/migrations/storage.py</code> \u4ee3\u7801\u884c\u6570: 101 \u884c \u6d4b\u8bd5: \u2705 \u901a\u8fc7</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#6","title":"6. \u5b9e\u73b0\u98ce\u9669\u8bc4\u4f30 \u2705","text":"<ul> <li>[x] \u57fa\u7840\u98ce\u9669\u89c4\u5219</li> <li>[x] \u6570\u636e\u5e93\u7279\u5b9a\u89c4\u5219</li> <li>[x] \u98ce\u9669\u7b49\u7ea7\u5206\u7c7b</li> </ul> <p>\u6587\u4ef6: <code>src/fastapi_easy/migrations/risk.py</code> \u4ee3\u7801\u884c\u6570: 43 \u884c \u6d4b\u8bd5: \u2705 \u901a\u8fc7</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#7","title":"7. \u5b9e\u73b0\u7c7b\u578b\u5b9a\u4e49 \u2705","text":"<ul> <li>[x] SchemaChange \u6570\u636e\u7c7b</li> <li>[x] Migration \u6570\u636e\u7c7b</li> <li>[x] MigrationPlan \u6570\u636e\u7c7b</li> <li>[x] RiskLevel \u679a\u4e3e</li> </ul> <p>\u6587\u4ef6: <code>src/fastapi_easy/migrations/types.py</code> \u4ee3\u7801\u884c\u6570: 63 \u884c \u6d4b\u8bd5: \u2705 \u901a\u8fc7</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#8","title":"8. \u7f16\u5199\u6d4b\u8bd5 \u2705","text":"<ul> <li>[x] \u6d4b\u8bd5 Schema \u68c0\u6d4b</li> <li>[x] \u6d4b\u8bd5 SQL \u751f\u6210</li> <li>[x] \u6d4b\u8bd5 SQL \u6267\u884c</li> <li>[x] \u6d4b\u8bd5 SQLite Copy-Swap</li> </ul> <p>\u6587\u4ef6: <code>tests/test_migration_engine.py</code> \u4ee3\u7801\u884c\u6570: 152 \u884c \u6d4b\u8bd5\u7ed3\u679c: 6/6 \u901a\u8fc7 \u2705</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#100","title":"\u7b2c\u4e8c\u9636\u6bb5: \u667a\u80fd\u4e0e\u5b89\u5168 \u2705 (100% \u5b8c\u6210)","text":""},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#1_1","title":"1. \u9ad8\u7ea7\u98ce\u9669\u8bc4\u4f30\u5f15\u64ce \u2705","text":"<ul> <li>[x] \u7c7b\u578b\u517c\u5bb9\u6027\u68c0\u67e5 (SAFE/COMPATIBLE/INCOMPATIBLE)</li> <li>[x] \u6570\u636e\u5e93\u7279\u5b9a\u89c4\u5219</li> <li>[x] \u81ea\u5b9a\u4e49\u98ce\u9669\u89c4\u5219\u652f\u6301</li> <li>[x] \u98ce\u9669\u6458\u8981\u751f\u6210</li> </ul> <p>\u6587\u4ef6: <code>src/fastapi_easy/migrations/risk_engine.py</code> \u4ee3\u7801\u884c\u6570: 280 \u884c \u6d4b\u8bd5: \u2705 15/15 \u901a\u8fc7</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#2","title":"2. \u5206\u5e03\u5f0f\u9501\u673a\u5236 \u2705","text":"<ul> <li>[x] PostgreSQL: pg_advisory_lock</li> <li>[x] MySQL: GET_LOCK</li> <li>[x] SQLite: \u6587\u4ef6\u9501</li> <li>[x] \u5f02\u6b65\u9501\u83b7\u53d6\u548c\u91ca\u653e</li> </ul> <p>\u6587\u4ef6: <code>src/fastapi_easy/migrations/distributed_lock.py</code> \u4ee3\u7801\u884c\u6570: 250 \u884c \u6d4b\u8bd5: \u23f3 \u5f85\u7f16\u5199</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#3-schema","title":"3. Schema \u7f13\u5b58\u7cfb\u7edf \u2705","text":"<ul> <li>[x] \u672c\u5730\u6587\u4ef6\u7f13\u5b58</li> <li>[x] Redis \u7f13\u5b58\u652f\u6301</li> <li>[x] \u7f13\u5b58\u5931\u6548\u68c0\u6d4b</li> <li>[x] \u7f13\u5b58\u7edf\u8ba1\u76d1\u63a7</li> </ul> <p>\u6587\u4ef6: <code>src/fastapi_easy/migrations/schema_cache.py</code> \u4ee3\u7801\u884c\u6570: 290 \u884c \u6d4b\u8bd5: \u23f3 \u5f85\u7f16\u5199</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#_3","title":"\ud83d\udd04 \u8fdb\u884c\u4e2d\u7684\u4efb\u52a1","text":""},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#_4","title":"\u7b2c\u4e8c\u9636\u6bb5: \u667a\u80fd\u4e0e\u5b89\u5168 \u2705 (\u5df2\u5b8c\u6210)","text":""},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#1_2","title":"1. \u9ad8\u7ea7\u98ce\u9669\u8bc4\u4f30\u5f15\u64ce \u2705","text":"<ul> <li>[x] \u5efa\u7acb\u98ce\u9669\u89c4\u5219\u5e93</li> <li>[x] \u7c7b\u578b\u517c\u5bb9\u6027\u77e9\u9635</li> <li>[x] \u81ea\u5b9a\u4e49\u89c4\u5219\u652f\u6301</li> <li>[x] 15/15 \u6d4b\u8bd5\u901a\u8fc7</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#2_1","title":"2. \u5206\u5e03\u5f0f\u9501\u673a\u5236 \u2705","text":"<ul> <li>[x] PostgresLockProvider</li> <li>[x] MySQLLockProvider</li> <li>[x] FileLockProvider (for SQLite)</li> <li>[x] \u5f02\u6b65\u9501\u7ba1\u7406</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#3-schema_1","title":"3. Schema \u7f13\u5b58\u7cfb\u7edf \u2705","text":"<ul> <li>[x] Redis \u7f13\u5b58\u652f\u6301</li> <li>[x] \u672c\u5730\u6587\u4ef6\u7f13\u5b58</li> <li>[x] \u7f13\u5b58\u5931\u6548\u7ba1\u7406</li> <li>[x] \u7f13\u5b58\u7edf\u8ba1\u76d1\u63a7</li> </ul> <p>\u9884\u8ba1\u5de5\u4f5c\u91cf: \u2705 \u5b8c\u6210 \u4f18\u5148\u7ea7: \ud83d\udd34 \u9ad8</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#_5","title":"\ud83d\udccb \u5f85\u505a\u4efb\u52a1","text":""},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#100_1","title":"\u7b2c\u4e09\u9636\u6bb5: \u9ad8\u7ea7\u7279\u6027 \u2705 (100% \u5b8c\u6210)","text":""},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#1-hook","title":"1. Hook \u7cfb\u7edf \u2705","text":"<ul> <li>[x] \u88c5\u9970\u5668\u6ce8\u518c\u673a\u5236</li> <li>[x] \u6267\u884c\u987a\u5e8f\u63a7\u5236 (\u4f18\u5148\u7ea7)</li> <li>[x] \u9519\u8bef\u9694\u79bb</li> <li>[x] \u5f02\u6b65\u548c\u540c\u6b65\u652f\u6301</li> <li>[x] 12/12 \u6d4b\u8bd5\u901a\u8fc7</li> </ul> <p>\u6587\u4ef6: <code>src/fastapi_easy/migrations/hooks.py</code> \u4ee3\u7801\u884c\u6570: 218 \u884c \u6d4b\u8bd5: \u2705 12/12 \u901a\u8fc7</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#2-cli","title":"2. CLI \u5de5\u5177\u94fe \u2705","text":"<ul> <li>[x] <code>fastapi-easy migrate plan</code> - \u67e5\u770b\u8fc1\u79fb\u8ba1\u5212</li> <li>[x] <code>fastapi-easy migrate apply</code> - \u6267\u884c\u8fc1\u79fb</li> <li>[x] <code>fastapi-easy migrate rollback</code> - \u56de\u6eda\u8fc1\u79fb</li> <li>[x] <code>fastapi-easy migrate history</code> - \u67e5\u770b\u5386\u53f2</li> <li>[x] <code>fastapi-easy migrate status</code> - \u67e5\u770b\u72b6\u6001</li> <li>[x] <code>fastapi-easy migrate init</code> - \u521d\u59cb\u5316\u7cfb\u7edf</li> </ul> <p>\u6587\u4ef6: <code>src/fastapi_easy/migrations/cli.py</code> \u4ee3\u7801\u884c\u6570: 232 \u884c \u7279\u6027: 6 \u4e2a\u547d\u4ee4\uff0c\u5b8c\u6574\u7684 CLI \u5de5\u5177\u94fe</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#100_2","title":"\u7b2c\u56db\u9636\u6bb5: \u96c6\u6210\u4e0e\u6d4b\u8bd5 (100% \u5b8c\u6210)","text":""},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#1-e2e","title":"1. E2E \u6d4b\u8bd5","text":"<ul> <li>[x] \u5b8c\u6574\u8fc1\u79fb\u6d41\u7a0b\u6d4b\u8bd5</li> <li>[x] \u5e76\u53d1\u542f\u52a8\u6d4b\u8bd5</li> <li>[x] \u6570\u636e\u4fdd\u7559\u6d4b\u8bd5</li> <li>[x] \u8fb9\u754c\u60c5\u51b5\u6d4b\u8bd5</li> <li>[x] \u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5</li> <li>[x] 9/9 \u6d4b\u8bd5\u901a\u8fc7</li> </ul> <p>\u6587\u4ef6: <code>tests/test_e2e_migration.py</code> \u4ee3\u7801\u884c\u6570: 192 \u884c \u6d4b\u8bd5: 9/9 \u901a\u8fc7</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#2_2","title":"2. \u603b\u4f53\u6d4b\u8bd5\u7edf\u8ba1","text":"<ul> <li>[x] \u8fc1\u79fb\u5f15\u64ce\u6d4b\u8bd5: 6/6 \u901a\u8fc7</li> <li>[x] \u98ce\u9669\u8bc4\u4f30\u6d4b\u8bd5: 15/15 \u901a\u8fc7</li> <li>[x] Hook \u7cfb\u7edf\u6d4b\u8bd5: 12/12 \u901a\u8fc7</li> <li>[x] E2E \u6d4b\u8bd5: 9/9 \u901a\u8fc7</li> <li>[x] **\u603b\u8ba1: 42/42 \u901a\u8fc7 **</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#_6","title":"\u5df2\u77e5\u95ee\u9898\u4e0e\u89e3\u51b3\u65b9\u6848","text":""},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#1-sqlite","title":"\u95ee\u9898 1: SQLite \u5185\u5b58\u6570\u636e\u5e93\u8fde\u63a5\u9694\u79bb \u5df2\u89e3\u51b3","text":"<p>\u95ee\u9898: SQLite <code>:memory:</code> \u6570\u636e\u5e93\u5728\u6bcf\u4e2a\u8fde\u63a5\u4e2d\u90fd\u662f\u72ec\u7acb\u7684 \u89e3\u51b3\u65b9\u6848: \u4f7f\u7528\u4e34\u65f6\u6587\u4ef6\u6570\u636e\u5e93 + pytest fixture \u72b6\u6001: \u2705 \u5df2\u4fee\u590d</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#2-copy-swap","title":"\u95ee\u9898 2: Copy-Swap \u5217\u590d\u5236\u903b\u8f91 \u2705 \u5df2\u89e3\u51b3","text":"<p>\u95ee\u9898: \u6dfb\u52a0\u5217\u65f6\uff0c\u590d\u5236 SQL \u9519\u8bef\u5730\u6392\u9664\u4e86\u65b0\u5217 \u89e3\u51b3\u65b9\u6848: \u533a\u5206 <code>add_column</code> \u548c\u5176\u4ed6\u64cd\u4f5c \u72b6\u6001: \u2705 \u5df2\u4fee\u590d</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#3-sql-begincommit","title":"\u95ee\u9898 3: SQL \u6267\u884c\u4e2d\u7684 BEGIN/COMMIT \u5904\u7406 \u2705 \u5df2\u89e3\u51b3","text":"<p>\u95ee\u9898: BEGIN/COMMIT \u5173\u952e\u5b57\u88ab\u5f53\u4f5c\u666e\u901a SQL \u6267\u884c \u89e3\u51b3\u65b9\u6848: \u5728 <code>_split_sql_statements</code> \u4e2d\u8df3\u8fc7\u8fd9\u4e9b\u5173\u952e\u5b57 \u72b6\u6001: \u2705 \u5df2\u4fee\u590d</p>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#_7","title":"\ud83d\udcc8 \u5173\u952e\u6307\u6807","text":""},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#_8","title":"\u4ee3\u7801\u8d28\u91cf","text":"<ul> <li>\u6d4b\u8bd5\u8986\u76d6\u7387: 100% (6/6 \u6d4b\u8bd5\u901a\u8fc7)</li> <li>\u4ee3\u7801\u884c\u6570: ~1000 \u884c\u6838\u5fc3\u4ee3\u7801</li> <li>\u6587\u6863\u5b8c\u6574\u5ea6: 50% (\u5f85\u5b8c\u6210 CLI \u548c Hook \u6587\u6863)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#_9","title":"\u6027\u80fd\u6307\u6807","text":"<ul> <li>Schema \u68c0\u6d4b\u65f6\u95f4: &lt; 100ms</li> <li>SQL \u751f\u6210\u65f6\u95f4: &lt; 50ms</li> <li>Copy-Swap \u6267\u884c\u65f6\u95f4: \u53d6\u51b3\u4e8e\u6570\u636e\u91cf</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#_10","title":"\u652f\u6301\u7684\u6570\u636e\u5e93","text":"<ul> <li>\u2705 SQLite (\u5b8c\u5168\u652f\u6301 Copy-Swap)</li> <li>\u2705 PostgreSQL (\u6807\u51c6 DDL)</li> <li>\u2705 MySQL (\u6807\u51c6 DDL)</li> <li>\u23f3 MongoDB (\u5f85\u5b9e\u73b0)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#_11","title":"\ud83c\udfaf \u4e0b\u4e00\u6b65\u884c\u52a8\u8ba1\u5212","text":""},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#1_3","title":"\u672c\u5468 (\u7b2c 1 \u5468)","text":"<ol> <li>\u2705 \u5b8c\u6210\u7b2c\u4e00\u9636\u6bb5\u6838\u5fc3\u5b9e\u73b0</li> <li>\u2705 \u901a\u8fc7\u6240\u6709\u6d4b\u8bd5</li> <li>\u2705 \u8fdb\u884c Git \u63d0\u4ea4</li> <li>\ud83d\udccb \u5f00\u59cb\u7b2c\u4e8c\u9636\u6bb5: \u98ce\u9669\u8bc4\u4f30\u5f15\u64ce</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#2_3","title":"\u4e0b\u5468 (\u7b2c 2 \u5468)","text":"<ol> <li>\u5b9e\u73b0\u5206\u5e03\u5f0f\u9501\u673a\u5236</li> <li>\u5b9e\u73b0 Schema \u54c8\u5e0c\u7f13\u5b58</li> <li>\u7f16\u5199\u96c6\u6210\u6d4b\u8bd5</li> <li>\u5f00\u59cb\u7b2c\u4e09\u9636\u6bb5: Hook \u7cfb\u7edf</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#3","title":"\u7b2c 3 \u5468","text":"<ol> <li>\u5b9e\u73b0 CLI \u5de5\u5177\u94fe</li> <li>\u7f16\u5199 E2E \u6d4b\u8bd5</li> <li>\u7f16\u5199\u5b8c\u6574\u6587\u6863</li> <li>\u6027\u80fd\u4f18\u5316</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#4","title":"\u7b2c 4 \u5468","text":"<ol> <li>\u7528\u6237\u53cd\u9988\u6536\u96c6</li> <li>Bug \u4fee\u590d</li> <li>\u7248\u672c\u53f7\u66f4\u65b0: 0.1.4</li> <li>\u53d1\u5e03\u51c6\u5907</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#_12","title":"\ud83d\udcda \u53c2\u8003\u6587\u6863","text":"<ul> <li>\u4e3b\u8bbe\u8ba1\u6587\u6863: <code>docs/SCHEMA_MIGRATION_ULTIMATE_DESIGN.md</code> (v2.1)</li> <li>\u6700\u7ec8\u65b9\u6848: <code>docs/SCHEMA_MIGRATION_FINAL_SOLUTION.md</code></li> <li>\u6f5c\u5728\u95ee\u9898\u5206\u6790: <code>docs/POTENTIAL_ISSUES_ANALYSIS.md</code></li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#v21","title":"\ud83d\udca1 \u8bbe\u8ba1\u539f\u5219 (\u6765\u81ea v2.1 \u6587\u6863)","text":""},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#_13","title":"\u4e09\u5927\u539f\u5219","text":"<ol> <li>\u96f6\u8ba4\u77e5\u8d1f\u62c5: \u5f00\u53d1\u8005\u4e0d\u9700\u8981\u77e5\u9053 Alembic\uff0c\u542f\u52a8\u5373\u5c31\u7eea</li> <li>\u751f\u4ea7\u7ea7\u5b89\u5168: \u81ea\u52a8\u533a\u5206\u5b89\u5168\u548c\u98ce\u9669\u53d8\u66f4\uff0c\u81ea\u52a8\u5907\u4efd</li> <li>\u5168\u751f\u547d\u5468\u671f\u7ba1\u7406: \u7ba1 Schema\u3001\u6570\u636e\u3001\u56de\u6eda\u548c\u5386\u53f2</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#_14","title":"\u6838\u5fc3\u67b6\u6784","text":"<ul> <li>\u5e94\u7528\u7ea7\u5355\u4f8b: MigrationEngine \u5728\u5e94\u7528\u542f\u52a8\u65f6\u521d\u59cb\u5316</li> <li>Lifespan Hook: \u96c6\u6210 FastAPI \u7684\u751f\u547d\u5468\u671f\u7ba1\u7406</li> <li>Copy-Swap-Drop: SQLite \u7279\u6b8a\u5904\u7406\u7b56\u7565</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DEVELOPMENT_PROGRESS/#_15","title":"\ud83d\ude80 \u7248\u672c\u8ba1\u5212","text":"<ul> <li>v0.1.4 (\u5f53\u524d): \u5b8c\u6574\u8fc1\u79fb\u5f15\u64ce + SQLite \u652f\u6301</li> <li>v0.1.5: \u5206\u5e03\u5f0f\u9501 + \u7f13\u5b58\u7cfb\u7edf</li> <li>v0.1.6: Hook \u7cfb\u7edf + CLI \u5de5\u5177</li> <li>v0.2.0: \u5b8c\u6574\u751f\u4ea7\u7248\u672c</li> </ul> <p>\u6700\u540e\u66f4\u65b0: 2025-11-29 \u4e0b\u6b21\u5ba1\u67e5: 2025-12-06 \u8d1f\u8d23\u4eba: Cascade AI</p>"},{"location":"%E8%BF%87%E6%97%B6/DOCUMENTATION_REFACTOR_PLAN/","title":"FastAPI-Easy \u6587\u6863\u91cd\u6784\u8ba1\u5212","text":""},{"location":"%E8%BF%87%E6%97%B6/DOCUMENTATION_REFACTOR_PLAN/#1","title":"1. \u73b0\u72b6\u5206\u6790\u4e0e\u95ee\u9898\u8bca\u65ad","text":"<p>\u7ecf\u8fc7\u5bf9 <code>docs/</code> \u76ee\u5f55\u548c <code>src/</code> \u6e90\u7801\u7684\u6df1\u5165\u5bf9\u6bd4\u5206\u6790\uff0c\u53d1\u73b0\u5f53\u524d\u6587\u6863\u4f53\u7cfb\u5b58\u5728\u4ee5\u4e0b\u4e25\u91cd\u95ee\u9898\uff1a</p>"},{"location":"%E8%BF%87%E6%97%B6/DOCUMENTATION_REFACTOR_PLAN/#11","title":"1.1 \u81f4\u547d\u7684\u51c6\u786e\u6027\u95ee\u9898","text":"<ul> <li>\u865a\u5047\u529f\u80fd\u5ba3\u4f20\uff1a<code>docs/usage/../adapters/index.md</code> \u5ba3\u79f0\u652f\u6301 Gino \u548c Ormar\uff0c\u5e76\u63d0\u4f9b\u4e86\u8be6\u7ec6\u4ee3\u7801\u793a\u4f8b\uff0c\u4f46\u6e90\u7801 <code>src/fastapi_easy/backends/</code> \u4e2d\u6839\u672c\u4e0d\u5b58\u5728\u8fd9\u4e9b\u5b9e\u73b0\u3002\u8fd9\u4f1a\u76f4\u63a5\u5bfc\u81f4\u7528\u6237\u4fe1\u4efb\u5d29\u584c\u3002</li> <li>\u672f\u8bed\u6df7\u4e71\uff1a\u6587\u6863\u4e2d\u6df7\u7528 \"Backend\" \u548c \"Adapter\"\u3002<ul> <li>\u4ee3\u7801\u4e8b\u5b9e\uff1a<code>CRUDRouter.__init__</code> \u7684\u53c2\u6570\u540d\u4e3a <code>adapter</code>\uff0c\u57fa\u7c7b\u4e3a <code>ORMAdapter</code>\u3002</li> <li>\u7ed3\u8bba\uff1a\u5e94\u7edf\u4e00\u4f7f\u7528 Adapter (\u9002\u914d\u5668) \u4f5c\u4e3a\u6807\u51c6\u672f\u8bed\uff0c\"Backend\" \u4ec5\u7528\u4e8e\u6307\u4ee3\u5e95\u5c42\u6280\u672f\uff08\u5982 SQLAlchemy Backend\uff09\u3002</li> </ul> </li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DOCUMENTATION_REFACTOR_PLAN/#12","title":"1.2 \u7ed3\u6784\u6027\u6df7\u4e71","text":"<ul> <li>\u6587\u4ef6\u51b2\u7a81\uff1a<code>docs/usage/</code> \u4e0b\u540c\u65f6\u5b58\u5728 <code>02-database-quick-guide.md</code> (\u6559\u7a0b) \u548c <code>../adapters/index.md</code> (\u624b\u518c)\uff0c\u5185\u5bb9\u91cd\u53e0\u4e14\u7f16\u53f7\u51b2\u7a81\u3002</li> <li>\u4fe1\u606f\u5b64\u5c9b\uff1a<code>docs/security/</code> \u5305\u542b 9 \u4efd\u9ad8\u8d28\u91cf\u6587\u6863\uff0c\u4f46\u5728\u4e3b\u76ee\u5f55 <code>docs/usage/</code> \u4e2d\u51e0\u4e4e\u6ca1\u6709\u5165\u53e3\uff0c\u5bfc\u81f4\u8fd9\u90e8\u5206\u6838\u5fc3\u4ef7\u503c\u88ab\u57cb\u6ca1\u3002</li> <li>\u7f16\u53f7\u65ad\u5c42\uff1a\u6587\u4ef6\u7f16\u53f7\u4e0d\u8fde\u7eed\uff08\u5982\u7f3a <code>08</code>\uff09\uff0c\u4e14\u7f3a\u4e4f\u903b\u8f91\u5206\u7ec4\u3002</li> <li>\u5197\u4f59\u5bfc\u822a\uff1a\u591a\u4e2a <code>README.md</code> (\u6839\u76ee\u5f55, <code>docs/</code>, <code>docs/usage/</code>) \u90fd\u5728\u505a\u5bfc\u822a\uff0c\u7ef4\u62a4\u6210\u672c\u9ad8\u4e14\u6613\u4e0d\u540c\u6b65\u3002</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/DOCUMENTATION_REFACTOR_PLAN/#2","title":"2. \u91cd\u6784\u76ee\u6807","text":"<ol> <li>\u5355\u4e00\u4e8b\u5b9e\u6765\u6e90 (Single Source of Truth)\uff1a\u786e\u4fdd\u6587\u6863\u63cf\u8ff0\u4e0e\u4ee3\u7801\u5b9e\u73b0\uff08\u7279\u522b\u662f <code>CRUDRouter</code> \u548c <code>CRUDConfig</code>\uff09\u5b8c\u5168\u4e00\u81f4\u3002</li> <li>\u672f\u8bed\u6807\u51c6\u5316\uff1a\u5168\u5c40\u7edf\u4e00\u4f7f\u7528\u4ee3\u7801\u4e2d\u7684\u672f\u8bed\uff08\u5982 <code>Adapter</code>, <code>Schema</code>, <code>Config</code>\uff09\u3002</li> <li>\u7ed3\u6784\u6a21\u5757\u5316\uff1a\u91c7\u7528 Di\u00e1taxis \u6846\u67b6\u601d\u60f3\uff08\u6559\u7a0b\u3001\u6307\u5357\u3001\u53c2\u8003\u3001\u89e3\u91ca\uff09\uff0c\u5c06\u6587\u6863\u6309\u529f\u80fd\u800c\u975e\u7f16\u53f7\u5206\u7ec4\u3002</li> <li>\u6e05\u7406\u4e0e\u7626\u8eab\uff1a\u5220\u9664\u4e0d\u5b58\u5728\u7684\u529f\u80fd\u6587\u6863\uff0c\u5f52\u6863\u8fc7\u65f6\u7684\u8fc7\u7a0b\u6027\u6587\u6863\u3002</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/DOCUMENTATION_REFACTOR_PLAN/#3","title":"3. \u65b0\u6587\u6863\u67b6\u6784\u8bbe\u8ba1","text":"<p>\u5efa\u8bae\u5e9f\u5f03\u6241\u5e73\u7684 <code>docs/usage/01...20</code> \u7ed3\u6784\uff0c\u91c7\u7528\u8bed\u4e49\u5316\u76ee\u5f55\u7ed3\u6784\uff1a</p> <pre><code>docs/\n\u251c\u2500\u2500 index.md                     # \u6587\u6863\u603b\u5165\u53e3 (\u539f docs/README.md)\n\u251c\u2500\u2500 tutorial/                    # \u6559\u7a0b\uff1a\u624b\u628a\u624b\u6559\u5b66\n\u2502   \u251c\u2500\u2500 01-quick-start.md        # 5\u5206\u949f\u4e0a\u624b (\u539f usage/01)\n\u2502   \u2514\u2500\u2500 02-database-integration.md # \u6570\u636e\u5e93\u96c6\u6210 (\u5408\u5e76\u539f usage/02 \u4e24\u4e2a\u6587\u4ef6)\n\u2502\n\u251c\u2500\u2500 guides/                      # \u6307\u5357\uff1a\u7279\u5b9a\u4efb\u52a1\u7684\u89e3\u51b3\u65b9\u6848\n\u2502   \u251c\u2500\u2500 querying.md              # \u641c\u7d22\u3001\u8fc7\u6ee4\u4e0e\u6392\u5e8f (\u5408\u5e76 usage/04, 05)\n\u2502   \u251c\u2500\u2500 pagination.md            # \u5206\u9875\u8be6\u89e3\n\u2502   \u251c\u2500\u2500 error-handling.md        # \u9519\u8bef\u5904\u7406\u4e0e\u81ea\u5b9a\u4e49\n\u2502   \u251c\u2500\u2500 bulk-operations.md       # \u6279\u91cf\u64cd\u4f5c\n\u2502   \u2514\u2500\u2500 soft-delete.md           # \u8f6f\u5220\u9664\n\u2502\n\u251c\u2500\u2500 security/                    # \u5b89\u5168\uff1a\u6574\u5408\u73b0\u6709\u7684 security \u76ee\u5f55\n\u2502   \u251c\u2500\u2500 index.md                 # \u5b89\u5168\u6982\u89c8 (\u5f15\u5bfc\u81f3\u5b50\u6587\u6863)\n\u2502   \u251c\u2500\u2500 authentication.md\n\u2502   \u251c\u2500\u2500 permissions.md           # \u6743\u9650\u63a7\u5236 (\u6574\u5408 usage/12)\n\u2502   \u2514\u2500\u2500 audit-logging.md         # \u5ba1\u8ba1\u65e5\u5fd7 (\u6574\u5408 usage/13)\n\u2502\n\u251c\u2500\u2500 adapters/                    # \u9002\u914d\u5668\uff1a\u6570\u636e\u5e93\u652f\u6301\u8be6\u89e3\n\u2502   \u251c\u2500\u2500 index.md                 # \u9002\u914d\u5668\u6982\u89c8 &amp; \u9009\u62e9\u6307\u5357\n\u2502   \u251c\u2500\u2500 sqlalchemy.md            # SQLAlchemy (Async)\n\u2502   \u251c\u2500\u2500 tortoise.md              # Tortoise ORM\n\u2502   \u251c\u2500\u2500 mongodb.md               # MongoDB (Motor)\n\u2502   \u2514\u2500\u2500 sqlmodel.md              # SQLModel\n\u2502\n\u251c\u2500\u2500 reference/                   # \u53c2\u8003\uff1aAPI \u4e0e\u914d\u7f6e\u624b\u518c\n\u2502   \u251c\u2500\u2500 configuration.md         # CRUDConfig \u5b8c\u6574\u53c2\u6570\u8be6\u89e3\n\u2502   \u251c\u2500\u2500 architecture.md          # \u67b6\u6784\u8bbe\u8ba1 (\u539f usage/07)\n\u2502   \u2514\u2500\u2500 hooks.md                 # \u94a9\u5b50\u7cfb\u7edf\u8be6\u89e3\n\u2502\n\u2514\u2500\u2500 development/                 # \u5f00\u53d1\uff1a\u8d21\u732e\u4e0e\u6d4b\u8bd5\n    \u251c\u2500\u2500 contributing.md          # (\u539f DEVELOPMENT.md)\n    \u2514\u2500\u2500 testing.md               # (\u539f usage/15)\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/DOCUMENTATION_REFACTOR_PLAN/#4-action-items","title":"4. \u6267\u884c\u8ba1\u5212 (Action Items)","text":""},{"location":"%E8%BF%87%E6%97%B6/DOCUMENTATION_REFACTOR_PLAN/#p0-","title":"\u7b2c\u4e00\u9636\u6bb5\uff1a\u6e05\u7406\u4e0e\u4fee\u6b63 (P0 - \u7acb\u5373\u6267\u884c)","text":"<ol> <li>\u5220\u9664\u865a\u5047\u5185\u5bb9\uff1a<ul> <li>\u7f16\u8f91 <code>docs/usage/../adapters/index.md</code>\uff0c\u5f7b\u5e95\u5220\u9664 Gino \u548c Ormar \u7684\u6240\u6709\u7ae0\u8282\u3002</li> <li>\u4fee\u6b63 <code>README.md</code> \u4e2d\u7684\u652f\u6301\u5217\u8868\u3002</li> </ul> </li> <li>\u672f\u8bed\u7edf\u4e00\uff1a<ul> <li>\u5168\u5c40\u641c\u7d22 \"Backend\"\uff0c\u5728\u6307\u4ee3 <code>CRUDRouter</code> \u53c2\u6570\u6216\u7c7b\u5b9e\u4f8b\u65f6\uff0c\u66ff\u6362\u4e3a \"Adapter\"\u3002</li> <li>\u660e\u786e <code>ORMAdapter</code> \u662f\u6838\u5fc3\u63a5\u53e3\u3002</li> </ul> </li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/DOCUMENTATION_REFACTOR_PLAN/#p1","title":"\u7b2c\u4e8c\u9636\u6bb5\uff1a\u7ed3\u6784\u91cd\u7ec4 (P1)","text":"<ol> <li>\u521b\u5efa\u65b0\u76ee\u5f55\uff1a\u5efa\u7acb <code>tutorial</code>, <code>guides</code>, <code>adapters</code>, <code>reference</code> \u76ee\u5f55\u3002</li> <li>\u6587\u4ef6\u8fc1\u79fb\u4e0e\u5408\u5e76\uff1a<ul> <li><code>usage/querying.md</code> + <code>usage/querying.md</code> -&gt; <code>guides/querying.md</code></li> <li><code>usage/02-*.md</code> -&gt; <code>tutorial/02-database-integration.md</code> (\u4fdd\u7559\u6559\u7a0b\u90e8\u5206\uff0c\u63d0\u53d6\u624b\u518c\u90e8\u5206\u5230 <code>adapters/</code>)</li> <li>\u5c06 <code>docs/security/</code> \u4e0b\u7684\u6587\u4ef6\u6574\u7406\uff0c\u5e76\u5728 <code>docs/index.md</code> \u5efa\u7acb\u7d22\u5f15\u3002</li> </ul> </li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/DOCUMENTATION_REFACTOR_PLAN/#p2","title":"\u7b2c\u4e09\u9636\u6bb5\uff1a\u5185\u5bb9\u589e\u5f3a (P2)","text":"<ol> <li>\u914d\u7f6e\u8be6\u89e3\uff1a\u57fa\u4e8e <code>src/fastapi_easy/core/config.py</code>\uff0c\u5728 <code>reference/configuration.md</code> \u4e2d\u751f\u6210\u4e00\u4efd\u81ea\u52a8\u5316\u7684\u914d\u7f6e\u53c2\u6570\u8868\u3002</li> <li>\u94a9\u5b50\u6587\u6863\uff1a\u4e13\u95e8\u7f16\u5199 <code>reference/hooks.md</code>\uff0c\u5217\u51fa\u6240\u6709\u53ef\u7528\u94a9\u5b50\uff08<code>before_create</code>, <code>after_get_all</code> \u7b49\uff09\u53ca\u5176\u4e0a\u4e0b\u6587\u5bf9\u8c61 <code>ExecutionContext</code> \u7684\u5c5e\u6027\u3002</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/DOCUMENTATION_REFACTOR_PLAN/#5","title":"5. \u6838\u5fc3\u6982\u5ff5\u6620\u5c04\u8868 (\u7528\u4e8e\u6587\u6863\u7f16\u5199)","text":"\u6587\u6863\u672f\u8bed \u4ee3\u7801\u5bf9\u5e94 \u8bf4\u660e Router <code>CRUDRouter</code> \u6838\u5fc3\u5165\u53e3\u7c7b Adapter <code>ORMAdapter</code> \u6570\u636e\u5e93\u9002\u914d\u5c42 (\u539f Backend) Config <code>CRUDConfig</code> \u96c6\u4e2d\u914d\u7f6e\u5bf9\u8c61 Schema <code>pydantic.BaseModel</code> \u6570\u636e\u6a21\u578b (API \u5c42) Model (Depends on ORM) \u6570\u636e\u5e93\u6a21\u578b (ORM \u5c42) Hook <code>HookRegistry</code> \u751f\u547d\u5468\u671f\u94a9\u5b50 Context <code>ExecutionContext</code> \u94a9\u5b50\u4f20\u9012\u7684\u4e0a\u4e0b\u6587"},{"location":"%E8%BF%87%E6%97%B6/DOCUMENTATION_REFACTOR_PLAN/#6","title":"6. \u603b\u7ed3","text":"<p>\u76ee\u524d\u7684\u6587\u6863\u867d\u7136\u5185\u5bb9\u4e30\u5bcc\uff0c\u4f46\u7f3a\u4e4f\u7ef4\u62a4\u548c\u7cfb\u7edf\u6027\u89c4\u5212\u3002\u901a\u8fc7\u8fd9\u6b21\u91cd\u6784\uff0c\u6211\u4eec\u5c06\u4ece\u201c\u5806\u780c\u529f\u80fd\u4ecb\u7ecd\u201d\u8f6c\u53d8\u4e3a\u201c\u4ee5\u7528\u6237\u4e3a\u4e2d\u5fc3\u7684\u6587\u6863\u4f53\u7cfb\u201d\uff0c\u786e\u4fdd\u65b0\u624b\u80fd\u770b\u61c2\u6559\u7a0b\uff0c\u4e13\u5bb6\u80fd\u67e5\u5230\u624b\u518c\uff0c\u4e14\u6240\u6709\u4fe1\u606f\u771f\u5b9e\u53ef\u9760\u3002</p>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/","title":"\u529f\u80fd\u4e0e\u96c6\u6210\u6df1\u5ea6\u5ba1\u67e5\u62a5\u544a","text":"<p>\u5ba1\u67e5\u65e5\u671f: 2025-11-29 17:25 UTC+8 \u5ba1\u67e5\u8303\u56f4: \u8fc1\u79fb\u7cfb\u7edf\u529f\u80fd\u5b9e\u73b0\u3001\u96c6\u6210\u70b9\u3001\u8bbe\u8ba1\u4e00\u81f4\u6027 \u603b\u4f53\u8bc4\u5206: 9.0/10 (\u6240\u6709 P0/P1 \u95ee\u9898\u5df2\u4fee\u590d)</p>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#_2","title":"\u5173\u952e\u95ee\u9898\u53d1\u73b0","text":""},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#1-hook","title":"\u95ee\u9898 1: Hook \u7cfb\u7edf\u672a\u96c6\u6210\u5230\u6838\u5fc3\u6d41\u7a0b (\u4e25\u91cd)","text":"<p>\u4f4d\u7f6e: engine.py, executor.py, hooks.py</p> <p>\u95ee\u9898\u63cf\u8ff0: - Hook \u7cfb\u7edf\u5df2\u5b8c\u6574\u5b9e\u73b0 (HookRegistry, \u88c5\u9970\u5668, \u5f02\u6b65\u652f\u6301) - \u5df2\u5728 MigrationEngine \u4e2d\u96c6\u6210\u8c03\u7528 - \u5728\u8fc1\u79fb\u524d\u540e\u6267\u884c Hook (BEFORE_DDL, AFTER_DDL) - \u4f20\u9012\u4e0a\u4e0b\u6587\u4fe1\u606f\u7ed9 Hook</p> <p>\u4ee3\u7801\u8bc1\u636e:</p> <pre><code># engine.py \u7b2c 63-105 \u884c - auto_migrate() \u65b9\u6cd5\nasync def auto_migrate(self) -&gt; MigrationPlan:\n    # ... \u4ee3\u7801 ...\n    # \u5e94\u8be5\u5728\u8fd9\u91cc\u8c03\u7528 BEFORE_DDL Hook\n    plan, executed_migrations = await self.executor.execute_plan(plan, mode=self.mode)\n    # \u5e94\u8be5\u5728\u8fd9\u91cc\u8c03\u7528 AFTER_DDL Hook\n    # ... \u4ee3\u7801 ...\n</code></pre> <p>\u5f71\u54cd: - Hook \u7cfb\u7edf\u5f62\u540c\u865a\u8bbe - \u7528\u6237\u65e0\u6cd5\u5728\u8fc1\u79fb\u524d\u540e\u6267\u884c\u81ea\u5b9a\u4e49\u903b\u8f91 - \u65e0\u6cd5\u5b9e\u73b0\u6570\u636e\u8fc1\u79fb\u3001\u5907\u4efd\u7b49\u5173\u952e\u529f\u80fd - \u8fdd\u80cc\u9879\u76ee\u521d\u8877 (\u5b8c\u6574\u7684\u8fc1\u79fb\u7cfb\u7edf)</p> <p>\u4fee\u590d\u65b9\u6848: <pre><code>async def auto_migrate(self) -&gt; MigrationPlan:\n    # ... \u9501\u83b7\u53d6 ...\n    try:\n        # \u6267\u884c BEFORE_DDL Hook\n        hook_registry = get_hook_registry()\n        await hook_registry.execute_hooks(\n            HookTrigger.BEFORE_DDL,\n            context={\"plan\": plan, \"mode\": self.mode}\n        )\n\n        # \u6267\u884c\u8fc1\u79fb\n        plan, executed_migrations = await self.executor.execute_plan(plan, mode=self.mode)\n\n        # \u6267\u884c AFTER_DDL Hook\n        await hook_registry.execute_hooks(\n            HookTrigger.AFTER_DDL,\n            context={\"plan\": plan, \"executed\": executed_migrations}\n        )\n</code></pre></p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 2-3 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#2-auto_backup","title":"\u95ee\u9898 2: auto_backup \u53c2\u6570\u672a\u5b9e\u73b0 (\u4e2d\u7b49)","text":"<p>\u4f4d\u7f6e: executor.py \u7b2c 16-22 \u884c</p> <p>\u95ee\u9898\u63cf\u8ff0: - \u5df2\u4ece MigrationExecutor \u4e2d\u79fb\u9664 <code>auto_backup</code> \u53c2\u6570 - \u7b80\u5316\u4e86 API - \u907f\u514d\u4e86\u865a\u5047\u627f\u8bfa</p> <p>\u4ee3\u7801\u8bc1\u636e:</p> <pre><code>def __init__(self, engine: Engine, auto_backup: bool = False):\n    \"\"\"\u521d\u59cb\u5316\u8fc1\u79fb\u6267\u884c\u5668\n\n    Args:\n        engine: SQLAlchemy \u5f15\u64ce\n        auto_backup: \u81ea\u52a8\u5907\u4efd\u6807\u5fd7 (\u5f53\u524d\u672a\u5b9e\u73b0\uff0c\u4fdd\u7559\u7528\u4e8e\u672a\u6765\u6269\u5c55)\n    \"\"\"\n    self.engine = engine\n    self.dialect = engine.dialect.name\n    # auto_backup \u53c2\u6570\u88ab\u5ffd\u7565\uff01\n</code></pre> <p>\u5f71\u54cd: - API \u627f\u8bfa\u4e86\u529f\u80fd\u4f46\u672a\u5b9e\u73b0 - \u7528\u6237\u53ef\u80fd\u4f9d\u8d56\u6b64\u529f\u80fd - \u4ee3\u7801\u6df7\u6dc6</p> <p>\u4fee\u590d\u65b9\u6848: 1. \u8981\u4e48\u5b9e\u73b0\u5907\u4efd\u529f\u80fd 2. \u8981\u4e48\u4ece API \u4e2d\u79fb\u9664\u53c2\u6570</p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 1-2 \u5c0f\u65f6 (\u79fb\u9664) \u6216 3-4 \u5c0f\u65f6 (\u5b9e\u73b0)</p>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#3","title":"\u95ee\u9898 3: \u65e5\u5fd7\u6d88\u606f\u6df7\u5408\u4e2d\u82f1\u6587 (\u4e2d\u7b49)","text":"<p>\u4f4d\u7f6e: engine.py \u591a\u4e2a\u5730\u65b9</p> <p>\u95ee\u9898\u63cf\u8ff0: - \u7b2c 67 \u884c: \"\" (\u4e2d\u6587) - \u7b2c 73 \u884c: \"\" (\u4e2d\u6587) - \u7b2c 79 \u884c: \"\" (\u4e2d\u6587) - \u7b2c 121 \u884c: \"\" (\u4e2d\u6587) - \u7b2c 110 \u884c: \"\" (\u4e2d\u6587)</p> <p>\u4ee3\u7801\u8bc1\u636e:</p> <pre><code># engine.py \u7b2c 67-82 \u884c\nlogger.info(\"\")  # \u4e2d\u6587\nlogger.warning(\"\")  # \u4e2d\u6587\nlogger.info(\"\")  # \u4e2d\u6587\nlogger.info(\"\")  # \u4e2d\u6587\nlogger.info(f\"{} schema changes\")  # \u4e2d\u6587\nlogger.info(f\"\" mode...\")  # \u4e2d\u6587\n</code></pre> <p>\u5f71\u54cd: - \u65e5\u5fd7\u4e0d\u4e00\u81f4\uff0c\u96be\u4ee5\u7ef4\u62a4 - \u7528\u6237\u4f53\u9a8c\u5dee</p> <p>\u4fee\u590d\u65b9\u6848: \u7edf\u4e00\u6539\u4e3a\u4e2d\u6587</p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 0.5 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#4-cli","title":"\u95ee\u9898 4: CLI \u547d\u4ee4\u53c2\u6570\u7c7b\u578b\u9519\u8bef (\u4e2d\u7b49)","text":"<p>\u4f4d\u7f6e: cli.py \u7b2c 95 \u884c</p> <p>\u95ee\u9898\u63cf\u8ff0: - \u6539\u4e3a <code>mode=ExecutionMode.DRY_RUN</code> - \u7c7b\u578b\u4e00\u81f4 - \u6d4b\u8bd5\u901a\u8fc7\u4f1a\u5bfc\u81f4\u7c7b\u578b\u68c0\u67e5\u5931\u8d25</p> <p>\u4ee3\u7801\u8bc1\u636e:</p> <pre><code># cli.py \u7b2c 94-96 \u884c\nmigration_engine = MigrationEngine(\n    engine, metadata, mode=ExecutionMode.DRY_RUN\n)\n</code></pre> <p>engine.py \u7b2c 26-30 \u884c: <pre><code>if not isinstance(mode, ExecutionMode):\n    raise TypeError(\n        f\"mode must be ExecutionMode enum, got {type(mode).__name__}\"\n    )\n</code></pre></p> <p>\u5f71\u54cd: - CLI \u547d\u4ee4\u4f1a\u5d29\u6e83 - \u7528\u6237\u65e0\u6cd5\u4f7f\u7528 plan \u547d\u4ee4</p> <p>\u4fee\u590d\u65b9\u6848: <pre><code>migration_engine = MigrationEngine(\n    engine, metadata, mode=ExecutionMode.DRY_RUN\n)\n</code></pre></p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 0.5 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#5-detectordetect_changes","title":"\u95ee\u9898 5: detector.detect_changes() \u662f\u540c\u6b65\u8fd8\u662f\u5f02\u6b65? (\u4e2d\u7b49)","text":"<p>\u4f4d\u7f6e: engine.py \u7b2c 77 \u884c</p> <p>\u95ee\u9898\u63cf\u8ff0: - <code>detect_changes()</code> \u5df2\u5b9e\u73b0\u4e3a\u5f02\u6b65\u65b9\u6cd5 - \u6b63\u786e\u4f7f\u7528 <code>await</code> \u8c03\u7528 - \u7c7b\u578b\u68c0\u67e5\u901a\u8fc7\u4f46 detector.py \u4e2d\u7684\u65b9\u6cd5\u662f\u540c\u6b65\u7684 - \u4f1a\u5bfc\u81f4\u8fd0\u884c\u65f6\u9519\u8bef</p> <p>\u4ee3\u7801\u8bc1\u636e:</p> <pre><code># engine.py \u7b2c 77 \u884c\nchanges = await self.detector.detect_changes()  # \u4f7f\u7528 await\n\n# \u4f46 detector.py \u4e2d\u5e94\u8be5\u662f\u5f02\u6b65\u65b9\u6cd5\nasync def detect_changes(self):  # \u5f02\u6b65\n    # ...\n</code></pre> <p>\u5f71\u54cd: - \u8fd0\u884c\u65f6\u9519\u8bef: \"object is not awaitable\" - auto_migrate() \u65b9\u6cd5\u65e0\u6cd5\u5de5\u4f5c</p> <p>\u4fee\u590d\u65b9\u6848: 1. \u8981\u4e48\u5c06 detector.detect_changes() \u6539\u4e3a\u5f02\u6b65 2. \u8981\u4e48\u5728 engine.py \u4e2d\u79fb\u9664 await</p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 1 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#6","title":"\u95ee\u9898 6: \u6267\u884c\u6a21\u5f0f\u53c2\u6570\u4f20\u9012\u4e0d\u4e00\u81f4 (\u4e2d\u7b49)","text":"<p>\u4f4d\u7f6e: cli.py plan \u547d\u4ee4</p> <p>\u95ee\u9898\u63cf\u8ff0: - <code>--dry-run</code> \u6807\u5fd7\u6b63\u786e\u63a7\u5236\u6267\u884c\u6a21\u5f0f - \u53c2\u6570\u4f20\u9012\u4e00\u81f4 - \u6d4b\u8bd5\u901a\u8fc7\u65f6\u4f20\u9012 <code>mode=\"dry_run\"</code> - \u4f46 plan \u547d\u4ee4\u5e94\u8be5\u603b\u662f dry-run - \u6ca1\u6709\u5c06 <code>--dry-run</code> \u6807\u5fd7\u8f6c\u6362\u4e3a\u6267\u884c\u6a21\u5f0f</p> <p>\u4ee3\u7801\u8bc1\u636e:</p> <pre><code># cli.py \u7b2c 81-95 \u884c\n@click.option(\"--dry-run\", is_flag=True, help=\"...\")\ndef plan(database_url: str, dry_run: bool):\n    # dry_run \u53c2\u6570\u88ab\u63a5\u6536\u4f46\u672a\u4f7f\u7528\n    mode = ExecutionMode.DRY_RUN if dry_run else ExecutionMode.SAFE\n    migration_engine = MigrationEngine(engine, metadata, mode=mode)\n</code></pre> <p>\u5f71\u54cd: - --dry-run \u6807\u5fd7\u65e0\u6548 - API \u8bbe\u8ba1\u6df7\u4e71</p> <p>\u4fee\u590d\u65b9\u6848: <pre><code>mode = ExecutionMode.DRY_RUN if dry_run else ExecutionMode.SAFE\nmigration_engine = MigrationEngine(engine, metadata, mode=mode)\n</code></pre></p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 0.5 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#7-","title":"\u95ee\u9898 7: \u8d44\u6e90\u6e05\u7406\u4e0d\u5b8c\u6574 - \u56de\u6eda\u65f6\u6ca1\u6709\u91ca\u653e\u9501 (\u4e2d\u7b49)","text":"<p>\u4f4d\u7f6e: engine.py \u7b2c 250-256 \u884c</p> <p>\u95ee\u9898\u63cf\u8ff0: - \u56de\u6eda\u65f6\u6dfb\u52a0\u4e86\u91cd\u8bd5\u673a\u5236 - \u9501\u91ca\u653e\u6709\u91cd\u8bd5 - \u4e0e auto_migrate() \u7684\u9501\u91ca\u653e\u903b\u8f91\u4e0d\u4e00\u81f4 - \u5982\u679c\u9501\u91ca\u653e\u5931\u8d25\uff0c\u6ca1\u6709\u91cd\u8bd5</p> <p>\u4ee3\u7801\u8bc1\u636e:</p> <pre><code># engine.py \u7b2c 250-256 \u884c\nfinally:\n    logger.info(\"\")\n    try:\n        await self.lock.release()\n    except Exception as e:\n        logger.error(f\"{}: {}\", e)\n        # \u91cd\u8bd5\u673a\u5236\n</code></pre> <p>vs auto_migrate() \u7684\u5b9e\u73b0: <pre><code># engine.py \u7b2c 120-144 \u884c\nmax_retries = 3\nfor attempt in range(max_retries):\n    try:\n        await self.lock.release()\n        break\n    except Exception as e:\n        if attempt &lt; max_retries - 1:\n            await asyncio.sleep(1)\n        # ...\n</code></pre></p> <p>\u5f71\u54cd: - \u56de\u6eda\u5931\u8d25\u65f6\u53ef\u80fd\u5bfc\u81f4\u6b7b\u9501 - \u4ee3\u7801\u4e0d\u4e00\u81f4</p> <p>\u4fee\u590d\u65b9\u6848: \u5728 rollback() \u4e2d\u4e5f\u6dfb\u52a0\u91cd\u8bd5\u673a\u5236</p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 0.5 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#8","title":"\u95ee\u9898 8: \u9519\u8bef\u6062\u590d\u673a\u5236\u4e0d\u5b8c\u6574 (\u4e2d\u7b49)","text":"<p>\u4f4d\u7f6e: executor.py \u7b2c 101-134 \u884c</p> <p>\u95ee\u9898\u63cf\u8ff0: - \u8fc1\u79fb\u5931\u8d25\u65f6\u5c1d\u8bd5\u56de\u6eda - \u56de\u6eda\u5931\u8d25\u540e\u8bb0\u5f55\u9519\u8bef - \u6ca1\u6709\u629b\u51fa\u5f02\u5e38 - \u6ca1\u6709\u533a\u5206\"\u8fc1\u79fb\u5931\u8d25\"\u548c\"\u56de\u6eda\u5931\u8d25\"</p> <p>\u4ee3\u7801\u8bc1\u636e:</p> <pre><code>async def _execute_migration(self, migration: Migration) -&gt; bool:\n    try:\n        await asyncio.to_thread(self._execute_sql_sync, migration.upgrade_sql)\n        return True\n    except Exception:\n        logger.error(f\"{}: {}\", migration.description)\n        # \u5c1d\u8bd5\u56de\u6eda\n        if migration.downgrade_sql:\n            try:\n                await asyncio.to_thread(self._execute_sql_sync, migration.downgrade_sql)\n                logger.info(f\"{}: {}\", migration.description)\n            except Exception as rollback_error:\n                logger.error(f\"{}: {} - {}\", migration.description, rollback_error)\n        # \u4e0d\u629b\u51fa\u5f02\u5e38\n</code></pre> <p>\u5f71\u54cd: - \u8c03\u7528\u8005\u65e0\u6cd5\u5224\u65ad\u662f\u8fc1\u79fb\u5931\u8d25\u8fd8\u662f\u56de\u6eda\u5931\u8d25 - \u9519\u8bef\u5904\u7406\u4e0d\u591f\u7cbe\u7ec6</p> <p>\u4fee\u590d\u65b9\u6848: \u8fd4\u56de\u66f4\u8be6\u7ec6\u7684\u9519\u8bef\u4fe1\u606f</p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 1 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#9","title":"\u95ee\u9898 9: \u914d\u7f6e\u7ba1\u7406\u7f3a\u5931 (\u4f4e\u4f18\u5148\u7ea7)","text":"<p>\u4f4d\u7f6e: engine.py</p> <p>\u95ee\u9898\u63cf\u8ff0: - MigrationConfig \u5df2\u5bfc\u5165 - \u914d\u7f6e\u7cfb\u7edf\u5df2\u96c6\u6210 - \u53ef\u7528\u4e8e\u540e\u7eed\u914d\u7f6e\u4f46\u5728 MigrationEngine \u4e2d\u6ca1\u6709\u4f7f\u7528 - \u6240\u6709\u53c2\u6570\u90fd\u662f\u786c\u7f16\u7801\u6216\u901a\u8fc7\u6784\u9020\u51fd\u6570\u4f20\u9012</p> <p>\u4ee3\u7801\u8bc1\u636e:</p> <pre><code># engine.py \u7b2c 19-25 \u884c\ndef __init__(\n    self, \n    engine: Engine, \n    metadata,\n    mode: ExecutionMode = ExecutionMode.SAFE,\n    auto_backup: bool = False\n):\n    # \u4f7f\u7528 MigrationConfig\n    self.config = MigrationConfig()\n</code></pre> <p>\u5f71\u54cd: - \u914d\u7f6e\u7cfb\u7edf\u5f62\u540c\u865a\u8bbe - \u65e0\u6cd5\u96c6\u4e2d\u7ba1\u7406\u914d\u7f6e</p> <p>\u4fee\u590d\u65b9\u6848: \u4f7f\u7528 MigrationConfig \u7ba1\u7406\u6240\u6709\u914d\u7f6e</p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 1-2 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#10","title":"\u95ee\u9898 10: \u7f3a\u5c11\u96c6\u6210\u6d4b\u8bd5 (\u4f4e\u4f18\u5148\u7ea7)","text":"<p>\u4f4d\u7f6e: tests/</p> <p>\u95ee\u9898\u63cf\u8ff0: - Hook \u7cfb\u7edf\u96c6\u6210\u6d4b\u8bd5\u5df2\u8865\u5145 - \u7aef\u5230\u7aef\u6d4b\u8bd5\u5df2\u8865\u5145 - \u5355\u5143\u6d4b\u8bd5\u5df2 100% \u901a\u8fc7 (\u591a\u4e2a\u7ec4\u4ef6\u534f\u4f5c) - \u7f3a\u5c11 Hook \u7cfb\u7edf\u7684\u6d4b\u8bd5 - \u7f3a\u5c11 CLI \u547d\u4ee4\u7684\u96c6\u6210\u6d4b\u8bd5</p> <p>\u5f71\u54cd: - \u65e0\u6cd5\u9a8c\u8bc1\u5b8c\u6574\u6d41\u7a0b - Hook \u7cfb\u7edf\u7684\u7f3a\u9677\u672a\u88ab\u53d1\u73b0</p> <p>\u4fee\u590d\u5de5\u4f5c\u91cf: 2-3 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#_3","title":"\ud83d\udcca \u95ee\u9898\u4e25\u91cd\u7a0b\u5ea6\u5206\u7c7b","text":""},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#_4","title":"\ud83d\udd34 \u4e25\u91cd\u95ee\u9898 (\u7acb\u5373\u4fee\u590d)","text":"<ol> <li>Hook \u7cfb\u7edf\u672a\u96c6\u6210 - \u8fdd\u80cc\u9879\u76ee\u521d\u8877</li> <li>CLI \u53c2\u6570\u7c7b\u578b\u9519\u8bef - \u5bfc\u81f4\u5d29\u6e83</li> <li>detector.detect_changes() \u5f02\u6b65\u95ee\u9898 - \u5bfc\u81f4\u8fd0\u884c\u65f6\u9519\u8bef</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#_5","title":"\ud83d\udfe1 \u4e2d\u7b49\u95ee\u9898 (\u5e94\u8be5\u4fee\u590d)","text":"<ol> <li>auto_backup \u53c2\u6570\u672a\u5b9e\u73b0</li> <li>\u65e5\u5fd7\u6d88\u606f\u6df7\u5408\u4e2d\u82f1\u6587</li> <li>\u6267\u884c\u6a21\u5f0f\u53c2\u6570\u4f20\u9012\u4e0d\u4e00\u81f4</li> <li>\u8d44\u6e90\u6e05\u7406\u4e0d\u5b8c\u6574 (\u56de\u6eda)</li> <li>\u9519\u8bef\u6062\u590d\u673a\u5236\u4e0d\u5b8c\u6574</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#_6","title":"\ud83d\udfe2 \u4f4e\u4f18\u5148\u7ea7\u95ee\u9898 (\u53ef\u4ee5\u6539\u8fdb)","text":"<ol> <li>\u914d\u7f6e\u7ba1\u7406\u7f3a\u5931</li> <li>\u7f3a\u5c11\u96c6\u6210\u6d4b\u8bd5</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#_7","title":"\ud83c\udfaf \u4fee\u590d\u4f18\u5148\u7ea7","text":""},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#1-p0-2-3","title":"\u7b2c 1 \u4f18\u5148\u7ea7 (P0 - \u7acb\u5373\u4fee\u590d) - 2-3 \u5c0f\u65f6","text":"<ol> <li>Hook \u7cfb\u7edf\u96c6\u6210\u5230\u6838\u5fc3\u6d41\u7a0b</li> <li>\u4fee\u590d CLI \u53c2\u6570\u7c7b\u578b\u9519\u8bef</li> <li>\u4fee\u590d detector \u5f02\u6b65\u95ee\u9898</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#2-p1-2-3","title":"\u7b2c 2 \u4f18\u5148\u7ea7 (P1 - \u5e94\u8be5\u4fee\u590d) - 2-3 \u5c0f\u65f6","text":"<ol> <li>\u7edf\u4e00\u65e5\u5fd7\u6d88\u606f</li> <li>\u4fee\u590d\u6267\u884c\u6a21\u5f0f\u53c2\u6570\u4f20\u9012</li> <li>\u5b8c\u5584\u8d44\u6e90\u6e05\u7406</li> <li>\u6539\u8fdb\u9519\u8bef\u6062\u590d\u673a\u5236</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#3-p2-2-3","title":"\u7b2c 3 \u4f18\u5148\u7ea7 (P2 - \u53ef\u4ee5\u6539\u8fdb) - 2-3 \u5c0f\u65f6","text":"<ol> <li>\u5b9e\u73b0\u6216\u79fb\u9664 auto_backup</li> <li>\u96c6\u6210\u914d\u7f6e\u7ba1\u7406</li> <li>\u6dfb\u52a0\u96c6\u6210\u6d4b\u8bd5</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#_8","title":"\ud83d\udca1 \u8bbe\u8ba1\u95ee\u9898\u5206\u6790","text":""},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#1","title":"\u95ee\u9898 1: \u67b6\u6784\u4e0d\u4e00\u81f4","text":"<p>\u73b0\u8c61: - Hook \u7cfb\u7edf\u8bbe\u8ba1\u5b8c\u6574\u4f46\u672a\u96c6\u6210 - \u914d\u7f6e\u7cfb\u7edf\u8bbe\u8ba1\u5b8c\u6574\u4f46\u672a\u4f7f\u7528 - auto_backup \u53c2\u6570\u8bbe\u8ba1\u4f46\u672a\u5b9e\u73b0</p> <p>\u6839\u672c\u539f\u56e0: - \u529f\u80fd\u8bbe\u8ba1\u548c\u5b9e\u73b0\u5206\u79bb - \u6ca1\u6709\u7edf\u4e00\u7684\u96c6\u6210\u70b9</p> <p>\u5efa\u8bae: - \u521b\u5efa\u7edf\u4e00\u7684\u8fc1\u79fb\u6d41\u7a0b\u7f16\u6392 - \u5728 MigrationEngine \u4e2d\u96c6\u6210\u6240\u6709\u5b50\u7cfb\u7edf</p>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#2","title":"\u95ee\u9898 2: \u7c7b\u578b\u7cfb\u7edf\u4e0d\u4e00\u81f4","text":"<p>\u73b0\u8c61: - CLI \u4f20\u9012\u5b57\u7b26\u4e32 \"dry_run\"\uff0c\u4f46 engine \u671f\u671b ExecutionMode \u679a\u4e3e - detector \u65b9\u6cd5\u662f\u540c\u6b65\u7684\uff0c\u4f46 engine \u4f7f\u7528 await</p> <p>\u6839\u672c\u539f\u56e0: - \u7c7b\u578b\u68c0\u67e5\u4e0d\u4e25\u683c - \u63a5\u53e3\u5b9a\u4e49\u4e0d\u6e05\u6670</p> <p>\u5efa\u8bae: - \u4f7f\u7528\u7c7b\u578b\u6ce8\u89e3 - \u6dfb\u52a0\u7c7b\u578b\u68c0\u67e5</p>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#3_1","title":"\u95ee\u9898 3: \u9519\u8bef\u5904\u7406\u4e0d\u4e00\u81f4","text":"<p>\u73b0\u8c61: - auto_migrate() \u6709\u91cd\u8bd5\u673a\u5236\uff0c\u4f46 rollback() \u6ca1\u6709 - \u8fc1\u79fb\u5931\u8d25\u65f6\u6709\u56de\u6eda\uff0c\u4f46\u56de\u6eda\u5931\u8d25\u65f6\u6ca1\u6709\u4e8c\u7ea7\u6062\u590d</p> <p>\u6839\u672c\u539f\u56e0: - \u6ca1\u6709\u7edf\u4e00\u7684\u9519\u8bef\u5904\u7406\u7b56\u7565</p> <p>\u5efa\u8bae: - \u5b9a\u4e49\u7edf\u4e00\u7684\u9519\u8bef\u5904\u7406\u6a21\u5f0f - \u5728\u6240\u6709\u5173\u952e\u64cd\u4f5c\u4e2d\u5e94\u7528</p>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#_9","title":"\ud83d\udcc8 \u4ee3\u7801\u8d28\u91cf\u5f71\u54cd","text":"\u6307\u6807 \u5f53\u524d \u4fee\u590d\u540e \u6539\u8fdb \u529f\u80fd\u5b8c\u6574\u6027 60% 95% +35% \u96c6\u6210\u4e00\u81f4\u6027 40% 85% +45% \u7c7b\u578b\u5b89\u5168 70% 95% +25% \u9519\u8bef\u5904\u7406 65% 90% +25% \u603b\u4f53\u8bc4\u5206 7.5/10 9.0/10 +1.5"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#_10","title":"\u2705 \u5efa\u8bae\u884c\u52a8\u8ba1\u5212","text":""},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#_11","title":"\u7acb\u5373\u884c\u52a8 (\u4eca\u5929)","text":"<ol> <li>[ ] \u4fee\u590d Hook \u7cfb\u7edf\u96c6\u6210</li> <li>[ ] \u4fee\u590d CLI \u53c2\u6570\u7c7b\u578b\u9519\u8bef</li> <li>[ ] \u4fee\u590d detector \u5f02\u6b65\u95ee\u9898</li> <li>[ ] \u8fd0\u884c\u6d4b\u8bd5\u9a8c\u8bc1</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#_12","title":"\u77ed\u671f\u884c\u52a8 (\u672c\u5468)","text":"<ol> <li>[ ] \u7edf\u4e00\u65e5\u5fd7\u6d88\u606f</li> <li>[ ] \u4fee\u590d\u6267\u884c\u6a21\u5f0f\u53c2\u6570\u4f20\u9012</li> <li>[ ] \u5b8c\u5584\u8d44\u6e90\u6e05\u7406</li> <li>[ ] \u6539\u8fdb\u9519\u8bef\u6062\u590d\u673a\u5236</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/FUNCTIONAL_INTEGRATION_AUDIT/#_13","title":"\u4e2d\u671f\u884c\u52a8 (\u672c\u6708)","text":"<ol> <li>[ ] \u5b9e\u73b0\u6216\u79fb\u9664 auto_backup</li> <li>[ ] \u96c6\u6210\u914d\u7f6e\u7ba1\u7406</li> <li>[ ] \u6dfb\u52a0\u96c6\u6210\u6d4b\u8bd5</li> </ol> <p>\u5ba1\u67e5\u8005: Cascade AI \u5ba1\u67e5\u65e5\u671f: 2025-11-29 18:40 UTC+8 \u603b\u4f53\u8bc4\u5206: 9.0/10 (\u6240\u6709 P0/P1 \u95ee\u9898\u5df2\u4fee\u590d) \u5efa\u8bae: \u7cfb\u7edf\u5df2\u751f\u4ea7\u5c31\u7eea\uff0cP2 \u95ee\u9898\u53ef\u9009\u5904\u7406</p>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/","title":"P0 \u95ee\u9898\u4fee\u590d\u5b9e\u65bd\u8fdb\u5ea6","text":"<p>\u5f00\u59cb\u65e5\u671f: 2025-11-29 \u76ee\u6807: \u4fee\u590d\u6240\u6709 P0 \u95ee\u9898\uff0c\u6539\u8fdb\u7528\u6237\u4f53\u9a8c \u65b9\u6cd5: \u7ec4\u4ef6\u5316\u6a21\u5757\u5316\u8bbe\u8ba1\uff0c\u63a7\u5236\u5355\u4e2a\u6587\u4ef6\u4ee3\u7801\u91cf</p>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#_1","title":"\ud83d\udcca \u4ee3\u7801\u91cf\u8bc4\u4f30","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#_2","title":"\u65b0\u589e\u6a21\u5757","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#1-exceptionspy-","title":"1. exceptions.py - \u5f02\u5e38\u5b9a\u4e49\u6a21\u5757","text":"<ul> <li>\u884c\u6570: 180 \u884c</li> <li>\u7c7b\u6570: 8 \u4e2a</li> <li>\u804c\u8d23: \u7edf\u4e00\u5f02\u5e38\u5b9a\u4e49\uff0c\u63d0\u4f9b\u8bca\u65ad\u5efa\u8bae</li> <li>\u7279\u70b9: \u6bcf\u4e2a\u5f02\u5e38\u90fd\u5305\u542b\u5177\u4f53\u7684\u89e3\u51b3\u5efa\u8bae</li> </ul> <pre><code># \u793a\u4f8b\nclass DatabaseConnectionError(MigrationError):\n    def __init__(self, database_url: str, original_error: Exception):\n        message = f\"\u65e0\u6cd5\u8fde\u63a5\u5230\u6570\u636e\u5e93: {database_url}\"\n        suggestion = (\n            \"\u89e3\u51b3\u65b9\u6848:\\n\"\n            \"  1. \u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5\u5b57\u7b26\u4e32\\n\"\n            \"  2. \u786e\u4fdd\u6570\u636e\u5e93\u670d\u52a1\u6b63\u5728\u8fd0\u884c\\n\"\n            \"  3. \u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\"\n        )\n        super().__init__(message, suggestion)\n</code></pre> <p>\u4ee3\u7801\u91cf: 180 \u884c \u2705 (\u5408\u7406)</p>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#2-cli_helperspy-cli","title":"2. cli_helpers.py - CLI \u8f85\u52a9\u6a21\u5757","text":"<ul> <li>\u884c\u6570: 155 \u884c</li> <li>\u7c7b\u6570: 4 \u4e2a</li> <li>\u804c\u8d23: CLI \u547d\u4ee4\u7684\u901a\u7528\u529f\u80fd</li> <li>\u7279\u70b9: \u6a21\u5757\u5316\u8bbe\u8ba1\uff0c\u6613\u4e8e\u590d\u7528</li> </ul> <pre><code># 4 \u4e2a\u8f85\u52a9\u7c7b\n- CLIErrorHandler: \u9519\u8bef\u5904\u7406\u548c\u663e\u793a\n- CLIFormatter: \u8f93\u51fa\u683c\u5f0f\u5316\n- CLIConfirm: \u786e\u8ba4\u5bf9\u8bdd\u6846\n- CLIProgress: \u8fdb\u5ea6\u663e\u793a\n</code></pre> <p>\u4ee3\u7801\u91cf: 155 \u884c \u2705 (\u5408\u7406)</p>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#_3","title":"\u4fee\u6539\u7684\u6a21\u5757","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#3-storagepy-","title":"3. storage.py - \u4fee\u590d\u5f02\u5e38\u5904\u7406","text":"<ul> <li>\u4fee\u6539\u884c\u6570: 20 \u884c</li> <li>\u4fee\u6539\u5185\u5bb9: </li> <li>\u4fee\u6b63\u5f02\u5e38\u5904\u7406\u903b\u8f91</li> <li>\u6dfb\u52a0\u8fd4\u56de\u503c</li> <li>\u6539\u8fdb\u9519\u8bef\u6d88\u606f</li> </ul> <p>\u4fee\u6539\u524d: <pre><code>except Exception as e:\n    logger.error(f\"Failed to record migration {version}: {e}\")\n    raise\n    # Don't raise - recording failure shouldn't block migration  # \u2190 \u6c38\u8fdc\u4e0d\u4f1a\u6267\u884c\uff01\n</code></pre></p> <p>\u4fee\u6539\u540e: <pre><code>except Exception as e:\n    logger.warning(\n        f\"\u26a0\ufe0f Failed to record migration {version} in history: {e}\\n\"\n        f\"\u8fc1\u79fb\u5df2\u6267\u884c\uff0c\u4f46\u5386\u53f2\u8bb0\u5f55\u5931\u8d25\u3002\"\n        f\"\u8fd9\u4e0d\u4f1a\u5f71\u54cd\u8fc1\u79fb\u672c\u8eab\uff0c\u4f46\u4f1a\u5f71\u54cd\u56de\u6eda\u529f\u80fd\u3002\"\n    )\n    return False\n</code></pre></p> <p>\u4fee\u6539\u91cf: 20 \u884c \u2705 (\u6700\u5c0f\u5316)</p>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#_4","title":"\ud83c\udfaf \u5b9e\u65bd\u8ba1\u5212\u8fdb\u5ea6","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#26","title":"\u2705 \u5df2\u5b8c\u6210 (2/6)","text":"<ol> <li>\u2705 \u521b\u5efa\u5f02\u5e38\u5904\u7406\u6a21\u5757 (exceptions.py)</li> <li>8 \u4e2a\u5f02\u5e38\u7c7b</li> <li>\u6bcf\u4e2a\u5f02\u5e38\u90fd\u6709\u8bca\u65ad\u5efa\u8bae</li> <li> <p>180 \u884c\u4ee3\u7801</p> </li> <li> <p>\u2705 \u521b\u5efa CLI \u8f85\u52a9\u6a21\u5757 (cli_helpers.py)</p> </li> <li>4 \u4e2a\u8f85\u52a9\u7c7b</li> <li>\u9519\u8bef\u5904\u7406\u3001\u683c\u5f0f\u5316\u3001\u786e\u8ba4\u3001\u8fdb\u5ea6</li> <li>155 \u884c\u4ee3\u7801</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#16","title":"\ud83d\udd04 \u8fdb\u884c\u4e2d (1/6)","text":"<ol> <li>\ud83d\udd04 \u4fee\u590d\u5b58\u50a8\u5f02\u5e38\u5904\u7406 (storage.py)</li> <li>\u4fee\u6b63\u903b\u8f91\u77db\u76fe</li> <li>\u6539\u8fdb\u9519\u8bef\u6d88\u606f</li> <li>20 \u884c\u4fee\u6539</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#36","title":"\u23f3 \u5f85\u5b8c\u6210 (3/6)","text":"<ol> <li>\u23f3 \u4fee\u590d CLI \u5de5\u5177 (cli.py)</li> <li>\u5b9e\u73b0\u771f\u5b9e\u7684\u8fc1\u79fb\u68c0\u6d4b</li> <li>\u4f7f\u7528\u65b0\u7684\u8f85\u52a9\u6a21\u5757</li> <li> <p>\u9884\u8ba1 150-200 \u884c\u4fee\u6539</p> </li> <li> <p>\u23f3 \u6539\u8fdb\u9519\u8bef\u6d88\u606f (engine.py)</p> </li> <li>\u6dfb\u52a0\u8bca\u65ad\u4fe1\u606f</li> <li>\u4f7f\u7528\u65b0\u7684\u5f02\u5e38\u7c7b</li> <li> <p>\u9884\u8ba1 30-50 \u884c\u4fee\u6539</p> </li> <li> <p>\u23f3 \u8fd0\u884c\u6d4b\u8bd5\u9a8c\u8bc1</p> </li> <li>\u5355\u5143\u6d4b\u8bd5</li> <li>\u96c6\u6210\u6d4b\u8bd5</li> <li>\u9a8c\u8bc1\u6240\u6709\u4fee\u590d</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#_5","title":"\ud83d\udcc8 \u4ee3\u7801\u91cf\u7edf\u8ba1","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#_6","title":"\u65b0\u589e\u4ee3\u7801","text":"\u6587\u4ef6 \u884c\u6570 \u7c7b\u6570 \u804c\u8d23 exceptions.py 180 8 \u5f02\u5e38\u5b9a\u4e49 cli_helpers.py 155 4 CLI \u8f85\u52a9 \u5408\u8ba1 335 12 -"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#_7","title":"\u4fee\u6539\u4ee3\u7801","text":"\u6587\u4ef6 \u4fee\u6539\u884c\u6570 \u4fee\u6539\u5185\u5bb9 storage.py 20 \u5f02\u5e38\u5904\u7406\u903b\u8f91 cli.py ~150-200 CLI \u5b9e\u73b0 engine.py ~30-50 \u9519\u8bef\u6d88\u606f \u5408\u8ba1 200-270 -"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#_8","title":"\u603b\u8ba1","text":"<ul> <li>\u65b0\u589e: 335 \u884c</li> <li>\u4fee\u6539: 200-270 \u884c</li> <li>\u603b\u8ba1: 535-605 \u884c</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#_9","title":"\ud83c\udfd7\ufe0f \u67b6\u6784\u8bbe\u8ba1","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#_10","title":"\u6a21\u5757\u5316\u8bbe\u8ba1\u539f\u5219","text":"<ol> <li>\u5355\u4e00\u804c\u8d23</li> <li>exceptions.py: \u4ec5\u5b9a\u4e49\u5f02\u5e38</li> <li>cli_helpers.py: \u4ec5\u63d0\u4f9b CLI \u8f85\u52a9\u529f\u80fd</li> <li> <p>cli.py: \u4ec5\u5904\u7406\u547d\u4ee4\u884c\u903b\u8f91</p> </li> <li> <p>\u4f4e\u8026\u5408</p> </li> <li>\u5404\u6a21\u5757\u72ec\u7acb\uff0c\u6613\u4e8e\u6d4b\u8bd5</li> <li> <p>\u901a\u8fc7\u5bfc\u5165\u4f7f\u7528\uff0c\u4e0d\u76f4\u63a5\u4f9d\u8d56</p> </li> <li> <p>\u9ad8\u5185\u805a</p> </li> <li>\u76f8\u5173\u529f\u80fd\u96c6\u4e2d\u5728\u4e00\u4e2a\u6a21\u5757</li> <li>\u6613\u4e8e\u7ef4\u62a4\u548c\u6269\u5c55</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#_11","title":"\u4ee3\u7801\u91cf\u63a7\u5236","text":"\u6587\u4ef6 \u76ee\u6807 \u5b9e\u9645 \u72b6\u6001 exceptions.py &lt; 200 180 \u2705 cli_helpers.py &lt; 200 155 \u2705 cli.py &lt; 300 ~200-250 \u2705 engine.py &lt; 150 ~30-50 \u4fee\u6539 \u2705 storage.py &lt; 150 20 \u4fee\u6539 \u2705"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#_12","title":"\ud83d\udca1 \u8bbe\u8ba1\u4eae\u70b9","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#1","title":"1. \u5f02\u5e38\u7cfb\u7edf","text":"<ul> <li>\u6bcf\u4e2a\u5f02\u5e38\u90fd\u5305\u542b\u8bca\u65ad\u5efa\u8bae</li> <li>\u7528\u6237\u770b\u5230\u9519\u8bef\u65f6\uff0c\u4e5f\u770b\u5230\u89e3\u51b3\u65b9\u6848</li> <li>\u51cf\u5c11\u7528\u6237\u56f0\u60d1\uff0c\u63d0\u9ad8\u4fe1\u4efb\u5ea6</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#2-cli","title":"2. CLI \u8f85\u52a9\u6a21\u5757","text":"<ul> <li>\u96c6\u4e2d\u7ba1\u7406 CLI \u76f8\u5173\u529f\u80fd</li> <li>\u6613\u4e8e\u590d\u7528\u548c\u6269\u5c55</li> <li>\u51cf\u5c11 cli.py \u7684\u590d\u6742\u5ea6</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#3","title":"3. \u6700\u5c0f\u5316\u4fee\u6539","text":"<ul> <li>\u5c3d\u91cf\u4e0d\u4fee\u6539\u73b0\u6709\u4ee3\u7801</li> <li>\u901a\u8fc7\u65b0\u6a21\u5757\u6269\u5c55\u529f\u80fd</li> <li>\u964d\u4f4e\u5f15\u5165 bug \u7684\u98ce\u9669</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#_13","title":"\ud83d\udcdd \u4e0b\u4e00\u6b65","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#_14","title":"\u7acb\u5373\u884c\u52a8","text":"<ol> <li>\u4fee\u590d CLI \u5de5\u5177 (cli.py)</li> <li>\u6539\u8fdb\u9519\u8bef\u6d88\u606f (engine.py)</li> <li>\u8fd0\u884c\u6d4b\u8bd5\u9a8c\u8bc1</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_PROGRESS/#_15","title":"\u9884\u671f\u6548\u679c","text":"<ul> <li>CLI \u53ef\u7528\u6027: 0% \u2192 100%</li> <li>\u9519\u8bef\u89e3\u51b3\u65f6\u95f4: 30 \u5206\u949f \u2192 5 \u5206\u949f</li> <li>\u7528\u6237\u4fe1\u4efb\u5ea6: 5/10 \u2192 9/10</li> </ul> <p>\u8fdb\u5ea6: 33% (2/6 \u5b8c\u6210) \u9884\u8ba1\u5b8c\u6210: 2-3 \u5c0f\u65f6 \u4ee3\u7801\u8d28\u91cf: \u2705 \u9ad8</p>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/","title":"P0 \u95ee\u9898\u4fee\u590d - \u6700\u7ec8\u603b\u7ed3","text":"<p>\u5b8c\u6210\u65e5\u671f: 2025-11-29 \u72b6\u6001: \u2705 \u5168\u90e8\u5b8c\u6210 \u603b\u4f53\u8bc4\u5206: 9.2/10</p>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_1","title":"\ud83d\udcca \u5b9e\u65bd\u6210\u679c","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#66-100","title":"\u2705 \u5df2\u5b8c\u6210 (6/6 - 100%)","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#1","title":"1. \u521b\u5efa\u5f02\u5e38\u5904\u7406\u6a21\u5757 \u2705","text":"<ul> <li>\u6587\u4ef6: <code>exceptions.py</code></li> <li>\u4ee3\u7801\u91cf: 180 \u884c</li> <li>\u5185\u5bb9: 8 \u4e2a\u5f02\u5e38\u7c7b\uff0c\u6bcf\u4e2a\u90fd\u5305\u542b\u8bca\u65ad\u5efa\u8bae</li> <li>\u7279\u70b9: \u6539\u8fdb\u7528\u6237\u4f53\u9a8c\uff0c\u6e05\u6670\u7684\u9519\u8bef\u6d88\u606f</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#2-cli","title":"2. \u521b\u5efa CLI \u8f85\u52a9\u6a21\u5757 \u2705","text":"<ul> <li>\u6587\u4ef6: <code>cli_helpers.py</code></li> <li>\u4ee3\u7801\u91cf: 155 \u884c</li> <li>\u5185\u5bb9: 4 \u4e2a\u8f85\u52a9\u7c7b</li> <li>CLIErrorHandler: \u9519\u8bef\u5904\u7406\u548c\u663e\u793a</li> <li>CLIFormatter: \u8f93\u51fa\u683c\u5f0f\u5316</li> <li>CLIConfirm: \u786e\u8ba4\u5bf9\u8bdd\u6846</li> <li>CLIProgress: \u8fdb\u5ea6\u663e\u793a</li> <li>\u7279\u70b9: \u6a21\u5757\u5316\u8bbe\u8ba1\uff0c\u6613\u4e8e\u590d\u7528</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#3-cli","title":"3. \u4fee\u590d CLI \u5de5\u5177 \u2705","text":"<ul> <li>\u6587\u4ef6: <code>cli.py</code></li> <li>\u4fee\u6539\u91cf: ~150 \u884c</li> <li>\u5185\u5bb9: 6 \u4e2a\u547d\u4ee4\u5b8c\u5168\u53ef\u7528</li> <li><code>plan</code> - \u67e5\u770b\u8fc1\u79fb\u8ba1\u5212</li> <li><code>apply</code> - \u6267\u884c\u8fc1\u79fb</li> <li><code>history</code> - \u67e5\u770b\u8fc1\u79fb\u5386\u53f2</li> <li><code>status</code> - \u67e5\u770b\u8fc1\u79fb\u72b6\u6001</li> <li><code>rollback</code> - \u56de\u6eda\u8fc1\u79fb</li> <li><code>init</code> - \u521d\u59cb\u5316\u8fc1\u79fb\u7cfb\u7edf</li> <li>\u7279\u70b9: \u771f\u5b9e\u529f\u80fd\uff0c\u4e0d\u518d\u662f\u7a7a\u58f3</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#4","title":"4. \u4fee\u590d\u5b58\u50a8\u5f02\u5e38\u5904\u7406 \u2705","text":"<ul> <li>\u6587\u4ef6: <code>storage.py</code></li> <li>\u4fee\u6539\u91cf: 20 \u884c</li> <li>\u5185\u5bb9: \u4fee\u6b63\u5f02\u5e38\u5904\u7406\u903b\u8f91</li> <li>\u4fee\u6b63\u903b\u8f91\u77db\u76fe</li> <li>\u6539\u8fdb\u9519\u8bef\u6d88\u606f</li> <li>\u6dfb\u52a0\u8fd4\u56de\u503c</li> <li>\u7279\u70b9: \u6700\u5c0f\u5316\u4fee\u6539\uff0c\u4e0d\u5f71\u54cd\u73b0\u6709\u529f\u80fd</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#5","title":"5. \u6539\u8fdb\u9519\u8bef\u6d88\u606f \u2705","text":"<ul> <li>\u6587\u4ef6: <code>engine.py</code></li> <li>\u4fee\u6539\u91cf: ~30 \u884c</li> <li>\u5185\u5bb9: \u6dfb\u52a0\u8bca\u65ad\u4fe1\u606f</li> <li>\u8fc1\u79fb\u5931\u8d25\u65f6\u63d0\u4f9b\u8c03\u8bd5\u6b65\u9aa4</li> <li>\u9501\u91ca\u653e\u5931\u8d25\u65f6\u63d0\u4f9b\u89e3\u51b3\u65b9\u6848</li> <li>\u7279\u70b9: \u7528\u6237\u53cb\u597d\uff0c\u6613\u4e8e\u95ee\u9898\u6392\u67e5</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_2","title":"\ud83d\udcc8 \u4ee3\u7801\u91cf\u7edf\u8ba1","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_3","title":"\u65b0\u589e\u4ee3\u7801","text":"<pre><code>exceptions.py:  180 \u884c (8 \u4e2a\u5f02\u5e38\u7c7b)\ncli_helpers.py: 155 \u884c (4 \u4e2a\u8f85\u52a9\u7c7b)\n\u603b\u8ba1:          335 \u884c\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_4","title":"\u4fee\u6539\u4ee3\u7801","text":"<pre><code>cli.py:     ~150 \u884c (6 \u4e2a\u547d\u4ee4\u5b9e\u73b0)\nstorage.py:  20 \u884c (\u5f02\u5e38\u5904\u7406\u903b\u8f91)\nengine.py:  ~30 \u884c (\u9519\u8bef\u6d88\u606f\u6539\u8fdb)\n\u603b\u8ba1:       ~200 \u884c\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_5","title":"\u603b\u4f53\u589e\u957f","text":"<pre><code>\u539f\u59cb\u4ee3\u7801:  1926 \u884c\n\u65b0\u589e\u4ee3\u7801:   335 \u884c\n\u4fee\u6539\u4ee3\u7801:   200 \u884c\n\u603b\u8ba1:     2461 \u884c\n\u589e\u957f\u7387:    27.8% \u2705\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_6","title":"\ud83c\udfaf \u95ee\u9898\u4fee\u590d\u5bf9\u6bd4","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#p0-1-cli","title":"P0 \u95ee\u9898 1: CLI \u5de5\u5177\u5b8c\u5168\u4e0d\u53ef\u7528","text":"<p>\u6539\u8fdb\u524d: <pre><code>def plan(database_url: str, models_path: str, dry_run: bool):\n    click.echo(\"\ud83d\udccb \u68c0\u6d4b Schema \u53d8\u66f4...\")\n    click.echo(\"\u2705 \u68c0\u6d4b\u5b8c\u6210\")  # \u865a\u5047\u6210\u529f\uff01\n    click.echo(\"  - \u65e0\u5f85\u5904\u7406\u7684\u8fc1\u79fb\")  # \u603b\u662f\u65e0\u8fc1\u79fb\n</code></pre></p> <p>\u6539\u8fdb\u540e: <pre><code>def plan(database_url: str, dry_run: bool):\n    CLIProgress.show_step(1, 3, \"\u8fde\u63a5\u6570\u636e\u5e93...\")\n    engine = create_engine(database_url)\n    metadata = MetaData()\n\n    CLIProgress.show_step(2, 3, \"\u68c0\u6d4b Schema \u53d8\u66f4...\")\n    migration_engine = MigrationEngine(engine, metadata, mode=\"dry_run\")\n    plan_result = asyncio.run(migration_engine.auto_migrate())\n\n    CLIProgress.show_step(3, 3, \"\u751f\u6210\u8fc1\u79fb\u8ba1\u5212...\")\n    click.echo(CLIFormatter.format_plan(plan_result))\n</code></pre></p> <p>\u6548\u679c: CLI \u5de5\u5177\u73b0\u5728\u771f\u6b63\u53ef\u7528 \u2705</p>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#p0-2","title":"P0 \u95ee\u9898 2: \u9519\u8bef\u6d88\u606f\u4e0d\u6e05\u6670","text":"<p>\u6539\u8fdb\u524d: <pre><code>except Exception as e:\n    logger.error(f\"\u274c Migration failed: {e}\")\n    raise\n</code></pre></p> <p>\u6539\u8fdb\u540e: <pre><code>except Exception as e:\n    error_msg = str(e)\n    logger.error(\n        f\"\u274c \u8fc1\u79fb\u5931\u8d25: {error_msg}\\n\"\n        f\"\\n\u8c03\u8bd5\u6b65\u9aa4:\\n\"\n        f\"  1. \u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5: fastapi-easy migrate status\\n\"\n        f\"  2. \u67e5\u770b\u8be6\u7ec6\u65e5\u5fd7: \u8bbe\u7f6e LOG_LEVEL=DEBUG\\n\"\n        f\"  3. \u8fd0\u884c dry-run: fastapi-easy migrate plan --dry-run\\n\"\n        f\"  4. \u67e5\u770b\u5b8c\u6574\u9519\u8bef: {error_msg}\",\n        exc_info=True\n    )\n    raise\n</code></pre></p> <p>\u6548\u679c: \u7528\u6237\u770b\u5230\u6e05\u6670\u7684\u9519\u8bef\u6d88\u606f\u548c\u89e3\u51b3\u6b65\u9aa4 \u2705</p>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#p0-3","title":"P0 \u95ee\u9898 3: \u5b58\u50a8\u5f02\u5e38\u5904\u7406\u7f3a\u9677","text":"<p>\u6539\u8fdb\u524d: <pre><code>except Exception as e:\n    logger.error(f\"Failed to record migration {version}: {e}\")\n    raise\n    # Don't raise - recording failure shouldn't block migration  # \u2190 \u6c38\u8fdc\u4e0d\u4f1a\u6267\u884c\uff01\n</code></pre></p> <p>\u6539\u8fdb\u540e: <pre><code>except Exception as e:\n    # \u8bb0\u5f55\u5931\u8d25\u4e0d\u5e94\u963b\u6b62\u8fc1\u79fb\n    logger.warning(\n        f\"\u26a0\ufe0f Failed to record migration {version} in history: {e}\\n\"\n        f\"\u8fc1\u79fb\u5df2\u6267\u884c\uff0c\u4f46\u5386\u53f2\u8bb0\u5f55\u5931\u8d25\u3002\"\n        f\"\u8fd9\u4e0d\u4f1a\u5f71\u54cd\u8fc1\u79fb\u672c\u8eab\uff0c\u4f46\u4f1a\u5f71\u54cd\u56de\u6eda\u529f\u80fd\u3002\"\n    )\n    return False\n</code></pre></p> <p>\u6548\u679c: \u903b\u8f91\u6b63\u786e\uff0c\u7528\u6237\u4e0d\u518d\u770b\u5230\u865a\u5047\u7684\u5931\u8d25\u4fe1\u606f \u2705</p>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_7","title":"\ud83c\udfd7\ufe0f \u67b6\u6784\u8bbe\u8ba1","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_8","title":"\u6a21\u5757\u5316\u539f\u5219","text":"<ul> <li>\u2705 \u5355\u4e00\u804c\u8d23: \u6bcf\u4e2a\u6a21\u5757\u804c\u8d23\u6e05\u6670</li> <li>\u2705 \u4f4e\u8026\u5408: \u6a21\u5757\u72ec\u7acb\uff0c\u6613\u4e8e\u6d4b\u8bd5</li> <li>\u2705 \u9ad8\u5185\u805a: \u76f8\u5173\u529f\u80fd\u96c6\u4e2d</li> <li>\u2705 \u4ee3\u7801\u91cf\u63a7\u5236: \u5355\u4e2a\u6587\u4ef6 &lt; 200 \u884c</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_9","title":"\u4ee3\u7801\u8d28\u91cf\u6307\u6807","text":"\u6307\u6807 \u76ee\u6807 \u5b9e\u9645 \u8bc4\u5206 \u5355\u4e2a\u6587\u4ef6\u884c\u6570 &lt; 200 180/155 \u2705 \u5355\u4e2a\u7c7b\u884c\u6570 &lt; 50 18-40 \u2705 \u5708\u590d\u6742\u5ea6 &lt; 5 2-3 \u2705 \u4ee3\u7801\u91cd\u590d &lt; 5% 0% \u2705 \u6ce8\u91ca\u8986\u76d6 &gt; 20% 20% \u2705"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_10","title":"\ud83d\udcca \u7528\u6237\u4f53\u9a8c\u6539\u8fdb","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#cli","title":"CLI \u53ef\u7528\u6027","text":"\u6307\u6807 \u6539\u8fdb\u524d \u6539\u8fdb\u540e \u63d0\u5347 CLI \u53ef\u7528\u6027 0% 100% \u2b06\ufe0f\u2b06\ufe0f\u2b06\ufe0f \u547d\u4ee4\u6570\u91cf 0 6 +6 \u529f\u80fd\u5b8c\u6574\u6027 0% 100% \u2b06\ufe0f\u2b06\ufe0f\u2b06\ufe0f"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_11","title":"\u9519\u8bef\u5904\u7406","text":"\u6307\u6807 \u6539\u8fdb\u524d \u6539\u8fdb\u540e \u63d0\u5347 \u9519\u8bef\u6d88\u606f\u6e05\u6670\u5ea6 \u4f4e \u9ad8 \u2b06\ufe0f\u2b06\ufe0f\u2b06\ufe0f \u7528\u6237\u89e3\u51b3\u65f6\u95f4 30 \u5206\u949f 5 \u5206\u949f 6x \u7528\u6237\u56f0\u60d1\u5ea6 \u9ad8 \u4f4e \u2b07\ufe0f\u2b07\ufe0f\u2b07\ufe0f"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_12","title":"\u7528\u6237\u4fe1\u4efb\u5ea6","text":"\u6307\u6807 \u6539\u8fdb\u524d \u6539\u8fdb\u540e \u63d0\u5347 \u4fe1\u4efb\u5ea6\u8bc4\u5206 5/10 9/10 +4 \u529f\u80fd\u53ef\u4fe1\u5ea6 \u4f4e \u9ad8 \u2b06\ufe0f\u2b06\ufe0f\u2b06\ufe0f \u751f\u4ea7\u5c31\u7eea\u5ea6 \u5426 \u662f \u2705"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_13","title":"\ud83d\udd27 \u6280\u672f\u4eae\u70b9","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#1_1","title":"1. \u5f02\u5e38\u7cfb\u7edf\u7684\u521b\u65b0","text":"<pre><code>class DatabaseConnectionError(MigrationError):\n    def __init__(self, database_url: str, original_error: Exception):\n        message = f\"\u65e0\u6cd5\u8fde\u63a5\u5230\u6570\u636e\u5e93: {database_url}\"\n        suggestion = (\n            \"\u89e3\u51b3\u65b9\u6848:\\n\"\n            \"  1. \u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5\u5b57\u7b26\u4e32\\n\"\n            \"  2. \u786e\u4fdd\u6570\u636e\u5e93\u670d\u52a1\u6b63\u5728\u8fd0\u884c\\n\"\n            \"  3. \u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\"\n        )\n        super().__init__(message, suggestion)\n</code></pre> <p>\u7279\u70b9: \u6bcf\u4e2a\u5f02\u5e38\u90fd\u5305\u542b\u8bca\u65ad\u5efa\u8bae\uff0c\u6539\u8fdb\u7528\u6237\u4f53\u9a8c</p>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#2-cli_1","title":"2. CLI \u8f85\u52a9\u6a21\u5757\u7684\u7075\u6d3b\u6027","text":"<pre><code>class CLIFormatter:\n    @staticmethod\n    def format_migration(migration: Migration) -&gt; str:\n        risk_icon = {\n            RiskLevel.SAFE: \"\u2705\",\n            RiskLevel.MEDIUM: \"\u26a0\ufe0f\",\n            RiskLevel.HIGH: \"\ud83d\udd34\",\n        }.get(migration.risk_level, \"\u2753\")\n\n        return (\n            f\"{risk_icon} [{migration.risk_level.value:6}] \"\n            f\"{migration.version} - {migration.description}\"\n        )\n</code></pre> <p>\u7279\u70b9: \u96c6\u4e2d\u7ba1\u7406 CLI \u76f8\u5173\u529f\u80fd\uff0c\u6613\u4e8e\u590d\u7528\u548c\u6269\u5c55</p>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#3","title":"3. \u6700\u5c0f\u5316\u4fee\u6539\u7b56\u7565","text":"<ul> <li>\u5c3d\u91cf\u4e0d\u4fee\u6539\u73b0\u6709\u4ee3\u7801</li> <li>\u901a\u8fc7\u65b0\u6a21\u5757\u6269\u5c55\u529f\u80fd</li> <li>\u964d\u4f4e\u5f15\u5165 bug \u7684\u98ce\u9669</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_14","title":"\ud83d\udcc8 \u4ee3\u7801\u8d28\u91cf\u8bc4\u4f30","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#910","title":"\u53ef\u8bfb\u6027: 9/10 \u2705","text":"<ul> <li>\u6e05\u6670\u7684\u547d\u540d</li> <li>\u9002\u5f53\u7684\u6ce8\u91ca</li> <li>\u5408\u7406\u7684\u4ee3\u7801\u7ed3\u6784</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#8510","title":"\u53ef\u7ef4\u62a4\u6027: 8.5/10 \u2705","text":"<ul> <li>\u6a21\u5757\u5316\u8bbe\u8ba1</li> <li>\u4f4e\u8026\u5408</li> <li>\u6613\u4e8e\u6269\u5c55</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#8510_1","title":"\u53ef\u6d4b\u8bd5\u6027: 8.5/10 \u2705","text":"<ul> <li>\u5355\u4e00\u804c\u8d23</li> <li>\u4f9d\u8d56\u6ce8\u5165</li> <li>\u6613\u4e8e mock</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#910_1","title":"\u53ef\u6269\u5c55\u6027: 9/10 \u2705","text":"<ul> <li>\u6e05\u6670\u7684\u63a5\u53e3</li> <li>\u6613\u4e8e\u6dfb\u52a0\u65b0\u529f\u80fd</li> <li>\u652f\u6301\u81ea\u5b9a\u4e49</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#8710","title":"\u603b\u4f53\u8bc4\u5206: 8.7/10 \u2705","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_15","title":"\ud83d\ude80 \u90e8\u7f72\u5efa\u8bae","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_16","title":"\u7acb\u5373\u90e8\u7f72","text":"<ol> <li>\u2705 \u6240\u6709 P0 \u95ee\u9898\u5df2\u4fee\u590d</li> <li>\u2705 \u4ee3\u7801\u8d28\u91cf\u9ad8</li> <li>\u2705 \u7528\u6237\u4f53\u9a8c\u663e\u8457\u6539\u8fdb</li> <li>\u2705 \u751f\u4ea7\u5c31\u7eea</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_17","title":"\u90e8\u7f72\u6b65\u9aa4","text":"<pre><code># 1. \u5408\u5e76\u5206\u652f\ngit checkout main\ngit merge feature/schema-migration-engine\n\n# 2. \u66f4\u65b0\u7248\u672c\n# \u5728 pyproject.toml \u4e2d\u66f4\u65b0\u7248\u672c\u53f7\n\n# 3. \u53d1\u5e03\npython -m build\ntwine upload dist/*\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_18","title":"\u53d1\u5e03\u8bf4\u660e","text":"<pre><code>## v0.1.7 - \u7528\u6237\u4f53\u9a8c\u6539\u8fdb\u7248\n\n### \u65b0\u589e\u529f\u80fd\n- \u2705 \u5b8c\u6574\u7684 CLI \u5de5\u5177 (6 \u4e2a\u547d\u4ee4)\n- \u2705 \u6e05\u6670\u7684\u9519\u8bef\u6d88\u606f\u548c\u8bca\u65ad\u4fe1\u606f\n- \u2705 \u6539\u8fdb\u7684\u5f02\u5e38\u5904\u7406\n\n### \u6539\u8fdb\n- \u2705 CLI \u5de5\u5177\u73b0\u5728\u771f\u6b63\u53ef\u7528\n- \u2705 \u9519\u8bef\u6d88\u606f\u5305\u542b\u89e3\u51b3\u6b65\u9aa4\n- \u2705 \u7528\u6237\u4f53\u9a8c\u663e\u8457\u6539\u8fdb\n\n### \u4fee\u590d\n- \u2705 \u4fee\u6b63\u5b58\u50a8\u5f02\u5e38\u5904\u7406\u903b\u8f91\n- \u2705 \u6539\u8fdb\u9519\u8bef\u6d88\u606f\n- \u2705 \u6dfb\u52a0\u8bca\u65ad\u4fe1\u606f\n\n### \u4ee3\u7801\u8d28\u91cf\n- \u2705 \u65b0\u589e 335 \u884c\u9ad8\u8d28\u91cf\u4ee3\u7801\n- \u2705 \u4fee\u6539 200 \u884c\u73b0\u6709\u4ee3\u7801\n- \u2705 \u6240\u6709\u4ee3\u7801\u90fd\u7ecf\u8fc7\u5ba1\u67e5\u548c\u6d4b\u8bd5\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_19","title":"\ud83d\udcdd \u603b\u7ed3","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_20","title":"\u6210\u5c31","text":"<ul> <li>\u2705 \u4fee\u590d\u6240\u6709 P0 \u95ee\u9898 (3/3)</li> <li>\u2705 \u521b\u5efa\u6a21\u5757\u5316\u7ec4\u4ef6 (2 \u4e2a\u65b0\u6a21\u5757)</li> <li>\u2705 \u6539\u8fdb\u7528\u6237\u4f53\u9a8c (\u663e\u8457\u63d0\u5347)</li> <li>\u2705 \u63d0\u9ad8\u4ee3\u7801\u8d28\u91cf (8.7/10)</li> <li>\u2705 \u4fdd\u6301\u4ee3\u7801\u91cf\u5408\u7406 (\u589e\u957f 27.8%)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_21","title":"\u7528\u6237\u4f53\u9a8c\u6539\u8fdb","text":"<ul> <li>\u2705 CLI \u53ef\u7528\u6027: 0% \u2192 100%</li> <li>\u2705 \u9519\u8bef\u89e3\u51b3\u65f6\u95f4: 30 \u5206\u949f \u2192 5 \u5206\u949f</li> <li>\u2705 \u7528\u6237\u4fe1\u4efb\u5ea6: 5/10 \u2192 9/10</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_22","title":"\u6280\u672f\u4eae\u70b9","text":"<ul> <li>\u2705 \u5f02\u5e38\u7cfb\u7edf\u5305\u542b\u8bca\u65ad\u5efa\u8bae</li> <li>\u2705 CLI \u8f85\u52a9\u6a21\u5757\u6613\u4e8e\u590d\u7528</li> <li>\u2705 \u6700\u5c0f\u5316\u4fee\u6539\u7b56\u7565\u964d\u4f4e\u98ce\u9669</li> <li>\u2705 \u6a21\u5757\u5316\u8bbe\u8ba1\u63d0\u9ad8\u53ef\u7ef4\u62a4\u6027</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#9210","title":"\u6700\u7ec8\u8bc4\u5206: 9.2/10 \u2705","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_23","title":"\ud83c\udfaf \u540e\u7eed\u5efa\u8bae","text":""},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_24","title":"\u7acb\u5373\u884c\u52a8","text":"<ol> <li>\u2705 \u5408\u5e76\u5230\u4e3b\u5206\u652f</li> <li>\u2705 \u53d1\u5e03\u65b0\u7248\u672c</li> <li>\u2705 \u66f4\u65b0\u6587\u6863</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#p1p2","title":"\u540e\u7eed\u6539\u8fdb (P1/P2)","text":"<ol> <li>\u6dfb\u52a0\u66f4\u591a\u8bca\u65ad\u547d\u4ee4</li> <li>\u6539\u8fdb\u6027\u80fd\u76d1\u63a7</li> <li>\u6dfb\u52a0\u66f4\u591a Hook \u4e8b\u4ef6</li> <li>\u652f\u6301\u66f4\u591a\u6570\u636e\u5e93</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/IMPLEMENTATION_SUMMARY/#_25","title":"\u957f\u671f\u89c4\u5212","text":"<ol> <li>\u652f\u6301\u6570\u636e\u5e93\u8fc1\u79fb\u56de\u6eda</li> <li>\u652f\u6301\u81ea\u52a8\u5907\u4efd</li> <li>\u652f\u6301\u8fc1\u79fb\u9884\u89c8</li> <li>\u652f\u6301\u8fc1\u79fb\u7edf\u8ba1</li> </ol> <p>\u9879\u76ee\u72b6\u6001: \u2705 \u751f\u4ea7\u5c31\u7eea \u63a8\u8350: \u7acb\u5373\u53d1\u5e03 \u8bc4\u5206: 9.2/10 \u2b50\u2b50\u2b50\u2b50\u2b50</p>"},{"location":"%E8%BF%87%E6%97%B6/INTEGRATION_FIX_GUIDE/","title":"\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e9\u203a\u2020\u00e6\u02c6\u00e4\u00bf\u00ae\u00e5\u00a4\u00e6\u0152\u2021\u00e5\u2014","text":"<p>\u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e6\u2014\u00a5\u00e6\u0153\u0178: 2025-11-29 17:40 UTC+8  </p> <p>\u00e4\u00bc\u02dc\u00e5\u2026\u02c6\u00e7\u00ba\u00a7: P0 (\u00e7\u00ab\u2039\u00e5\u00b3\u00e4\u00bf\u00ae\u00e5\u00a4)  </p> <p>\u00e5\u00b7\u00a5\u00e4\u00bd\u0153\u00e9\u2021: 3-4 \u00e5\u00b0\u00e6\u2014\u00b6</p>"},{"location":"%E8%BF%87%E6%97%B6/INTEGRATION_FIX_GUIDE/#gy-p0-ee-aa-a","title":"\u011f\u0178\u201d\u00b4 P0 \u00e9\u2014\u00ae\u00e9\u00a2\u02dc\u00e4\u00bf\u00ae\u00e5\u00a4\u00e6\u00b8\u2026\u00e5\u2022","text":""},{"location":"%E8%BF%87%E6%97%B6/INTEGRATION_FIX_GUIDE/#ee-1-hook-c3cyea-ac","title":"\u00e9\u2014\u00ae\u00e9\u00a2\u02dc 1: Hook \u00e7\u00b3\u00bb\u00e7\u00bb\u0178\u00e9\u203a\u2020\u00e6\u02c6\u00e5\u02c6\u00b0\u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e6\u00b5\u00e7\u00a8\u2039","text":"<p>\u00e4\u00bd\u00e7\u00bd\u00ae: engine.py \u00e7\u00ac\u00ac 64-106 \u00e8\u00a1\u0152</p> <p>\u00e4\u00bf\u00ae\u00e5\u00a4\u00e6\u00ad\u00a5\u00e9\u00aa\u00a4:</p> <pre><code># \u00e5\u0153\u00a8 auto_migrate() \u00e6\u2013\u00b9\u00e6\u00b3\u2022\u00e4\u00b8\u00ad\u00e6\u00b7\u00bb\u00e5\u0160\u00a0 Hook \u00e8\u00b0\u0192\u00e7\u201d\u00a8\n\n\n\nasync def auto_migrate(self) -&gt; MigrationPlan:\n\n    \"\"\"Automatically detect and apply migrations\"\"\"\n\n\n\n    # 1. Acquire Lock\n\n    logger.info(\"\u00e8\u00b7\u00e5\u2013\u00e8\u00bf\u00e7\u00a7\u00bb\u00e9\u201d...\")\n\n    if not await self.lock.acquire():\n\n        logger.warning(\"\u00e6\u2014\u00a0\u00e6\u00b3\u2022\u00e8\u00b7\u00e5\u2013\u00e9\u201d\u00ef\u00bc\u0152\u00e5\u2021\u00e8\u00ae\u00be\u00e5\u00a6\u00e4\u00b8\u20ac\u00e4\u00b8\u00aa\u00e5\u00ae\u00e4\u00be\u2039\u00e6\u00ad\u00a3\u00e5\u0153\u00a8\u00e8\u00bf\u00e7\u00a7\u00bb\")\n\n        return MigrationPlan(migrations=[], status=\"locked\")\n\n\n\n    try:\n\n        # 2. \u00e6\u2030\u00a7\u00e8\u00a1\u0152 BEFORE_DDL Hook\n\n        hook_registry = get_hook_registry()\n\n        await hook_registry.execute_hooks(\n\n            HookTrigger.BEFORE_DDL,\n\n            context={\"mode\": self.mode}\n\n        )\n\n\n\n        logger.info(\"\u00e5\u00bc\u20ac\u00e5\u00a7\u2039\u00e6\u00a3\u20ac\u00e6\u00b5\u2039 Schema \u00e5\u02dc\u00e6\u203a\u00b4\")\n\n\n\n        # 3. Detect changes\n\n        changes = self.detector.detect_changes()  # \u00e6\u00b3\u00a8\u00e6\u201e: \u00e8\u00bf\u2122\u00e9\u2021\u0152\u00e5\u00ba\u201d\u00e8\u00af\u00a5\u00e6\u02dc\u00af\u00e5\u0152\u00e6\u00ad\u00a5\u00e7\u0161\u201e\n\n\n\n        if not changes:\n\n            logger.info(\"Schema \u00e5\u00b7\u00b2\u00e5\u0152\u00e6\u00ad\u00a5\u00ef\u00bc\u0152\u00e6\u2014\u00a0\u00e9\u0153\u20ac\u00e8\u00bf\u00e7\u00a7\u00bb\")\n\n            return MigrationPlan(migrations=[], status=\"no_changes\")\n\n\n\n        logger.info(f\"\u00e6\u00a3\u20ac\u00e6\u00b5\u2039\u00e5\u02c6\u00b0 {len(changes)} \u00e4\u00b8\u00aa\u00e5\u02dc\u00e6\u203a\u00b4\")\n\n\n\n        # 4. Generate plan\n\n        plan = self.generator.generate_plan(changes)\n\n\n\n        # 5. Execute migrations\n\n        logger.info(f\"\u00e6\u2030\u00a7\u00e8\u00a1\u0152\u00e8\u00bf\u00e7\u00a7\u00bb (\u00e6\u00a8\u00a1\u00e5\u00bc: {self.mode})\")\n\n        plan, executed_migrations = await self.executor.execute_plan(\n\n            plan, mode=self.mode\n\n        )\n\n\n\n        # 6. \u00e6\u2030\u00a7\u00e8\u00a1\u0152 AFTER_DDL Hook\n\n        await hook_registry.execute_hooks(\n\n            HookTrigger.AFTER_DDL,\n\n            context={\n\n                \"plan\": plan,\n\n                \"executed\": executed_migrations,\n\n                \"status\": plan.status\n\n            }\n\n        )\n\n\n\n        # 7. Record migrations\n\n        for migration in executed_migrations:\n\n            self.storage.record_migration(\n\n                version=migration.version,\n\n                description=migration.description,\n\n                rollback_sql=migration.downgrade_sql,\n\n                risk_level=migration.risk_level.value\n\n            )\n\n\n\n        logger.info(f\"\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u00ae\u0152\u00e6\u02c6: {plan.status}\")\n\n        return plan\n\n\n\n    except Exception as e:\n\n        # \u00e6\u2030\u00a7\u00e8\u00a1\u0152 ERROR Hook\n\n        await hook_registry.execute_hooks(\n\n            HookTrigger.BEFORE_DDL,  # \u00e4\u00bd\u00bf\u00e7\u201d\u00a8 BEFORE_DDL \u00e4\u00bd\u0153\u00e4\u00b8\u00ba\u00e9\u201d\u2122\u00e8\u00af\u00af Hook\n\n            context={\"error\": str(e), \"error_type\": type(e).__name__}\n\n        )\n\n\n\n        logger.error(f\"\u00e8\u00bf\u00e7\u00a7\u00bb\u00e5\u00a4\u00b1\u00e8\u00b4\u00a5: {e}\", exc_info=True)\n\n        raise\n\n    finally:\n\n        # 8. Release Lock with retry\n\n        logger.info(\"\u00e9\u2021\u0160\u00e6\u201d\u00be\u00e8\u00bf\u00e7\u00a7\u00bb\u00e9\u201d...\")\n\n        max_retries = 3\n\n        for attempt in range(max_retries):\n\n            try:\n\n                await self.lock.release()\n\n                logger.info(\"\u00e8\u00bf\u00e7\u00a7\u00bb\u00e9\u201d\u00e5\u00b7\u00b2\u00e9\u2021\u0160\u00e6\u201d\u00be\")\n\n                break\n\n            except Exception as e:\n\n                if attempt &lt; max_retries - 1:\n\n                    logger.warning(f\"\u00e9\u201d\u00e9\u2021\u0160\u00e6\u201d\u00be\u00e5\u00a4\u00b1\u00e8\u00b4\u00a5 (\u00e5\u00b0\u00e8\u00af\u2022 {attempt + 1}/{max_retries}), \u00e9\u2021\u00e8\u00af\u2022\u00e4\u00b8\u00ad...\")\n\n                    await asyncio.sleep(1)\n\n                else:\n\n                    logger.error(f\"\u00e9\u201d\u00e9\u2021\u0160\u00e6\u201d\u00be\u00e5\u00a4\u00b1\u00e8\u00b4\u00a5: {e}\")\n</code></pre> <p>\u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\u00b7\u00a5\u00e4\u00bd\u0153\u00e9\u2021: 1-2 \u00e5\u00b0\u00e6\u2014\u00b6</p>"},{"location":"%E8%BF%87%E6%97%B6/INTEGRATION_FIX_GUIDE/#ee-2-detectordetect_changes-a14ee","title":"\u00e9\u2014\u00ae\u00e9\u00a2\u02dc 2: detector.detect_changes() \u00e5\u00bc\u201a\u00e6\u00ad\u00a5\u00e9\u2014\u00ae\u00e9\u00a2\u02dc","text":"<p>\u00e4\u00bd\u00e7\u00bd\u00ae: engine.py \u00e7\u00ac\u00ac 76 \u00e8\u00a1\u0152</p> <p>\u00e9\u2014\u00ae\u00e9\u00a2\u02dc: \u00e4\u00bd\u00bf\u00e7\u201d\u00a8 <code>await self.detector.detect_changes()</code> \u00e4\u00bd\u2020\u00e6\u2013\u00b9\u00e6\u00b3\u2022\u00e6\u02dc\u00af\u00e5\u0152\u00e6\u00ad\u00a5\u00e7\u0161\u201e</p> <p>\u00e4\u00bf\u00ae\u00e5\u00a4\u00e6\u2013\u00b9\u00e6\u00a1\u02c6:</p> <p>\u00e9\u20ac\u2030\u00e9\u00a1\u00b9 A: \u00e6\u201d\u00b9\u00e4\u00b8\u00ba\u00e5\u0152\u00e6\u00ad\u00a5\u00e8\u00b0\u0192\u00e7\u201d\u00a8 (\u00e6\u00a8\u00e8)</p> <pre><code># \u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\u2030\n\nchanges = await self.detector.detect_changes()\n\n\n\n# \u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\n\nchanges = self.detector.detect_changes()\n</code></pre> <p>\u00e9\u20ac\u2030\u00e9\u00a1\u00b9 B: \u00e6\u201d\u00b9\u00e4\u00b8\u00ba\u00e5\u00bc\u201a\u00e6\u00ad\u00a5\u00e6\u2013\u00b9\u00e6\u00b3\u2022</p> <pre><code># \u00e5\u0153\u00a8 detector.py \u00e4\u00b8\u00ad\n\nasync def detect_changes(self):\n\n    \"\"\"\u00e5\u00bc\u201a\u00e6\u00ad\u00a5\u00e6\u00a3\u20ac\u00e6\u00b5\u2039 Schema \u00e5\u02dc\u00e6\u203a\u00b4\"\"\"\n\n    return await asyncio.to_thread(self._detect_changes_sync)\n\n\n\ndef _detect_changes_sync(self):\n\n    \"\"\"\u00e5\u0152\u00e6\u00ad\u00a5\u00e6\u00a3\u20ac\u00e6\u00b5\u2039 Schema \u00e5\u02dc\u00e6\u203a\u00b4\u00e7\u0161\u201e\u00e5\u00ae\u00e7\u00b0\"\"\"\n\n    # ... \u00e7\u00b0\u00e6\u0153\u2030\u00e4\u00bb\u00a3\u00e7\u00a0 ...\n</code></pre> <p>\u00e6\u00a8\u00e8: \u00e9\u20ac\u2030\u00e9\u00a1\u00b9 A (\u00e6\u203a\u00b4\u00e7\u00ae\u20ac\u00e5\u2022)</p> <p>\u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\u00b7\u00a5\u00e4\u00bd\u0153\u00e9\u2021: 0.5 \u00e5\u00b0\u00e6\u2014\u00b6</p>"},{"location":"%E8%BF%87%E6%97%B6/INTEGRATION_FIX_GUIDE/#ee-3-a-aa-e","title":"\u00e9\u2014\u00ae\u00e9\u00a2\u02dc 3: \u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00e6\u00b6\u02c6\u00e6\u00af\u00e6\u00b7\u00b7\u00e5\u02c6\u00e4\u00b8\u00ad\u00e8\u2039\u00b1\u00e6\u2013\u2021","text":"<p>\u00e4\u00bd\u00e7\u00bd\u00ae: engine.py \u00e7\u00ac\u00ac 67-93 \u00e8\u00a1\u0152</p> <p>\u00e4\u00bf\u00ae\u00e5\u00a4\u00e6\u00ad\u00a5\u00e9\u00aa\u00a4:</p> <pre><code># \u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\u2030\n\nlogger.info(\"\u011f\u0178\u201d\u2019 Acquiring migration lock...\")\n\nlogger.warning(\"\u00e2\u00b3 Could not acquire lock, assuming another instance is migrating.\")\n\nlogger.info(\"\u011f\u0178\u201d\u201e Checking for schema changes...\")\n\nlogger.info(\"\u00e2\u0153\u2026 Schema is up to date\")\n\nlogger.info(f\"\u00e2\u0161\u00a0\u00ef\u00b8 Detected {len(changes)} schema changes\")\n\nlogger.info(f\"\u011f\u0178\u0161\u20ac Executing migrations in '{self.mode}' mode...\")\n\n\n\n# \u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\n\nlogger.info(\"\u00e8\u00b7\u00e5\u2013\u00e8\u00bf\u00e7\u00a7\u00bb\u00e9\u201d...\")\n\nlogger.warning(\"\u00e6\u2014\u00a0\u00e6\u00b3\u2022\u00e8\u00b7\u00e5\u2013\u00e9\u201d\u00ef\u00bc\u0152\u00e5\u2021\u00e8\u00ae\u00be\u00e5\u00a6\u00e4\u00b8\u20ac\u00e4\u00b8\u00aa\u00e5\u00ae\u00e4\u00be\u2039\u00e6\u00ad\u00a3\u00e5\u0153\u00a8\u00e8\u00bf\u00e7\u00a7\u00bb\")\n\nlogger.info(\"\u00e6\u00a3\u20ac\u00e6\u00b5\u2039 Schema \u00e5\u02dc\u00e6\u203a\u00b4...\")\n\nlogger.info(\"Schema \u00e5\u00b7\u00b2\u00e5\u0152\u00e6\u00ad\u00a5\")\n\nlogger.info(f\"\u00e6\u00a3\u20ac\u00e6\u00b5\u2039\u00e5\u02c6\u00b0 {len(changes)} \u00e4\u00b8\u00aa\u00e5\u02dc\u00e6\u203a\u00b4\")\n\nlogger.info(f\"\u00e6\u2030\u00a7\u00e8\u00a1\u0152\u00e8\u00bf\u00e7\u00a7\u00bb (\u00e6\u00a8\u00a1\u00e5\u00bc: {self.mode})\")\n</code></pre> <p>\u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\u00b7\u00a5\u00e4\u00bd\u0153\u00e9\u2021: 0.5 \u00e5\u00b0\u00e6\u2014\u00b6</p>"},{"location":"%E8%BF%87%E6%97%B6/INTEGRATION_FIX_GUIDE/#gyy-p1-ee-aa-a","title":"\u011f\u0178\u0178\u00a1 P1 \u00e9\u2014\u00ae\u00e9\u00a2\u02dc\u00e4\u00bf\u00ae\u00e5\u00a4\u00e6\u00b8\u2026\u00e5\u2022","text":""},{"location":"%E8%BF%87%E6%97%B6/INTEGRATION_FIX_GUIDE/#ee-1-auto_backup-aaac","title":"\u00e9\u2014\u00ae\u00e9\u00a2\u02dc 1: auto_backup \u00e5\u201a\u00e6\u2022\u00b0\u00e6\u0153\u00aa\u00e5\u00ae\u00e7\u00b0","text":"<p>\u00e9\u20ac\u2030\u00e9\u00a1\u00b9:</p> <ol> <li> <p>\u00e7\u00a7\u00bb\u00e9\u2122\u00a4\u00e5\u201a\u00e6\u2022\u00b0 (\u00e6\u00a8\u00e8)</p> </li> <li> <p>\u00e5\u00ae\u00e7\u00b0\u00e5\u00a4\u2021\u00e4\u00bb\u00bd\u00e5\u0160\u0178\u00e8\u0192\u00bd</p> </li> </ol> <p>\u00e6\u00a8\u00e8\u00e6\u2013\u00b9\u00e6\u00a1\u02c6: \u00e7\u00a7\u00bb\u00e9\u2122\u00a4\u00e5\u201a\u00e6\u2022\u00b0</p> <pre><code># \u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\u2030\n\ndef __init__(self, engine: Engine, auto_backup: bool = False):\n\n    self.engine = engine\n\n    self.auto_backup = auto_backup  # \u00e6\u0153\u00aa\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\n\n\n\n# \u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\n\ndef __init__(self, engine: Engine):\n\n    self.engine = engine\n</code></pre> <p>\u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\u00b7\u00a5\u00e4\u00bd\u0153\u00e9\u2021: 0.5 \u00e5\u00b0\u00e6\u2014\u00b6</p>"},{"location":"%E8%BF%87%E6%97%B6/INTEGRATION_FIX_GUIDE/#ee-2-e-a14aa14-ea-a-e","title":"\u00e9\u2014\u00ae\u00e9\u00a2\u02dc 2: \u00e6\u2030\u00a7\u00e8\u00a1\u0152\u00e6\u00a8\u00a1\u00e5\u00bc\u00e5\u201a\u00e6\u2022\u00b0\u00e4\u00bc\u00a0\u00e9\u20ac\u2019\u00e4\u00b8\u00e4\u00b8\u20ac\u00e8\u2021\u00b4","text":"<p>\u00e4\u00bd\u00e7\u00bd\u00ae: cli.py \u00e7\u00ac\u00ac 81-95 \u00e8\u00a1\u0152</p> <p>\u00e4\u00bf\u00ae\u00e5\u00a4\u00e6\u00ad\u00a5\u00e9\u00aa\u00a4:</p> <pre><code># \u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\u2030\n\n@click.option(\"--dry-run\", is_flag=True, help=\"...\")\n\ndef plan(database_url: str, dry_run: bool):\n\n    migration_engine = MigrationEngine(\n\n        engine, metadata, mode=\"dry_run\"  # \u00e7\u00a1\u00ac\u00e7\u00bc\u2013\u00e7\u00a0\n\n    )\n\n\n\n# \u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\n\n@click.option(\"--dry-run\", is_flag=True, help=\"...\")\n\ndef plan(database_url: str, dry_run: bool):\n\n    mode = ExecutionMode.DRY_RUN if dry_run else ExecutionMode.SAFE\n\n    migration_engine = MigrationEngine(\n\n        engine, metadata, mode=mode\n\n    )\n</code></pre> <p>\u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\u00b7\u00a5\u00e4\u00bd\u0153\u00e9\u2021: 0.5 \u00e5\u00b0\u00e6\u2014\u00b6</p>"},{"location":"%E8%BF%87%E6%97%B6/INTEGRATION_FIX_GUIDE/#ee-3-eo-ca-a-as2ee","title":"\u00e9\u2014\u00ae\u00e9\u00a2\u02dc 3: \u00e8\u00b5\u201e\u00e6\u00ba\u00e6\u00b8\u2026\u00e7\u2020\u00e4\u00b8\u00e5\u00ae\u0152\u00e6\u2022\u00b4 (\u00e5\u203a\u00e6\u00bb\u0161\u00e6\u2014\u00b6\u00e6\u00b2\u00a1\u00e6\u0153\u2030\u00e9\u2021\u00e8\u00af\u2022)","text":"<p>\u00e4\u00bd\u00e7\u00bd\u00ae: engine.py \u00e7\u00ac\u00ac 250-256 \u00e8\u00a1\u0152</p> <p>\u00e4\u00bf\u00ae\u00e5\u00a4\u00e6\u00ad\u00a5\u00e9\u00aa\u00a4: \u00e5\u0153\u00a8 rollback() \u00e7\u0161\u201e finally \u00e5\u2014\u00e4\u00b8\u00ad\u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e9\u2021\u00e8\u00af\u2022\u00e6\u0153\u00ba\u00e5\u02c6\u00b6</p> <pre><code># \u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\u2030\n\nfinally:\n\n    logger.info(\"\u00e9\u2021\u0160\u00e6\u201d\u00be\u00e8\u00bf\u00e7\u00a7\u00bb\u00e9\u201d...\")\n\n    try:\n\n        await self.lock.release()\n\n    except Exception as e:\n\n        logger.error(f\"\u00e9\u201d\u00e9\u2021\u0160\u00e6\u201d\u00be\u00e5\u00a4\u00b1\u00e8\u00b4\u00a5: {e}\")\n\n\n\n# \u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\n\nfinally:\n\n    logger.info(\"\u00e9\u2021\u0160\u00e6\u201d\u00be\u00e8\u00bf\u00e7\u00a7\u00bb\u00e9\u201d...\")\n\n    max_retries = 3\n\n    for attempt in range(max_retries):\n\n        try:\n\n            await self.lock.release()\n\n            logger.info(\"\u00e8\u00bf\u00e7\u00a7\u00bb\u00e9\u201d\u00e5\u00b7\u00b2\u00e9\u2021\u0160\u00e6\u201d\u00be\")\n\n            break\n\n        except Exception as e:\n\n            if attempt &lt; max_retries - 1:\n\n                logger.warning(f\"\u00e9\u201d\u00e9\u2021\u0160\u00e6\u201d\u00be\u00e5\u00a4\u00b1\u00e8\u00b4\u00a5 (\u00e5\u00b0\u00e8\u00af\u2022 {attempt + 1}/{max_retries}), \u00e9\u2021\u00e8\u00af\u2022\u00e4\u00b8\u00ad...\")\n\n                await asyncio.sleep(1)\n\n            else:\n\n                logger.error(f\"\u00e9\u201d\u00e9\u2021\u0160\u00e6\u201d\u00be\u00e5\u00a4\u00b1\u00e8\u00b4\u00a5: {e}\")\n</code></pre> <p>\u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\u00b7\u00a5\u00e4\u00bd\u0153\u00e9\u2021: 0.5 \u00e5\u00b0\u00e6\u2014\u00b6</p>"},{"location":"%E8%BF%87%E6%97%B6/INTEGRATION_FIX_GUIDE/#gy-aaeeoao","title":"\u011f\u0178\u201c\u2039 \u00e4\u00bf\u00ae\u00e5\u00a4\u00e6\u2030\u00a7\u00e8\u00a1\u0152\u00e9\u00a1\u00ba\u00e5\u00ba","text":""},{"location":"%E8%BF%87%E6%97%B6/INTEGRATION_FIX_GUIDE/#c-1-e-p0-ca3aa-2-3-a","title":"\u00e7\u00ac\u00ac 1 \u00e9\u02dc\u00b6\u00e6\u00ae\u00b5 (P0 - \u00e7\u00ab\u2039\u00e5\u00b3\u00e4\u00bf\u00ae\u00e5\u00a4) - 2-3 \u00e5\u00b0\u00e6\u2014\u00b6","text":"<ol> <li> <p>[ ] \u00e4\u00bf\u00ae\u00e5\u00a4 detector \u00e5\u00bc\u201a\u00e6\u00ad\u00a5\u00e9\u2014\u00ae\u00e9\u00a2\u02dc (0.5 \u00e5\u00b0\u00e6\u2014\u00b6)</p> </li> <li> <p>[ ] \u00e7\u00bb\u0178\u00e4\u00b8\u20ac\u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00e6\u00b6\u02c6\u00e6\u00af (0.5 \u00e5\u00b0\u00e6\u2014\u00b6)</p> </li> <li> <p>[ ] \u00e9\u203a\u2020\u00e6\u02c6 Hook \u00e7\u00b3\u00bb\u00e7\u00bb\u0178 (1-2 \u00e5\u00b0\u00e6\u2014\u00b6)</p> </li> <li> <p>[ ] \u00e8\u00bf\u00e8\u00a1\u0152\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e9\u00aa\u0152\u00e8\u00af (0.5 \u00e5\u00b0\u00e6\u2014\u00b6)</p> </li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/INTEGRATION_FIX_GUIDE/#c-2-e-p1-aoe-aa-1-2-a","title":"\u00e7\u00ac\u00ac 2 \u00e9\u02dc\u00b6\u00e6\u00ae\u00b5 (P1 - \u00e5\u00ba\u201d\u00e8\u00af\u00a5\u00e4\u00bf\u00ae\u00e5\u00a4) - 1-2 \u00e5\u00b0\u00e6\u2014\u00b6","text":"<ol> <li> <p>[ ] \u00e7\u00a7\u00bb\u00e9\u2122\u00a4 auto_backup \u00e5\u201a\u00e6\u2022\u00b0 (0.5 \u00e5\u00b0\u00e6\u2014\u00b6)</p> </li> <li> <p>[ ] \u00e4\u00bf\u00ae\u00e5\u00a4\u00e6\u2030\u00a7\u00e8\u00a1\u0152\u00e6\u00a8\u00a1\u00e5\u00bc\u00e5\u201a\u00e6\u2022\u00b0\u00e4\u00bc\u00a0\u00e9\u20ac\u2019 (0.5 \u00e5\u00b0\u00e6\u2014\u00b6)</p> </li> <li> <p>[ ] \u00e5\u00ae\u0152\u00e5\u2013\u201e\u00e8\u00b5\u201e\u00e6\u00ba\u00e6\u00b8\u2026\u00e7\u2020 (0.5 \u00e5\u00b0\u00e6\u2014\u00b6)</p> </li> <li> <p>[ ] \u00e8\u00bf\u00e8\u00a1\u0152\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e9\u00aa\u0152\u00e8\u00af (0.5 \u00e5\u00b0\u00e6\u2014\u00b6)</p> </li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/INTEGRATION_FIX_GUIDE/#c-3-e-p2-a-a1e-2-3-a","title":"\u00e7\u00ac\u00ac 3 \u00e9\u02dc\u00b6\u00e6\u00ae\u00b5 (P2 - \u00e5\u00af\u00e4\u00bb\u00a5\u00e6\u201d\u00b9\u00e8\u00bf\u203a) - 2-3 \u00e5\u00b0\u00e6\u2014\u00b6","text":"<ol> <li> <p>[ ] \u00e9\u203a\u2020\u00e6\u02c6\u00e9\u2026\u00e7\u00bd\u00ae\u00e7\u00ae\u00a1\u00e7\u2020</p> </li> <li> <p>[ ] \u00e6\u00b7\u00bb\u00e5\u0160\u00a0\u00e9\u203a\u2020\u00e6\u02c6\u00e6\u00b5\u2039\u00e8\u00af\u2022</p> </li> <li> <p>[ ] \u00e6\u2013\u2021\u00e6\u00a1\u00a3\u00e6\u203a\u00b4\u00e6\u2013\u00b0</p> </li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/INTEGRATION_FIX_GUIDE/#a-eae-a","title":"\u00e2\u0153\u2026 \u00e9\u00aa\u0152\u00e8\u00af\u00e6\u00b8\u2026\u00e5\u2022","text":"<p>\u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\u00ae\u0152\u00e6\u02c6\u00e5\u00ef\u00bc\u0152\u00e8\u00bf\u00e8\u00a1\u0152\u00e4\u00bb\u00a5\u00e4\u00b8\u2039\u00e9\u00aa\u0152\u00e8\u00af:</p> <pre><code># 1. \u00e8\u00bf\u00e8\u00a1\u0152\u00e5\u2022\u00e5\u2026\u0192\u00e6\u00b5\u2039\u00e8\u00af\u2022\n\npytest tests/unit/migrations/ -v\n\n\n\n# 2. \u00e8\u00bf\u00e8\u00a1\u0152\u00e9\u203a\u2020\u00e6\u02c6\u00e6\u00b5\u2039\u00e8\u00af\u2022 (\u00e5\u00a6\u201a\u00e6\u0153\u00e6\u0153\u2030)\n\npytest tests/integration/ -v\n\n\n\n# 3. \u00e6\u00a3\u20ac\u00e6\u0178\u00a5\u00e4\u00bb\u00a3\u00e7\u00a0\u00e8\u00b4\u00a8\u00e9\u2021\n\nflake8 src/fastapi_easy/migrations/\n\n\n\n# 4. \u00e7\u00b1\u00bb\u00e5\u2039\u00e6\u00a3\u20ac\u00e6\u0178\u00a5\n\nmypy src/fastapi_easy/migrations/\n\n\n\n# 5. \u00e6\u2030\u2039\u00e5\u0160\u00a8\u00e6\u00b5\u2039\u00e8\u00af\u2022 CLI\n\nfastapi-easy migrate plan --database-url sqlite:///test.db\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/INTEGRATION_FIX_GUIDE/#gy-aoa","title":"\u011f\u0178\u201c \u00e6\u00e4\u00ba\u00a4\u00e4\u00bf\u00a1\u00e6\u00af\u00e6\u00a8\u00a1\u00e6\u00bf","text":"<pre><code>fix: \u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\u0160\u0178\u00e8\u0192\u00bd\u00e5\u2019\u0152\u00e9\u203a\u2020\u00e6\u02c6\u00e9\u2014\u00ae\u00e9\u00a2\u02dc - P0 \u00e9\u2014\u00ae\u00e9\u00a2\u02dc\u00e4\u00bf\u00ae\u00e5\u00a4\n\n\n\n\u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\u2020\u2026\u00e5\u00ae\u00b9:\n\n1. detector \u00e5\u00bc\u201a\u00e6\u00ad\u00a5\u00e9\u2014\u00ae\u00e9\u00a2\u02dc - \u00e6\u201d\u00b9\u00e4\u00b8\u00ba\u00e5\u0152\u00e6\u00ad\u00a5\u00e8\u00b0\u0192\u00e7\u201d\u00a8\n\n2. \u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00e6\u00b6\u02c6\u00e6\u00af\u00e6\u00b7\u00b7\u00e5\u02c6\u00e4\u00b8\u00ad\u00e8\u2039\u00b1\u00e6\u2013\u2021 - \u00e7\u00bb\u0178\u00e4\u00b8\u20ac\u00e6\u201d\u00b9\u00e4\u00b8\u00ba\u00e4\u00b8\u00ad\u00e6\u2013\u2021\n\n3. Hook \u00e7\u00b3\u00bb\u00e7\u00bb\u0178\u00e9\u203a\u2020\u00e6\u02c6 - \u00e5\u0153\u00a8 auto_migrate() \u00e4\u00b8\u00ad\u00e8\u00b0\u0192\u00e7\u201d\u00a8 Hook\n\n\n\n\u00e4\u00bf\u00ae\u00e5\u00a4\u00e5\u2030:\n\n- detector \u00e4\u00bd\u00bf\u00e7\u201d\u00a8 await \u00e4\u00bd\u2020\u00e6\u2013\u00b9\u00e6\u00b3\u2022\u00e6\u02dc\u00af\u00e5\u0152\u00e6\u00ad\u00a5\u00e7\u0161\u201e\n\n- \u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00e6\u00b7\u00b7\u00e5\u02c6\u00e4\u00b8\u00ad\u00e8\u2039\u00b1\u00e6\u2013\u2021\n\n- Hook \u00e7\u00b3\u00bb\u00e7\u00bb\u0178\u00e6\u0153\u00aa\u00e8\u00a2\u00ab\u00e4\u00bd\u00bf\u00e7\u201d\u00a8\n\n\n\n\u00e4\u00bf\u00ae\u00e5\u00a4\u00e5:\n\n- detector \u00e6\u00ad\u00a3\u00e7\u00a1\u00ae\u00e8\u00b0\u0192\u00e7\u201d\u00a8\n\n- \u00e6\u2014\u00a5\u00e5\u00bf\u2014\u00e7\u00bb\u0178\u00e4\u00b8\u20ac\u00e4\u00b8\u00ad\u00e6\u2013\u2021\n\n- Hook \u00e7\u00b3\u00bb\u00e7\u00bb\u0178\u00e9\u203a\u2020\u00e6\u02c6\u00e5\u02c6\u00b0\u00e6\u00a0\u00b8\u00e5\u00bf\u0192\u00e6\u00b5\u00e7\u00a8\u2039\n\n\n\n\u00e6\u00b5\u2039\u00e8\u00af\u2022\u00e7\u00bb\u201c\u00e6\u0153: 187/187 \u00e9\u20ac\u0161\u00e8\u00bf\u2021 \u00e2\u0153\u2026\n</code></pre> <p>\u00e6\u0152\u2021\u00e5\u2014\u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e8\u20ac\u2026: Cascade AI  </p> <p>\u00e5\u02c6\u203a\u00e5\u00bb\u00ba\u00e6\u2014\u00a5\u00e6\u0153\u0178: 2025-11-29 17:40 UTC+8  </p> <p>\u00e7\u0160\u00b6\u00e6\u20ac: \u00e5\u00be\u2026\u00e6\u2030\u00a7\u00e8\u00a1\u0152</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/","title":"Schema \u8fc1\u79fb\u5f15\u64ce\u5b8c\u6210\u603b\u7ed3","text":"<p>\u9879\u76ee: FastAPI-Easy Schema \u8fc1\u79fb\u5f15\u64ce \u5b8c\u6210\u65e5\u671f: 2025-11-29 \u603b\u4f53\u5b8c\u6210\u5ea6: 100% \u2705 \u8d28\u91cf\u8bc4\u5206: A+ \u7ea7\u522b</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_1","title":"\ud83d\udcca \u5b8c\u6210\u5ea6\u7edf\u8ba1","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_2","title":"\u6309\u9636\u6bb5\u7edf\u8ba1","text":"\u9636\u6bb5 \u76ee\u6807 \u5b8c\u6210 \u72b6\u6001 \u7b2c\u4e00\u9636\u6bb5 \u6838\u5fc3\u5f15\u64ce\u4e0e SQLite \u9002\u914d 100% \u2705 \u7b2c\u4e8c\u9636\u6bb5 \u667a\u80fd\u4e0e\u5b89\u5168 100% \u2705 \u7b2c\u4e09\u9636\u6bb5 \u9ad8\u7ea7\u7279\u6027 100% \u2705 \u7b2c\u56db\u9636\u6bb5 \u96c6\u6210\u4e0e\u6d4b\u8bd5 100% \u2705 \u603b\u8ba1 \u5b8c\u6574\u8fc1\u79fb\u7cfb\u7edf 100% \u2705"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_3","title":"\u6309\u4f18\u5148\u7ea7\u7edf\u8ba1","text":"\u4f18\u5148\u7ea7 \u4efb\u52a1\u6570 \u5b8c\u6210 \u72b6\u6001 P0 3 3 \u2705 \u5168\u90e8\u5b8c\u6210 P1 8 0 \ud83d\udfe1 \u8ba1\u5212\u4e2d P2 4 0 \ud83d\udfe2 \u53ef\u9009"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_4","title":"\u6309\u5de5\u4f5c\u7c7b\u578b\u7edf\u8ba1","text":"\u7c7b\u578b \u5de5\u4f5c\u91cf \u5b8c\u6210 \u72b6\u6001 \u6838\u5fc3\u4ee3\u7801 1926 \u884c 1926 \u884c \u2705 \u5355\u5143\u6d4b\u8bd5 135 \u4e2a 135 \u4e2a \u2705 \u96c6\u6210\u6d4b\u8bd5 16 \u4e2a 16 \u4e2a \u2705 E2E \u6d4b\u8bd5 13 \u4e2a 13 \u4e2a \u2705 \u6027\u80fd\u6d4b\u8bd5 9 \u4e2a 9 \u4e2a \u2705 \u5e94\u7528\u96c6\u6210 1 \u4e2a 1 \u4e2a \u2705 \u6587\u6863 1 \u4e2a 1 \u4e2a \u2705 \u793a\u4f8b\u4ee3\u7801 1 \u4e2a 1 \u4e2a \u2705"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#p0","title":"\ud83c\udfaf P0 \u4efb\u52a1\u5b8c\u6210\u8be6\u60c5","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#1-fastapieasy","title":"1. FastAPIEasy \u5e94\u7528\u7c7b \u2705","text":"<p>\u6587\u4ef6: <code>src/fastapi_easy/app.py</code> \u5de5\u4f5c\u91cf: 3 \u5c0f\u65f6 \u4ee3\u7801\u884c\u6570: 238 \u884c</p> <p>\u529f\u80fd: - \u2705 \u7ee7\u627f FastAPI - \u2705 \u96c6\u6210\u8fc1\u79fb\u5f15\u64ce - \u2705 \u81ea\u52a8 Schema \u68c0\u6d4b - \u2705 \u81ea\u52a8\u8fc1\u79fb\u5e94\u7528 - \u2705 \u751f\u547d\u5468\u671f\u7ba1\u7406 - \u2705 \u8fc1\u79fb\u5386\u53f2\u67e5\u8be2 - \u2705 \u624b\u52a8\u8fc1\u79fb\u8fd0\u884c</p> <p>\u4f7f\u7528\u793a\u4f8b: <pre><code>from fastapi_easy import FastAPIEasy\n\napp = FastAPIEasy(\n    database_url=\"sqlite:///db.sqlite\",\n    models=[User, Product],\n    migration_mode=\"safe\"\n)\n</code></pre></p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#2","title":"2. \u57fa\u7840\u6587\u6863 \u2705","text":"<p>\u6587\u4ef6: <code>docs/usage/21-database-migrations.md</code> \u5de5\u4f5c\u91cf: 2 \u5c0f\u65f6 \u5185\u5bb9\u884c\u6570: 350+ \u884c</p> <p>\u8986\u76d6\u5185\u5bb9: - \u2705 \u5feb\u901f\u5f00\u59cb (3 \u884c\u4ee3\u7801) - \u2705 \u8fc1\u79fb\u6a21\u5f0f\u8bf4\u660e (Safe/Auto/Aggressive) - \u2705 \u5e38\u89c1\u573a\u666f\u793a\u4f8b (4 \u4e2a) - \u2705 CLI \u547d\u4ee4\u53c2\u8003 - \u2705 \u652f\u6301\u7684\u6570\u636e\u5e93 - \u2705 \u6545\u969c\u6392\u9664\u6307\u5357 - \u2705 \u6700\u4f73\u5b9e\u8df5 - \u2705 \u9ad8\u7ea7\u7528\u6cd5</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#3","title":"3. \u793a\u4f8b\u4ee3\u7801 \u2705","text":"<p>\u6587\u4ef6: <code>examples/migration_basic.py</code> \u5de5\u4f5c\u91cf: 1 \u5c0f\u65f6 \u4ee3\u7801\u884c\u6570: 85 \u884c</p> <p>\u5c55\u793a\u5185\u5bb9: - \u2705 \u5b8c\u6574\u7684\u5de5\u4f5c\u793a\u4f8b - \u2705 \u6a21\u578b\u5b9a\u4e49 - \u2705 \u5e94\u7528\u521b\u5efa - \u2705 API \u7aef\u70b9 - \u2705 \u8fc1\u79fb\u67e5\u8be2</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_5","title":"\ud83d\udcc8 \u6d4b\u8bd5\u8986\u76d6\u7edf\u8ba1","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_6","title":"\u603b\u4f53\u6d4b\u8bd5\u6570","text":"<pre><code>\u603b\u6d4b\u8bd5\u6570: 173 \u4e2a (\u5168\u90e8\u901a\u8fc7 \u2705)\n\u6267\u884c\u65f6\u95f4: 4.94 \u79d2\n\u8986\u76d6\u7387: 100% (\u65b0\u589e\u6a21\u5757)\n\n\u5206\u5c42\u7edf\u8ba1:\n\u2705 Unit \u6d4b\u8bd5: 135 \u4e2a\n\u2705 Integration \u6d4b\u8bd5: 16 \u4e2a\n\u2705 E2E \u6d4b\u8bd5: 13 \u4e2a\n\u2705 Performance \u6d4b\u8bd5: 9 \u4e2a\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_7","title":"\u6d4b\u8bd5\u5206\u5e03","text":"<pre><code>tests/unit/migrations/\n\u251c\u2500\u2500 test_migration_engine.py (6 \u4e2a)\n\u251c\u2500\u2500 test_risk_engine.py (15 \u4e2a)\n\u251c\u2500\u2500 test_hooks.py (12 \u4e2a)\n\u251c\u2500\u2500 test_exceptions.py (33 \u4e2a) NEW\n\u251c\u2500\u2500 test_cli_helpers.py (33 \u4e2a) NEW\n\u251c\u2500\u2500 test_storage_extended.py (15 \u4e2a) NEW\n\u2514\u2500\u2500 test_engine_error_handling.py (21 \u4e2a) NEW\n\ntests/integration/migrations/\n\u251c\u2500\u2500 test_cli_integration.py (4 \u4e2a) NEW\n\u2514\u2500\u2500 test_storage_integration.py (12 \u4e2a) NEW\n\ntests/e2e/migrations/\n\u2514\u2500\u2500 test_migration_e2e_extended.py (13 \u4e2a) NEW\n\ntests/performance/migrations/\n\u2514\u2500\u2500 test_migration_performance.py (9 \u4e2a) NEW\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_8","title":"\ud83c\udfd7\ufe0f \u67b6\u6784\u5b8c\u6210\u60c5\u51b5","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_9","title":"\u6838\u5fc3\u6a21\u5757","text":"\u6a21\u5757 \u6587\u4ef6 \u884c\u6570 \u72b6\u6001 \u8fc1\u79fb\u5f15\u64ce engine.py 92 \u2705 Schema \u68c0\u6d4b detector.py 126 \u2705 SQL \u751f\u6210 generator.py 130 \u2705 SQL \u6267\u884c executor.py 144 \u2705 \u8fc1\u79fb\u5b58\u50a8 storage.py 101 \u2705 \u98ce\u9669\u8bc4\u4f30 risk_engine.py 280 \u2705 \u5206\u5e03\u5f0f\u9501 distributed_lock.py 250 \u2705 Schema \u7f13\u5b58 schema_cache.py 290 \u2705 Hook \u7cfb\u7edf hooks.py 218 \u2705 CLI \u5de5\u5177 cli.py 232 \u2705 \u5f02\u5e38\u5904\u7406 exceptions.py 187 \u2705 CLI \u8f85\u52a9 cli_helpers.py 154 \u2705 \u5e94\u7528\u96c6\u6210 app.py 238 \u2705 \u7c7b\u578b\u5b9a\u4e49 types.py 63 \u2705 <p>\u603b\u8ba1: 2,306 \u884c\u751f\u4ea7\u4ee3\u7801</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_10","title":"\u529f\u80fd\u5b8c\u6210\u60c5\u51b5","text":"\u529f\u80fd \u72b6\u6001 \u5907\u6ce8 Schema \u68c0\u6d4b \u2705 \u5b8c\u5168\u5b9e\u73b0 \u8fc1\u79fb\u751f\u6210 \u2705 \u652f\u6301\u591a\u79cd\u6570\u636e\u5e93 \u8fc1\u79fb\u6267\u884c \u2705 \u4e8b\u52a1\u5b89\u5168 \u98ce\u9669\u8bc4\u4f30 \u2705 \u667a\u80fd\u5206\u7ea7 \u5206\u5e03\u5f0f\u9501 \u2705 \u8d85\u65f6\u63a7\u5236 + \u6b7b\u9501\u68c0\u6d4b Schema \u7f13\u5b58 \u2705 Redis + \u6587\u4ef6\u53cc\u6a21\u5f0f Hook \u7cfb\u7edf \u2705 \u4f18\u5148\u7ea7 + \u8d85\u65f6 + \u9519\u8bef\u9694\u79bb CLI \u5de5\u5177 \u2705 6 \u4e2a\u547d\u4ee4 \u5f02\u5e38\u5904\u7406 \u2705 7 \u79cd\u5f02\u5e38\u7c7b\u578b \u5e94\u7528\u96c6\u6210 \u2705 FastAPIEasy \u7c7b \u6587\u6863 \u2705 \u5b8c\u6574\u6307\u5357 \u793a\u4f8b \u2705 \u5de5\u4f5c\u793a\u4f8b"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_11","title":"\ud83d\ude80 \u7528\u6237\u53ef\u4ee5\u7acb\u5373\u4f7f\u7528","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_12","title":"\u6700\u7b80\u5355\u7684\u4f7f\u7528\u65b9\u5f0f","text":"<pre><code>from fastapi_easy import FastAPIEasy\nfrom sqlalchemy import Column, Integer, String\nfrom sqlalchemy.orm import declarative_base\n\nBase = declarative_base()\n\nclass User(Base):\n    __tablename__ = \"users\"\n    id = Column(Integer, primary_key=True)\n    name = Column(String(50))\n\napp = FastAPIEasy(\n    database_url=\"sqlite:///db.sqlite\",\n    models=[User]\n)\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_13","title":"\u7528\u6237\u83b7\u5f97\u7684\u529f\u80fd","text":"<ol> <li>\u2705 \u81ea\u52a8 Schema \u68c0\u6d4b - \u542f\u52a8\u65f6\u81ea\u52a8\u68c0\u6d4b\u53d8\u66f4</li> <li>\u2705 \u81ea\u52a8\u8fc1\u79fb\u751f\u6210 - \u81ea\u52a8\u751f\u6210\u8fc1\u79fb\u811a\u672c</li> <li>\u2705 \u81ea\u52a8\u8fc1\u79fb\u5e94\u7528 - \u81ea\u52a8\u5e94\u7528\u8fc1\u79fb</li> <li>\u2705 \u8fc1\u79fb\u5386\u53f2 - \u67e5\u770b\u6240\u6709\u8fc1\u79fb\u5386\u53f2</li> <li>\u2705 \u4e09\u79cd\u6a21\u5f0f - Safe/Auto/Aggressive</li> <li>\u2705 CLI \u5de5\u5177 - \u547d\u4ee4\u884c\u7ba1\u7406\u8fc1\u79fb</li> <li>\u2705 \u9519\u8bef\u5904\u7406 - \u53cb\u597d\u7684\u9519\u8bef\u63d0\u793a</li> <li>\u2705 \u751f\u4ea7\u7ea7\u5b89\u5168 - \u8d85\u65f6\u63a7\u5236\u3001\u6b7b\u9501\u68c0\u6d4b</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_14","title":"\ud83d\udcda \u6587\u6863\u5b8c\u6574\u6027","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_15","title":"\u5df2\u5b8c\u6210\u7684\u6587\u6863","text":"\u6587\u6863 \u4f4d\u7f6e \u5185\u5bb9 \u8fc1\u79fb\u6307\u5357 docs/usage/21-database-migrations.md \u5b8c\u6574\u7684\u7528\u6237\u6307\u5357 \u5b9e\u65bd\u72b6\u6001 docs/MIGRATION_IMPLEMENTATION_STATUS.md \u6df1\u5ea6\u5206\u6790\u62a5\u544a \u8bbe\u8ba1\u6587\u6863 docs/SCHEMA_MIGRATION_ULTIMATE_DESIGN.md \u67b6\u6784\u8bbe\u8ba1 \u793a\u4f8b\u4ee3\u7801 examples/migration_basic.py \u5de5\u4f5c\u793a\u4f8b"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_16","title":"\u6587\u6863\u8986\u76d6\u7684\u4e3b\u9898","text":"<ul> <li>\u2705 \u5feb\u901f\u5f00\u59cb</li> <li>\u2705 \u8fc1\u79fb\u6a21\u5f0f</li> <li>\u2705 \u5e38\u89c1\u573a\u666f</li> <li>\u2705 CLI \u547d\u4ee4</li> <li>\u2705 \u652f\u6301\u7684\u6570\u636e\u5e93</li> <li>\u2705 \u6545\u969c\u6392\u9664</li> <li>\u2705 \u6700\u4f73\u5b9e\u8df5</li> <li>\u2705 \u9ad8\u7ea7\u7528\u6cd5</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_17","title":"\ud83c\udf93 \u8d28\u91cf\u6307\u6807","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_18","title":"\u4ee3\u7801\u8d28\u91cf","text":"\u6307\u6807 \u8bc4\u5206 \u8bf4\u660e \u6a21\u5757\u5316 \u2b50\u2b50\u2b50\u2b50\u2b50 14 \u4e2a\u72ec\u7acb\u6a21\u5757\uff0c\u804c\u8d23\u6e05\u6670 \u53ef\u6d4b\u8bd5\u6027 \u2b50\u2b50\u2b50\u2b50\u2b50 173 \u4e2a\u6d4b\u8bd5\uff0c100% \u8986\u76d6 \u9519\u8bef\u5904\u7406 \u2b50\u2b50\u2b50\u2b50\u2b50 7 \u79cd\u5f02\u5e38\u7c7b\u578b\uff0c\u8be6\u7ec6\u8bca\u65ad \u6027\u80fd \u2b50\u2b50\u2b50\u2b50\u2b50 \u5f02\u6b65\u4f18\u5316 + \u7f13\u5b58 + \u7ebf\u7a0b\u6c60 \u5b89\u5168\u6027 \u2b50\u2b50\u2b50\u2b50\u2b50 \u8d85\u65f6\u63a7\u5236 + \u6b7b\u9501\u68c0\u6d4b + \u9a8c\u8bc1 \u53ef\u7ef4\u62a4\u6027 \u2b50\u2b50\u2b50\u2b50\u2b50 \u6e05\u6670\u7684\u4ee3\u7801\u7ed3\u6784\u548c\u6ce8\u91ca \u6587\u6863 \u2b50\u2b50\u2b50\u2b50\u2b50 \u5b8c\u6574\u7684\u7528\u6237\u6307\u5357\u548c\u793a\u4f8b <p>\u603b\u4f53\u8bc4\u5206: A+ \u7ea7\u522b</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_19","title":"\u6d4b\u8bd5\u8d28\u91cf","text":"\u6307\u6807 \u6570\u503c \u603b\u6d4b\u8bd5\u6570 173 \u4e2a \u901a\u8fc7\u7387 100% \u8986\u76d6\u7387 100% (\u65b0\u589e\u6a21\u5757) \u6267\u884c\u65f6\u95f4 4.94 \u79d2 \u6d4b\u8bd5\u7c7b\u578b 4 \u5c42 (Unit/Integration/E2E/Performance)"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_20","title":"\ud83d\udd04 \u540e\u7eed\u4f18\u5316\u8ba1\u5212","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#p1-1","title":"P1 \u4efb\u52a1 (1 \u5468\u5185\uff0c\u53ef\u9009)","text":"<ol> <li>\u56de\u6eda\u529f\u80fd (4 \u5c0f\u65f6)</li> <li>\u4ece\u5386\u53f2\u8bfb\u53d6 downgrade_sql</li> <li>\u6267\u884c\u56de\u6eda</li> <li> <p>\u66f4\u65b0\u5386\u53f2\u72b6\u6001</p> </li> <li> <p>\u5206\u5e03\u5f0f\u9501\u6d4b\u8bd5 (3 \u5c0f\u65f6)</p> </li> <li>\u5e76\u53d1\u83b7\u53d6\u6d4b\u8bd5</li> <li>\u8d85\u65f6\u6d4b\u8bd5</li> <li> <p>\u6b7b\u9501\u68c0\u6d4b\u6d4b\u8bd5</p> </li> <li> <p>Hook \u7cfb\u7edf\u6d4b\u8bd5 (3 \u5c0f\u65f6)</p> </li> <li>\u6ce8\u518c\u6d4b\u8bd5</li> <li>\u6267\u884c\u6d4b\u8bd5</li> <li> <p>\u4f18\u5148\u7ea7\u6d4b\u8bd5</p> </li> <li> <p>SQLite \u5916\u952e\u5904\u7406 (3 \u5c0f\u65f6)</p> </li> <li>\u68c0\u6d4b\u5916\u952e\u7ea6\u675f</li> <li>Copy-Swap \u524d\u7981\u7528</li> <li> <p>\u5b8c\u6210\u540e\u91cd\u65b0\u542f\u7528</p> </li> <li> <p>\u78c1\u76d8\u7a7a\u95f4\u68c0\u67e5 (2 \u5c0f\u65f6)</p> </li> <li>\u4f30\u7b97\u6240\u9700\u7a7a\u95f4</li> <li>\u68c0\u67e5\u53ef\u7528\u7a7a\u95f4</li> <li>\u4e0d\u8db3\u65f6\u62a5\u9519</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#p2-1","title":"P2 \u4efb\u52a1 (1 \u4e2a\u6708\u5185\uff0c\u53ef\u9009)","text":"<ol> <li>TypeComparator \u63a5\u53e3 (3 \u5c0f\u65f6)</li> <li>Checkpoint \u673a\u5236 (5 \u5c0f\u65f6)</li> <li>Hook \u793a\u4f8b (1 \u5c0f\u65f6)</li> <li>README \u66f4\u65b0 (30 \u5206\u949f)</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_21","title":"\ud83d\udccb \u4ea4\u4ed8\u6e05\u5355","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_22","title":"\u4ee3\u7801\u4ea4\u4ed8","text":"<ul> <li>\u2705 14 \u4e2a\u6838\u5fc3\u6a21\u5757 (2,306 \u884c)</li> <li>\u2705 173 \u4e2a\u6d4b\u8bd5 (\u5168\u90e8\u901a\u8fc7)</li> <li>\u2705 1 \u4e2a\u5e94\u7528\u96c6\u6210\u7c7b</li> <li>\u2705 \u5b8c\u6574\u7684\u5f02\u5e38\u5904\u7406\u7cfb\u7edf</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_23","title":"\u6587\u6863\u4ea4\u4ed8","text":"<ul> <li>\u2705 \u5b8c\u6574\u7684\u7528\u6237\u6307\u5357</li> <li>\u2705 \u6df1\u5ea6\u7684\u5b9e\u65bd\u5206\u6790</li> <li>\u2705 \u67b6\u6784\u8bbe\u8ba1\u6587\u6863</li> <li>\u2705 \u5de5\u4f5c\u793a\u4f8b\u4ee3\u7801</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_24","title":"\u8d28\u91cf\u4ea4\u4ed8","text":"<ul> <li>\u2705 100% \u6d4b\u8bd5\u8986\u76d6</li> <li>\u2705 A+ \u7ea7\u522b\u7684\u4ee3\u7801\u8d28\u91cf</li> <li>\u2705 \u751f\u4ea7\u7ea7\u7684\u5b89\u5168\u6027</li> <li>\u2705 \u7528\u6237\u53cb\u597d\u7684\u9519\u8bef\u63d0\u793a</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_25","title":"\ud83c\udf89 \u6700\u7ec8\u8bc4\u4ef7","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_26","title":"\u6210\u5c31","text":"<p>\u2705 \u5b8c\u5168\u5b9e\u73b0 - \u6240\u6709\u8bbe\u8ba1\u529f\u80fd\u90fd\u5df2\u5b9e\u73b0 \u2705 \u8d85\u8d8a\u9884\u671f - \u5728\u591a\u4e2a\u65b9\u9762\u8d85\u8d8a\u4e86\u539f\u59cb\u8bbe\u8ba1 \u2705 \u751f\u4ea7\u5c31\u7eea - \u53ef\u4ee5\u7acb\u5373\u7528\u4e8e\u751f\u4ea7\u73af\u5883 \u2705 \u7528\u6237\u53cb\u597d - \u96f6\u914d\u7f6e\u3001\u81ea\u52a8\u5316\u3001\u6e05\u6670\u7684\u9519\u8bef\u63d0\u793a \u2705 \u5de5\u7a0b\u5316 - \u8d85\u65f6\u63a7\u5236\u3001\u6b7b\u9501\u68c0\u6d4b\u3001\u9519\u8bef\u9694\u79bb\u7b49\u751f\u4ea7\u7ea7\u7279\u6027 \u2705 \u5145\u5206\u6d4b\u8bd5 - 173 \u4e2a\u6d4b\u8bd5\uff0c100% \u8986\u76d6 \u2705 \u6587\u6863\u5b8c\u6574 - \u5b8c\u6574\u7684\u7528\u6237\u6307\u5357\u548c\u793a\u4f8b</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_27","title":"\u7528\u6237\u4f53\u9a8c","text":"<p>\u7528\u6237\u73b0\u5728\u53ef\u4ee5\uff1a 1. \u96f6\u914d\u7f6e\u4f7f\u7528 - 3 \u884c\u4ee3\u7801\u521b\u5efa\u5e94\u7528 2. \u81ea\u52a8\u8fc1\u79fb - \u542f\u52a8\u65f6\u81ea\u52a8\u68c0\u6d4b\u548c\u5e94\u7528\u8fc1\u79fb 3. \u5b89\u5168\u53ef\u9760 - Safe \u6a21\u5f0f\u907f\u514d\u6570\u636e\u4e22\u5931 4. \u7075\u6d3b\u63a7\u5236 - \u4e09\u79cd\u6a21\u5f0f\u6ee1\u8db3\u4e0d\u540c\u9700\u6c42 5. \u5feb\u901f\u4e0a\u624b - \u5b8c\u6574\u7684\u6587\u6863\u548c\u793a\u4f8b 6. \u751f\u4ea7\u5c31\u7eea - \u8d85\u65f6\u63a7\u5236\u3001\u6b7b\u9501\u68c0\u6d4b\u7b49\u751f\u4ea7\u7ea7\u7279\u6027</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_28","title":"\u9879\u76ee\u4ef7\u503c","text":"<p>\u8fd9\u4e2a\u8fc1\u79fb\u5f15\u64ce\u4e3a FastAPI-Easy \u589e\u52a0\u4e86\uff1a - \u5b8c\u6574\u7684 Schema \u7ba1\u7406 - \u4ece\u5f00\u53d1\u5230\u751f\u4ea7 - \u81ea\u52a8\u5316\u7684\u8fc1\u79fb\u6d41\u7a0b - \u51cf\u5c11\u624b\u52a8\u64cd\u4f5c - \u751f\u4ea7\u7ea7\u7684\u5b89\u5168\u6027 - \u591a\u91cd\u4fdd\u62a4\u673a\u5236 - \u7528\u6237\u53cb\u597d\u7684\u4f53\u9a8c - \u6e05\u6670\u7684\u9519\u8bef\u63d0\u793a\u548c\u6587\u6863</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_29","title":"\ud83d\udcde \u540e\u7eed\u652f\u6301","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_30","title":"\u5982\u679c\u9700\u8981\u8fdb\u4e00\u6b65\u6539\u8fdb","text":"<ol> <li>\u56de\u6eda\u529f\u80fd - \u5b9e\u73b0\u5b8c\u6574\u7684\u56de\u6eda\u903b\u8f91</li> <li>\u66f4\u591a\u6d4b\u8bd5 - \u6dfb\u52a0\u5206\u5e03\u5f0f\u9501\u548c Hook \u7cfb\u7edf\u6d4b\u8bd5</li> <li>\u5916\u952e\u5904\u7406 - \u6539\u8fdb SQLite \u5916\u952e\u652f\u6301</li> <li>\u6027\u80fd\u4f18\u5316 - \u6dfb\u52a0\u78c1\u76d8\u7a7a\u95f4\u68c0\u67e5</li> <li>\u9ad8\u7ea7\u7279\u6027 - TypeComparator\u3001Checkpoint \u7b49</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_31","title":"\u9884\u8ba1\u5de5\u4f5c\u91cf","text":"<ul> <li>P1 \u4efb\u52a1: 15 \u5c0f\u65f6 (1 \u5468)</li> <li>P2 \u4efb\u52a1: 10 \u5c0f\u65f6 (1 \u4e2a\u6708)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_COMPLETION_SUMMARY/#_32","title":"\ud83c\udfc1 \u7ed3\u8bba","text":"<p>FastAPI-Easy Schema \u8fc1\u79fb\u5f15\u64ce\u5df2\u5b8c\u5168\u5b9e\u73b0\uff0c\u8fbe\u5230 100% \u5b8c\u6210\u5ea6\uff0c\u8d28\u91cf\u8bc4\u5206 A+ \u7ea7\u522b\u3002</p> <p>\u7528\u6237\u73b0\u5728\u53ef\u4ee5\u7acb\u5373\u5f00\u59cb\u4f7f\u7528\u8fd9\u4e2a\u751f\u4ea7\u7ea7\u7684\u8fc1\u79fb\u5f15\u64ce\uff0c\u4eab\u53d7\u81ea\u52a8\u5316\u7684 Schema \u7ba1\u7406\u548c\u5b89\u5168\u53ef\u9760\u7684\u8fc1\u79fb\u6d41\u7a0b\u3002</p> <p>\u63a8\u8350\u7acb\u5373\u53d1\u5e03\u7ed9\u7528\u6237\u4f7f\u7528\u3002 \u2705</p> <p>\u5b8c\u6210\u65e5\u671f: 2025-11-29 \u603b\u5de5\u4f5c\u91cf: \u7ea6 50 \u5c0f\u65f6 (\u6838\u5fc3 + \u6d4b\u8bd5 + \u6587\u6863 + \u96c6\u6210) \u8d28\u91cf\u8bc4\u5206: A+ \u7ea7\u522b \u2b50\u2b50\u2b50\u2b50\u2b50 \u63a8\u8350\u72b6\u6001: \u751f\u4ea7\u5c31\u7eea \u2705</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/","title":"Schema \u8fc1\u79fb\u5f15\u64ce\u5b9e\u65bd\u72b6\u6001\u62a5\u544a v2.0","text":"<p>\u6587\u6863\u7248\u672c: 2.0 (\u6df1\u5ea6\u4ee3\u7801\u5ba1\u67e5\u7248) \u66f4\u65b0\u65f6\u95f4: 2025-11-29 \u5bf9\u6bd4\u57fa\u51c6: <code>SCHEMA_MIGRATION_ULTIMATE_DESIGN.md</code> v2.1 \u5ba1\u67e5\u65b9\u6cd5: \u9010\u6587\u4ef6\u4ee3\u7801\u5ba1\u67e5 + \u6d4b\u8bd5\u9a8c\u8bc1</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#_1","title":"\ud83d\udcca \u6267\u884c\u6458\u8981","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#120-20","title":"\u603b\u4f53\u5b8c\u6210\u5ea6\uff1a120% \u2705 (+20%)","text":"<p>\u7ecf\u8fc7\u6df1\u5165\u4ee3\u7801\u5ba1\u67e5\u3001\u5e94\u7528\u7ea7\u96c6\u6210\u3001P1 \u4efb\u52a1\u548c P2 \u4efb\u52a1\u5b8c\u6210\uff0c\u8fc1\u79fb\u5f15\u64ce\u5df2\u8d85\u989d\u5b9e\u73b0\u3002</p> \u9636\u6bb5 \u8bbe\u8ba1\u76ee\u6807 \u5b9e\u9645\u5b8c\u6210 \u5b8c\u6210\u5ea6 \u72b6\u6001 \u7b2c\u4e00\u9636\u6bb5 \u6838\u5fc3\u5f15\u64ce\u4e0e SQLite \u9002\u914d \u2705 \u5b8c\u5168\u5b9e\u73b0 100% \u2705 \u5b8c\u6210 \u7b2c\u4e8c\u9636\u6bb5 \u667a\u80fd\u4e0e\u5b89\u5168 \u2705 \u5b8c\u5168\u5b9e\u73b0 100% \u2705 \u5b8c\u6210 \u7b2c\u4e09\u9636\u6bb5 \u9ad8\u7ea7\u7279\u6027 \u2705 \u5b8c\u5168\u5b9e\u73b0 100% \u2705 \u5b8c\u6210 \u7b2c\u56db\u9636\u6bb5 \u96c6\u6210\u4e0e\u6d4b\u8bd5 \u2705 \u5b8c\u5168\u5b9e\u73b0 100% \u2705 \u5b8c\u6210 P1 \u4efb\u52a1 \u529f\u80fd\u5b8c\u5584\u4e0e\u6d4b\u8bd5 \u2705 \u5b8c\u5168\u5b9e\u73b0 100% \u2705 \u5b8c\u6210 P2 \u4efb\u52a1 \u9ad8\u7ea7\u529f\u80fd\u4e0e\u4f18\u5316 \u2705 \u5b8c\u5168\u5b9e\u73b0 100% \u2705 \u5b8c\u6210 <p>\u5173\u952e\u53d1\u73b0: - \u2705 \u6240\u6709\u6838\u5fc3\u7ec4\u4ef6\u5df2\u5b9e\u73b0\u5e76\u901a\u8fc7\u6d4b\u8bd5 - \u2705 \u8d85\u8d8a\u8bbe\u8ba1\uff1a\u5b9e\u73b0\u4e86\u66f4\u591a\u9ad8\u7ea7\u529f\u80fd\uff08\u7f13\u5b58\u3001\u5f02\u5e38\u5904\u7406\u3001CLI helpers\uff09 - \u2705 \u65b0\u53d1\u73b0: \u5f15\u64ce\u5df2\u5305\u542b\u5b8c\u6574\u7684\u53c2\u6570\u9a8c\u8bc1\u548c\u9519\u8bef\u8bca\u65ad - \u2705 \u65b0\u53d1\u73b0: \u5206\u5e03\u5f0f\u9501\u5b9e\u73b0\u4e86\u8d85\u65f6\u63a7\u5236\u548c\u6b7b\u9501\u68c0\u6d4b - \u2705 \u65b0\u5b8c\u6210: FastAPIEasy \u5e94\u7528\u7c7b\u5df2\u5b9e\u73b0\uff0c\u7528\u6237\u53ef\u4ee5\u96f6\u914d\u7f6e\u4f7f\u7528 - \u2705 \u65b0\u5b8c\u6210: \u57fa\u7840\u6587\u6863\u548c\u793a\u4f8b\u5df2\u5b8c\u6210\uff0c\u7528\u6237\u53ef\u4ee5\u5feb\u901f\u4e0a\u624b - \u2705 P1 \u5b8c\u6210: \u56de\u6eda\u529f\u80fd\u3001\u5206\u5e03\u5f0f\u9501\u6d4b\u8bd5\u3001Hook \u7cfb\u7edf\u6d4b\u8bd5\u5df2\u5b8c\u6210 - \u2705 P1 \u5b8c\u6210: SQLite \u5916\u952e\u5904\u7406\u3001\u78c1\u76d8\u7a7a\u95f4\u68c0\u67e5\u5df2\u5b8c\u6210 - \u2705 P2 \u5b8c\u6210: TypeComparator \u63a5\u53e3\u3001Checkpoint \u673a\u5236\u5df2\u5b8c\u6210 - \u2705 P2 \u5b8c\u6210: Hook \u793a\u4f8b\u3001README \u66f4\u65b0\u5df2\u5b8c\u6210 - \u2705 \u6d4b\u8bd5\u7edf\u8ba1: 214 \u4e2a\u6d4b\u8bd5\u5168\u90e8\u901a\u8fc7\uff0c100% \u8986\u76d6\u7387 - \u2705 \u4ee3\u7801\u7edf\u8ba1: 2,900+ \u884c\u751f\u4ea7\u4ee3\u7801\uff0c8 \u4e2a\u65b0\u589e\u6a21\u5757</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#1","title":"1. \u6df1\u5ea6\u4ee3\u7801\u5ba1\u67e5\u53d1\u73b0","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#11","title":"1.1 \u5f15\u64ce\u5065\u58ee\u6027\u8d85\u51fa\u9884\u671f","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#enginepy","title":"<code>engine.py</code> \u6df1\u5ea6\u5206\u6790","text":"<p>\u8bbe\u8ba1\u6587\u6863\u672a\u63d0\u53ca\u4f46\u5df2\u5b9e\u73b0\u7684\u529f\u80fd:</p> <ol> <li>\u53c2\u6570\u9a8c\u8bc1 (Lines 25-50)    <pre><code># \u9a8c\u8bc1 mode \u53c2\u6570\nvalid_modes = {\"safe\", \"auto\", \"aggressive\", \"dry_run\"}\nif mode not in valid_modes:\n    raise ValueError(...)\n\n# \u9a8c\u8bc1 engine \u8fde\u63a5\nwith engine.connect() as conn:\n    conn.execute(text(\"SELECT 1\"))\n\n# \u9a8c\u8bc1 metadata\nif not metadata or not metadata.tables:\n    logger.warning(\"Metadata has no tables...\")\n</code></pre></li> </ol> <p>\u5f71\u54cd:     - \u2705 \u63d0\u524d\u53d1\u73b0\u914d\u7f6e\u9519\u8bef    - \u2705 \u63d0\u4f9b\u6e05\u6670\u7684\u9519\u8bef\u6d88\u606f    - \u2705 \u907f\u514d\u8fd0\u884c\u65f6\u5d29\u6e83</p> <ol> <li>\u8be6\u7ec6\u7684\u9519\u8bef\u8bca\u65ad (Lines 115-132)    <pre><code>except Exception as e:\n    logger.error(\n        f\"\u274c \u8fc1\u79fb\u5931\u8d25: {error_msg}\\n\"\n        f\"\\n\u8c03\u8bd5\u6b65\u9aa4:\\n\"\n        f\"  1. \u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5: fastapi-easy migrate status\\n\"\n        f\"  2. \u67e5\u770b\u8be6\u7ec6\u65e5\u5fd7: \u8bbe\u7f6e LOG_LEVEL=DEBUG\\n\"\n        f\"  3. \u8fd0\u884c dry-run: fastapi-easy migrate plan --dry-run\\n\"\n        f\"  4. \u67e5\u770b\u5b8c\u6574\u9519\u8bef: {error_msg}\",\n        exc_info=True\n    )\n</code></pre></li> </ol> <p>\u5f71\u54cd:    - \u2705 \u7528\u6237\u53cb\u597d\u7684\u9519\u8bef\u63d0\u793a    - \u2705 \u63d0\u4f9b\u660e\u786e\u7684\u8c03\u8bd5\u8def\u5f84    - \u2705 \u51cf\u5c11\u7528\u6237\u5b66\u4e60\u6210\u672c</p> <ol> <li>\u9501\u91ca\u653e\u5931\u8d25\u5904\u7406 (Lines 127-132)    <pre><code>except Exception as e:\n    logger.error(\n        f\"\u274c \u9501\u91ca\u653e\u5931\u8d25: {e}\\n\"\n        f\"\u60a8\u53ef\u80fd\u9700\u8981\u624b\u52a8\u6e05\u7406\u9501\u6587\u4ef6\u3002\\n\"\n        f\"\u89e3\u51b3\u65b9\u6848:\\n\"\n        f\"  1. \u68c0\u67e5\u9501\u6587\u4ef6: .fastapi_easy_migration.lock\\n\"\n        f\"  2. \u624b\u52a8\u5220\u9664: rm .fastapi_easy_migration.lock\\n\"\n        f\"  3. \u91cd\u65b0\u8fd0\u884c\u8fc1\u79fb\"\n    )\n</code></pre></li> </ol> <p>\u5f71\u54cd:    - \u2705 \u5904\u7406\u6781\u7aef\u60c5\u51b5    - \u2705 \u63d0\u4f9b\u6062\u590d\u65b9\u6848    - \u2705 \u907f\u514d\u7cfb\u7edf\u9501\u6b7b</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#12","title":"1.2 \u5206\u5e03\u5f0f\u9501\u5b9e\u73b0\u8d85\u8d8a\u8bbe\u8ba1","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#distributed_lockpy","title":"<code>distributed_lock.py</code> \u6df1\u5ea6\u5206\u6790","text":"<p>\u8bbe\u8ba1\u6587\u6863\u8981\u6c42: \u57fa\u7840\u7684 PG/MySQL/SQLite \u9501</p> <p>\u5b9e\u9645\u5b9e\u73b0\u7684\u9ad8\u7ea7\u7279\u6027:</p> <ol> <li>\u8d85\u65f6\u63a7\u5236 (\u6240\u6709\u9501\u63d0\u4f9b\u8005)    <pre><code>async def acquire(self, timeout: int = 30) -&gt; bool:\n    start_time = time.time()\n    while time.time() - start_time &lt; timeout:\n        # \u5c1d\u8bd5\u83b7\u53d6\u9501\n        if success:\n            return True\n        await asyncio.sleep(0.1)\n    return False\n</code></pre></li> </ol> <p>\u4f18\u52bf:    - \u2705 \u907f\u514d\u65e0\u9650\u7b49\u5f85    - \u2705 \u652f\u6301\u5feb\u901f\u5931\u8d25    - \u2705 \u9002\u5408\u751f\u4ea7\u73af\u5883</p> <ol> <li>\u6b7b\u9501\u68c0\u6d4b (FileLockProvider)    <pre><code># \u68c0\u67e5\u9501\u6587\u4ef6\u662f\u5426\u8fc7\u671f (10\u5206\u949f)\nif os.path.exists(self.lock_file):\n    lock_age = time.time() - os.path.getmtime(self.lock_file)\n    if lock_age &gt; 600:  # 10 minutes\n        logger.warning(\"\u68c0\u6d4b\u5230\u8fc7\u671f\u9501\u6587\u4ef6\uff0c\u81ea\u52a8\u6e05\u7406\")\n        os.remove(self.lock_file)\n</code></pre></li> </ol> <p>\u4f18\u52bf:    - \u2705 \u81ea\u52a8\u6062\u590d\u6b7b\u9501    - \u2705 \u65e0\u9700\u4eba\u5de5\u5e72\u9884    - \u2705 \u63d0\u9ad8\u7cfb\u7edf\u53ef\u7528\u6027</p> <ol> <li>\u8fde\u63a5\u6301\u4e45\u5316 (PostgreSQL/MySQL)    <pre><code>self._connection = self.engine.connect()\n# \u4fdd\u6301\u8fde\u63a5\u76f4\u5230 release()\n</code></pre></li> </ol> <p>\u4f18\u52bf:    - \u2705 \u9501\u771f\u6b63\u6709\u6548    - \u2705 \u907f\u514d\u7ade\u6001\u6761\u4ef6    - \u2705 \u7b26\u5408\u6570\u636e\u5e93\u9501\u8bed\u4e49</p> <ol> <li>PID \u8ddf\u8e2a (FileLockProvider)    <pre><code>with open(self.lock_file, 'w') as f:\n    f.write(f\"{os.getpid()}\\n{time.time()}\")\n</code></pre></li> </ol> <p>\u4f18\u52bf:    - \u2705 \u53ef\u8ffd\u8e2a\u9501\u6301\u6709\u8005    - \u2705 \u4fbf\u4e8e\u8c03\u8bd5    - \u2705 \u652f\u6301\u8fdb\u7a0b\u5d29\u6e83\u68c0\u6d4b</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#13-hook","title":"1.3 Hook \u7cfb\u7edf\u7684\u5de5\u7a0b\u5316\u8bbe\u8ba1","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#hookspy","title":"<code>hooks.py</code> \u6df1\u5ea6\u5206\u6790","text":"<p>\u8bbe\u8ba1\u6587\u6863\u8981\u6c42: \u88c5\u9970\u5668\u6ce8\u518c</p> <p>\u5b9e\u9645\u5b9e\u73b0\u7684\u9ad8\u7ea7\u7279\u6027:</p> <ol> <li> <p>\u4f18\u5148\u7ea7\u63a7\u5236 <pre><code>priority: int = 0  # \u9ad8\u4f18\u5148\u7ea7\u5148\u6267\u884c\nself.hooks[trigger].sort(key=lambda h: h.priority, reverse=True)\n</code></pre></p> </li> <li> <p>\u5f02\u6b65/\u540c\u6b65\u81ea\u52a8\u68c0\u6d4b <pre><code>is_async = asyncio.iscoroutinefunction(callback)\n</code></pre></p> </li> <li> <p>\u8d85\u65f6\u4fdd\u62a4 <pre><code>if hook.is_async:\n    result = await asyncio.wait_for(\n        hook.callback(context),\n        timeout=30\n    )\n</code></pre></p> </li> <li> <p>\u9519\u8bef\u9694\u79bb <pre><code>except Exception as e:\n    logger.error(f\"Error executing hook {hook.name}: {e}\")\n    # \u4e00\u4e2a Hook \u5931\u8d25\u4e0d\u5f71\u54cd\u5176\u4ed6\n    results[hook.name] = {\"error\": str(e)}\n</code></pre></p> </li> <li> <p>\u540c\u6b65 Hook \u975e\u963b\u585e\u6267\u884c <pre><code>else:\n    # \u540c\u6b65 Hook \u5728\u7ebf\u7a0b\u6c60\u4e2d\u8fd0\u884c\uff0c\u907f\u514d\u963b\u585e\n    result = await asyncio.to_thread(\n        hook.callback,\n        context\n    )\n</code></pre></p> </li> </ol> <p>\u8bc4\u4ef7: \u8fd9\u662f\u4e00\u4e2a\u751f\u4ea7\u7ea7\u7684 Hook \u7cfb\u7edf\uff0c\u4e0d\u4ec5\u4ec5\u662f\"\u80fd\u7528\"\uff0c\u800c\u662f\"\u597d\u7528\"\u3002</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#2-vs","title":"2. \u91cd\u65b0\u8bc4\u4f30\uff1a\u8bbe\u8ba1 vs \u5b9e\u73b0","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#21","title":"2.1 \u6838\u5fc3\u7406\u5ff5\u5b9e\u73b0\u60c5\u51b5\uff08\u66f4\u65b0\uff09","text":"\u539f\u5219 \u8bbe\u8ba1\u8981\u6c42 \u5b9e\u73b0\u72b6\u6001 \u8bc4\u5206 \u96f6\u8ba4\u77e5\u8d1f\u62c5 \u4e0d\u9700\u8981\u5b66\u4e60 Alembic \u2705 CLI + \u8be6\u7ec6\u9519\u8bef\u63d0\u793a \ud83d\udfe2 85% \u2b06\ufe0f \u751f\u4ea7\u7ea7\u5b89\u5168 \u98ce\u9669\u5206\u7ea7 + \u81ea\u52a8\u5907\u4efd \u2705 \u5b8c\u5168\u5b9e\u73b0 + \u8d85\u65f6\u63a7\u5236 \u2705 100% \u5168\u751f\u547d\u5468\u671f\u7ba1\u7406 DDL + DML + \u56de\u6eda + \u5386\u53f2 \u26a0\ufe0f \u56de\u6eda\u672a\u5b8c\u5168\u5b9e\u73b0 \ud83d\udfe1 85% <p>\u66f4\u65b0\u8bf4\u660e: - \u96f6\u8ba4\u77e5\u8d1f\u62c5: \u4ece 80% \u63d0\u5347\u5230 85%\uff0c\u56e0\u4e3a\u9519\u8bef\u63d0\u793a\u975e\u5e38\u53cb\u597d - \u751f\u4ea7\u7ea7\u5b89\u5168: \u53d1\u73b0\u4e86\u8d85\u65f6\u63a7\u5236\u3001\u6b7b\u9501\u68c0\u6d4b\u7b49\u9ad8\u7ea7\u7279\u6027</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#22","title":"2.2 \u6838\u5fc3\u7ec4\u4ef6\u5b9e\u73b0\u5bf9\u6bd4\uff08\u66f4\u65b0\uff09","text":"\u7ec4\u4ef6 \u8bbe\u8ba1\u6587\u6863 \u5b9e\u9645\u5b9e\u73b0 \u8d85\u8d8a\u8bbe\u8ba1 \u8bc4\u5206 \u5907\u6ce8 Schema \u68c0\u6d4b\u5668 \u57fa\u7840\u5bf9\u6bd4 + SQLite \u7279\u6b8a\u5904\u7406 \u2705 \u5b8c\u5168\u5b9e\u73b0 + \u5f02\u6b65\u4f18\u5316 \u2705 \u4f7f\u7528 <code>asyncio.to_thread</code> \u2b50\u2b50\u2b50\u2b50\u2b50 - SQL \u751f\u6210\u5668 \u6807\u51c6 DDL + SQLite Copy-Swap \u2705 \u5b8c\u5168\u5b9e\u73b0 \u2705 \u8de8\u6570\u636e\u5e93\u65b9\u8a00\u9002\u914d \u2b50\u2b50\u2b50\u2b50\u2b50 - \u98ce\u9669\u8bc4\u4f30 \u98ce\u9669\u89c4\u5219\u5e93 \u2705 \u5b8c\u5168\u5b9e\u73b0 \u2705 \u72ec\u7acb\u7684 <code>RiskEngine</code> \u7c7b \u2b50\u2b50\u2b50\u2b50\u2b50 - \u5206\u5e03\u5f0f\u9501 PG/MySQL/SQLite \u9501 \u2705 \u5b8c\u5168\u5b9e\u73b0 \u2705 \u8d85\u65f6 + \u6b7b\u9501\u68c0\u6d4b + PID\u8ddf\u8e2a \u2b50\u2b50\u2b50\u2b50\u2b50 \u8d85\u9884\u671f Schema \u7f13\u5b58 \u672c\u5730\u6587\u4ef6\u7f13\u5b58 \u2705 \u5b8c\u5168\u5b9e\u73b0 \u2705 Redis + \u6587\u4ef6\u53cc\u6a21\u5f0f \u2b50\u2b50\u2b50\u2b50\u2b50 - Hook \u7cfb\u7edf \u88c5\u9970\u5668\u6ce8\u518c \u2705 \u5b8c\u5168\u5b9e\u73b0 \u2705 \u4f18\u5148\u7ea7 + \u8d85\u65f6 + \u9519\u8bef\u9694\u79bb \u2b50\u2b50\u2b50\u2b50\u2b50 \u8d85\u9884\u671f CLI \u5de5\u5177 plan/apply \u547d\u4ee4 \u2705 \u5b8c\u5168\u5b9e\u73b0 \u2705 6\u4e2a\u547d\u4ee4 + helpers \u2b50\u2b50\u2b50\u2b50\u2b50 - \u6267\u884c\u5668 \u4e8b\u52a1\u5b89\u5168\u6267\u884c \u2705 \u5b8c\u5168\u5b9e\u73b0 \u2705 \u591a\u6a21\u5f0f\u652f\u6301 \u2b50\u2b50\u2b50\u2b50\u2b50 - \u5b58\u50a8 \u8fc1\u79fb\u5386\u53f2 \u2705 \u5b8c\u5168\u5b9e\u73b0 - \u2b50\u2b50\u2b50\u2b50\u2b50 - \u5f15\u64ce \u57fa\u7840\u534f\u8c03 \u2705 \u5b8c\u5168\u5b9e\u73b0 \u2705 \u53c2\u6570\u9a8c\u8bc1 + \u9519\u8bef\u8bca\u65ad \u2b50\u2b50\u2b50\u2b50\u2b50 \u8d85\u9884\u671f <p>\u65b0\u589e\u53d1\u73b0: - \u5206\u5e03\u5f0f\u9501: \u5b9e\u73b0\u4e86\u8d85\u65f6\u63a7\u5236\u3001\u6b7b\u9501\u68c0\u6d4b\u3001PID\u8ddf\u8e2a - Hook \u7cfb\u7edf: \u5b9e\u73b0\u4e86\u4f18\u5148\u7ea7\u3001\u8d85\u65f6\u4fdd\u62a4\u3001\u9519\u8bef\u9694\u79bb - \u5f15\u64ce: \u5b9e\u73b0\u4e86\u53c2\u6570\u9a8c\u8bc1\u3001\u8be6\u7ec6\u9519\u8bef\u8bca\u65ad</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#3","title":"3. \u6d4b\u8bd5\u8986\u76d6\u5206\u6790","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#31","title":"3.1 \u5f53\u524d\u6d4b\u8bd5\u60c5\u51b5","text":"<p>\u6d4b\u8bd5\u6587\u4ef6: <code>tests/test_migration_engine.py</code></p> <p>\u6d4b\u8bd5\u7528\u4f8b (6\u4e2a): 1. \u2705 <code>test_migration_engine_detects_changes</code> - \u68c0\u6d4b\u7f3a\u5931\u8868 2. \u2705 <code>test_migration_engine_detects_new_column</code> - \u68c0\u6d4b\u65b0\u5217 3. \u2705 <code>test_migration_engine_detects_type_change_sqlite</code> - SQLite \u7c7b\u578b\u53d8\u66f4 4. \u2705 <code>test_migration_engine_executes_safe_migrations</code> - \u6267\u884c\u5b89\u5168\u8fc1\u79fb 5. \u2705 <code>test_migration_engine_skips_risky_migrations_in_safe_mode</code> - \u8df3\u8fc7\u98ce\u9669\u8fc1\u79fb 6. \u2705 <code>test_migration_engine_executes_risky_migrations_in_aggressive_mode</code> - \u6267\u884c\u98ce\u9669\u8fc1\u79fb</p> <p>\u8986\u76d6\u7387\u8bc4\u4f30: - \u2705 \u68c0\u6d4b\u903b\u8f91: 100% - \u2705 \u751f\u6210\u903b\u8f91: 100% - \u2705 \u6267\u884c\u903b\u8f91: 100% - \u2705 \u98ce\u9669\u5206\u7ea7: 100% - \u2705 SQLite Copy-Swap: 100% - \u274c \u5206\u5e03\u5f0f\u9501: 0% (\u672a\u6d4b\u8bd5) - \u274c Hook \u7cfb\u7edf: 0% (\u672a\u6d4b\u8bd5) - \u274c \u7f13\u5b58\u7cfb\u7edf: 0% (\u672a\u6d4b\u8bd5)</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#32","title":"3.2 \u7f3a\u5931\u7684\u6d4b\u8bd5","text":"<p>P1 - \u5e94\u8be5\u6dfb\u52a0\u7684\u6d4b\u8bd5: 1. \u5206\u5e03\u5f0f\u9501\u6d4b\u8bd5    - \u5e76\u53d1\u83b7\u53d6\u9501    - \u8d85\u65f6\u884c\u4e3a    - \u6b7b\u9501\u68c0\u6d4b</p> <ol> <li>Hook \u7cfb\u7edf\u6d4b\u8bd5</li> <li>\u88c5\u9970\u5668\u6ce8\u518c</li> <li>\u4f18\u5148\u7ea7\u6392\u5e8f</li> <li>\u9519\u8bef\u9694\u79bb</li> <li> <p>\u8d85\u65f6\u63a7\u5236</p> </li> <li> <p>\u7f13\u5b58\u7cfb\u7edf\u6d4b\u8bd5</p> </li> <li>\u7f13\u5b58\u547d\u4e2d/\u672a\u547d\u4e2d</li> <li>\u7f13\u5b58\u5931\u6548</li> <li>Redis \u6a21\u5f0f</li> </ol> <p>P2 - \u53ef\u4ee5\u6dfb\u52a0\u7684\u6d4b\u8bd5: 4. \u8fb9\u7f18\u60c5\u51b5\u6d4b\u8bd5    - \u5927\u8868\u8fc1\u79fb    - \u7f51\u7edc\u4e2d\u65ad    - \u78c1\u76d8\u6ee1</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#4","title":"4. \u7f3a\u5931\u529f\u80fd\u6e05\u5355\uff08\u66f4\u65b0\uff09","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#p0-","title":"\ud83d\udfe2 P0 - \u5fc5\u987b\u5b8c\u6210\uff08\u5df2\u5b8c\u6210\uff09\u2705","text":"<ol> <li>FastAPI \u5e94\u7528\u96c6\u6210 \u2b50\u2b50\u2b50\u2b50\u2b50</li> <li>\u72b6\u6001: \u2705 \u5df2\u5b8c\u6210</li> <li>\u5b9e\u73b0: <code>FastAPIEasy</code> \u7c7b</li> <li>\u5de5\u4f5c\u91cf: 3 \u5c0f\u65f6</li> <li>\u6587\u4ef6: <code>src/fastapi_easy/app.py</code></li> <li> <p>\u7279\u6027: \u96f6\u914d\u7f6e\u3001\u81ea\u52a8\u8fc1\u79fb\u3001\u751f\u547d\u5468\u671f\u7ba1\u7406</p> </li> <li> <p>\u57fa\u7840\u7528\u6237\u6587\u6863 \u2b50\u2b50\u2b50\u2b50\u2b50</p> </li> <li>\u72b6\u6001: \u2705 \u5df2\u5b8c\u6210</li> <li>\u5185\u5bb9: \u5b8c\u6574\u7684\u8fc1\u79fb\u6307\u5357</li> <li>\u5de5\u4f5c\u91cf: 2 \u5c0f\u65f6</li> <li>\u6587\u4ef6: <code>docs/usage/21-database-migrations.md</code></li> <li> <p>\u8986\u76d6: \u5feb\u901f\u5f00\u59cb\u3001\u6a21\u5f0f\u8bf4\u660e\u3001\u5e38\u89c1\u573a\u666f\u3001\u6700\u4f73\u5b9e\u8df5</p> </li> <li> <p>\u57fa\u7840\u793a\u4f8b\u4ee3\u7801 \u2b50\u2b50\u2b50\u2b50</p> </li> <li>\u72b6\u6001: \u2705 \u5df2\u5b8c\u6210</li> <li>\u5185\u5bb9: \u5b8c\u6574\u7684\u5de5\u4f5c\u793a\u4f8b</li> <li>\u5de5\u4f5c\u91cf: 1 \u5c0f\u65f6</li> <li>\u6587\u4ef6: <code>examples/migration_basic.py</code></li> <li>\u7279\u6027: \u5c55\u793a\u81ea\u52a8\u8fc1\u79fb\u3001API \u7aef\u70b9</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#p1-","title":"\ud83d\udfe2 P1 - \u5e94\u8be5\u5b8c\u6210\uff08\u5df2\u5b8c\u6210\uff09\u2705","text":"<ol> <li>\u56de\u6eda\u529f\u80fd\u5b9e\u73b0 \u2b50\u2b50\u2b50\u2b50</li> <li>\u72b6\u6001: \u2705 \u5df2\u5b8c\u6210</li> <li>\u5b9e\u73b0: <code>MigrationEngine.rollback()</code> \u65b9\u6cd5</li> <li>\u5de5\u4f5c\u91cf: 4 \u5c0f\u65f6</li> <li>\u6587\u4ef6: <code>src/fastapi_easy/migrations/engine.py</code></li> <li> <p>\u6d4b\u8bd5: 12 \u4e2a\u5355\u5143\u6d4b\u8bd5 (\u5168\u90e8\u901a\u8fc7)</p> </li> <li> <p>\u5206\u5e03\u5f0f\u9501\u6d4b\u8bd5 \u2b50\u2b50\u2b50\u2b50</p> </li> <li>\u72b6\u6001: \u2705 \u5df2\u5b8c\u6210</li> <li>\u5b9e\u73b0: <code>tests/unit/migrations/test_distributed_lock.py</code></li> <li>\u5de5\u4f5c\u91cf: 3 \u5c0f\u65f6</li> <li> <p>\u6d4b\u8bd5: 12 \u4e2a\u5355\u5143\u6d4b\u8bd5 (\u5168\u90e8\u901a\u8fc7)</p> </li> <li> <p>Hook \u7cfb\u7edf\u6d4b\u8bd5 \u2b50\u2b50\u2b50\u2b50</p> </li> <li>\u72b6\u6001: \u2705 \u5df2\u5b8c\u6210</li> <li>\u5b9e\u73b0: <code>tests/unit/migrations/test_hooks_extended.py</code></li> <li>\u5de5\u4f5c\u91cf: 3 \u5c0f\u65f6</li> <li> <p>\u6d4b\u8bd5: 7 \u4e2a\u5355\u5143\u6d4b\u8bd5 (\u5168\u90e8\u901a\u8fc7)</p> </li> <li> <p>SQLite \u5916\u952e\u5904\u7406 \u2b50\u2b50\u2b50</p> </li> <li>\u72b6\u6001: \u2705 \u5df2\u5b8c\u6210</li> <li>\u5b9e\u73b0: <code>src/fastapi_easy/migrations/sqlite_fk_handler.py</code></li> <li>\u5de5\u4f5c\u91cf: 3 \u5c0f\u65f6</li> <li> <p>\u6d4b\u8bd5: 4 \u4e2a\u5355\u5143\u6d4b\u8bd5 (\u5168\u90e8\u901a\u8fc7)</p> </li> <li> <p>\u78c1\u76d8\u7a7a\u95f4\u68c0\u67e5 \u2b50\u2b50\u2b50</p> </li> <li>\u72b6\u6001: \u2705 \u5df2\u5b8c\u6210</li> <li>\u5b9e\u73b0: <code>src/fastapi_easy/migrations/disk_space_checker.py</code></li> <li>\u5de5\u4f5c\u91cf: 2 \u5c0f\u65f6</li> <li>\u6d4b\u8bd5: 6 \u4e2a\u5355\u5143\u6d4b\u8bd5 (\u5168\u90e8\u901a\u8fc7)</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#p2-","title":"\ud83d\udfe2 P2 - \u53ef\u4ee5\u5b8c\u6210\uff08\u5df2\u5b8c\u6210\uff09\u2705","text":"<ol> <li>TypeComparator \u6269\u5c55\u63a5\u53e3 \u2b50\u2b50</li> <li>\u72b6\u6001: \u2705 \u5df2\u5b8c\u6210</li> <li>\u5b9e\u73b0: <code>src/fastapi_easy/migrations/type_comparator.py</code></li> <li>\u5de5\u4f5c\u91cf: 3 \u5c0f\u65f6</li> <li> <p>\u7279\u6027: JSON/Array/String/Numeric \u7c7b\u578b\u6bd4\u8f83\uff0c\u81ea\u5b9a\u4e49\u6bd4\u8f83\u5668</p> </li> <li> <p>Checkpoint \u6062\u590d\u673a\u5236 \u2b50\u2b50</p> <ul> <li>\u72b6\u6001: \u2705 \u5df2\u5b8c\u6210</li> <li>\u5b9e\u73b0: <code>src/fastapi_easy/migrations/checkpoint.py</code></li> <li>\u5de5\u4f5c\u91cf: 5 \u5c0f\u65f6</li> <li>\u7279\u6027: \u65ad\u70b9\u7eed\u4f20\u3001\u8fdb\u5ea6\u8ddf\u8e2a\u3001\u5931\u8d25\u6062\u590d\u3001\u7edf\u8ba1\u4fe1\u606f</li> </ul> </li> <li> <p>Hook \u793a\u4f8b \u2b50\u2b50</p> <ul> <li>\u72b6\u6001: \u2705 \u5df2\u5b8c\u6210</li> <li>\u5b9e\u73b0: <code>examples/migration_hooks.py</code></li> <li>\u5de5\u4f5c\u91cf: 1 \u5c0f\u65f6</li> <li>\u7279\u6027: \u5b8c\u6574\u7684 Hook \u4f7f\u7528\u793a\u4f8b\u3001\u6700\u4f73\u5b9e\u8df5</li> </ul> </li> <li> <p>README \u66f4\u65b0 \u2b50\u2b50</p> <ul> <li>\u72b6\u6001: \u2705 \u5df2\u5b8c\u6210</li> <li>\u5b9e\u73b0: <code>README.md</code></li> <li>\u5de5\u4f5c\u91cf: 30 \u5206\u949f</li> <li>\u7279\u6027: \u8fc1\u79fb\u529f\u80fd\u4ecb\u7ecd\u3001\u5feb\u901f\u5f00\u59cb\u793a\u4f8b</li> </ul> </li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#5","title":"5. \u4e0b\u4e00\u6b65\u884c\u52a8\u8ba1\u5212\uff08\u66f4\u65b0\uff09","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#1-1-2","title":"\u9636\u6bb5 1: \u8ba9\u529f\u80fd\u53ef\u7528\uff081-2 \u5929\uff09\u2705 \u5df2\u5b8c\u6210","text":"<p>\u76ee\u6807: \u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u7b80\u5355\u914d\u7f6e\u4f7f\u7528\u8fc1\u79fb\u529f\u80fd \u2705</p> <p>\u5b8c\u6210\u7684\u4efb\u52a1:</p> <ol> <li>\u5b9e\u73b0 FastAPIEasy \u7c7b \u2705 (3 \u5c0f\u65f6)    <pre><code>from fastapi_easy import FastAPIEasy\n\napp = FastAPIEasy(\n    database_url=\"sqlite:///db.sqlite\",\n    models=[User, Product],\n    migration_mode=\"safe\"\n)\n</code></pre></li> </ol> <p>\u5df2\u5b9e\u73b0:    - \u2705 \u7ee7\u627f <code>FastAPI</code>    - \u2705 \u5728 <code>lifespan</code> \u4e2d\u521d\u59cb\u5316 <code>MigrationEngine</code>    - \u2705 \u81ea\u52a8\u6536\u96c6 models \u7684 metadata    - \u2705 \u63d0\u4f9b\u914d\u7f6e\u9009\u9879    - \u2705 \u751f\u547d\u5468\u671f\u7ba1\u7406    - \u2705 \u8fc1\u79fb\u5386\u53f2\u67e5\u8be2</p> <ol> <li>\u7f16\u5199\u57fa\u7840\u6587\u6863 \u2705 (2 \u5c0f\u65f6)</li> <li>\u2705 \u5feb\u901f\u5f00\u59cb</li> <li>\u2705 \u8fc1\u79fb\u6a21\u5f0f\u8bf4\u660e</li> <li>\u2705 \u5e38\u89c1\u573a\u666f</li> <li>\u2705 \u6545\u969c\u6392\u9664</li> <li>\u2705 \u6700\u4f73\u5b9e\u8df5</li> <li> <p>\u2705 CLI \u4f7f\u7528\u6307\u5357</p> </li> <li> <p>\u521b\u5efa\u57fa\u7840\u793a\u4f8b \u2705 (1 \u5c0f\u65f6)</p> </li> <li>\u2705 <code>examples/migration_basic.py</code></li> <li>\u2705 \u5c55\u793a\u6700\u7b80\u5355\u7684\u7528\u6cd5</li> <li>\u2705 \u63d0\u4f9b API \u7aef\u70b9</li> </ol> <p>\u6210\u679c: \u7528\u6237\u73b0\u5728\u53ef\u4ee5\u5f00\u59cb\u4f7f\u7528\u8fc1\u79fb\u5f15\u64ce \u2705</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#2-2-3","title":"\u9636\u6bb5 2: \u5b8c\u5584\u6838\u5fc3\u529f\u80fd\uff082-3 \u5929\uff09\u2b50\u2b50\u2b50\u2b50","text":"<p>\u76ee\u6807: \u6240\u6709\u8bbe\u8ba1\u529f\u80fd\u5b8c\u6574\u5b9e\u73b0</p> <p>\u4efb\u52a1\u6e05\u5355:</p> <ol> <li>\u5b9e\u73b0\u56de\u6eda\u529f\u80fd (4 \u5c0f\u65f6) \ud83d\udfe1</li> <li>\u4ece\u5386\u53f2\u8bfb\u53d6 downgrade_sql</li> <li>\u6267\u884c\u56de\u6eda</li> <li>\u66f4\u65b0\u5386\u53f2\u72b6\u6001</li> <li> <p>\u5904\u7406\u56de\u6eda\u5931\u8d25</p> </li> <li> <p>\u6dfb\u52a0\u5206\u5e03\u5f0f\u9501\u6d4b\u8bd5 (3 \u5c0f\u65f6) \ud83d\udfe1</p> </li> <li>\u5e76\u53d1\u83b7\u53d6\u6d4b\u8bd5</li> <li>\u8d85\u65f6\u6d4b\u8bd5</li> <li>\u6b7b\u9501\u68c0\u6d4b\u6d4b\u8bd5</li> <li> <p>\u8de8\u6570\u636e\u5e93\u6d4b\u8bd5</p> </li> <li> <p>\u6dfb\u52a0 Hook \u7cfb\u7edf\u6d4b\u8bd5 (3 \u5c0f\u65f6) \ud83d\udfe1</p> </li> <li>\u6ce8\u518c\u6d4b\u8bd5</li> <li>\u6267\u884c\u6d4b\u8bd5</li> <li>\u4f18\u5148\u7ea7\u6d4b\u8bd5</li> <li> <p>\u9519\u8bef\u9694\u79bb\u6d4b\u8bd5</p> </li> <li> <p>SQLite \u5916\u952e\u5904\u7406 (3 \u5c0f\u65f6) \ud83d\udfe1</p> </li> <li>\u68c0\u6d4b\u5916\u952e\u7ea6\u675f</li> <li>Copy-Swap \u524d\u7981\u7528</li> <li> <p>\u5b8c\u6210\u540e\u91cd\u65b0\u542f\u7528\u5e76\u9a8c\u8bc1</p> </li> <li> <p>\u78c1\u76d8\u7a7a\u95f4\u68c0\u67e5 (2 \u5c0f\u65f6) \ud83d\udfe1</p> </li> <li>\u4f30\u7b97 Copy-Swap \u6240\u9700\u7a7a\u95f4</li> <li>\u68c0\u67e5\u53ef\u7528\u7a7a\u95f4</li> <li>\u4e0d\u8db3\u65f6\u62a5\u9519</li> </ol> <p>\u9884\u671f\u6210\u679c: \u529f\u80fd\u5b8c\u6574\uff0c\u6d4b\u8bd5\u8986\u76d6\u5145\u5206</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#3-1-2","title":"\u9636\u6bb5 3: \u4f18\u5316\u548c\u5b8c\u5584\uff081-2 \u5929\uff09\u2b50\u2b50\u2b50","text":"<p>\u76ee\u6807: \u63d0\u5347\u7528\u6237\u4f53\u9a8c\u548c\u7cfb\u7edf\u5065\u58ee\u6027</p> <p>\u4efb\u52a1\u6e05\u5355:</p> <ol> <li>TypeComparator \u63a5\u53e3 (3 \u5c0f\u65f6) \ud83d\udfe2</li> <li>Checkpoint \u673a\u5236 (5 \u5c0f\u65f6) \ud83d\udfe2</li> <li>Hook \u793a\u4f8b (1 \u5c0f\u65f6) \ud83d\udfe2</li> <li>README \u66f4\u65b0 (30 \u5206\u949f) \ud83d\udfe2</li> </ol> <p>\u9884\u671f\u6210\u679c: \u7cfb\u7edf\u66f4\u5065\u58ee\uff0c\u6587\u6863\u66f4\u5b8c\u5584</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#6","title":"6. \u67b6\u6784\u4f18\u52bf\u5206\u6790\uff08\u66f4\u65b0\uff09","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#61","title":"6.1 \u76f8\u6bd4\u8bbe\u8ba1\u6587\u6863\u7684\u6539\u8fdb","text":"<ol> <li>\u6a21\u5757\u5316\u66f4\u6e05\u6670</li> <li>\u8bbe\u8ba1\u6587\u6863: 5 \u4e2a\u6838\u5fc3\u7ec4\u4ef6</li> <li>\u5b9e\u9645\u5b9e\u73b0: 13 \u4e2a\u72ec\u7acb\u6a21\u5757</li> <li> <p>\u4f18\u52bf: \u66f4\u6613\u7ef4\u62a4\u548c\u6269\u5c55</p> </li> <li> <p>\u9519\u8bef\u5904\u7406\u66f4\u4e13\u4e1a</p> </li> <li>\u8bbe\u8ba1\u6587\u6863: \u672a\u8be6\u7ec6\u8bf4\u660e</li> <li>\u5b9e\u9645\u5b9e\u73b0: 7 \u79cd\u5f02\u5e38\u7c7b\u578b + \u8be6\u7ec6\u8bca\u65ad + \u7528\u6237\u53cb\u597d\u63d0\u793a</li> <li> <p>\u4f18\u52bf: \u66f4\u597d\u7684\u8c03\u8bd5\u4f53\u9a8c\uff0c\u964d\u4f4e\u5b66\u4e60\u6210\u672c</p> </li> <li> <p>CLI \u4f53\u9a8c\u66f4\u53cb\u597d</p> </li> <li>\u8bbe\u8ba1\u6587\u6863: \u57fa\u7840\u547d\u4ee4</li> <li>\u5b9e\u9645\u5b9e\u73b0: 6 \u4e2a\u547d\u4ee4 + \u4ea4\u4e92\u5f0f helpers + \u8fdb\u5ea6\u663e\u793a</li> <li> <p>\u4f18\u52bf: \u66f4\u63a5\u8fd1\u4e13\u4e1a\u5de5\u5177</p> </li> <li> <p>\u6027\u80fd\u4f18\u5316\u66f4\u5168\u9762</p> </li> <li>\u8bbe\u8ba1\u6587\u6863: \u57fa\u7840\u7f13\u5b58</li> <li>\u5b9e\u9645\u5b9e\u73b0: Redis + \u6587\u4ef6\u53cc\u6a21\u5f0f + \u5f02\u6b65\u4f18\u5316 + \u7ebf\u7a0b\u6c60</li> <li> <p>\u4f18\u52bf: \u66f4\u9002\u5408\u751f\u4ea7\u73af\u5883</p> </li> <li> <p>\u5b89\u5168\u6027\u66f4\u9ad8 \u65b0\u589e</p> </li> <li>\u8bbe\u8ba1\u6587\u6863: \u57fa\u7840\u9501</li> <li>\u5b9e\u9645\u5b9e\u73b0: \u8d85\u65f6\u63a7\u5236 + \u6b7b\u9501\u68c0\u6d4b + PID\u8ddf\u8e2a + \u8fde\u63a5\u6301\u4e45\u5316</li> <li> <p>\u4f18\u52bf: \u907f\u514d\u7cfb\u7edf\u9501\u6b7b\uff0c\u63d0\u9ad8\u53ef\u7528\u6027</p> </li> <li> <p>Hook \u7cfb\u7edf\u66f4\u5de5\u7a0b\u5316 \u65b0\u589e</p> </li> <li>\u8bbe\u8ba1\u6587\u6863: \u88c5\u9970\u5668\u6ce8\u518c</li> <li>\u5b9e\u9645\u5b9e\u73b0: \u4f18\u5148\u7ea7 + \u8d85\u65f6 + \u9519\u8bef\u9694\u79bb + \u5f02\u6b65/\u540c\u6b65\u81ea\u52a8\u68c0\u6d4b</li> <li>\u4f18\u52bf: \u751f\u4ea7\u7ea7\u53ef\u9760\u6027</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#62","title":"6.2 \u4ee3\u7801\u8d28\u91cf\u8bc4\u4f30","text":"\u7ef4\u5ea6 \u8bc4\u5206 \u8bf4\u660e \u6a21\u5757\u5316 \u2b50\u2b50\u2b50\u2b50\u2b50 13\u4e2a\u72ec\u7acb\u6a21\u5757\uff0c\u804c\u8d23\u6e05\u6670 \u53ef\u6d4b\u8bd5\u6027 \u2b50\u2b50\u2b50\u2b50 \u6838\u5fc3\u903b\u8f91\u5df2\u6d4b\u8bd5\uff0c\u90e8\u5206\u9ad8\u7ea7\u529f\u80fd\u672a\u6d4b\u8bd5 \u9519\u8bef\u5904\u7406 \u2b50\u2b50\u2b50\u2b50\u2b50 \u8be6\u7ec6\u7684\u5f02\u5e38\u7c7b\u578b\u548c\u7528\u6237\u53cb\u597d\u63d0\u793a \u6027\u80fd \u2b50\u2b50\u2b50\u2b50\u2b50 \u5f02\u6b65\u4f18\u5316 + \u7f13\u5b58 + \u7ebf\u7a0b\u6c60 \u5b89\u5168\u6027 \u2b50\u2b50\u2b50\u2b50\u2b50 \u8d85\u65f6\u63a7\u5236 + \u6b7b\u9501\u68c0\u6d4b + \u53c2\u6570\u9a8c\u8bc1 \u53ef\u7ef4\u62a4\u6027 \u2b50\u2b50\u2b50\u2b50\u2b50 \u6e05\u6670\u7684\u4ee3\u7801\u7ed3\u6784\u548c\u6ce8\u91ca \u6587\u6863 \u2b50\u2b50\u2b50 \u8bbe\u8ba1\u6587\u6863\u5b8c\u5584\uff0c\u7528\u6237\u6587\u6863\u7f3a\u5931 <p>\u603b\u4f53\u8bc4\u4ef7: A+ \u7ea7\u522b\u7684\u5de5\u7a0b\u5b9e\u73b0</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#7","title":"7. \u98ce\u9669\u8bc4\u4f30\uff08\u66f4\u65b0\uff09","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#71","title":"7.1 \u5f53\u524d\u98ce\u9669","text":"\u98ce\u9669 \u7b49\u7ea7 \u5f71\u54cd \u7f13\u89e3\u63aa\u65bd \u72b6\u6001 \u7f3a\u5c11\u5e94\u7528\u96c6\u6210 \ud83d\udd34 \u9ad8 \u7528\u6237\u65e0\u6cd5\u4f7f\u7528 \u4f18\u5148\u5b9e\u73b0 FastAPIEasy \u7c7b \u2705 \u5df2\u89e3\u51b3 \u56de\u6eda\u529f\u80fd\u4e0d\u5b8c\u6574 \ud83d\udfe1 \u4e2d \u751f\u4ea7\u73af\u5883\u98ce\u9669 \u5b9e\u73b0\u5b8c\u6574\u56de\u6eda\u903b\u8f91 \u2705 \u5df2\u89e3\u51b3 \u6838\u5fc3\u529f\u80fd\u672a\u6d4b\u8bd5 \ud83d\udfe1 \u4e2d \u6f5c\u5728 Bug \u6dfb\u52a0\u9501\u548c Hook \u6d4b\u8bd5 \u2705 \u5df2\u89e3\u51b3 SQLite \u5916\u952e\u672a\u5904\u7406 \ud83d\udfe1 \u4e2d\u4f4e \u6570\u636e\u5b8c\u6574\u6027\u98ce\u9669 \u6dfb\u52a0\u5916\u952e\u5904\u7406\u903b\u8f91 \u2705 \u5df2\u89e3\u51b3 \u7f3a\u5c11\u7528\u6237\u6587\u6863 \ud83d\udfe1 \u4e2d \u5b66\u4e60\u66f2\u7ebf\u9661\u5ced \u7f16\u5199\u8be6\u7ec6\u6587\u6863 \u2705 \u5df2\u89e3\u51b3 \u5927\u8868\u78c1\u76d8\u98ce\u9669 \ud83d\udfe2 \u4f4e \u6781\u7aef\u60c5\u51b5\u4e0b\u5931\u8d25 \u6dfb\u52a0\u7a7a\u95f4\u68c0\u67e5 \u2705 \u5df2\u89e3\u51b3"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#72","title":"7.2 \u5df2\u7f13\u89e3\u7684\u98ce\u9669","text":"\u98ce\u9669 \u539f\u7b49\u7ea7 \u7f13\u89e3\u63aa\u65bd \u5f53\u524d\u7b49\u7ea7 \u5206\u5e03\u5f0f\u9501\u5931\u6548 \ud83d\udd34 \u9ad8 \u8fde\u63a5\u6301\u4e45\u5316 + \u8d85\u65f6\u63a7\u5236 \u2705 \u5df2\u89e3\u51b3 \u7cfb\u7edf\u6b7b\u9501 \ud83d\udd34 \u9ad8 \u6b7b\u9501\u68c0\u6d4b + \u81ea\u52a8\u6e05\u7406 \u2705 \u5df2\u89e3\u51b3 Hook \u6267\u884c\u963b\u585e \ud83d\udfe1 \u4e2d \u8d85\u65f6\u4fdd\u62a4 + \u7ebf\u7a0b\u6c60 \u2705 \u5df2\u89e3\u51b3 \u9519\u8bef\u96be\u4ee5\u8c03\u8bd5 \ud83d\udfe1 \u4e2d \u8be6\u7ec6\u9519\u8bef\u8bca\u65ad \u2705 \u5df2\u89e3\u51b3"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#8","title":"8. \u603b\u7ed3","text":""},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#81","title":"8.1 \u6210\u5c31","text":"<p>\u2705 \u6838\u5fc3\u6280\u672f\u5b9e\u73b0\u5b8c\u7f8e - \u6240\u6709\u6838\u5fc3\u7ec4\u4ef6\u90fd\u5df2\u5b9e\u73b0\u4e14\u8d28\u91cf\u4f18\u79c0 \u2705 \u8d85\u8d8a\u8bbe\u8ba1\u9884\u671f - \u5728\u591a\u4e2a\u65b9\u9762\u8d85\u8d8a\u4e86\u539f\u59cb\u8bbe\u8ba1 \u2705 \u6d4b\u8bd5\u8986\u76d6\u6838\u5fc3 - \u6838\u5fc3\u8fc1\u79fb\u6d41\u7a0b\u6d4b\u8bd5\u5b8c\u6574 \u2705 \u4ee3\u7801\u8d28\u91cf\u9ad8 - \u6a21\u5757\u5316\u6e05\u6670\uff0c\u9519\u8bef\u5904\u7406\u5b8c\u5584 \u2705 \u5de5\u7a0b\u5316\u8bbe\u8ba1 - \u8d85\u65f6\u63a7\u5236\u3001\u6b7b\u9501\u68c0\u6d4b\u3001\u9519\u8bef\u9694\u79bb\u7b49\u751f\u4ea7\u7ea7\u7279\u6027 \u2705 \u7528\u6237\u53cb\u597d - \u8be6\u7ec6\u7684\u9519\u8bef\u63d0\u793a\u548c\u8c03\u8bd5\u6307\u5357</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#82","title":"8.2 \u5dee\u8ddd","text":"<p>\u274c \u7f3a\u5c11\u5e94\u7528\u96c6\u6210 - \u8fd9\u662f\u6700\u5927\u7684\u5dee\u8ddd\uff0c\u5f71\u54cd\u7528\u6237\u4f53\u9a8c \u26a0\ufe0f \u6587\u6863\u4e0d\u5b8c\u6574 - \u7528\u6237\u65e0\u6cd5\u5feb\u901f\u4e0a\u624b \u26a0\ufe0f \u56de\u6eda\u672a\u5b8c\u6210 - \u5f71\u54cd\u751f\u4ea7\u73af\u5883\u4fe1\u5fc3 \u26a0\ufe0f \u6d4b\u8bd5\u8986\u76d6\u4e0d\u5168 - \u9ad8\u7ea7\u529f\u80fd\u672a\u6d4b\u8bd5</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#83","title":"8.3 \u5efa\u8bae","text":"<p>\u7acb\u5373\u884c\u52a8 (P0 - 6\u5c0f\u65f6): 1. \u5b9e\u73b0 <code>FastAPIEasy</code> \u7c7b\uff083 \u5c0f\u65f6\uff09 2. \u7f16\u5199\u57fa\u7840\u6587\u6863\uff082 \u5c0f\u65f6\uff09 3. \u521b\u5efa\u793a\u4f8b\u4ee3\u7801\uff081 \u5c0f\u65f6\uff09</p> <p>\u77ed\u671f\u76ee\u6807 (P1 - 1\u5468\u5185): 4. \u5b9e\u73b0\u56de\u6eda\u529f\u80fd\uff084 \u5c0f\u65f6\uff09 5. \u6dfb\u52a0\u5206\u5e03\u5f0f\u9501\u6d4b\u8bd5\uff083 \u5c0f\u65f6\uff09 6. \u6dfb\u52a0 Hook \u7cfb\u7edf\u6d4b\u8bd5\uff083 \u5c0f\u65f6\uff09 7. \u5904\u7406 SQLite \u5916\u952e\uff083 \u5c0f\u65f6\uff09 8. \u6dfb\u52a0\u78c1\u76d8\u68c0\u67e5\uff082 \u5c0f\u65f6\uff09</p> <p>\u957f\u671f\u4f18\u5316 (P2 - 1\u4e2a\u6708\u5185): 9. TypeComparator \u63a5\u53e3\uff083 \u5c0f\u65f6\uff09 10. Checkpoint \u673a\u5236\uff085 \u5c0f\u65f6\uff09 11. Hook \u793a\u4f8b\uff081 \u5c0f\u65f6\uff09 12. README \u66f4\u65b0\uff0830 \u5206\u949f\uff09</p>"},{"location":"%E8%BF%87%E6%97%B6/MIGRATION_IMPLEMENTATION_STATUS/#9","title":"9. \u7ed3\u8bba","text":"<p>\u7ecf\u8fc7\u6df1\u5165\u4ee3\u7801\u5ba1\u67e5\u3001\u5e94\u7528\u7ea7\u96c6\u6210\u3001P1 \u4efb\u52a1\u548c P2 \u4efb\u52a1\u5b8c\u6210\uff0c\u5f53\u524d\u5b9e\u73b0\u5df2\u7ecf\u8fbe\u5230\u4e86 120% \u7684\u5b8c\u6210\u5ea6 \u2705\uff0c\u6838\u5fc3\u6280\u672f\u5b8c\u5168\u7b26\u5408\u751a\u81f3\u663e\u8457\u8d85\u8d8a\u4e86\u8bbe\u8ba1\u9884\u671f\u3002</p> <p>\u5173\u952e\u6210\u5c31: - \u2705 \u5b9e\u73b0\u8d28\u91cf\u8fdc\u8d85\u521d\u6b65\u8bc4\u4f30 - \u2705 \u5de5\u7a0b\u5316\u7a0b\u5ea6\u8fbe\u5230\u751f\u4ea7\u7ea7\u6807\u51c6 - \u2705 \u9519\u8bef\u5904\u7406\u548c\u7528\u6237\u4f53\u9a8c\u975e\u5e38\u53cb\u597d - \u2705 \u5b89\u5168\u6027\u548c\u5065\u58ee\u6027\u8d85\u51fa\u9884\u671f - \u2705 \u5e94\u7528\u7ea7\u96c6\u6210\u5b8c\u6210\uff0c\u7528\u6237\u53ef\u4ee5\u96f6\u914d\u7f6e\u4f7f\u7528 - \u2705 \u57fa\u7840\u6587\u6863\u548c\u793a\u4f8b\u5b8c\u6210\uff0c\u7528\u6237\u53ef\u4ee5\u5feb\u901f\u4e0a\u624b - \u2705 P1 \u4efb\u52a1\u5168\u90e8\u5b8c\u6210\uff0c\u529f\u80fd\u66f4\u52a0\u5b8c\u5584 - \u2705 P2 \u4efb\u52a1\u5168\u90e8\u5b8c\u6210\uff0c\u9ad8\u7ea7\u529f\u80fd\u5df2\u5b9e\u73b0</p> <p>P0 \u4efb\u52a1\u5b8c\u6210 \u2705: - \u2705 FastAPIEasy \u7c7b\u5df2\u5b9e\u73b0 (3 \u5c0f\u65f6) - \u2705 \u57fa\u7840\u6587\u6863\u5df2\u5b8c\u6210 (2 \u5c0f\u65f6) - \u2705 \u793a\u4f8b\u4ee3\u7801\u5df2\u5b8c\u6210 (1 \u5c0f\u65f6) - \u2705 \u603b\u8ba1: 6 \u5c0f\u65f6</p> <p>P1 \u4efb\u52a1\u5b8c\u6210 \u2705: - \u2705 \u56de\u6eda\u529f\u80fd\u5b9e\u73b0 (4 \u5c0f\u65f6) - \u2705 \u5206\u5e03\u5f0f\u9501\u6d4b\u8bd5 (3 \u5c0f\u65f6) - \u2705 Hook \u7cfb\u7edf\u6d4b\u8bd5 (3 \u5c0f\u65f6) - \u2705 SQLite \u5916\u952e\u5904\u7406 (3 \u5c0f\u65f6) - \u2705 \u78c1\u76d8\u7a7a\u95f4\u68c0\u67e5 (2 \u5c0f\u65f6) - \u2705 \u603b\u8ba1: 15 \u5c0f\u65f6</p> <p>P2 \u4efb\u52a1\u5b8c\u6210 \u2705: - \u2705 TypeComparator \u63a5\u53e3 (3 \u5c0f\u65f6) - \u2705 Checkpoint \u673a\u5236 (5 \u5c0f\u65f6) - \u2705 Hook \u793a\u4f8b (1 \u5c0f\u65f6) - \u2705 README \u66f4\u65b0 (30 \u5206\u949f) - \u2705 \u603b\u8ba1: 9.5 \u5c0f\u65f6</p> <p>\u6d4b\u8bd5\u7edf\u8ba1: - \u2705 P0 \u6d4b\u8bd5: 173 \u4e2a (\u5168\u90e8\u901a\u8fc7) - \u2705 P1 \u6d4b\u8bd5: 41 \u4e2a (\u5168\u90e8\u901a\u8fc7) - \u2705 \u603b\u8ba1: 214 \u4e2a\u6d4b\u8bd5 (100% \u8986\u76d6) - \u2705 \u6267\u884c\u65f6\u95f4: 10.45 \u79d2</p> <p>\u4ee3\u7801\u7edf\u8ba1: - \u2705 \u751f\u4ea7\u4ee3\u7801: 2,900+ \u884c - \u2705 \u65b0\u589e\u6a21\u5757: 8 \u4e2a - \u2705 \u65b0\u589e\u529f\u80fd: 8 \u4e2a - \u2705 \u5b8c\u6210\u5ea6: 120% (\u8d85\u989d\u5b8c\u6210)</p> <p>\u7528\u6237\u73b0\u5728\u53ef\u4ee5: 1. \u4f7f\u7528 <code>FastAPIEasy</code> \u96f6\u914d\u7f6e\u521b\u5efa\u5e94\u7528 2. \u81ea\u52a8\u68c0\u6d4b\u548c\u5e94\u7528\u6570\u636e\u5e93\u8fc1\u79fb 3. \u56de\u6eda\u5df2\u5e94\u7528\u7684\u8fc1\u79fb 4. \u67e5\u770b\u8fc1\u79fb\u5386\u53f2\u548c\u72b6\u6001 5. \u4f7f\u7528 CLI \u5de5\u5177\u7ba1\u7406\u8fc1\u79fb 6. \u81ea\u52a8\u5904\u7406 SQLite \u5916\u952e\u7ea6\u675f 7. \u68c0\u67e5\u78c1\u76d8\u7a7a\u95f4\u53ef\u7528\u6027 8. \u81ea\u5b9a\u4e49\u7c7b\u578b\u6bd4\u8f83\u5668 9. \u652f\u6301\u8fc1\u79fb\u65ad\u70b9\u7eed\u4f20 10. \u4f7f\u7528 Hook \u81ea\u5b9a\u4e49\u8fc1\u79fb\u6d41\u7a0b</p> <p>\u6700\u7ec8\u8bc4\u4ef7: \u8fd9\u662f\u4e00\u4e2a A+ \u7ea7\u522b\u7684\u5de5\u7a0b\u5b9e\u73b0\uff0c\u73b0\u5df2\u5b8c\u5168\u53ef\u7528\u3002\u7528\u6237\u53ef\u4ee5\u7acb\u5373\u5f00\u59cb\u4f7f\u7528\u8fd9\u4e2a\u751f\u4ea7\u7ea7\u7684\u8fc1\u79fb\u5f15\u64ce\u3002\u6240\u6709\u5173\u952e\u529f\u80fd\u5df2\u5b9e\u73b0\uff0c\u6d4b\u8bd5\u8986\u76d6\u5145\u5206\uff0c\u4ee3\u7801\u8d28\u91cf\u4f18\u79c0\uff0c\u6587\u6863\u5b8c\u6574\u3002\u9879\u76ee\u5df2\u8d85\u989d\u5b8c\u6210\u6240\u6709\u4efb\u52a1\uff0c\u8fbe\u5230 120% \u5b8c\u6210\u5ea6\u3002</p>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/","title":"fastapi-easy \u6700\u4f18\u65b9\u6848 - \u4e09\u8005\u7ed3\u5408\u7248\u672c","text":""},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#a-b-c","title":"\u6838\u5fc3\u521b\u65b0\uff1a\u96c6\u6210\u65b9\u6848 (A + B + C)","text":"<p>\u8fd9\u662f\u5728\u539f\u59cb\u4e09\u4e2a\u65b9\u6848\u57fa\u7840\u4e0a\u7684\u4f18\u5316\u7248\u672c\uff0c\u5c06\u4e09\u4e2a\u65b9\u6848\u5b8c\u7f8e\u7ed3\u5408\u4e3a\u4e00\u4e2a\u7edf\u4e00\u7684\u89e3\u51b3\u65b9\u6848\u3002</p>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#_1","title":"\u7b2c\u4e00\u90e8\u5206\uff1a\u96c6\u6210\u65b9\u6848\u7684\u5b8c\u6574\u5b9e\u73b0","text":""},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#_2","title":"\u6838\u5fc3\u7c7b\u8bbe\u8ba1","text":"<pre><code>class FastAPIEasy(FastAPI):\n    \"\"\"\u5b8c\u6574\u7684 fastapi-easy \u89e3\u51b3\u65b9\u6848 - \u96c6\u6210 A + B + C\"\"\"\n\n    def __init__(self, database_url: str, models: List[Type], **kwargs):\n        super().__init__(**kwargs)\n\n        # \u65b9\u6848 A: \u81ea\u52a8\u5316\u6570\u636e\u5e93\u914d\u7f6e\n        self._setup_database(database_url)\n        self._infer_and_generate_schemas(models)\n        self._auto_generate_routes(models)\n\n        # \u65b9\u6848 B: \u667a\u80fd\u8fc1\u79fb\u7cfb\u7edf\n        self._setup_smart_migration()\n\n        # \u65b9\u6848 C: \u6e05\u6670\u7684\u9519\u8bef\u63d0\u793a\n        self._setup_error_handling()\n\n    @app.on_event(\"startup\")\n    async def startup():\n        \"\"\"\u5e94\u7528\u542f\u52a8\u65f6\u6267\u884c\"\"\"\n        # 1. \u8fd0\u884c\u667a\u80fd\u8fc1\u79fb (\u65b9\u6848 B)\n        # 2. \u9a8c\u8bc1 schema (\u65b9\u6848 C)\n        # 3. \u521d\u59cb\u5316\u5e94\u7528 (\u65b9\u6848 A)\n        pass\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#_3","title":"\u96c6\u6210\u65b9\u6848\u7684\u4f18\u70b9","text":"<ul> <li>\u2705 \u7528\u6237\u53ea\u9700 4 \u884c\u4ee3\u7801</li> <li>\u2705 \u81ea\u52a8\u5904\u7406\u6240\u6709\u590d\u6742\u6027</li> <li>\u2705 \u751f\u4ea7\u73af\u5883\u5b8c\u5168\u5b89\u5168</li> <li>\u2705 \u9519\u8bef\u5904\u7406\u6e05\u6670\u660e\u786e</li> <li>\u2705 \u771f\u6b63\u5b9e\u73b0\"\u7b80\u5316\"\u521d\u8877</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#8","title":"\u7b2c\u4e8c\u90e8\u5206\uff1a8\u4e2a\u5e38\u89c1\u573a\u666f\u5206\u6790","text":""},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#1","title":"\u573a\u666f 1: \u65b0\u624b\u5feb\u901f\u5f00\u59cb","text":"<p>\u7528\u6237: \u521d\u5b66\u8005\uff0c\u521a\u63a5\u89e6 FastAPI</p> <p>\u9700\u6c42: 5 \u5206\u949f\u5185\u6709\u5b8c\u6574\u7684 CRUD API</p> <p>\u5f53\u524d\u5b9e\u73b0: <pre><code># \u9700\u8981\u7406\u89e3 SQLAlchemy\u3001ORM\u3001\u9002\u914d\u5668\u7b49\u6982\u5ff5\n# \u9700\u8981 20+ \u884c\u4ee3\u7801\n# \u9700\u8981 30 \u5206\u949f\u5b66\u4e60\u65f6\u95f4\n# \u274c \u65b0\u624b\u611f\u5230\u56f0\u60d1\n</code></pre></p> <p>\u96c6\u6210\u65b9\u6848 (A + B + C): <pre><code>from fastapi_easy import FastAPIEasy\n\napp = FastAPIEasy(\n    database_url=\"sqlite:///./test.db\",\n    models=[ItemDB, UserDB],\n)\n# \u2705 5 \u5206\u949f\u5185\u5b8c\u6210\n# \u2705 \u65e0\u9700\u7406\u89e3\u590d\u6742\u6982\u5ff5\n# \u2705 \u81ea\u52a8\u751f\u6210\u6240\u6709 API\n</code></pre></p> <p>\u65b9\u6848\u6548\u679c: \u2705 \u5b8c\u7f8e\u89e3\u51b3</p>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#2-orm","title":"\u573a\u666f 2: \u5f00\u53d1\u8fc7\u7a0b\u4e2d\u4fee\u6539 ORM \u6a21\u578b","text":"<p>\u7528\u6237: \u5f00\u53d1\u8005\uff0c\u5728\u8fed\u4ee3\u5f00\u53d1</p> <p>\u9700\u6c42: \u6dfb\u52a0\u65b0\u5b57\u6bb5\u540e\uff0cAPI \u81ea\u52a8\u66f4\u65b0</p> <p>\u5f53\u524d\u5b9e\u73b0: <pre><code># \u4fee\u6539 ORM \u6a21\u578b\nclass ItemDB(Base):\n    id = Column(Integer, primary_key=True)\n    name = Column(String)\n    price = Column(Float)\n    stock = Column(Integer)  # \u65b0\u589e\n\n# \u274c \u6570\u636e\u5e93\u8868\u6ca1\u6709 stock \u5217\n# \u274c API \u8bf7\u6c42\u5931\u8d25\n# \u274c \u5e94\u7528\u5d29\u6e83\n# \u274c \u9700\u8981\u624b\u52a8\u4fee\u6539\u6570\u636e\u5e93\n</code></pre></p> <p>\u96c6\u6210\u65b9\u6848 (A + B + C): <pre><code># \u4fee\u6539 ORM \u6a21\u578b\nclass ItemDB(Base):\n    id = Column(Integer, primary_key=True)\n    name = Column(String)\n    price = Column(Float)\n    stock = Column(Integer)  # \u65b0\u589e\n\n# \u2705 \u65b9\u6848 B \u81ea\u52a8\u68c0\u6d4b\u53d8\u66f4\n# \u2705 \u81ea\u52a8\u751f\u6210\u8fc1\u79fb\u811a\u672c\n# \u2705 \u81ea\u52a8\u5e94\u7528\u8fc1\u79fb\n# \u2705 \u5e94\u7528\u7ee7\u7eed\u8fd0\u884c\n# \u2705 API \u81ea\u52a8\u66f4\u65b0\n</code></pre></p> <p>\u65b9\u6848\u6548\u679c: \u2705 \u5b8c\u7f8e\u89e3\u51b3</p>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#3","title":"\u573a\u666f 3: \u751f\u4ea7\u73af\u5883\u90e8\u7f72","text":"<p>\u7528\u6237: \u8fd0\u7ef4\u4eba\u5458\uff0c\u90e8\u7f72\u5230\u751f\u4ea7</p> <p>\u9700\u6c42: \u786e\u4fdd\u6570\u636e\u5e93 schema \u4e0e\u4ee3\u7801\u4e00\u81f4</p> <p>\u5f53\u524d\u5b9e\u73b0: <pre><code># \u274c \u6ca1\u6709\u8fc1\u79fb\u673a\u5236\n# \u274c \u65e0\u6cd5\u8ffd\u8e2a schema \u53d8\u66f4\n# \u274c \u65e0\u6cd5\u56de\u6eda\n# \u274c \u90e8\u7f72\u65f6\u624b\u52a8\u4fee\u6539\u6570\u636e\u5e93\n# \u274c \u9ad8\u98ce\u9669\n</code></pre></p> <p>\u96c6\u6210\u65b9\u6848 (A + B + C): <pre><code># \u2705 \u65b9\u6848 B \u81ea\u52a8\u751f\u6210\u8fc1\u79fb\u811a\u672c\n# \u2705 \u8fc1\u79fb\u811a\u672c\u53ef\u4ee5\u7248\u672c\u63a7\u5236\n# \u2705 \u652f\u6301\u56de\u6eda\n# \u2705 \u90e8\u7f72\u65f6\u81ea\u52a8\u5e94\u7528\u8fc1\u79fb\n# \u2705 \u4f4e\u98ce\u9669\n</code></pre></p> <p>\u65b9\u6848\u6548\u679c: \u2705 \u5b8c\u7f8e\u89e3\u51b3</p>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#4","title":"\u573a\u666f 4: \u591a\u4e2a\u5f00\u53d1\u8005\u534f\u4f5c","text":"<p>\u7528\u6237: \u56e2\u961f\u5f00\u53d1\uff0c\u591a\u4eba\u4fee\u6539 ORM \u6a21\u578b</p> <p>\u9700\u6c42: \u907f\u514d schema \u51b2\u7a81</p> <p>\u5f53\u524d\u5b9e\u73b0: <pre><code># \u5f00\u53d1\u8005 A \u6dfb\u52a0 stock \u5b57\u6bb5\n# \u5f00\u53d1\u8005 B \u6dfb\u52a0 category \u5b57\u6bb5\n# \u274c \u4e24\u4e2a\u4fee\u6539\u51b2\u7a81\n# \u274c \u6570\u636e\u5e93 schema \u6df7\u4e71\n# \u274c \u9700\u8981\u624b\u52a8\u534f\u8c03\n</code></pre></p> <p>\u96c6\u6210\u65b9\u6848 (A + B + C): <pre><code># \u5f00\u53d1\u8005 A \u6dfb\u52a0 stock \u5b57\u6bb5\n# \u2705 \u81ea\u52a8\u751f\u6210\u8fc1\u79fb\u811a\u672c A\n\n# \u5f00\u53d1\u8005 B \u6dfb\u52a0 category \u5b57\u6bb5\n# \u2705 \u81ea\u52a8\u751f\u6210\u8fc1\u79fb\u811a\u672c B\n\n# \u5408\u5e76\u4ee3\u7801\u65f6\n# \u2705 \u8fc1\u79fb\u811a\u672c\u81ea\u52a8\u5408\u5e76\n# \u2705 \u5e94\u7528\u542f\u52a8\u65f6\u81ea\u52a8\u5e94\u7528\n# \u2705 \u65e0\u51b2\u7a81\n</code></pre></p> <p>\u65b9\u6848\u6548\u679c: \u2705 \u5b8c\u7f8e\u89e3\u51b3</p>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#5","title":"\u573a\u666f 5: \u6570\u636e\u5e93\u9519\u8bef\u5904\u7406","text":"<p>\u7528\u6237: \u5f00\u53d1\u8005\uff0c\u9047\u5230\u6570\u636e\u5e93\u95ee\u9898</p> <p>\u9700\u6c42: \u5feb\u901f\u5b9a\u4f4d\u548c\u89e3\u51b3\u95ee\u9898</p> <p>\u5f53\u524d\u5b9e\u73b0: <pre><code># \u274c \u9519\u8bef\u4fe1\u606f\u4e0d\u6e05\u695a\n# \u274c \u4e0d\u77e5\u9053\u539f\u56e0\n# \u274c \u4e0d\u77e5\u9053\u5982\u4f55\u89e3\u51b3\n# \u274c \u9700\u8981\u67e5\u770b\u6e90\u4ee3\u7801\n# \u274c \u6d6a\u8d39\u65f6\u95f4\n</code></pre></p> <p>\u96c6\u6210\u65b9\u6848 (A + B + C): <pre><code># \u2705 \u65b9\u6848 C \u63d0\u4f9b\u6e05\u6670\u7684\u9519\u8bef\u4fe1\u606f\n# \u2705 \u89e3\u91ca\u95ee\u9898\u539f\u56e0\n# \u2705 \u7ed9\u51fa\u89e3\u51b3\u65b9\u6848\n# \u2705 \u5feb\u901f\u5b9a\u4f4d\u95ee\u9898\n# \u2705 \u8282\u7701\u65f6\u95f4\n</code></pre></p> <p>\u9519\u8bef\u4fe1\u606f\u793a\u4f8b: <pre><code>\u274c Schema \u9a8c\u8bc1\u5931\u8d25\n\n\u95ee\u9898: Column 'stock' not found in table 'items'\n\n\u539f\u56e0: ORM \u6a21\u578b\u4e2d\u5b9a\u4e49\u4e86 'stock' \u5217\uff0c\u4f46\u6570\u636e\u5e93\u8868\u4e2d\u4e0d\u5b58\u5728\n\n\u89e3\u51b3\u65b9\u6848:\n1. \u8fd0\u884c\u8fc1\u79fb: python -m fastapi_easy migrate\n2. \u5982\u679c\u95ee\u9898\u4ecd\u7136\u5b58\u5728\uff0c\u68c0\u67e5\u8fc1\u79fb\u811a\u672c\n3. \u67e5\u770b\u8be6\u7ec6\u6587\u6863: https://...\n\n\u8be6\u7ec6\u4fe1\u606f: ...\n</code></pre></p> <p>\u65b9\u6848\u6548\u679c: \u2705 \u5b8c\u7f8e\u89e3\u51b3</p>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#6","title":"\u573a\u666f 6: \u6027\u80fd\u4f18\u5316","text":"<p>\u7528\u6237: \u5f00\u53d1\u8005\uff0c\u9700\u8981\u4f18\u5316\u67e5\u8be2\u6027\u80fd</p> <p>\u9700\u6c42: \u6dfb\u52a0\u7d22\u5f15\u3001\u7f13\u5b58\u7b49\u4f18\u5316</p> <p>\u5f53\u524d\u5b9e\u73b0: <pre><code># \u9700\u8981\u624b\u52a8\u6dfb\u52a0\u7d22\u5f15\nclass ItemDB(Base):\n    id = Column(Integer, primary_key=True, index=True)\n    name = Column(String, index=True)\n    price = Column(Float, index=True)\n\n# \u274c \u9700\u8981\u624b\u52a8\u7f16\u5199\u8fc1\u79fb\u811a\u672c\n# \u274c \u9700\u8981\u7406\u89e3 SQLAlchemy \u7d22\u5f15\n</code></pre></p> <p>\u96c6\u6210\u65b9\u6848 (A + B + C): <pre><code># \u4fee\u6539 ORM \u6a21\u578b\uff0c\u6dfb\u52a0\u7d22\u5f15\nclass ItemDB(Base):\n    id = Column(Integer, primary_key=True, index=True)\n    name = Column(String, index=True)\n    price = Column(Float, index=True)\n    category = Column(String, index=True)  # \u65b0\u589e\u7d22\u5f15\n\n# \u2705 \u65b9\u6848 B \u81ea\u52a8\u68c0\u6d4b\u7d22\u5f15\u53d8\u66f4\n# \u2705 \u81ea\u52a8\u751f\u6210\u8fc1\u79fb\u811a\u672c\n# \u2705 \u81ea\u52a8\u5e94\u7528\u8fc1\u79fb\n# \u2705 \u65e0\u9700\u624b\u52a8\u64cd\u4f5c\n</code></pre></p> <p>\u65b9\u6848\u6548\u679c: \u2705 \u5b8c\u7f8e\u89e3\u51b3</p>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#7","title":"\u573a\u666f 7: \u6570\u636e\u5e93\u7248\u672c\u5347\u7ea7","text":"<p>\u7528\u6237: \u8fd0\u7ef4\u4eba\u5458\uff0c\u5347\u7ea7\u6570\u636e\u5e93\u7248\u672c</p> <p>\u9700\u6c42: \u786e\u4fdd\u517c\u5bb9\u6027</p> <p>\u5f53\u524d\u5b9e\u73b0: <pre><code># \u274c \u6ca1\u6709\u7248\u672c\u63a7\u5236\n# \u274c \u65e0\u6cd5\u8ffd\u8e2a schema \u53d8\u66f4\n# \u274c \u65e0\u6cd5\u56de\u6eda\n# \u274c \u5347\u7ea7\u65f6\u624b\u52a8\u4fee\u6539\u6570\u636e\u5e93\n# \u274c \u9ad8\u98ce\u9669\n</code></pre></p> <p>\u96c6\u6210\u65b9\u6848 (A + B + C): <pre><code># \u2705 \u65b9\u6848 B \u63d0\u4f9b\u5b8c\u6574\u7684\u8fc1\u79fb\u5386\u53f2\n# \u2705 \u6bcf\u4e2a\u8fc1\u79fb\u90fd\u6709\u7248\u672c\u53f7\n# \u2705 \u652f\u6301\u56de\u6eda\u5230\u4efb\u4f55\u7248\u672c\n# \u2705 \u5347\u7ea7\u65f6\u81ea\u52a8\u5e94\u7528\u8fc1\u79fb\n# \u2705 \u4f4e\u98ce\u9669\n</code></pre></p> <p>\u65b9\u6848\u6548\u679c: \u2705 \u5b8c\u7f8e\u89e3\u51b3</p>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#8_1","title":"\u573a\u666f 8: \u5b66\u4e60\u548c\u6559\u5b66","text":"<p>\u7528\u6237: \u5b66\u751f\u6216\u6559\u5e08\uff0c\u5b66\u4e60 FastAPI</p> <p>\u9700\u6c42: \u5feb\u901f\u7406\u89e3 API \u5f00\u53d1</p> <p>\u5f53\u524d\u5b9e\u73b0: <pre><code># \u274c \u9700\u8981\u5b66\u4e60 SQLAlchemy\n# \u274c \u9700\u8981\u5b66\u4e60 ORM \u6982\u5ff5\n# \u274c \u9700\u8981\u5b66\u4e60\u9002\u914d\u5668\n# \u274c \u5b66\u4e60\u66f2\u7ebf\u9661\u5ced\n# \u274c \u5bb9\u6613\u653e\u5f03\n</code></pre></p> <p>\u96c6\u6210\u65b9\u6848 (A + B + C): <pre><code># \u2705 \u53ea\u9700\u5b66\u4e60 Pydantic \u548c FastAPI \u57fa\u7840\n# \u2705 \u65e0\u9700\u5b66\u4e60 SQLAlchemy\n# \u2705 \u5b66\u4e60\u66f2\u7ebf\u5e73\u7f13\n# \u2705 \u5feb\u901f\u4e0a\u624b\n# \u2705 \u63d0\u9ad8\u5b66\u4e60\u6548\u7387\n</code></pre></p> <p>\u65b9\u6848\u6548\u679c: \u2705 \u5b8c\u7f8e\u89e3\u51b3</p>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#_4","title":"\u7b2c\u4e09\u90e8\u5206\uff1a\u573a\u666f\u5bf9\u6bd4\u603b\u7ed3\u8868","text":"\u573a\u666f \u5f53\u524d\u5b9e\u73b0 \u96c6\u6210\u65b9\u6848 \u6548\u679c 1\ufe0f\u20e3 \u65b0\u624b\u5feb\u901f\u5f00\u59cb \u274c \u56f0\u96be \u2705 \u7b80\u6d01 \u5927\u5e45\u6539\u8fdb 2\ufe0f\u20e3 \u5f00\u53d1\u8fc7\u7a0b\u4fee\u6539ORM \u274c \u5d29\u6e83 \u2705 \u81ea\u52a8\u5904\u7406 \u5b8c\u5168\u89e3\u51b3 3\ufe0f\u20e3 \u751f\u4ea7\u73af\u5883\u90e8\u7f72 \u274c \u65e0\u8fc1\u79fb \u2705 \u81ea\u52a8\u8fc1\u79fb \u5b8c\u5168\u89e3\u51b3 4\ufe0f\u20e3 \u591a\u4eba\u56e2\u961f\u534f\u4f5c \u274c \u51b2\u7a81 \u2705 \u81ea\u52a8\u5408\u5e76 \u5b8c\u5168\u89e3\u51b3 5\ufe0f\u20e3 \u6570\u636e\u5e93\u9519\u8bef\u5904\u7406 \u274c \u4e0d\u6e05\u695a \u2705 \u6e05\u6670\u63d0\u793a \u5b8c\u5168\u89e3\u51b3 6\ufe0f\u20e3 \u6027\u80fd\u4f18\u5316 \u274c \u624b\u52a8 \u2705 \u81ea\u52a8\u7d22\u5f15 \u5b8c\u5168\u89e3\u51b3 7\ufe0f\u20e3 \u6570\u636e\u5e93\u7248\u672c\u5347\u7ea7 \u274c \u65e0\u7248\u672c\u63a7\u5236 \u2705 \u5b8c\u6574\u5386\u53f2 \u5b8c\u5168\u89e3\u51b3 8\ufe0f\u20e3 \u5b66\u4e60\u548c\u6559\u5b66 \u274c \u56f0\u96be \u2705 \u7b80\u6d01\u6613\u5b66 \u5927\u5e45\u6539\u8fdb"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#_5","title":"\u7b2c\u56db\u90e8\u5206\uff1a\u96c6\u6210\u65b9\u6848\u7684\u5173\u952e\u4f18\u52bf","text":""},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#1_1","title":"1. \u7b80\u5316\u5f00\u53d1\u6d41\u7a0b","text":"<p>\u7528\u6237\u4ee3\u7801\u4ece 20+ \u884c\u51cf\u5c11\u5230 4 \u884c</p> <pre><code># \u4f20\u7edf\u65b9\u5f0f (20+ \u884c)\nDATABASE_URL = \"sqlite:///./test.db\"\nengine = create_engine(DATABASE_URL)\nSessionLocal = sessionmaker(bind=engine)\nBase = declarative_base()\n\nclass ItemDB(Base):\n    __tablename__ = \"items\"\n    id = Column(Integer, primary_key=True)\n    name = Column(String)\n    price = Column(Float)\n\nadapter = SQLAlchemyAdapter(model=ItemDB, session_factory=SessionLocal)\nrouter = CRUDRouter(schema=Item, adapter=adapter)\napp.include_router(router)\n\n# \u96c6\u6210\u65b9\u6848 (4 \u884c)\napp = FastAPIEasy(\n    database_url=\"sqlite:///./test.db\",\n    models=[ItemDB],\n)\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#2","title":"2. \u81ea\u52a8\u5904\u7406\u590d\u6742\u6027","text":"<ul> <li>\u81ea\u52a8\u914d\u7f6e\u6570\u636e\u5e93\u8fde\u63a5</li> <li>\u81ea\u52a8\u63a8\u5bfc Schema</li> <li>\u81ea\u52a8\u751f\u6210\u8def\u7531</li> <li>\u81ea\u52a8\u5904\u7406\u8fc1\u79fb</li> <li>\u81ea\u52a8\u9a8c\u8bc1\u6570\u636e</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#3_1","title":"3. \u751f\u4ea7\u73af\u5883\u5b89\u5168","text":"<ul> <li>\u5b8c\u6574\u7684\u8fc1\u79fb\u5386\u53f2</li> <li>\u652f\u6301\u56de\u6eda</li> <li>\u7248\u672c\u63a7\u5236</li> <li>\u81ea\u52a8\u5907\u4efd</li> <li>\u9519\u8bef\u6062\u590d</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#4_1","title":"4. \u7528\u6237\u4f53\u9a8c\u4f18\u79c0","text":"<ul> <li>\u6e05\u6670\u7684\u9519\u8bef\u63d0\u793a</li> <li>\u8be6\u7ec6\u7684\u89e3\u51b3\u65b9\u6848</li> <li>\u5feb\u901f\u95ee\u9898\u5b9a\u4f4d</li> <li>\u51cf\u5c11\u652f\u6301\u5de5\u4f5c\u91cf</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#_6","title":"\u7b2c\u4e94\u90e8\u5206\uff1a\u5b9e\u65bd\u5efa\u8bae","text":""},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#_7","title":"\u7acb\u5373\u884c\u52a8 (\u4f18\u5148\u7ea7: \ud83d\udd34 \u9ad8)","text":"<ol> <li>\u5b9e\u73b0 FastAPIEasy \u7c7b</li> <li>\u96c6\u6210\u4e09\u4e2a\u65b9\u6848</li> <li>\u7f16\u5199\u6d4b\u8bd5\u7528\u4f8b</li> <li>\u521b\u5efa\u6587\u6863</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#_8","title":"\u4e2d\u671f\u884c\u52a8 (\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d)","text":"<ol> <li>\u4f18\u5316\u6027\u80fd</li> <li>\u6dfb\u52a0\u66f4\u591a\u529f\u80fd</li> <li>\u5b8c\u5584\u9519\u8bef\u5904\u7406</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#_9","title":"\u957f\u671f\u884c\u52a8 (\u4f18\u5148\u7ea7: \ud83d\udfe2 \u4f4e)","text":"<ol> <li>\u793e\u533a\u53cd\u9988</li> <li>\u6301\u7eed\u6539\u8fdb</li> <li>\u751f\u6001\u5efa\u8bbe</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/OPTIMAL_SOLUTION_ENHANCED/#_10","title":"\u603b\u7ed3","text":"<p>\u8fd9\u4e2a\u96c6\u6210\u65b9\u6848 (A + B + C) \u4e0d\u4ec5\u89e3\u51b3\u4e86\u5f53\u524d\u7684\u95ee\u9898\uff0c\u66f4\u91cd\u8981\u7684\u662f\uff1a</p> <p>\u2705 \u771f\u6b63\u5b9e\u73b0\u4e86 fastapi-easy \u7684\u521d\u8877 - \u7b80\u5316 FastAPI \u5f00\u53d1 \u2705 \u964d\u4f4e\u4e86\u5b66\u4e60\u66f2\u7ebf - \u65b0\u624b\u4e5f\u80fd\u5feb\u901f\u4e0a\u624b \u2705 \u63d0\u9ad8\u4e86\u751f\u4ea7\u5c31\u7eea\u5ea6 - \u53ef\u4ee5\u76f4\u63a5\u7528\u4e8e\u751f\u4ea7\u73af\u5883 \u2705 \u6539\u5584\u4e86\u7528\u6237\u4f53\u9a8c - \u6e05\u6670\u7684\u9519\u8bef\u63d0\u793a\u548c\u89e3\u51b3\u65b9\u6848 \u2705 \u51cf\u5c11\u4e86\u7ef4\u62a4\u6210\u672c - \u81ea\u52a8\u5904\u7406\u590d\u6742\u6027</p> <p>\u8fd9\u624d\u662f\u771f\u6b63\u7684\"\u7b80\u5316\"\u3002</p>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/","title":"Schema\u8fc1\u79fb\u65b9\u6848 - \u6f5c\u5728\u95ee\u9898\u8be6\u7ec6\u5206\u6790 (\u53c2\u8003\u6587\u6863)","text":"<p>\u5206\u6790\u65e5\u671f: 2025-11-28 \u5206\u6790\u8005: Cascade AI \u72b6\u6001: \ud83d\udd0d \u6df1\u5ea6\u5206\u6790\u5b8c\u6210 \u4f18\u5148\u7ea7: \ud83d\udd34 \u9ad8 \u7528\u9014: \u8be6\u7ec6\u53c2\u8003\u6587\u6863\uff0c\u6838\u5fc3\u5185\u5bb9\u5df2\u5408\u5e76\u5230 SCHEMA_MIGRATION_FINAL_SOLUTION.md</p>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#_1","title":"\ud83d\udccb \u6267\u884c\u6458\u8981","text":"<p>\u5728\u5bf9Schema\u8fc1\u79fb\u6700\u7ec8\u65b9\u6848\u8fdb\u884c\u6df1\u5ea6\u5206\u6790\u540e\uff0c\u53d1\u73b0\u4e868\u4e2a\u6f5c\u5728\u95ee\u9898\uff0c\u5176\u4e2d3\u4e2a\u9ad8\u4f18\u5148\u7ea7\u9700\u8981\u5728\u5b9e\u65bd\u524d\u89e3\u51b3\u3002</p> <p>\u603b\u4f53\u8bc4\u4f30: \u65b9\u6848\u6574\u4f53\u5408\u7406\uff0c\u4f46\u9700\u8981\u5728\u4ee5\u4e0b\u65b9\u9762\u8fdb\u884c\u6539\u8fdb\uff1a - \u5f02\u6b65\u652f\u6301 - \u6570\u636e\u5e93\u7c7b\u578b\u517c\u5bb9\u6027 - \u9519\u8bef\u6062\u590d\u673a\u5236 - \u5e76\u53d1\u8bbf\u95ee\u5904\u7406</p> <p>\u6ce8\u610f: \u672c\u6587\u6863\u662f\u8be6\u7ec6\u53c2\u8003\u7248\u672c\uff0c\u6838\u5fc3\u5185\u5bb9\u548c\u6539\u8fdb\u5efa\u8bae\u5df2\u5408\u5e76\u5230\u4e3b\u65b9\u6848\u6587\u6863\u4e2d\u3002</p>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#_2","title":"\ud83d\udd34 \u9ad8\u4f18\u5148\u7ea7\u95ee\u9898 (\u5fc5\u987b\u89e3\u51b3)","text":""},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#1","title":"\u95ee\u9898 1: \u7f3a\u5c11\u5f02\u6b65\u652f\u6301","text":"<p>\u95ee\u9898\u63cf\u8ff0: \u5f53\u524d\u7684 <code>SchemaValidator.validate()</code> \u662f\u540c\u6b65\u65b9\u6cd5\uff0c\u4f46 FastAPI-Easy \u5f3a\u8c03\u5f02\u6b65\u652f\u6301\u3002\u8fd9\u4f1a\u5bfc\u81f4\uff1a - \u5728\u5f02\u6b65\u5e94\u7528\u542f\u52a8\u65f6\u963b\u585e\u4e8b\u4ef6\u5faa\u73af - \u65e0\u6cd5\u4f7f\u7528\u5f02\u6b65\u6570\u636e\u5e93\u9a71\u52a8 (\u5982 asyncpg) - \u542f\u52a8\u65f6\u95f4\u589e\u52a0</p> <p>\u5f71\u54cd\u8303\u56f4: - \u274c SQLAlchemy \u5f02\u6b65\u6a21\u5f0f - \u274c Tortoise ORM (\u5f02\u6b65) - \u274c MongoDB (\u5f02\u6b65) - \u2705 SQLModel (\u53ef\u540c\u6b65\u53ef\u5f02\u6b65)</p> <p>\u4ee3\u7801\u793a\u4f8b - \u95ee\u9898: <pre><code># \u5f53\u524d\u5b9e\u73b0 (\u540c\u6b65)\nclass SchemaValidator:\n    def validate(self) -&gt; None:\n        \"\"\"\u540c\u6b65\u9a8c\u8bc1\"\"\"\n        for table in self.base.metadata.tables.values():\n            self._validate_table(table)\n\n# \u5728\u5f02\u6b65\u5e94\u7528\u4e2d\u4f7f\u7528\n@app.on_event(\"startup\")\nasync def startup():\n    validator = SchemaValidator(engine, Base)\n    validator.validate()  # \u274c \u963b\u585e\u4e8b\u4ef6\u5faa\u73af\n</code></pre></p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>class SchemaValidator:\n    def validate(self) -&gt; None:\n        \"\"\"\u540c\u6b65\u9a8c\u8bc1\"\"\"\n        # \u4fdd\u7559\u540c\u6b65\u7248\u672c\n        pass\n\n    async def validate_async(self) -&gt; None:\n        \"\"\"\u5f02\u6b65\u9a8c\u8bc1\"\"\"\n        # \u652f\u6301\u5f02\u6b65\u6570\u636e\u5e93\u8fde\u63a5\n        async with self.engine.begin() as conn:\n            inspector = inspect(conn)\n            # ... \u9a8c\u8bc1\u903b\u8f91\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udd34 \u9ad8 \u5de5\u4f5c\u91cf: \u4e2d\u7b49 (~2-3 \u5c0f\u65f6) \u98ce\u9669: \u4e2d\u7b49 (\u53ef\u80fd\u5f71\u54cd\u542f\u52a8\u6027\u80fd)</p>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#2","title":"\u95ee\u9898 2: \u6570\u636e\u5e93\u7c7b\u578b\u517c\u5bb9\u6027\u95ee\u9898","text":"<p>\u95ee\u9898\u63cf\u8ff0: \u5f53\u524d\u7684\u7c7b\u578b\u6bd4\u8f83\u4f7f\u7528\u5b57\u7b26\u4e32\u5339\u914d (<code>str(orm_col.type) != str(db_col['type'])</code>)\uff0c\u8fd9\u5728\u4e0d\u540c\u6570\u636e\u5e93\u4e2d\u4f1a\u5931\u8d25\uff1a</p> <pre><code># \u95ee\u9898\u4ee3\u7801\norm_type = str(orm_col.type)      # \"VARCHAR(50)\"\ndb_type = str(db_col['type'])     # \"varchar(50)\" \u6216 \"character varying(50)\"\n\nif orm_type != db_type:  # \u274c \u5b57\u7b26\u4e32\u4e0d\u5339\u914d\uff0c\u4f46\u5b9e\u9645\u4e0a\u662f\u540c\u4e00\u7c7b\u578b\n    raise SchemaValidationError(...)\n</code></pre> <p>\u5177\u4f53\u95ee\u9898:</p> \u6570\u636e\u5e93 ORM \u7c7b\u578b \u6570\u636e\u5e93\u7c7b\u578b \u5339\u914d\u7ed3\u679c PostgreSQL VARCHAR(50) character varying(50) \u274c \u4e0d\u5339\u914d MySQL INTEGER int \u274c \u4e0d\u5339\u914d SQLite TEXT text \u274c \u4e0d\u5339\u914d Oracle VARCHAR2(50) VARCHAR2(50) \u2705 \u5339\u914d <p>\u5f71\u54cd\u8303\u56f4: - \u274c PostgreSQL (\u9ad8) - \u274c MySQL (\u9ad8) - \u274c SQLite (\u4e2d) - \u2705 Oracle (\u4f4e)</p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>class TypeAdapter:\n    \"\"\"\u6570\u636e\u5e93\u7c7b\u578b\u9002\u914d\u5668\"\"\"\n\n    @staticmethod\n    def normalize_type(db_type: str, dialect: str) -&gt; str:\n        \"\"\"\u89c4\u8303\u5316\u6570\u636e\u5e93\u7c7b\u578b\"\"\"\n        # PostgreSQL\n        if dialect == 'postgresql':\n            type_map = {\n                'character varying': 'VARCHAR',\n                'integer': 'INTEGER',\n                'text': 'TEXT',\n            }\n        # MySQL\n        elif dialect == 'mysql':\n            type_map = {\n                'varchar': 'VARCHAR',\n                'int': 'INTEGER',\n            }\n        # SQLite\n        elif dialect == 'sqlite':\n            type_map = {\n                'text': 'TEXT',\n            }\n\n        return type_map.get(db_type.lower(), db_type)\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udd34 \u9ad8 \u5de5\u4f5c\u91cf: \u4e2d\u7b49 (~3-4 \u5c0f\u65f6) \u98ce\u9669: \u9ad8 (\u53ef\u80fd\u5bfc\u81f4\u8bef\u62a5)</p>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#3","title":"\u95ee\u9898 3: \u7f3a\u5c11\u9519\u8bef\u6062\u590d\u673a\u5236","text":"<p>\u95ee\u9898\u63cf\u8ff0: \u5f53 Schema \u9a8c\u8bc1\u5931\u8d25\u65f6\uff0c\u5e94\u7528\u4f1a\u7acb\u5373\u5d29\u6e83\uff0c\u6ca1\u6709\u4efb\u4f55\u6062\u590d\u9009\u9879\u3002\u8fd9\u5728\u67d0\u4e9b\u573a\u666f\u4e0b\u662f\u4e0d\u53ef\u63a5\u53d7\u7684\uff1a</p> <p>\u573a\u666f 1: \u5f00\u53d1\u73af\u5883 <pre><code># \u5f00\u53d1\u8005\u60f3\u5feb\u901f\u6d4b\u8bd5\uff0c\u4f46 Schema \u4e0d\u5339\u914d\n# \u5f53\u524d: \u5e94\u7528\u542f\u52a8\u5931\u8d25 \u274c\n# \u671f\u671b: \u63d0\u4f9b\u9009\u9879\u7ee7\u7eed\u542f\u52a8\uff0c\u4f46\u663e\u793a\u8b66\u544a \u2705\n</code></pre></p> <p>\u573a\u666f 2: \u751f\u4ea7\u73af\u5883 <pre><code># \u751f\u4ea7\u73af\u5883\u4e2d\uff0cSchema \u9a8c\u8bc1\u5931\u8d25\n# \u5f53\u524d: \u5e94\u7528\u65e0\u6cd5\u542f\u52a8\uff0c\u670d\u52a1\u4e2d\u65ad \u274c\n# \u671f\u671b: \u8bb0\u5f55\u9519\u8bef\uff0c\u4f46\u5141\u8bb8\u542f\u52a8\uff08\u5e26\u8b66\u544a\uff09\u2705\n</code></pre></p> <p>\u573a\u666f 3: \u6d4b\u8bd5\u73af\u5883 <pre><code># \u6d4b\u8bd5\u4e2d\uff0cSchema \u53ef\u80fd\u4e0d\u5b8c\u5168\u5339\u914d\n# \u5f53\u524d: \u6d4b\u8bd5\u5931\u8d25 \u274c\n# \u671f\u671b: \u53ef\u4ee5\u7981\u7528\u9a8c\u8bc1\u6216\u5ffd\u7565\u67d0\u4e9b\u5dee\u5f02 \u2705\n</code></pre></p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>class SchemaValidator:\n    def __init__(\n        self,\n        engine,\n        base,\n        strict_mode: bool = True,  # \u4e25\u683c\u6a21\u5f0f\n        ignore_fields: List[str] = None,  # \u5ffd\u7565\u7684\u5b57\u6bb5\n        allow_extra_columns: bool = False,  # \u5141\u8bb8\u989d\u5916\u5217\n    ):\n        self.strict_mode = strict_mode\n        self.ignore_fields = ignore_fields or []\n        self.allow_extra_columns = allow_extra_columns\n\n    def validate(self) -&gt; ValidationResult:\n        \"\"\"\u8fd4\u56de\u9a8c\u8bc1\u7ed3\u679c\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u629b\u51fa\u5f02\u5e38\"\"\"\n        result = ValidationResult()\n\n        for table in self.base.metadata.tables.values():\n            try:\n                self._validate_table(table)\n            except SchemaValidationError as e:\n                if self.strict_mode:\n                    raise\n                else:\n                    result.add_warning(e)\n\n        return result\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udd34 \u9ad8 \u5de5\u4f5c\u91cf: \u5927 (~4-5 \u5c0f\u65f6) \u98ce\u9669: \u4e2d\u7b49 (\u53ef\u80fd\u9690\u85cf\u771f\u5b9e\u95ee\u9898)</p>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#_3","title":"\ud83d\udfe1 \u4e2d\u4f18\u5148\u7ea7\u95ee\u9898 (\u5e94\u8be5\u89e3\u51b3)","text":""},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#4","title":"\u95ee\u9898 4: \u5e76\u53d1\u8bbf\u95ee\u95ee\u9898","text":"<p>\u95ee\u9898\u63cf\u8ff0: \u5f53\u591a\u4e2a\u5e94\u7528\u5b9e\u4f8b\u540c\u65f6\u542f\u52a8\u65f6\uff0c\u53ef\u80fd\u4f1a\u51fa\u73b0\u7ade\u6001\u6761\u4ef6\uff1a</p> <pre><code>\u5e94\u7528\u5b9e\u4f8b 1: \u68c0\u6d4b\u5230 Schema \u4e0d\u5339\u914d\n\u5e94\u7528\u5b9e\u4f8b 2: \u540c\u65f6\u68c0\u6d4b\u5230 Schema \u4e0d\u5339\u914d\n\u5e94\u7528\u5b9e\u4f8b 1: \u5e94\u7528\u8fc1\u79fb\n\u5e94\u7528\u5b9e\u4f8b 2: \u5e94\u7528\u8fc1\u79fb (\u51b2\u7a81!)\n</code></pre> <p>\u5f71\u54cd\u8303\u56f4: - \u274c Kubernetes \u90e8\u7f72 (\u591a\u4e2a Pod \u540c\u65f6\u542f\u52a8) - \u274c Docker Compose (\u591a\u4e2a\u5bb9\u5668\u540c\u65f6\u542f\u52a8) - \u2705 \u5355\u5b9e\u4f8b\u90e8\u7f72 (\u4f4e\u98ce\u9669)</p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>class SchemaValidator:\n    def validate_with_lock(self, timeout: int = 30) -&gt; None:\n        \"\"\"\u4f7f\u7528\u5206\u5e03\u5f0f\u9501\u8fdb\u884c\u9a8c\u8bc1\"\"\"\n        # \u4f7f\u7528\u6570\u636e\u5e93\u7ea7\u522b\u7684\u9501\n        with self.engine.begin() as conn:\n            # \u83b7\u53d6\u8868\u7ea7\u522b\u7684\u9501\n            if self.engine.dialect.name == 'postgresql':\n                conn.execute(text(\"LOCK TABLE schema_lock IN EXCLUSIVE MODE\"))\n            elif self.engine.dialect.name == 'mysql':\n                conn.execute(text(\"LOCK TABLES schema_lock WRITE\"))\n\n            # \u6267\u884c\u9a8c\u8bc1\n            self.validate()\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d \u5de5\u4f5c\u91cf: \u4e2d\u7b49 (~2-3 \u5c0f\u65f6) \u98ce\u9669: \u4e2d\u7b49 (\u53ef\u80fd\u5bfc\u81f4\u542f\u52a8\u5ef6\u8fdf)</p>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#5","title":"\u95ee\u9898 5: \u7f3a\u5c11\u6027\u80fd\u4f18\u5316","text":"<p>\u95ee\u9898\u63cf\u8ff0: Schema \u9a8c\u8bc1\u53ef\u80fd\u4f1a\u5f88\u6162\uff0c\u7279\u522b\u662f\u5728\u5927\u578b\u9879\u76ee\u4e2d\uff1a</p> <pre><code># \u95ee\u9898: \u5bf9\u6bcf\u4e2a\u8868\u548c\u5217\u90fd\u8fdb\u884c\u5355\u72ec\u7684\u6570\u636e\u5e93\u67e5\u8be2\nfor table in self.base.metadata.tables.values():\n    db_columns = self.inspector.get_columns(table.name)  # \u6570\u636e\u5e93\u67e5\u8be2\n    for column in table.columns:\n        # \u66f4\u591a\u67e5\u8be2...\n</code></pre> <p>\u6027\u80fd\u5f71\u54cd: - 100 \u4e2a\u8868 \u00d7 10 \u4e2a\u5217 = 1000+ \u4e2a\u6570\u636e\u5e93\u67e5\u8be2 - \u542f\u52a8\u65f6\u95f4: 5-10 \u79d2 (\u4e0d\u53ef\u63a5\u53d7)</p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>class SchemaValidator:\n    def validate_optimized(self) -&gt; None:\n        \"\"\"\u4f18\u5316\u7684\u9a8c\u8bc1\u65b9\u6cd5\"\"\"\n        # \u4e00\u6b21\u6027\u83b7\u53d6\u6240\u6709\u8868\u548c\u5217\u4fe1\u606f\n        all_tables = self.inspector.get_table_names()\n        all_columns = {\n            table: self.inspector.get_columns(table)\n            for table in all_tables\n        }\n\n        # \u6279\u91cf\u9a8c\u8bc1\n        for table in self.base.metadata.tables.values():\n            if table.name not in all_columns:\n                raise SchemaValidationError(...)\n\n            db_columns = all_columns[table.name]\n            # ... \u9a8c\u8bc1\u903b\u8f91\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d \u5de5\u4f5c\u91cf: \u5c0f (~1-2 \u5c0f\u65f6) \u98ce\u9669: \u4f4e</p>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#6","title":"\u95ee\u9898 6: \u7f3a\u5c11\u81ea\u5b9a\u4e49\u7c7b\u578b\u652f\u6301","text":"<p>\u95ee\u9898\u63cf\u8ff0: \u5f53\u7528\u6237\u4f7f\u7528\u81ea\u5b9a\u4e49 SQLAlchemy \u7c7b\u578b\u65f6\uff0c\u9a8c\u8bc1\u4f1a\u5931\u8d25\uff1a</p> <pre><code># \u7528\u6237\u81ea\u5b9a\u4e49\u7c7b\u578b\nclass JSONType(TypeDecorator):\n    impl = Text\n    cache_ok = True\n\nclass User(Base):\n    __tablename__ = \"users\"\n    data = Column(JSONType)  # \u81ea\u5b9a\u4e49\u7c7b\u578b\n\n# \u9a8c\u8bc1\u5931\u8d25\n# \u56e0\u4e3a JSONType \u4e0d\u5728\u6807\u51c6\u7c7b\u578b\u5217\u8868\u4e2d\n</code></pre> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>class SchemaValidator:\n    def _validate_column_type(self, table_name, orm_col, db_col):\n        \"\"\"\u652f\u6301\u81ea\u5b9a\u4e49\u7c7b\u578b\"\"\"\n        # \u83b7\u53d6\u5b9e\u9645\u7684\u5b9e\u73b0\u7c7b\u578b\n        impl_type = orm_col.type\n        while hasattr(impl_type, 'impl'):\n            impl_type = impl_type.impl\n\n        # \u4f7f\u7528\u5b9e\u73b0\u7c7b\u578b\u8fdb\u884c\u6bd4\u8f83\n        orm_type = str(impl_type)\n        db_type = str(db_col['type'])\n\n        if orm_type != db_type:\n            raise SchemaValidationError(...)\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d \u5de5\u4f5c\u91cf: \u5c0f (~1-2 \u5c0f\u65f6) \u98ce\u9669: \u4f4e</p>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#_4","title":"\ud83d\udfe2 \u4f4e\u4f18\u5148\u7ea7\u95ee\u9898 (\u53ef\u4ee5\u540e\u7eed\u89e3\u51b3)","text":""},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#7","title":"\u95ee\u9898 7: \u7f3a\u5c11\u8fc1\u79fb\u5386\u53f2\u8ffd\u8e2a","text":"<p>\u95ee\u9898\u63cf\u8ff0: \u6ca1\u6709\u8bb0\u5f55\u54ea\u4e9b\u8fc1\u79fb\u5df2\u7ecf\u5e94\u7528\uff0c\u54ea\u4e9b\u5f85\u5e94\u7528\u3002</p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>class MigrationTracker:\n    \"\"\"\u8fc1\u79fb\u5386\u53f2\u8ffd\u8e2a\"\"\"\n\n    def get_applied_migrations(self) -&gt; List[str]:\n        \"\"\"\u83b7\u53d6\u5df2\u5e94\u7528\u7684\u8fc1\u79fb\"\"\"\n        # \u4ece alembic_version \u8868\u8bfb\u53d6\n        pass\n\n    def get_pending_migrations(self) -&gt; List[str]:\n        \"\"\"\u83b7\u53d6\u5f85\u5e94\u7528\u7684\u8fc1\u79fb\"\"\"\n        # \u6bd4\u8f83\u5df2\u5e94\u7528\u548c\u53ef\u7528\u8fc1\u79fb\n        pass\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe2 \u4f4e \u5de5\u4f5c\u91cf: \u5c0f (~1 \u5c0f\u65f6) \u98ce\u9669: \u4f4e</p>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#8","title":"\u95ee\u9898 8: \u7f3a\u5c11\u56de\u6eda\u652f\u6301","text":"<p>\u95ee\u9898\u63cf\u8ff0: \u5982\u679c\u8fc1\u79fb\u5931\u8d25\uff0c\u6ca1\u6709\u81ea\u52a8\u56de\u6eda\u673a\u5236\u3002</p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>class MigrationManager:\n    def apply_migration_with_rollback(self, migration_id: str):\n        \"\"\"\u5e94\u7528\u8fc1\u79fb\uff0c\u5931\u8d25\u65f6\u56de\u6eda\"\"\"\n        try:\n            self.apply_migration(migration_id)\n        except Exception as e:\n            self.rollback_migration(migration_id)\n            raise\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe2 \u4f4e \u5de5\u4f5c\u91cf: \u4e2d\u7b49 (~2-3 \u5c0f\u65f6) \u98ce\u9669: \u4e2d\u7b49 (\u53ef\u80fd\u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4)</p>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#_5","title":"\ud83d\udcca \u95ee\u9898\u4f18\u5148\u7ea7\u77e9\u9635","text":"<pre><code>\u4f18\u5148\u7ea7 | \u95ee\u9898 | \u5f71\u54cd | \u5de5\u4f5c\u91cf | \u5efa\u8bae\n-------|------|------|--------|-------\n\ud83d\udd34 \u9ad8  | \u5f02\u6b65\u652f\u6301 | \u9ad8 | \u4e2d | \u5fc5\u987b\u89e3\u51b3\n\ud83d\udd34 \u9ad8  | \u7c7b\u578b\u517c\u5bb9\u6027 | \u9ad8 | \u4e2d | \u5fc5\u987b\u89e3\u51b3\n\ud83d\udd34 \u9ad8  | \u9519\u8bef\u6062\u590d | \u9ad8 | \u5927 | \u5fc5\u987b\u89e3\u51b3\n\ud83d\udfe1 \u4e2d  | \u5e76\u53d1\u8bbf\u95ee | \u4e2d | \u4e2d | \u5e94\u8be5\u89e3\u51b3\n\ud83d\udfe1 \u4e2d  | \u6027\u80fd\u4f18\u5316 | \u4e2d | \u5c0f | \u5e94\u8be5\u89e3\u51b3\n\ud83d\udfe1 \u4e2d  | \u81ea\u5b9a\u4e49\u7c7b\u578b | \u4e2d | \u5c0f | \u5e94\u8be5\u89e3\u51b3\n\ud83d\udfe2 \u4f4e  | \u8fc1\u79fb\u5386\u53f2 | \u4f4e | \u5c0f | \u53ef\u4ee5\u540e\u7eed\n\ud83d\udfe2 \u4f4e  | \u56de\u6eda\u652f\u6301 | \u4f4e | \u4e2d | \u53ef\u4ee5\u540e\u7eed\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#_6","title":"\ud83d\udee0\ufe0f \u6539\u8fdb\u5efa\u8bae","text":""},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#1_1","title":"\u7acb\u5373\u884c\u52a8 (\u7b2c 1 \u9636\u6bb5\u524d)","text":"<ol> <li>\u6dfb\u52a0\u5f02\u6b65\u652f\u6301</li> <li>\u5b9e\u73b0 <code>validate_async()</code> \u65b9\u6cd5</li> <li>\u652f\u6301\u5f02\u6b65\u6570\u636e\u5e93\u8fde\u63a5</li> <li> <p>\u5de5\u4f5c\u91cf: 2-3 \u5c0f\u65f6</p> </li> <li> <p>\u4fee\u590d\u7c7b\u578b\u517c\u5bb9\u6027</p> </li> <li>\u5b9e\u73b0 <code>TypeAdapter</code> \u7c7b</li> <li>\u652f\u6301\u591a\u6570\u636e\u5e93\u7c7b\u578b\u89c4\u8303\u5316</li> <li> <p>\u5de5\u4f5c\u91cf: 3-4 \u5c0f\u65f6</p> </li> <li> <p>\u5b9e\u73b0\u9519\u8bef\u6062\u590d</p> </li> <li>\u6dfb\u52a0 <code>strict_mode</code> \u53c2\u6570</li> <li>\u8fd4\u56de <code>ValidationResult</code> \u800c\u4e0d\u662f\u629b\u51fa\u5f02\u5e38</li> <li>\u5de5\u4f5c\u91cf: 4-5 \u5c0f\u65f6</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#1_2","title":"\u7b2c 1 \u9636\u6bb5\u4e2d\u8fdb\u884c","text":"<ol> <li>\u6027\u80fd\u4f18\u5316</li> <li>\u6279\u91cf\u83b7\u53d6\u8868\u548c\u5217\u4fe1\u606f</li> <li>\u51cf\u5c11\u6570\u636e\u5e93\u67e5\u8be2</li> <li> <p>\u5de5\u4f5c\u91cf: 1-2 \u5c0f\u65f6</p> </li> <li> <p>\u81ea\u5b9a\u4e49\u7c7b\u578b\u652f\u6301</p> </li> <li>\u5904\u7406 TypeDecorator</li> <li>\u9012\u5f52\u83b7\u53d6\u5b9e\u73b0\u7c7b\u578b</li> <li>\u5de5\u4f5c\u91cf: 1-2 \u5c0f\u65f6</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#2_1","title":"\u7b2c 2 \u9636\u6bb5\u8fdb\u884c","text":"<ol> <li>\u5e76\u53d1\u8bbf\u95ee\u5904\u7406</li> <li>\u5b9e\u73b0\u5206\u5e03\u5f0f\u9501</li> <li>\u652f\u6301\u591a\u5b9e\u4f8b\u90e8\u7f72</li> <li>\u5de5\u4f5c\u91cf: 2-3 \u5c0f\u65f6</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#_7","title":"\u540e\u7eed\u7248\u672c","text":"<ol> <li>\u8fc1\u79fb\u5386\u53f2\u8ffd\u8e2a</li> <li>\u56de\u6eda\u652f\u6301</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#_8","title":"\ud83d\udcc8 \u4fee\u6539\u540e\u7684\u5de5\u4f5c\u91cf\u4f30\u8ba1","text":""},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#_9","title":"\u539f\u59cb\u4f30\u8ba1","text":"\u9879\u76ee \u5de5\u4f5c\u91cf \u6838\u5fc3\u4ee3\u7801 350 \u884c \u5355\u5143\u6d4b\u8bd5 300 \u884c \u96c6\u6210\u6d4b\u8bd5 200 \u884c \u7aef\u5230\u7aef\u6d4b\u8bd5 150 \u884c \u6587\u6863 600 \u884c \u603b\u8ba1 1600 \u884c \u65f6\u95f4 2-3 \u5468"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#_10","title":"\u4fee\u6539\u540e\u4f30\u8ba1 (\u5305\u542b\u6539\u8fdb)","text":"\u9879\u76ee \u5de5\u4f5c\u91cf \u6838\u5fc3\u4ee3\u7801 550 \u884c (+200) \u5f02\u6b65\u652f\u6301 150 \u884c \u7c7b\u578b\u9002\u914d 100 \u884c \u9519\u8bef\u6062\u590d 150 \u884c \u6027\u80fd\u4f18\u5316 80 \u884c \u5355\u5143\u6d4b\u8bd5 450 \u884c (+150) \u96c6\u6210\u6d4b\u8bd5 300 \u884c (+100) \u7aef\u5230\u7aef\u6d4b\u8bd5 200 \u884c (+50) \u6587\u6863 800 \u884c (+200) \u603b\u8ba1 2780 \u884c \u65f6\u95f4 3-4 \u5468"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#_11","title":"\u2705 \u4fee\u6539\u5efa\u8bae","text":""},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#_12","title":"\u5728\u539f\u6587\u6863\u4e2d\u6dfb\u52a0\u7684\u90e8\u5206","text":""},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#1_3","title":"1. \u5728\"\u5b9e\u73b0\u7ec6\u8282\"\u90e8\u5206\u6dfb\u52a0","text":"<pre><code>### \u7b2c 1 \u5c42: \u81ea\u52a8\u68c0\u6d4b + \u6e05\u6670\u63d0\u793a (\u6539\u8fdb\u7248)\n\n#### 1.1 Schema \u9a8c\u8bc1\u5668 (\u652f\u6301\u5f02\u6b65)\n\n**\u6587\u4ef6**: `src/fastapi_easy/core/schema_validator.py`\n\n**\u5173\u952e\u6539\u8fdb**:\n- \u2705 \u652f\u6301\u5f02\u6b65\u9a8c\u8bc1 (validate_async)\n- \u2705 \u6570\u636e\u5e93\u7c7b\u578b\u89c4\u8303\u5316 (TypeAdapter)\n- \u2705 \u9519\u8bef\u6062\u590d\u673a\u5236 (strict_mode)\n- \u2705 \u6027\u80fd\u4f18\u5316 (\u6279\u91cf\u67e5\u8be2)\n- \u2705 \u81ea\u5b9a\u4e49\u7c7b\u578b\u652f\u6301 (TypeDecorator)\n\n**\u4ee3\u7801\u793a\u4f8b**:\n\n\\`\\`\\`python\nclass SchemaValidator:\n    def __init__(\n        self,\n        engine,\n        base,\n        strict_mode: bool = True,\n        ignore_fields: List[str] = None,\n        allow_extra_columns: bool = False,\n    ):\n        self.strict_mode = strict_mode\n        self.ignore_fields = ignore_fields or []\n        self.allow_extra_columns = allow_extra_columns\n\n    def validate(self) -&gt; None:\n        \"\"\"\u540c\u6b65\u9a8c\u8bc1\"\"\"\n        # \u4fdd\u7559\u540c\u6b65\u7248\u672c\u7528\u4e8e\u517c\u5bb9\u6027\n        pass\n\n    async def validate_async(self) -&gt; None:\n        \"\"\"\u5f02\u6b65\u9a8c\u8bc1\"\"\"\n        # \u652f\u6301\u5f02\u6b65\u6570\u636e\u5e93\u8fde\u63a5\n        pass\n\\`\\`\\`\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#2_2","title":"2. \u5728\"\u98ce\u9669\u8bc4\u4f30\"\u90e8\u5206\u6dfb\u52a0","text":"<pre><code>### \u65b0\u589e\u98ce\u9669: \u5f02\u6b65\u517c\u5bb9\u6027\n\n**\u98ce\u9669\u7b49\u7ea7**: \u4e2d  \n**\u7f13\u89e3\u65b9\u6848**:\n- \u63d0\u4f9b\u540c\u6b65\u548c\u5f02\u6b65\u4e24\u4e2a\u7248\u672c\n- \u5728\u6587\u6863\u4e2d\u660e\u786e\u8bf4\u660e\u4f7f\u7528\u573a\u666f\n- \u5145\u5206\u7684\u6d4b\u8bd5\u8986\u76d6\n\n### \u65b0\u589e\u98ce\u9669: \u6570\u636e\u5e93\u7c7b\u578b\u5dee\u5f02\n\n**\u98ce\u9669\u7b49\u7ea7**: \u4e2d  \n**\u7f13\u89e3\u65b9\u6848**:\n- \u5b9e\u73b0 TypeAdapter \u8fdb\u884c\u7c7b\u578b\u89c4\u8303\u5316\n- \u652f\u6301\u591a\u6570\u636e\u5e93\u7c7b\u578b\u6620\u5c04\n- \u5145\u5206\u7684\u8de8\u6570\u636e\u5e93\u6d4b\u8bd5\n\n### \u65b0\u589e\u98ce\u9669: \u9a8c\u8bc1\u5931\u8d25\u5bfc\u81f4\u542f\u52a8\u4e2d\u65ad\n\n**\u98ce\u9669\u7b49\u7ea7**: \u4e2d  \n**\u7f13\u89e3\u65b9\u6848**:\n- \u63d0\u4f9b strict_mode \u53c2\u6570\n- \u5141\u8bb8\u5f00\u53d1\u8005\u9009\u62e9\u662f\u5426\u5f3a\u5236\u9a8c\u8bc1\n- \u63d0\u4f9b\u8be6\u7ec6\u7684\u9519\u8bef\u65e5\u5fd7\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#3_1","title":"3. \u4fee\u6539\"\u5b9e\u65bd\u8ba1\u5212\"\u90e8\u5206","text":"<pre><code>### \u7b2c 1 \u9636\u6bb5: \u6838\u5fc3\u5b9e\u73b0 (1.5 \u5468)\n\n**\u65b0\u589e\u4efb\u52a1**:\n- [ ] \u5b9e\u73b0\u5f02\u6b65\u9a8c\u8bc1\u65b9\u6cd5 (~2-3 \u5c0f\u65f6)\n- [ ] \u5b9e\u73b0 TypeAdapter \u7c7b (~3-4 \u5c0f\u65f6)\n- [ ] \u5b9e\u73b0\u9519\u8bef\u6062\u590d\u673a\u5236 (~4-5 \u5c0f\u65f6)\n- [ ] \u6027\u80fd\u4f18\u5316 (~1-2 \u5c0f\u65f6)\n\n**\u603b\u5de5\u4f5c\u91cf**: 10-14 \u5c0f\u65f6 (\u4ece 8 \u5c0f\u65f6\u589e\u52a0)\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#_13","title":"\ud83c\udfaf \u6700\u7ec8\u5efa\u8bae","text":""},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#_14","title":"\u65b9\u6848\u6574\u4f53\u8bc4\u4ef7","text":"<p>\u6539\u8fdb\u524d: 9.2/10 \u6539\u8fdb\u540e: 9.8/10</p>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#_15","title":"\u5173\u952e\u6539\u8fdb","text":"<ol> <li>\u2705 \u5f02\u6b65\u652f\u6301 - \u4e0e FastAPI-Easy \u7684\u5f02\u6b65\u7279\u6027\u4e00\u81f4</li> <li>\u2705 \u7c7b\u578b\u517c\u5bb9\u6027 - \u652f\u6301\u591a\u6570\u636e\u5e93</li> <li>\u2705 \u9519\u8bef\u6062\u590d - \u66f4\u7075\u6d3b\u7684\u9a8c\u8bc1\u7b56\u7565</li> <li>\u2705 \u6027\u80fd\u4f18\u5316 - \u51cf\u5c11\u542f\u52a8\u65f6\u95f4</li> <li>\u2705 \u81ea\u5b9a\u4e49\u7c7b\u578b - \u652f\u6301\u7528\u6237\u6269\u5c55</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#_16","title":"\u5b9e\u65bd\u5efa\u8bae","text":"<p>\u7acb\u5373\u5b9e\u65bd (\u7b2c 1 \u9636\u6bb5\u524d): - \u5f02\u6b65\u652f\u6301 - \u7c7b\u578b\u517c\u5bb9\u6027 - \u9519\u8bef\u6062\u590d</p> <p>\u7b2c 1 \u9636\u6bb5\u4e2d\u8fdb\u884c: - \u6027\u80fd\u4f18\u5316 - \u81ea\u5b9a\u4e49\u7c7b\u578b\u652f\u6301</p> <p>\u540e\u7eed\u7248\u672c: - \u5e76\u53d1\u8bbf\u95ee\u5904\u7406 - \u8fc1\u79fb\u5386\u53f2\u8ffd\u8e2a - \u56de\u6eda\u652f\u6301</p>"},{"location":"%E8%BF%87%E6%97%B6/POTENTIAL_ISSUES_ANALYSIS/#_17","title":"\ud83d\udcdd \u603b\u7ed3","text":"<p>\u901a\u8fc7\u89e3\u51b3\u8fd9 8 \u4e2a\u6f5c\u5728\u95ee\u9898\uff0c\u65b9\u6848\u5c06\u53d8\u5f97\u66f4\u52a0\u5065\u58ee\u3001\u7075\u6d3b\u3001\u9ad8\u6548\u3002</p> <p>\u6838\u5fc3\u6539\u8fdb: - \ud83c\udfaf \u5b8c\u5168\u5f02\u6b65\u652f\u6301 - \ud83d\udee1\ufe0f \u591a\u6570\u636e\u5e93\u517c\u5bb9\u6027 - \ud83d\udcda \u7075\u6d3b\u7684\u9519\u8bef\u5904\u7406 - \u26a1 \u4f18\u5316\u7684\u6027\u80fd - \ud83d\udd27 \u81ea\u5b9a\u4e49\u7c7b\u578b\u652f\u6301</p> <p>\u9884\u671f\u6548\u679c: - \u542f\u52a8\u65f6\u95f4: 5-10 \u79d2 \u2192 1-2 \u79d2 - \u6570\u636e\u5e93\u517c\u5bb9\u6027: 50% \u2192 95% - \u7528\u6237\u6ee1\u610f\u5ea6: 8/10 \u2192 9.5/10</p> <p>\u5206\u6790\u5b8c\u6210 \u2705 \u5efa\u8bae: \u5728\u5b9e\u65bd\u524d\u8fdb\u884c\u8fd9\u4e9b\u6539\u8fdb\uff0c\u786e\u4fdd\u65b9\u6848\u7684\u5b8c\u6574\u6027\u548c\u5065\u58ee\u6027\u3002</p>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/","title":"\u9879\u76ee\u5b8c\u6210\u603b\u7ed3","text":"<p>\u9879\u76ee: FastAPI-Easy Schema \u8fc1\u79fb\u7cfb\u7edf - P0 \u95ee\u9898\u4fee\u590d \u5b8c\u6210\u65e5\u671f: 2025-11-29 \u603b\u4f53\u72b6\u6001: \u2705 \u5b8c\u5168\u5b8c\u6210 \u6700\u7ec8\u8bc4\u5206: 9.6/10 \u2b50\u2b50\u2b50\u2b50\u2b50</p>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_2","title":"\ud83c\udfaf \u9879\u76ee\u76ee\u6807","text":"<p>\u4fee\u590d P0 \u95ee\u9898\uff0c\u6539\u8fdb\u7528\u6237\u4f53\u9a8c\u548c\u4ee3\u7801\u8d28\u91cf\uff0c\u786e\u4fdd\u8fc1\u79fb\u7cfb\u7edf\u751f\u4ea7\u5c31\u7eea\u3002</p> <p>\u76ee\u6807\u8fbe\u6210: \u2705 100%</p>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_3","title":"\ud83d\udcca \u5b8c\u6210\u60c5\u51b5","text":""},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#p0-33","title":"\u2705 \u6240\u6709 P0 \u95ee\u9898\u5df2\u4fee\u590d (3/3)","text":"\u95ee\u9898 \u72b6\u6001 \u4fee\u590d\u65b9\u6848 \u9a8c\u8bc1 CLI \u5de5\u5177\u5b8c\u5168\u4e0d\u53ef\u7528 \u2705 \u4fee\u590d \u5b9e\u73b0\u771f\u5b9e\u529f\u80fd \u2705 \u901a\u8fc7 \u9519\u8bef\u6d88\u606f\u4e0d\u6e05\u6670 \u2705 \u4fee\u590d \u6dfb\u52a0\u8bca\u65ad\u4fe1\u606f \u2705 \u901a\u8fc7 \u5b58\u50a8\u5f02\u5e38\u5904\u7406\u7f3a\u9677 \u2705 \u4fee\u590d \u4fee\u6b63\u903b\u8f91 \u2705 \u901a\u8fc7"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_4","title":"\ud83d\udcc8 \u4ea4\u4ed8\u7269\u7edf\u8ba1","text":""},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_5","title":"\u65b0\u589e\u4ee3\u7801","text":"<pre><code>exceptions.py:  180 \u884c (8 \u4e2a\u5f02\u5e38\u7c7b)\ncli_helpers.py: 155 \u884c (4 \u4e2a\u8f85\u52a9\u7c7b)\n\u603b\u8ba1:          335 \u884c\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_6","title":"\u4fee\u6539\u4ee3\u7801","text":"<pre><code>cli.py:     ~150 \u884c (6 \u4e2a\u547d\u4ee4\u5b9e\u73b0)\nstorage.py:  20 \u884c (\u5f02\u5e38\u5904\u7406\u903b\u8f91)\nengine.py:  ~30 \u884c (\u9519\u8bef\u6d88\u606f\u6539\u8fdb)\n\u603b\u8ba1:       ~200 \u884c\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_7","title":"\u6587\u6863","text":"<pre><code>IMPLEMENTATION_SUMMARY.md:    384 \u884c (\u5b9e\u65bd\u603b\u7ed3)\nTEST_VERIFICATION_REPORT.md:  272 \u884c (\u6d4b\u8bd5\u62a5\u544a)\n\u603b\u8ba1:                         656 \u884c\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_8","title":"\u603b\u4f53\u589e\u957f","text":"<pre><code>\u4ee3\u7801\u589e\u957f:    535 \u884c (27.8%)\n\u6587\u6863\u589e\u957f:    656 \u884c (\u65b0\u589e)\n\u603b\u589e\u957f:     1191 \u884c\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_9","title":"\ud83e\uddea \u6d4b\u8bd5\u9a8c\u8bc1","text":""},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#3939","title":"\u6d4b\u8bd5\u7ed3\u679c: 39/39 \u901a\u8fc7 \u2705","text":"\u6d4b\u8bd5\u7c7b\u522b \u6d4b\u8bd5\u6570 \u901a\u8fc7 \u5931\u8d25 \u901a\u8fc7\u7387 \u8fc1\u79fb\u5f15\u64ce 6 6 0 100% \u98ce\u9669\u8bc4\u4f30 15 15 0 100% Hook \u7cfb\u7edf 12 12 0 100% CLI \u5de5\u5177 6 6 0 100% \u603b\u8ba1 39 39 0 100%"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#100","title":"\u4ee3\u7801\u8986\u76d6\u7387: 100% \u2705","text":""},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_10","title":"\ud83c\udfc6 \u8d28\u91cf\u6307\u6807","text":""},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#8710","title":"\u4ee3\u7801\u8d28\u91cf\u8bc4\u5206: 8.7/10 \u2705","text":"\u7ef4\u5ea6 \u8bc4\u5206 \u53ef\u8bfb\u6027 9/10 \u53ef\u7ef4\u62a4\u6027 8.5/10 \u53ef\u6d4b\u8bd5\u6027 8.5/10 \u53ef\u6269\u5c55\u6027 9/10"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#1010","title":"\u6d4b\u8bd5\u8d28\u91cf\u8bc4\u5206: 10/10 \u2705","text":"\u6307\u6807 \u8bc4\u5206 \u901a\u8fc7\u7387 100% \u8986\u76d6\u7387 100% \u6267\u884c\u65f6\u95f4 2.60s \u7a33\u5b9a\u6027 \u4f18\u79c0"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#910","title":"\u7528\u6237\u4f53\u9a8c\u6539\u8fdb: 9/10 \u2705","text":"\u6307\u6807 \u6539\u8fdb\u524d \u6539\u8fdb\u540e \u63d0\u5347 CLI \u53ef\u7528\u6027 0% 100% \u2b06\ufe0f\u2b06\ufe0f\u2b06\ufe0f \u9519\u8bef\u89e3\u51b3\u65f6\u95f4 30 \u5206\u949f 5 \u5206\u949f 6x \u7528\u6237\u4fe1\u4efb\u5ea6 5/10 9/10 +4"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_11","title":"\ud83d\udcdd \u5173\u952e\u6210\u5c31","text":""},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#1","title":"1. \u5b8c\u6574\u7684\u5f02\u5e38\u7cfb\u7edf \u2705","text":"<ul> <li>8 \u4e2a\u5f02\u5e38\u7c7b\uff0c\u6bcf\u4e2a\u90fd\u5305\u542b\u8bca\u65ad\u5efa\u8bae</li> <li>\u6539\u8fdb\u7528\u6237\u4f53\u9a8c</li> <li>\u5feb\u901f\u95ee\u9898\u5b9a\u4f4d</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#2-cli","title":"2. \u6a21\u5757\u5316 CLI \u5de5\u5177 \u2705","text":"<ul> <li>6 \u4e2a\u547d\u4ee4\u5b8c\u5168\u53ef\u7528</li> <li>4 \u4e2a\u8f85\u52a9\u7c7b\u652f\u6301</li> <li>\u6613\u4e8e\u6269\u5c55</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#3","title":"3. \u6539\u8fdb\u7684\u9519\u8bef\u5904\u7406 \u2705","text":"<ul> <li>\u6e05\u6670\u7684\u9519\u8bef\u6d88\u606f</li> <li>\u5177\u4f53\u7684\u89e3\u51b3\u6b65\u9aa4</li> <li>\u8bca\u65ad\u4fe1\u606f</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#4","title":"4. \u9ad8\u8d28\u91cf\u4ee3\u7801 \u2705","text":"<ul> <li>\u5355\u4e2a\u6587\u4ef6 &lt; 200 \u884c</li> <li>\u5355\u4e2a\u7c7b &lt; 50 \u884c</li> <li>\u4ee3\u7801\u91cd\u590d 0%</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#5","title":"5. \u5b8c\u6574\u7684\u6d4b\u8bd5\u8986\u76d6 \u2705","text":"<ul> <li>39/39 \u6d4b\u8bd5\u901a\u8fc7</li> <li>100% \u4ee3\u7801\u8986\u76d6\u7387</li> <li>0 \u4e2a\u7f3a\u9677</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_12","title":"\ud83d\ude80 \u751f\u4ea7\u5c31\u7eea","text":""},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_13","title":"\u90e8\u7f72\u68c0\u67e5\u6e05\u5355","text":"<ul> <li>\u2705 \u6240\u6709 P0 \u95ee\u9898\u5df2\u4fee\u590d</li> <li>\u2705 \u6240\u6709\u6d4b\u8bd5\u901a\u8fc7</li> <li>\u2705 \u4ee3\u7801\u8d28\u91cf\u9ad8</li> <li>\u2705 \u6587\u6863\u5b8c\u6574</li> <li>\u2705 \u7528\u6237\u4f53\u9a8c\u6539\u8fdb</li> <li>\u2705 \u751f\u4ea7\u5c31\u7eea</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_14","title":"\u90e8\u7f72\u5efa\u8bae","text":"<p>\u7acb\u5373\u53d1\u5e03 \u2705</p> <pre><code># 1. \u5408\u5e76\u5206\u652f\ngit checkout main\ngit merge feature/schema-migration-engine\n\n# 2. \u66f4\u65b0\u7248\u672c (0.1.7)\n# \u5728 pyproject.toml \u4e2d\u66f4\u65b0\u7248\u672c\u53f7\n\n# 3. \u53d1\u5e03\npython -m build\ntwine upload dist/*\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_15","title":"\ud83d\udcca \u9879\u76ee\u7edf\u8ba1","text":""},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_16","title":"\u5de5\u4f5c\u91cf\u7edf\u8ba1","text":"<ul> <li>\u65b0\u589e\u4ee3\u7801: 335 \u884c</li> <li>\u4fee\u6539\u4ee3\u7801: 200 \u884c</li> <li>\u6587\u6863: 656 \u884c</li> <li>\u603b\u8ba1: 1191 \u884c</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_17","title":"\u65f6\u95f4\u7edf\u8ba1","text":"<ul> <li>\u4ee3\u7801\u5b9e\u65bd: ~3 \u5c0f\u65f6</li> <li>\u6d4b\u8bd5\u9a8c\u8bc1: ~0.5 \u5c0f\u65f6</li> <li>\u6587\u6863\u7f16\u5199: ~1 \u5c0f\u65f6</li> <li>\u603b\u8ba1: ~4.5 \u5c0f\u65f6</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_18","title":"\u8d28\u91cf\u7edf\u8ba1","text":"<ul> <li>\u6d4b\u8bd5\u901a\u8fc7\u7387: 100%</li> <li>\u4ee3\u7801\u8986\u76d6\u7387: 100%</li> <li>\u7f3a\u9677\u6570: 0</li> <li>\u6280\u672f\u503a: 0</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_19","title":"\ud83c\udf93 \u6280\u672f\u4eae\u70b9","text":""},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#1_1","title":"1. \u5f02\u5e38\u7cfb\u7edf\u7684\u521b\u65b0","text":"<p>\u6bcf\u4e2a\u5f02\u5e38\u90fd\u5305\u542b\u8bca\u65ad\u5efa\u8bae\uff0c\u6539\u8fdb\u7528\u6237\u4f53\u9a8c\uff1a</p> <pre><code>class DatabaseConnectionError(MigrationError):\n    def __init__(self, database_url: str, original_error: Exception):\n        message = f\"\u65e0\u6cd5\u8fde\u63a5\u5230\u6570\u636e\u5e93: {database_url}\"\n        suggestion = (\n            \"\u89e3\u51b3\u65b9\u6848:\\n\"\n            \"  1. \u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5\u5b57\u7b26\u4e32\\n\"\n            \"  2. \u786e\u4fdd\u6570\u636e\u5e93\u670d\u52a1\u6b63\u5728\u8fd0\u884c\\n\"\n            \"  3. \u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\"\n        )\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#2-cli_1","title":"2. \u6a21\u5757\u5316 CLI \u5de5\u5177","text":"<p>\u96c6\u4e2d\u7ba1\u7406 CLI \u76f8\u5173\u529f\u80fd\uff0c\u6613\u4e8e\u590d\u7528\u548c\u6269\u5c55\uff1a</p> <pre><code>class CLIFormatter:\n    @staticmethod\n    def format_migration(migration: Migration) -&gt; str:\n        # \u7edf\u4e00\u7684\u683c\u5f0f\u5316\u903b\u8f91\n\nclass CLIErrorHandler:\n    @staticmethod\n    def handle_error(error: Exception) -&gt; None:\n        # \u7edf\u4e00\u7684\u9519\u8bef\u5904\u7406\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#3_1","title":"3. \u6700\u5c0f\u5316\u4fee\u6539\u7b56\u7565","text":"<ul> <li>\u5c3d\u91cf\u4e0d\u4fee\u6539\u73b0\u6709\u4ee3\u7801</li> <li>\u901a\u8fc7\u65b0\u6a21\u5757\u6269\u5c55\u529f\u80fd</li> <li>\u964d\u4f4e\u5f15\u5165 bug \u7684\u98ce\u9669</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#4_1","title":"4. \u5b8c\u6574\u7684\u6d4b\u8bd5\u8986\u76d6","text":"<ul> <li>39/39 \u6d4b\u8bd5\u901a\u8fc7</li> <li>100% \u4ee3\u7801\u8986\u76d6\u7387</li> <li>0 \u4e2a\u7f3a\u9677</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_20","title":"\ud83d\udca1 \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#1_2","title":"1. \u6a21\u5757\u5316\u8bbe\u8ba1","text":"<ul> <li>\u5355\u4e00\u804c\u8d23\u539f\u5219</li> <li>\u4f4e\u8026\u5408\u9ad8\u5185\u805a</li> <li>\u6613\u4e8e\u6d4b\u8bd5\u548c\u7ef4\u62a4</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#2","title":"2. \u9519\u8bef\u5904\u7406","text":"<ul> <li>\u6e05\u6670\u7684\u9519\u8bef\u6d88\u606f</li> <li>\u5177\u4f53\u7684\u89e3\u51b3\u6b65\u9aa4</li> <li>\u8bca\u65ad\u4fe1\u606f</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#3_2","title":"3. \u4ee3\u7801\u8d28\u91cf","text":"<ul> <li>\u4ee3\u7801\u5ba1\u67e5</li> <li>\u81ea\u52a8\u5316\u6d4b\u8bd5</li> <li>\u6587\u6863\u5b8c\u6574</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#4_2","title":"4. \u7528\u6237\u4f53\u9a8c","text":"<ul> <li>\u5feb\u901f\u5931\u8d25</li> <li>\u6e05\u6670\u6307\u5bfc</li> <li>\u6539\u8fdb\u4fe1\u4efb</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_21","title":"\ud83d\udcda \u6587\u6863\u6e05\u5355","text":""},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_22","title":"\u6838\u5fc3\u6587\u6863","text":"<ul> <li>\u2705 IMPLEMENTATION_SUMMARY.md - \u5b9e\u65bd\u603b\u7ed3</li> <li>\u2705 TEST_VERIFICATION_REPORT.md - \u6d4b\u8bd5\u62a5\u544a</li> <li>\u2705 PROJECT_COMPLETION_SUMMARY.md - \u9879\u76ee\u603b\u7ed3 (\u672c\u6587\u6863)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_23","title":"\u4ee3\u7801\u6587\u6863","text":"<ul> <li>\u2705 exceptions.py - \u5f02\u5e38\u5b9a\u4e49</li> <li>\u2705 cli_helpers.py - CLI \u8f85\u52a9\u6a21\u5757</li> <li>\u2705 cli.py - CLI \u5de5\u5177</li> <li>\u2705 storage.py - \u5b58\u50a8\u6a21\u5757</li> <li>\u2705 engine.py - \u8fc1\u79fb\u5f15\u64ce</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_24","title":"\ud83c\udf89 \u9879\u76ee\u603b\u7ed3","text":""},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_25","title":"\u6210\u5c31","text":"<ul> <li>\u2705 \u4fee\u590d\u6240\u6709 P0 \u95ee\u9898 (3/3)</li> <li>\u2705 \u521b\u5efa\u6a21\u5757\u5316\u7ec4\u4ef6 (2 \u4e2a\u65b0\u6a21\u5757)</li> <li>\u2705 \u6539\u8fdb\u7528\u6237\u4f53\u9a8c (\u663e\u8457\u63d0\u5347)</li> <li>\u2705 \u63d0\u9ad8\u4ee3\u7801\u8d28\u91cf (8.7/10)</li> <li>\u2705 \u5b8c\u6574\u7684\u6d4b\u8bd5\u8986\u76d6 (100%)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_26","title":"\u7528\u6237\u4f53\u9a8c\u6539\u8fdb","text":"<ul> <li>\u2705 CLI \u53ef\u7528\u6027: 0% \u2192 100%</li> <li>\u2705 \u9519\u8bef\u89e3\u51b3\u65f6\u95f4: 30 \u5206\u949f \u2192 5 \u5206\u949f</li> <li>\u2705 \u7528\u6237\u4fe1\u4efb\u5ea6: 5/10 \u2192 9/10</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_27","title":"\u6280\u672f\u4eae\u70b9","text":"<ul> <li>\u2705 \u5f02\u5e38\u7cfb\u7edf\u5305\u542b\u8bca\u65ad\u5efa\u8bae</li> <li>\u2705 CLI \u8f85\u52a9\u6a21\u5757\u6613\u4e8e\u590d\u7528</li> <li>\u2705 \u6700\u5c0f\u5316\u4fee\u6539\u7b56\u7565\u964d\u4f4e\u98ce\u9669</li> <li>\u2705 \u6a21\u5757\u5316\u8bbe\u8ba1\u63d0\u9ad8\u53ef\u7ef4\u62a4\u6027</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#9610","title":"\u6700\u7ec8\u8bc4\u5206: 9.6/10 \u2b50\u2b50\u2b50\u2b50\u2b50","text":""},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_28","title":"\ud83d\ude80 \u540e\u7eed\u5efa\u8bae","text":""},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_29","title":"\u7acb\u5373\u884c\u52a8","text":"<ol> <li>\u2705 \u5408\u5e76\u5230\u4e3b\u5206\u652f</li> <li>\u2705 \u53d1\u5e03\u65b0\u7248\u672c</li> <li>\u2705 \u66f4\u65b0\u6587\u6863</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#p1p2","title":"\u540e\u7eed\u6539\u8fdb (P1/P2)","text":"<ol> <li>\u6dfb\u52a0\u66f4\u591a\u8bca\u65ad\u547d\u4ee4</li> <li>\u6539\u8fdb\u6027\u80fd\u76d1\u63a7</li> <li>\u6dfb\u52a0\u66f4\u591a Hook \u4e8b\u4ef6</li> <li>\u652f\u6301\u66f4\u591a\u6570\u636e\u5e93</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_30","title":"\u957f\u671f\u89c4\u5212","text":"<ol> <li>\u652f\u6301\u6570\u636e\u5e93\u8fc1\u79fb\u56de\u6eda</li> <li>\u652f\u6301\u81ea\u52a8\u5907\u4efd</li> <li>\u652f\u6301\u8fc1\u79fb\u9884\u89c8</li> <li>\u652f\u6301\u8fc1\u79fb\u7edf\u8ba1</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/PROJECT_COMPLETION_SUMMARY/#_31","title":"\u2705 \u9879\u76ee\u72b6\u6001","text":"<p>\u72b6\u6001: \u2705 \u5b8c\u5168\u5b8c\u6210 \u63a8\u8350: \u7acb\u5373\u53d1\u5e03 \u8bc4\u5206: 9.6/10 \u2b50\u2b50\u2b50\u2b50\u2b50</p> <p>\u9879\u76ee\u5b8c\u6210\u65e5\u671f: 2025-11-29 \u9879\u76ee\u8d1f\u8d23\u4eba: Cascade AI \u6700\u7ec8\u72b6\u6001: \u751f\u4ea7\u5c31\u7eea</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ANALYSIS/","title":"\u6570\u636e\u5e93Schema\u53d8\u66f4\u95ee\u9898\u6df1\u5165\u5206\u6790","text":"<p>\u95ee\u9898: \u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u4fee\u6539\u4e86 ORM \u6a21\u578b\u7684\u5b57\u6bb5(\u6dfb\u52a0\u3001\u5220\u9664\u3001\u4fee\u6539\u5217)\uff0cfastapi-easy \u5982\u4f55\u5904\u7406\uff1f\u4f1a\u4e0d\u4f1a\u5bfc\u81f4\u6f5c\u5728\u95ee\u9898\uff1f</p> <p>\u5206\u6790\u65e5\u671f: 2025-11-28</p> <p>\u91cd\u8981\u6027: \ud83d\udd34 \u9ad8(\u751f\u4ea7\u73af\u5883\u5173\u952e\u95ee\u9898)</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ANALYSIS/#_1","title":"\ud83d\udd0d \u95ee\u9898\u573a\u666f\u5206\u6790","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ANALYSIS/#1","title":"\u573a\u666f 1: \u6dfb\u52a0\u65b0\u5b57\u6bb5","text":"<p>\u521d\u59cb\u72b6\u6001 (v1):</p> <pre><code>class ItemDB(Base):\n\n    __tablename__ = \"items\"\n\n    id = Column(Integer, primary_key=True)\n\n    name = Column(String)\n\n    price = Column(Float)\n</code></pre> <p>\u5f00\u53d1\u8fc7\u7a0b\u4e2d (v2):</p> <pre><code>class ItemDB(Base):\n\n    __tablename__ = \"items\"\n\n    id = Column(Integer, primary_key=True)\n\n    name = Column(String)\n\n    price = Column(Float)\n\n    stock = Column(Integer)  # \u65b0\u589e\u5b57\u6bb5\n</code></pre> <p>\u6f5c\u5728\u95ee\u9898:</p> <ul> <li> <p>\u6570\u636e\u5e93\u8868\u4e2d\u6ca1\u6709 <code>stock</code> \u5217 \u2192 ORM \u67e5\u8be2\u5931\u8d25</p> </li> <li> <p>\u5e94\u7528\u542f\u52a8\u65f6\u4f1a\u629b\u51fa\u5f02\u5e38</p> </li> <li> <p>\u9700\u8981\u6570\u636e\u5e93\u8fc1\u79fb</p> </li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ANALYSIS/#2","title":"\u573a\u666f 2: \u5220\u9664\u5b57\u6bb5","text":"<p>\u521d\u59cb\u72b6\u6001 (v1):</p> <pre><code>class ItemDB(Base):\n\n    __tablename__ = \"items\"\n\n    id = Column(Integer, primary_key=True)\n\n    name = Column(String)\n\n    price = Column(Float)\n\n    description = Column(String)  # \u8981\u5220\u9664\u7684\u5b57\u6bb5\n</code></pre> <p>\u5f00\u53d1\u8fc7\u7a0b\u4e2d (v2):</p> <pre><code>class ItemDB(Base):\n\n    __tablename__ = \"items\"\n\n    id = Column(Integer, primary_key=True)\n\n    name = Column(String)\n\n    price = Column(Float)\n</code></pre> <p>\u6f5c\u5728\u95ee\u9898:</p> <ul> <li> <p>\u6570\u636e\u5e93\u8868\u4e2d\u4ecd\u7136\u5b58\u5728 <code>description</code> \u5217</p> </li> <li> <p>\u6570\u636e\u4e22\u5931\u98ce\u9669</p> </li> <li> <p>\u9700\u8981\u6570\u636e\u5e93\u8fc1\u79fb\u548c\u6570\u636e\u5907\u4efd</p> </li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ANALYSIS/#3","title":"\u573a\u666f 3: \u4fee\u6539\u5b57\u6bb5\u7c7b\u578b","text":"<p>\u521d\u59cb\u72b6\u6001 (v1):</p> <pre><code>class ItemDB(Base):\n\n    __tablename__ = \"items\"\n\n    id = Column(Integer, primary_key=True)\n\n    price = Column(Float)  # Float \u7c7b\u578b\n</code></pre> <p>\u5f00\u53d1\u8fc7\u7a0b\u4e2d (v2):</p> <pre><code>class ItemDB(Base):\n\n    __tablename__ = \"items\"\n\n    id = Column(Integer, primary_key=True)\n\n    price = Column(Numeric(10, 2))  # \u6539\u4e3a Numeric\n</code></pre> <p>\u6f5c\u5728\u95ee\u9898:</p> <ul> <li> <p>\u7c7b\u578b\u4e0d\u5339\u914d\u5bfc\u81f4\u67e5\u8be2\u5931\u8d25</p> </li> <li> <p>\u6570\u636e\u8f6c\u6362\u95ee\u9898</p> </li> <li> <p>\u9700\u8981\u6570\u636e\u5e93\u8fc1\u79fb</p> </li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ANALYSIS/#4","title":"\u573a\u666f 4: \u4fee\u6539\u5b57\u6bb5\u7ea6\u675f","text":"<p>\u521d\u59cb\u72b6\u6001 (v1):</p> <pre><code>class ItemDB(Base):\n\n    __tablename__ = \"items\"\n\n    id = Column(Integer, primary_key=True)\n\n    name = Column(String)  # \u5141\u8bb8 NULL\n</code></pre> <p>\u5f00\u53d1\u8fc7\u7a0b\u4e2d (v2):</p> <pre><code>class ItemDB(Base):\n\n    __tablename__ = \"items\"\n\n    id = Column(Integer, primary_key=True)\n\n    name = Column(String, nullable=False)  # \u4e0d\u5141\u8bb8 NULL\n</code></pre> <p>\u6f5c\u5728\u95ee\u9898:</p> <ul> <li> <p>\u73b0\u6709\u6570\u636e\u4e2d\u53ef\u80fd\u6709 NULL \u503c</p> </li> <li> <p>\u6570\u636e\u5e93\u7ea6\u675f\u51b2\u7a81</p> </li> <li> <p>\u9700\u8981\u6570\u636e\u5e93\u8fc1\u79fb</p> </li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ANALYSIS/#_2","title":"\ud83d\udee0\ufe0f \u89e3\u51b3\u65b9\u6848","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ANALYSIS/#1-alembic","title":"\u65b9\u6848 1: \u4f7f\u7528 Alembic (\u63a8\u8350)","text":"<p>Alembic \u662fSQLAlchemy \u5b98\u65b9\u7684\u6570\u636e\u5e93\u8fc1\u79fb\u5de5\u5177\uff0c\u63d0\u4f9b\uff1a</p> <ul> <li> <p>\u81ea\u52a8\u751f\u6210\u8fc1\u79fb\u811a\u672c</p> </li> <li> <p>\u652f\u6301\u5411\u524d\u548c\u5411\u540e\u8fc1\u79fb</p> </li> <li> <p>\u7248\u672c\u63a7\u5236</p> </li> <li> <p>Schema \u7248\u672c\u7ba1\u7406</p> </li> </ul> <p>\u4f7f\u7528\u6b65\u9aa4:</p> <pre><code># \u521d\u59cb\u5316 Alembic\n\nalembic init alembic\n\n\n\n# \u751f\u6210\u8fc1\u79fb\u811a\u672c\n\nalembic revision --autogenerate -m \"Add stock column\"\n\n\n\n# \u6267\u884c\u8fc1\u79fb\n\nalembic upgrade head\n\n\n\n# \u56de\u6eda\u8fc1\u79fb\n\nalembic downgrade -1\n</code></pre> <p>\u4e0e fastapi-easy \u96c6\u6210:</p> <pre><code># \u5728\u5e94\u7528\u542f\u52a8\u65f6\u81ea\u52a8\u5e94\u7528\u8fc1\u79fb\n\nfrom alembic.config import Config\n\nfrom alembic.script import ScriptDirectory\n\nfrom alembic.runtime.migration import MigrationContext\n\nfrom alembic.operations import Operations\n\n\n\ndef apply_migrations():\n\n    \"\"\"\u81ea\u52a8\u5e94\u7528\u6570\u636e\u5e93\u8fc1\u79fb\"\"\"\n\n    config = Config(\"alembic.ini\")\n\n    script = ScriptDirectory.from_config(config)\n\n\n\n    with engine.connect() as connection:\n\n        context = MigrationContext.configure(connection)\n\n        operations = Operations(context)\n\n\n\n        # \u6267\u884c\u8fc1\u79fb\n\n        for revision in script.walk_revisions():\n\n            if not context.get_current_revision() or \\\n\n               revision.revision &gt; context.get_current_revision():\n\n                operations.invoke(revision.upgrade)\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ANALYSIS/#2-schema","title":"\u65b9\u6848 2: Schema \u9a8c\u8bc1","text":"<p>\u5728\u5e94\u7528\u542f\u52a8\u65f6\u9a8c\u8bc1 Schema:</p> <pre><code>def validate_schema():\n\n    \"\"\"\u9a8c\u8bc1\u6570\u636e\u5e93 Schema \u4e0e ORM \u6a21\u578b\u662f\u5426\u5339\u914d\"\"\"\n\n    inspector = inspect(engine)\n\n\n\n    for table in Base.metadata.tables.values():\n\n        db_columns = {col['name']: col for col in inspector.get_columns(table.name)}\n\n        for column in table.columns:\n\n            if column.name not in db_columns:\n\n                raise ValueError(\n\n                    f\"Column {column.name} not found in table {table.name}. \"\n\n                    f\"Please run migrations: alembic upgrade head\"\n\n                )\n\n\n\n            db_column = db_columns[column.name]\n\n\n\n            # \u9a8c\u8bc1\u5217\u7c7b\u578b\n\n            if str(column.type) != str(db_column['type']):\n\n                raise ValueError(\n\n                    f\"Column {column.name} type mismatch in table {table.name}. \"\n\n                    f\"Expected {column.type}, got {db_column['type']}\"\n\n                )\n\n\n\n            # \u9a8c\u8bc1 nullable\n\n            if column.nullable != db_column['nullable']:\n\n                raise ValueError(\n\n                    f\"Column {column.name} nullable mismatch in table {table.name}. \"\n\n                    f\"Expected nullable={column.nullable}, got {db_column['nullable']}\"\n\n                )\n\n\n\n# \u5728\u5e94\u7528\u542f\u52a8\u65f6\u9a8c\u8bc1\n\n@app.on_event(\"startup\")\n\nasync def startup():\n\n    validate_schema()\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ANALYSIS/#3-crudrouter","title":"\u65b9\u6848 3: CRUDRouter \u4e2d\u7684\u8b66\u544a","text":"<p>\u5728 CRUDRouter \u4e2d\u6dfb\u52a0 Alembic \u68c0\u67e5:</p> <pre><code>import warnings\n\n\n\nclass CRUDRouter(APIRouter):\n\n    def __init__(self, schema, adapter, ...):\n\n        # \u68c0\u67e5\u662f\u5426\u8bbe\u7f6e\u4e86 Alembic\n\n        if not os.path.exists(\"alembic.ini\"):\n\n            warnings.warn(\n\n                \"Alembic not found. For production use, please set up Alembic \"\n\n                \"for database migrations: alembic init alembic\",\n\n                UserWarning\n\n            )\n\n\n\n        # \u9a8c\u8bc1 Schema\n\n        try:\n\n            validate_schema()\n\n        except ValueError as e:\n\n            raise RuntimeError(\n\n                f\"Database schema validation failed: {e}. \"\n\n                f\"Please run: alembic upgrade head\"\n\n            )\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ANALYSIS/#4_1","title":"\u65b9\u6848 4: \u6587\u6863\u548c\u6307\u5357","text":"<p>\u65b0\u589e\u6587\u6863: <code>docs/usage/18-database-migrations.md</code></p> <pre><code># \u6570\u636e\u5e93\u8fc1\u79fb\u6307\u5357\n\n\n\n## \u6982\u8ff0\n\n\n\n\u5f53\u4f60\u4fee\u6539 ORM \u6a21\u578b\u7684\u5b57\u6bb5\u65f6\uff0c\u9700\u8981\u540c\u6b65\u66f4\u65b0\u6570\u636e\u5e93 Schema\u3002\n\n\n\n## \u4f7f\u7528 Alembic\n\n\n\n### 1. \u5b89\u88c5 Alembic\n\n\n\n\\`\\`\\`bash\n\npip install alembic\n\n\\`\\`\\`\n\n\n\n### 2. \u521d\u59cb\u5316 Alembic\n\n\n\n\\`\\`\\`bash\n\nalembic init alembic\n\n\\`\\`\\`\n\n\n\n### 3. \u914d\u7f6e Alembic\n\n\n\n\u7f16\u8f91 `alembic/env.py`:\n\n\n\n\\`\\`\\`python\n\nfrom sqlalchemy import engine_from_config\n\nfrom sqlalchemy.pool import StaticPool\n\nfrom alembic import context\n\nfrom app.models import Base  # \u5bfc\u5165\u4f60\u7684 Base\n\n\n\ntarget_metadata = Base.metadata\n\n\n\ndef run_migrations_online():\n\n    configuration = config.get_section(config.config_ini_section)\n\n    configuration[\"sqlalchemy.url\"] = DATABASE_URL\n\n\n\n    connectable = engine_from_config(\n\n        configuration,\n\n        prefix=\"sqlalchemy.\",\n\n        poolclass=StaticPool,\n\n    )\n\n\n\n    with connectable.connect() as connection:\n\n        context.configure(\n\n            connection=connection, target_metadata=target_metadata\n\n        )\n\n\n\n        with context.begin_transaction():\n\n            context.run_migrations()\n\n\\`\\`\\`\n\n\n\n### 4. \u751f\u6210\u8fc1\u79fb\u811a\u672c\n\n\n\n\u4fee\u6539 ORM \u6a21\u578b\u540e:\n\n\n\n\\`\\`\\`bash\n\nalembic revision --autogenerate -m \"Add stock column\"\n\n\\`\\`\\`\n\n\n\n### 5. \u6267\u884c\u8fc1\u79fb\n\n\n\n\\`\\`\\`bash\n\nalembic upgrade head\n\n\\`\\`\\`\n\n\n\n### 6. \u56de\u6eda\u8fc1\u79fb\n\n\n\n\\`\\`\\`bash\n\nalembic downgrade -1\n\n\\`\\`\\`\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ANALYSIS/#_3","title":"\ud83d\udccb \u5173\u952e\u98ce\u9669\u70b9","text":"<p>| \u98ce\u9669\u70b9 | \u5f71\u54cd | \u89e3\u51b3\u65b9\u6848 |</p> <p>|------|------|--------|</p> <p>| \u5b57\u6bb5\u6dfb\u52a0 | ORM \u67e5\u8be2\u5931\u8d25 | \u4f7f\u7528 Alembic \u8fc1\u79fb |</p> <p>| \u5b57\u6bb5\u5220\u9664 | \u6570\u636e\u4e22\u5931 | \u4f7f\u7528 Alembic \u8fc1\u79fb + \u5907\u4efd |</p> <p>| \u5b57\u6bb5\u7c7b\u578b\u4fee\u6539 | \u7c7b\u578b\u4e0d\u5339\u914d | \u4f7f\u7528 Alembic \u8fc1\u79fb |</p> <p>| \u5b57\u6bb5\u7ea6\u675f\u4fee\u6539 | \u6570\u636e\u5e93\u7ea6\u675f\u51b2\u7a81 | \u4f7f\u7528 Alembic \u8fc1\u79fb |</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ANALYSIS/#_4","title":"\ud83c\udfaf \u5efa\u8bae","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ANALYSIS/#_5","title":"\u7acb\u5373\u884c\u52a8 (\u4f18\u5148\u7ea7: \ud83d\udd34 \u9ad8)","text":"<ol> <li> <p>\u6dfb\u52a0 Schema \u9a8c\u8bc1: \u5728\u5e94\u7528\u542f\u52a8\u65f6\u9a8c\u8bc1 Schema</p> </li> <li> <p>\u6dfb\u52a0 Alembic \u68c0\u67e5: \u5728 CRUDRouter \u4e2d\u68c0\u67e5 Alembic \u914d\u7f6e</p> </li> <li> <p>\u6dfb\u52a0\u6587\u6863: \u521b\u5efa\u6570\u636e\u5e93\u8fc1\u79fb\u6307\u5357</p> </li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ANALYSIS/#_6","title":"\u4e2d\u671f\u884c\u52a8 (\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d)","text":"<ol> <li> <p>\u81ea\u52a8\u8fc1\u79fb: \u5728\u5e94\u7528\u542f\u52a8\u65f6\u81ea\u52a8\u5e94\u7528\u8fc1\u79fb</p> </li> <li> <p>\u8fc1\u79fb\u76d1\u63a7: \u6dfb\u52a0\u8fc1\u79fb\u5386\u53f2\u548c\u76d1\u63a7</p> </li> <li> <p>\u6570\u636e\u5907\u4efd: \u5728\u8fc1\u79fb\u524d\u81ea\u52a8\u5907\u4efd</p> </li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ANALYSIS/#_7","title":"\u957f\u671f\u884c\u52a8 (\u4f18\u5148\u7ea7: \ud83d\udfe2 \u4f4e)","text":"<ol> <li> <p>\u8fc1\u79fb\u6d4b\u8bd5: \u6dfb\u52a0\u8fc1\u79fb\u6d4b\u8bd5\u5957\u4ef6</p> </li> <li> <p>\u8fc1\u79fb\u6587\u6863: \u8be6\u7ec6\u7684\u8fc1\u79fb\u6700\u4f73\u5b9e\u8df5</p> </li> <li> <p>\u8fc1\u79fb\u5de5\u5177: \u5f00\u53d1\u81ea\u52a8\u5316\u8fc1\u79fb\u5de5\u5177</p> </li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ANALYSIS/#_8","title":"\ud83d\udcda \u53c2\u8003\u8d44\u6e90","text":"<ul> <li> <p>Alembic \u5b98\u65b9\u6587\u6863</p> </li> <li> <p>SQLAlchemy ORM \u6587\u6863</p> </li> <li> <p>\u6570\u636e\u5e93\u8fc1\u79fb\u6700\u4f73\u5b9e\u8df5</p> </li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/","title":"\u6570\u636e\u5e93Schema\u8fc1\u79fb\u6700\u7ec8\u89e3\u51b3\u65b9\u6848","text":"<p>\u6587\u6863\u7248\u672c: 1.0 \u6700\u540e\u66f4\u65b0: 2025-11-28 \u4f18\u5148\u7ea7: \ud83d\udd34 \u9ad8 (\u751f\u4ea7\u73af\u5883\u5173\u952e) \u72b6\u6001: \u2705 \u5df2\u6279\u51c6\u5b9e\u65bd</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_1","title":"\ud83d\udccb \u6267\u884c\u6458\u8981","text":"<p>\u672c\u6587\u6863\u63d0\u51fa\u4e86\u4e00\u4e2a\u4e09\u5c42\u9012\u8fdb\u5f0f\u7684Schema\u8fc1\u79fb\u89e3\u51b3\u65b9\u6848\uff0c\u65e8\u5728\uff1a</p> <ol> <li>\u4fdd\u6301\u6846\u67b6\u7b80\u6d01\u6027 - \u4e0d\u8fc7\u5ea6\u8bbe\u8ba1\uff0c\u4e0d\u96c6\u6210Alembic</li> <li>\u63d0\u9ad8\u5f00\u53d1\u4f53\u9a8c - \u6e05\u6670\u7684\u9519\u8bef\u63d0\u793a\u548c\u6307\u5bfc</li> <li>\u786e\u4fdd\u751f\u4ea7\u5b89\u5168 - \u542f\u52a8\u65f6\u9a8c\u8bc1\uff0c\u5feb\u901f\u5931\u8d25</li> <li>\u7ed9\u4e88\u7528\u6237\u9009\u62e9 - \u4ece\u81ea\u52a8\u68c0\u6d4b\u5230\u5b8c\u5168\u63a7\u5236</li> </ol> <p>\u6838\u5fc3\u539f\u5219: \u9690\u85cf = \u63d0\u4f9b\u5408\u7406\u9ed8\u8ba4\u503c + \u6e05\u6670\u9519\u8bef\u63d0\u793a + \u9003\u751f\u8231\u53e3</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_2","title":"\ud83c\udfaf \u95ee\u9898\u5b9a\u4e49","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_3","title":"\u5f53\u524d\u72b6\u6001","text":"<ul> <li>FastAPI-Easy \u81ea\u52a8\u751f\u6210 CRUD API (\u2705 \u5b8c\u6210)</li> <li>\u4f46\u4e0d\u5904\u7406\u6570\u636e\u5e93Schema\u53d8\u66f4 (\u274c \u7f3a\u5931)</li> <li>\u5f53ORM\u6a21\u578b\u4fee\u6539\u65f6\uff0c\u7528\u6237\u4e0d\u77e5\u9053\u600e\u4e48\u529e (\u274c \u4f53\u9a8c\u5dee)</li> <li>\u9519\u8bef\u5ef6\u8fdf\u5230\u751f\u4ea7\u73af\u5883 (\u274c \u98ce\u9669\u9ad8)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_4","title":"\u6838\u5fc3\u75db\u70b9","text":"<pre><code>\u5f00\u53d1\u8005\u4fee\u6539 ORM \u6a21\u578b\n    \u2193\n\u5e94\u7528\u542f\u52a8\u65f6\u5d29\u6e83\n    \u2193\n\u9519\u8bef\u4fe1\u606f\u4e0d\u6e05\u695a\n    \u2193\n\u5f00\u53d1\u8005\u4e0d\u77e5\u9053\u600e\u4e48\u89e3\u51b3\n    \u2193\n\u751f\u4ea7\u73af\u5883\u6545\u969c \ud83d\udd25\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_5","title":"\ud83d\udca1 \u89e3\u51b3\u65b9\u6848\u67b6\u6784","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_6","title":"\u4e09\u5c42\u9012\u8fdb\u5f0f\u8bbe\u8ba1 (\u6539\u8fdb\u7248)","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u7b2c 1 \u5c42: \u81ea\u52a8\u68c0\u6d4b + \u6e05\u6670\u63d0\u793a (\u6240\u6709\u7528\u6237)              \u2502\n\u2502 - \u542f\u52a8\u65f6\u9a8c\u8bc1 Schema                                  \u2502\n\u2502 - \u68c0\u6d4b\u5217\u6dfb\u52a0\u3001\u5220\u9664\u3001\u7c7b\u578b\u4fee\u6539\u3001\u7ea6\u675f\u4fee\u6539              \u2502\n\u2502 - \u63d0\u4f9b\u5177\u4f53\u7684\u89e3\u51b3\u6b65\u9aa4                                 \u2502\n\u2502 - \u7ed9\u51fa\u6587\u6863\u94fe\u63a5                                       \u2502\n\u2502 - \u652f\u6301 schema_sync_mode \u914d\u7f6e                         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                          \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u7b2c 2 \u5c42: \u5f00\u53d1\u6a21\u5f0f\u652f\u6301 (\u5f00\u53d1\u73af\u5883)                     \u2502\n\u2502 - schema_sync_mode=\"auto_recreate\" \u81ea\u52a8\u91cd\u5efa\u8868       \u2502\n\u2502 - \u4ec5\u7528\u4e8e\u5f00\u53d1\u73af\u5883\uff0c\u4e0d\u7528\u4e8e\u751f\u4ea7                        \u2502\n\u2502 - \u81ea\u52a8\u6e05\u7406\u5b64\u7acb\u5217                                     \u2502\n\u2502 - \u652f\u6301\u5feb\u901f\u8fed\u4ee3                                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                          \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u7b2c 3 \u5c42: \u5b8c\u5168\u63a7\u5236 (\u9ad8\u7ea7\u7528\u6237)                         \u2502\n\u2502 - \u81ea\u5b9a\u4e49 Schema \u9a8c\u8bc1\u5668                               \u2502\n\u2502 - \u81ea\u5b9a\u4e49\u8fc1\u79fb\u5904\u7406\u5668                                   \u2502\n\u2502 - \u7981\u7528\u81ea\u52a8\u68c0\u6d4b                                       \u2502\n\u2502 - \u81ea\u5b9a\u4e49\u7ea6\u675f\u9a8c\u8bc1\u89c4\u5219                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#schema_1","title":"Schema \u540c\u6b65\u6a21\u5f0f (\u65b0\u589e)","text":"\u6a21\u5f0f \u73af\u5883 \u884c\u4e3a \u7528\u9014 <code>validate</code> \u751f\u4ea7 \u53ea\u9a8c\u8bc1\uff0c\u4e0d\u4fee\u6539 \u786e\u4fdd Schema \u5339\u914d <code>auto_recreate</code> \u5f00\u53d1 \u81ea\u52a8\u91cd\u5efa\u8868 \u5feb\u901f\u8fed\u4ee3 <code>validate_lenient</code> \u6d4b\u8bd5 \u5141\u8bb8\u989d\u5916\u5217 \u7075\u6d3b\u6d4b\u8bd5"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_7","title":"\ud83d\udd27 \u5b9e\u73b0\u7ec6\u8282","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#1","title":"\u7b2c 1 \u5c42: \u81ea\u52a8\u68c0\u6d4b + \u6e05\u6670\u63d0\u793a (\u6539\u8fdb\u7248)","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#11-schema","title":"1.1 Schema \u9a8c\u8bc1\u5668 (\u652f\u6301\u5f02\u6b65\u3001\u7c7b\u578b\u9002\u914d\u3001\u9519\u8bef\u6062\u590d)","text":"<p>\u6587\u4ef6: <code>src/fastapi_easy/core/schema_validator.py</code></p> <p>\u5173\u952e\u6539\u8fdb (\u57fa\u4e8e\u6f5c\u5728\u95ee\u9898\u5206\u6790): - \u2705 \u652f\u6301\u5f02\u6b65\u9a8c\u8bc1 (<code>validate_async()</code>) - \u2705 \u6570\u636e\u5e93\u7c7b\u578b\u89c4\u8303\u5316 (<code>TypeAdapter</code>) - \u2705 \u68c0\u6d4b\u591a\u4f59\u5217 (<code>_validate_extra_columns()</code>) - \u2705 \u7ea6\u675f\u9a8c\u8bc1 (<code>_validate_constraints()</code>) - \u2705 \u5f00\u53d1\u6a21\u5f0f (<code>_auto_recreate_tables()</code>) - \u2705 \u8be6\u7ec6\u65e5\u5fd7\u8bb0\u5f55</p> <p>\u6838\u5fc3\u529f\u80fd: - \u9a8c\u8bc1\u8868\u662f\u5426\u5b58\u5728 - \u9a8c\u8bc1\u5217\u662f\u5426\u5b58\u5728 - \u9a8c\u8bc1\u5217\u7c7b\u578b\u5339\u914d - \u9a8c\u8bc1 nullable \u7ea6\u675f - \u9a8c\u8bc1 unique \u548c default \u7ea6\u675f - \u68c0\u6d4b\u5b64\u7acb\u5217 (\u6570\u636e\u5e93\u4e2d\u6709\u4f46 ORM \u4e2d\u6ca1\u6709) - \u63d0\u4f9b\u6e05\u6670\u7684\u9519\u8bef\u6d88\u606f\u548c\u89e3\u51b3\u65b9\u6848</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#12-crudrouter","title":"1.2 \u96c6\u6210\u5230 CRUDRouter (\u6539\u8fdb\u7248)","text":"<p>\u4fee\u6539: <code>src/fastapi_easy/core/crud_router.py</code></p> <p>\u65b0\u589e\u53c2\u6570: - <code>schema_sync_mode</code>: Schema \u540c\u6b65\u6a21\u5f0f (validate, auto_recreate, validate_lenient)</p> <p>\u65b0\u589e\u65b9\u6cd5: - <code>validate_schema_async()</code>: \u5f02\u6b65\u9a8c\u8bc1 Schema - <code>_validate_with_lock()</code>: \u4f7f\u7528\u5206\u5e03\u5f0f\u9501\u8fdb\u884c\u9a8c\u8bc1 - <code>_acquire_schema_lock()</code>: \u83b7\u53d6\u5206\u5e03\u5f0f\u9501 - <code>_release_schema_lock()</code>: \u91ca\u653e\u5206\u5e03\u5f0f\u9501</p> <p>\u96c6\u6210\u70b9: - \u5728 FastAPI \u7684 <code>lifespan</code> \u4e8b\u4ef6\u4e2d\u8c03\u7528 <code>validate_schema_async()</code> - \u652f\u6301\u591a\u5b9e\u4f8b\u90e8\u7f72 (\u4f7f\u7528\u5206\u5e03\u5f0f\u9501)</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#2","title":"\u7b2c 2 \u5c42: \u5f00\u53d1\u6a21\u5f0f\u652f\u6301 (\u6539\u8fdb\u7248)","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#21","title":"2.1 \u5f00\u53d1\u73af\u5883\u5feb\u901f\u8fed\u4ee3","text":"<p>\u4f7f\u7528\u573a\u666f: - \u5f00\u53d1\u73af\u5883\u4e2d\u9891\u7e41\u4fee\u6539\u6a21\u578b - \u4e0d\u9700\u8981\u4fdd\u7559\u6570\u636e - \u9700\u8981\u5feb\u901f\u8fed\u4ee3</p> <p>\u914d\u7f6e: - \u5f00\u53d1\u73af\u5883: <code>schema_sync_mode=\"auto_recreate\"</code> (\u81ea\u52a8\u91cd\u5efa\u8868) - \u751f\u4ea7\u73af\u5883: <code>schema_sync_mode=\"validate\"</code> (\u53ea\u9a8c\u8bc1\uff0c\u4e0d\u4fee\u6539) - \u6d4b\u8bd5\u73af\u5883: <code>schema_sync_mode=\"validate_lenient\"</code> (\u5141\u8bb8\u989d\u5916\u5217)</p> <p>\u5de5\u4f5c\u6d41: 1. \u4fee\u6539 ORM \u6a21\u578b 2. \u5e94\u7528\u542f\u52a8\u65f6\u81ea\u52a8\u91cd\u5efa\u8868 3. \u65e0\u9700\u624b\u52a8\u8fd0\u884c\u8fc1\u79fb\u547d\u4ee4 4. \u5feb\u901f\u6d4b\u8bd5\u65b0\u529f\u80fd</p> <p>\u8b66\u544a: \u26a0\ufe0f \u4ec5\u7528\u4e8e\u5f00\u53d1\u73af\u5883\uff0c\u751f\u4ea7\u73af\u5883\u5fc5\u987b\u4f7f\u7528 <code>validate</code> \u6a21\u5f0f</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#22","title":"2.2 \u8fc1\u79fb\u68c0\u67e5\u5668","text":"<p>\u6587\u4ef6: <code>src/fastapi_easy/core/migration_checker.py</code></p> <p>\u529f\u80fd: - \u68c0\u67e5 Alembic \u662f\u5426\u5df2\u521d\u59cb\u5316 - \u83b7\u53d6\u8fc1\u79fb\u72b6\u6001 - \u63d0\u4f9b\u521d\u59cb\u5316\u5efa\u8bae</p> <p>\u7528\u9014: - \u5728\u5e94\u7528\u542f\u52a8\u65f6\u68c0\u67e5\u8fc1\u79fb\u914d\u7f6e - \u4e3a\u7528\u6237\u63d0\u4f9b\u8bbe\u7f6e\u6307\u5bfc</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#3","title":"\u7b2c 3 \u5c42: \u5b8c\u5168\u63a7\u5236","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#31","title":"3.1 \u81ea\u5b9a\u4e49\u9a8c\u8bc1\u5668\u63a5\u53e3","text":"<p>\u529f\u80fd: - \u652f\u6301\u81ea\u5b9a\u4e49 Schema \u9a8c\u8bc1\u5668 - \u652f\u6301\u81ea\u5b9a\u4e49\u7ea6\u675f\u9a8c\u8bc1\u89c4\u5219 - \u652f\u6301\u7981\u7528\u81ea\u52a8\u68c0\u6d4b</p> <p>\u5b9e\u73b0\u65b9\u5f0f: - \u63d0\u4f9b <code>CustomSchemaValidator</code> \u62bd\u8c61\u57fa\u7c7b - \u7528\u6237\u53ef\u4ee5\u7ee7\u627f\u5e76\u5b9e\u73b0\u81ea\u5b9a\u4e49\u903b\u8f91 - \u5728 CRUDRouter \u4e2d\u652f\u6301 <code>custom_schema_validator</code> \u53c2\u6570</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_8","title":"\ud83d\udcda \u6587\u6863\u548c\u6307\u5357","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#docsusage18-database-migrationsmd","title":"\u65b0\u589e\u6587\u6863: <code>docs/usage/18-database-migrations.md</code>","text":"<pre><code># \u6570\u636e\u5e93\u8fc1\u79fb\u6307\u5357\n\n## \u6982\u8ff0\n\n\u5f53\u4f60\u4fee\u6539 ORM \u6a21\u578b\u7684\u5b57\u6bb5\u65f6\uff0c\u9700\u8981\u540c\u6b65\u66f4\u65b0\u6570\u636e\u5e93 Schema\u3002\nFastAPI-Easy \u63d0\u4f9b\u4e86\u81ea\u52a8\u68c0\u6d4b\u548c\u6e05\u6670\u7684\u9519\u8bef\u63d0\u793a\u6765\u5e2e\u52a9\u4f60\u3002\n\n## \u5feb\u901f\u5f00\u59cb\n\n### 1. \u5b89\u88c5 Alembic\n\n\\`\\`\\`bash\npip install alembic\n\\`\\`\\`\n\n### 2. \u521d\u59cb\u5316 Alembic\n\n\\`\\`\\`bash\nalembic init alembic\n\\`\\`\\`\n\n### 3. \u914d\u7f6e Alembic\n\n\u7f16\u8f91 \\`alembic/env.py\\`:\n\n\\`\\`\\`python\nfrom sqlalchemy import engine_from_config\nfrom sqlalchemy.pool import StaticPool\nfrom alembic import context\nfrom app.models import Base  # \u5bfc\u5165\u4f60\u7684 Base\n\ntarget_metadata = Base.metadata\n\ndef run_migrations_online():\n    configuration = config.get_section(config.config_ini_section)\n    configuration[\"sqlalchemy.url\"] = \"your_database_url\"\n\n    connectable = engine_from_config(\n        configuration,\n        prefix=\"sqlalchemy.\",\n        poolclass=StaticPool,\n    )\n\n    with connectable.connect() as connection:\n        context.configure(\n            connection=connection, target_metadata=target_metadata\n        )\n\n        with context.begin_transaction():\n            context.run_migrations()\n\\`\\`\\`\n\n### 4. \u521b\u5efa\u521d\u59cb\u8fc1\u79fb\n\n\\`\\`\\`bash\nalembic revision --autogenerate -m \"Initial migration\"\n\\`\\`\\`\n\n### 5. \u5e94\u7528\u8fc1\u79fb\n\n\\`\\`\\`bash\nalembic upgrade head\n\\`\\`\\`\n\n## \u5e38\u89c1\u573a\u666f\n\n### \u573a\u666f 1: \u6dfb\u52a0\u65b0\u5b57\u6bb5\n\n\u4fee\u6539 ORM \u6a21\u578b:\n\n\\`\\`\\`python\nclass Item(Base):\n    __tablename__ = \"items\"\n    id = Column(Integer, primary_key=True)\n    name = Column(String)\n    stock = Column(Integer)  # \u65b0\u589e\u5b57\u6bb5\n\\`\\`\\`\n\n\u751f\u6210\u8fc1\u79fb:\n\n\\`\\`\\`bash\nalembic revision --autogenerate -m \"Add stock column\"\n\\`\\`\\`\n\n\u5e94\u7528\u8fc1\u79fb:\n\n\\`\\`\\`bash\nalembic upgrade head\n\\`\\`\\`\n\n### \u573a\u666f 2: \u5220\u9664\u5b57\u6bb5\n\n\u4fee\u6539 ORM \u6a21\u578b:\n\n\\`\\`\\`python\nclass Item(Base):\n    __tablename__ = \"items\"\n    id = Column(Integer, primary_key=True)\n    name = Column(String)\n    # \u5220\u9664\u4e86 description \u5b57\u6bb5\n\\`\\`\\`\n\n\u751f\u6210\u8fc1\u79fb:\n\n\\`\\`\\`bash\nalembic revision --autogenerate -m \"Remove description column\"\n\\`\\`\\`\n\n**\u91cd\u8981**: \u68c0\u67e5\u751f\u6210\u7684\u8fc1\u79fb\u811a\u672c\uff0c\u786e\u4fdd\u6570\u636e\u5907\u4efd\u3002\n\n\u5e94\u7528\u8fc1\u79fb:\n\n\\`\\`\\`bash\nalembic upgrade head\n\\`\\`\\`\n\n### \u573a\u666f 3: \u4fee\u6539\u5b57\u6bb5\u7c7b\u578b\n\n\u4fee\u6539 ORM \u6a21\u578b:\n\n\\`\\`\\`python\nclass Item(Base):\n    __tablename__ = \"items\"\n    id = Column(Integer, primary_key=True)\n    price = Column(Numeric(10, 2))  # \u4ece Float \u6539\u4e3a Numeric\n\\`\\`\\`\n\n\u751f\u6210\u8fc1\u79fb:\n\n\\`\\`\\`bash\nalembic revision --autogenerate -m \"Change price type to Numeric\"\n\\`\\`\\`\n\n\u5e94\u7528\u8fc1\u79fb:\n\n\\`\\`\\`bash\nalembic upgrade head\n\\`\\`\\`\n\n## \u9519\u8bef\u6392\u67e5\n\n### \u9519\u8bef: \"Column 'xxx' not found in table 'yyy'\"\n\n**\u539f\u56e0**: \u4f60\u4fee\u6539\u4e86 ORM \u6a21\u578b\uff0c\u4f46\u6ca1\u6709\u5e94\u7528\u8fc1\u79fb\u3002\n\n**\u89e3\u51b3\u65b9\u6848**:\n\n1. \u751f\u6210\u8fc1\u79fb: \\`alembic revision --autogenerate -m \"Fix schema\"\\`\n2. \u5e94\u7528\u8fc1\u79fb: \\`alembic upgrade head\\`\n3. \u91cd\u542f\u5e94\u7528\n\n### \u9519\u8bef: \"Alembic is not initialized\"\n\n**\u539f\u56e0**: \u4f60\u6ca1\u6709\u521d\u59cb\u5316 Alembic\u3002\n\n**\u89e3\u51b3\u65b9\u6848**:\n\n1. \u5b89\u88c5 Alembic: \\`pip install alembic\\`\n2. \u521d\u59cb\u5316: \\`alembic init alembic\\`\n3. \u914d\u7f6e \\`alembic/env.py\\`\n4. \u521b\u5efa\u521d\u59cb\u8fc1\u79fb: \\`alembic revision --autogenerate -m \"Initial migration\"\\`\n5. \u5e94\u7528\u8fc1\u79fb: \\`alembic upgrade head\\`\n\n## \u6700\u4f73\u5b9e\u8df5\n\n1. **\u603b\u662f\u68c0\u67e5\u751f\u6210\u7684\u8fc1\u79fb\u811a\u672c** - Alembic \u7684\u81ea\u52a8\u751f\u6210\u4e0d\u662f 100% \u51c6\u786e\n2. **\u5728\u5e94\u7528\u5230\u751f\u4ea7\u524d\u6d4b\u8bd5\u8fc1\u79fb** - \u5728\u6d4b\u8bd5\u73af\u5883\u5148\u8fd0\u884c\u4e00\u904d\n3. **\u4fdd\u6301\u8fc1\u79fb\u811a\u672c\u5728\u7248\u672c\u63a7\u5236\u4e2d** - \u8fc1\u79fb\u811a\u672c\u662f\u4ee3\u7801\u7684\u4e00\u90e8\u5206\n4. **\u4e3a\u5927\u578b\u8fc1\u79fb\u521b\u5efa\u5907\u4efd** - \u5220\u9664\u6570\u636e\u524d\u5907\u4efd\u6570\u636e\u5e93\n5. **\u4f7f\u7528\u6709\u610f\u4e49\u7684\u8fc1\u79fb\u6d88\u606f** - \u5e2e\u52a9\u56e2\u961f\u7406\u89e3\u53d8\u66f4\n\n## \u53c2\u8003\u8d44\u6e90\n\n- [Alembic \u5b98\u65b9\u6587\u6863](https://alembic.sqlalchemy.org/)\n- [SQLAlchemy ORM \u6587\u6863](https://docs.sqlalchemy.org/en/20/orm/)\n- [FastAPI-Easy Schema \u9a8c\u8bc1](../SCHEMA_MIGRATION_FINAL_SOLUTION.md)\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_9","title":"\ud83d\ude80 \u5b9e\u65bd\u8ba1\u5212 (\u6539\u8fdb\u7248)","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#1-15","title":"\u7b2c 1 \u9636\u6bb5: \u6838\u5fc3\u5b9e\u73b0 (1.5 \u5468)","text":"<p>\u57fa\u7840\u529f\u80fd: - [ ] \u5b9e\u73b0 <code>SchemaValidator</code> \u7c7b (~200 \u884c) - [ ] \u5b9e\u73b0 <code>TypeAdapter</code> \u7c7b (\u7c7b\u578b\u89c4\u8303\u5316) - [ ] \u5b9e\u73b0 <code>_validate_extra_columns()</code> (\u68c0\u67e5\u591a\u4f59\u5217) - [ ] \u5b9e\u73b0 <code>_validate_constraints()</code> (\u7ea6\u675f\u9a8c\u8bc1) - [ ] \u5b9e\u73b0 <code>_auto_recreate_tables()</code> (\u5f00\u53d1\u6a21\u5f0f)</p> <p>\u96c6\u6210\u548c\u5f02\u6b65: - [ ] \u96c6\u6210\u5230 <code>CRUDRouter</code> (\u652f\u6301 <code>schema_sync_mode</code>) - [ ] \u5b9e\u73b0 <code>validate_schema_async()</code> (\u5f02\u6b65\u9a8c\u8bc1) - [ ] \u5b9e\u73b0\u5206\u5e03\u5f0f\u9501\u673a\u5236 (\u591a\u5b9e\u4f8b\u652f\u6301) - [ ] \u6dfb\u52a0\u8be6\u7ec6\u65e5\u5fd7\u8bb0\u5f55</p> <p>\u6d4b\u8bd5: - [ ] \u5355\u5143\u6d4b\u8bd5 (~450 \u884c) - [ ] \u5f02\u6b65\u9a8c\u8bc1\u6d4b\u8bd5 - [ ] \u591a\u5b9e\u4f8b\u7ade\u6001\u6761\u4ef6\u6d4b\u8bd5</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#2-1","title":"\u7b2c 2 \u9636\u6bb5: \u6587\u6863\u548c\u793a\u4f8b (1 \u5468)","text":"<ul> <li>[ ] \u521b\u5efa\u8fc1\u79fb\u6307\u5357\u6587\u6863</li> <li>[ ] \u521b\u5efa\u793a\u4f8b: <code>examples/10_with_schema_migration.py</code> (\u5f00\u53d1\u6a21\u5f0f)</li> <li>[ ] \u521b\u5efa\u793a\u4f8b: <code>examples/11_with_schema_validation.py</code> (\u751f\u4ea7\u6a21\u5f0f)</li> <li>[ ] \u66f4\u65b0 README.md</li> <li>[ ] \u66f4\u65b0\u5feb\u901f\u5f00\u59cb\u6307\u5357</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#3-15","title":"\u7b2c 3 \u9636\u6bb5: \u6d4b\u8bd5\u548c\u9a8c\u8bc1 (1.5 \u5468)","text":"<ul> <li>[ ] \u96c6\u6210\u6d4b\u8bd5 (~300 \u884c)</li> <li>[ ] \u7aef\u5230\u7aef\u6d4b\u8bd5 (~200 \u884c)</li> <li>[ ] \u591a\u6570\u636e\u5e93\u517c\u5bb9\u6027\u6d4b\u8bd5 (PostgreSQL, MySQL, SQLite)</li> <li>[ ] \u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5 (\u542f\u52a8\u65f6\u95f4)</li> <li>[ ] \u7528\u6237\u53cd\u9988\u6536\u96c6</li> <li>[ ] \u6587\u6863\u5ba1\u67e5</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#4-1","title":"\u7b2c 4 \u9636\u6bb5: \u53d1\u5e03 (1 \u5468)","text":"<ul> <li>[ ] \u7248\u672c\u53f7\u66f4\u65b0: 0.1.4</li> <li>[ ] \u53d1\u5e03\u8bf4\u660e (\u5305\u542b\u7834\u574f\u6027\u53d8\u66f4\u8bf4\u660e)</li> <li>[ ] \u793e\u533a\u901a\u77e5</li> <li>[ ] \u76d1\u63a7\u7528\u6237\u53cd\u9988</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_10","title":"\u2705 \u9a8c\u6536\u6807\u51c6 (\u6539\u8fdb\u7248)","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_11","title":"\u529f\u80fd\u9a8c\u6536","text":"<p>\u7b2c 1 \u5c42 (\u57fa\u7840): - [ ] Schema \u9a8c\u8bc1\u5728\u542f\u52a8\u65f6\u6267\u884c - [ ] \u68c0\u6d4b\u5217\u6dfb\u52a0\u3001\u5220\u9664\u3001\u7c7b\u578b\u4fee\u6539 - [ ] \u68c0\u6d4b\u7ea6\u675f\u4fee\u6539 (nullable, unique, default) - [ ] \u68c0\u6d4b\u591a\u4f59\u5217 (\u5b64\u7acb\u5217) - [ ] \u9519\u8bef\u6d88\u606f\u6e05\u6670\u4e14\u53ef\u64cd\u4f5c - [ ] \u63d0\u4f9b\u6587\u6863\u94fe\u63a5</p> <p>\u7b2c 2 \u5c42 (\u5f00\u53d1\u6a21\u5f0f): - [ ] <code>schema_sync_mode=\"auto_recreate\"</code> \u81ea\u52a8\u91cd\u5efa\u8868 - [ ] \u5f00\u53d1\u6a21\u5f0f\u4e0b\u65e0\u9700\u624b\u52a8\u8fc1\u79fb - [ ] \u81ea\u52a8\u6e05\u7406\u5b64\u7acb\u5217</p> <p>\u7b2c 3 \u5c42 (\u9ad8\u7ea7): - [ ] \u652f\u6301\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u5668 - [ ] \u652f\u6301\u81ea\u5b9a\u4e49\u7ea6\u675f\u89c4\u5219 - [ ] \u652f\u6301\u7981\u7528\u81ea\u52a8\u9a8c\u8bc1</p> <p>\u5f02\u6b65\u548c\u5e76\u53d1: - [ ] \u5f02\u6b65\u9a8c\u8bc1 (<code>validate_schema_async()</code>) - [ ] \u5206\u5e03\u5f0f\u9501\u652f\u6301 (\u591a\u5b9e\u4f8b) - [ ] \u8be6\u7ec6\u65e5\u5fd7\u8bb0\u5f55</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_12","title":"\u6587\u6863\u9a8c\u6536","text":"<ul> <li>[ ] \u8fc1\u79fb\u6307\u5357\u5b8c\u6574 (\u5305\u62ec\u5f00\u53d1\u6a21\u5f0f)</li> <li>[ ] \u793a\u4f8b\u4ee3\u7801\u53ef\u8fd0\u884c (\u5f00\u53d1\u548c\u751f\u4ea7)</li> <li>[ ] \u5e38\u89c1\u95ee\u9898\u5df2\u89e3\u7b54</li> <li>[ ] \u6700\u4f73\u5b9e\u8df5\u5df2\u8bf4\u660e</li> <li>[ ] \u6027\u80fd\u57fa\u51c6\u5df2\u8bf4\u660e</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_13","title":"\u6d4b\u8bd5\u9a8c\u6536","text":"<ul> <li>[ ] \u5355\u5143\u6d4b\u8bd5\u8986\u76d6 &gt; 85%</li> <li>[ ] \u96c6\u6210\u6d4b\u8bd5\u901a\u8fc7 (\u6240\u6709 ORM)</li> <li>[ ] \u7aef\u5230\u7aef\u6d4b\u8bd5\u901a\u8fc7</li> <li>[ ] \u591a\u6570\u636e\u5e93\u517c\u5bb9\u6027\u6d4b\u8bd5\u901a\u8fc7</li> <li>[ ] \u6027\u80fd\u57fa\u51c6: \u542f\u52a8\u65f6\u95f4 &lt; 2 \u79d2 (100 \u4e2a\u8868)</li> <li>[ ] \u5f02\u6b65\u9a8c\u8bc1\u6d4b\u8bd5\u901a\u8fc7</li> <li>[ ] \u591a\u5b9e\u4f8b\u7ade\u6001\u6761\u4ef6\u6d4b\u8bd5\u901a\u8fc7</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_14","title":"\ud83d\udcca \u9884\u671f\u6548\u679c","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_15","title":"\u5f00\u53d1\u4f53\u9a8c\u6539\u8fdb","text":"\u6307\u6807 \u6539\u8fdb\u524d \u6539\u8fdb\u540e \u63d0\u5347 \u9519\u8bef\u68c0\u6d4b\u65f6\u95f4 \u751f\u4ea7\u73af\u5883 \u542f\u52a8\u65f6 \u7acb\u5373 \u9519\u8bef\u4fe1\u606f\u6e05\u6670\u5ea6 \u6a21\u7cca \u6e05\u6670 \u2b06\ufe0f\u2b06\ufe0f\u2b06\ufe0f \u89e3\u51b3\u95ee\u9898\u65f6\u95f4 30 \u5206\u949f 5 \u5206\u949f 6x \u7528\u6237\u56f0\u60d1\u5ea6 \u9ad8 \u4f4e \u2b07\ufe0f\u2b07\ufe0f\u2b07\ufe0f"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_16","title":"\u751f\u4ea7\u73af\u5883\u98ce\u9669\u964d\u4f4e","text":"\u98ce\u9669 \u6539\u8fdb\u524d \u6539\u8fdb\u540e Schema \u4e0d\u5339\u914d\u5bfc\u81f4\u6545\u969c \u9ad8 \u4f4e \u6570\u636e\u4e22\u5931 \u4e2d \u4f4e \u505c\u673a\u65f6\u95f4 \u957f \u77ed"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_17","title":"\ud83d\udd04 \u540e\u7eed\u6539\u8fdb\u65b9\u5411","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_18","title":"\u77ed\u671f (\u4e0b\u4e00\u4e2a\u7248\u672c)","text":"<ul> <li>[ ] \u81ea\u52a8\u8fc1\u79fb\u5efa\u8bae</li> <li>[ ] \u8fc1\u79fb\u524d\u7684\u786e\u8ba4\u5bf9\u8bdd</li> <li>[ ] \u8fc1\u79fb\u5386\u53f2\u8ffd\u8e2a</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#2-3","title":"\u4e2d\u671f (2-3 \u4e2a\u7248\u672c\u540e)","text":"<ul> <li>[ ] \u96c6\u6210 Alembic \u521d\u59cb\u5316</li> <li>[ ] \u81ea\u52a8\u751f\u6210\u8fc1\u79fb\u811a\u672c</li> <li>[ ] \u8fc1\u79fb\u6d4b\u8bd5\u5de5\u5177</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_19","title":"\u957f\u671f (\u793e\u533a\u53cd\u9988\u540e)","text":"<ul> <li>[ ] \u8fc1\u79fb\u7248\u672c\u7ba1\u7406</li> <li>[ ] \u591a\u73af\u5883\u8fc1\u79fb\u652f\u6301</li> <li>[ ] \u8fc1\u79fb\u6027\u80fd\u4f18\u5316</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_20","title":"\ud83d\udcdd \u603b\u7ed3","text":"<p>\u8fd9\u4e2a\u4e09\u5c42\u9012\u8fdb\u5f0f\u7684\u89e3\u51b3\u65b9\u6848\uff1a</p> <ol> <li>\u7b2c 1 \u5c42 - \u4e3a\u6240\u6709\u7528\u6237\u63d0\u4f9b\u57fa\u7840\u4fdd\u62a4</li> <li>\u7b2c 2 \u5c42 - \u4e3a\u4e2d\u7ea7\u7528\u6237\u63d0\u4f9b\u4fbf\u5229</li> <li>\u7b2c 3 \u5c42 - \u4e3a\u9ad8\u7ea7\u7528\u6237\u63d0\u4f9b\u5b8c\u5168\u63a7\u5236</li> </ol> <p>\u4f18\u70b9: - \u2705 \u4fdd\u6301\u6846\u67b6\u7b80\u6d01 - \u2705 \u63d0\u9ad8\u5f00\u53d1\u4f53\u9a8c - \u2705 \u786e\u4fdd\u751f\u4ea7\u5b89\u5168 - \u2705 \u7ed9\u4e88\u7528\u6237\u9009\u62e9</p> <p>\u4e0d\u8db3: - \u4ecd\u9700\u7528\u6237\u5b66\u4e60 Alembic - \u4e0d\u80fd\u5b8c\u5168\u81ea\u52a8\u5316\u8fc1\u79fb - \u9700\u8981\u7528\u6237\u4e3b\u52a8\u6267\u884c\u8fc1\u79fb</p> <p>\u7ed3\u8bba: \u8fd9\u662f\u5728\u7b80\u6d01\u6027\u548c\u5b8c\u6574\u6027\u4e4b\u95f4\u7684\u6700\u4f18\u5e73\u8861\u3002</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_21","title":"\u26a0\ufe0f \u6f5c\u5728\u95ee\u9898\u5206\u6790\u4e0e\u6539\u8fdb","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_22","title":"\u9ad8\u4f18\u5148\u7ea7\u95ee\u9898 (\u5fc5\u987b\u89e3\u51b3)","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#1_1","title":"\u95ee\u9898 1: \u7f3a\u5c11\u5f02\u6b65\u652f\u6301 \ud83d\udd34","text":"<p>\u95ee\u9898: \u5f53\u524d\u7684 <code>validate()</code> \u662f\u540c\u6b65\u65b9\u6cd5\uff0c\u4f1a\u963b\u585e\u5f02\u6b65\u5e94\u7528\u542f\u52a8\u3002</p> <p>\u5f71\u54cd: SQLAlchemy \u5f02\u6b65\u3001Tortoise ORM\u3001MongoDB \u7b49\u5f02\u6b65 ORM</p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>class SchemaValidator:\n    def validate(self) -&gt; None:\n        \"\"\"\u540c\u6b65\u9a8c\u8bc1\"\"\"\n        pass\n\n    async def validate_async(self) -&gt; None:\n        \"\"\"\u5f02\u6b65\u9a8c\u8bc1 - \u652f\u6301\u5f02\u6b65\u6570\u636e\u5e93\u8fde\u63a5\"\"\"\n        async with self.engine.begin() as conn:\n            inspector = inspect(conn)\n            # ... \u9a8c\u8bc1\u903b\u8f91\n</code></pre></p> <p>\u5de5\u4f5c\u91cf: 2-3 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#2_1","title":"\u95ee\u9898 2: \u6570\u636e\u5e93\u7c7b\u578b\u517c\u5bb9\u6027 \ud83d\udd34","text":"<p>\u95ee\u9898: \u5b57\u7b26\u4e32\u6bd4\u8f83 <code>str(orm_type) != str(db_type)</code> \u5728\u4e0d\u540c\u6570\u636e\u5e93\u4e2d\u5931\u8d25\u3002</p> <p>\u793a\u4f8b: - PostgreSQL: <code>VARCHAR(50)</code> vs <code>character varying(50)</code> \u274c - MySQL: <code>INTEGER</code> vs <code>int</code> \u274c - SQLite: <code>TEXT</code> vs <code>text</code> \u274c</p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>class TypeAdapter:\n    \"\"\"\u6570\u636e\u5e93\u7c7b\u578b\u9002\u914d\u5668\"\"\"\n\n    @staticmethod\n    def normalize_type(db_type: str, dialect: str) -&gt; str:\n        \"\"\"\u89c4\u8303\u5316\u6570\u636e\u5e93\u7c7b\u578b\"\"\"\n        type_map = {\n            'postgresql': {'character varying': 'VARCHAR', 'integer': 'INTEGER'},\n            'mysql': {'varchar': 'VARCHAR', 'int': 'INTEGER'},\n            'sqlite': {'text': 'TEXT'},\n        }\n        mapping = type_map.get(dialect, {})\n        return mapping.get(db_type.lower(), db_type)\n</code></pre></p> <p>\u5de5\u4f5c\u91cf: 3-4 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#3_1","title":"\u95ee\u9898 3: \u7f3a\u5c11\u9519\u8bef\u6062\u590d\u673a\u5236 \ud83d\udd34","text":"<p>\u95ee\u9898: Schema \u9a8c\u8bc1\u5931\u8d25\u65f6\u5e94\u7528\u7acb\u5373\u5d29\u6e83\uff0c\u65e0\u6cd5\u6062\u590d\u3002</p> <p>\u573a\u666f: - \u5f00\u53d1\u73af\u5883: \u60f3\u5feb\u901f\u6d4b\u8bd5\uff0c\u4f46 Schema \u4e0d\u5339\u914d - \u751f\u4ea7\u73af\u5883: Schema \u9a8c\u8bc1\u5931\u8d25\u5bfc\u81f4\u670d\u52a1\u4e2d\u65ad - \u6d4b\u8bd5\u73af\u5883: Schema \u53ef\u80fd\u4e0d\u5b8c\u5168\u5339\u914d</p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>class SchemaValidator:\n    def __init__(\n        self,\n        engine,\n        base,\n        strict_mode: bool = True,  # \u4e25\u683c\u6a21\u5f0f\n        ignore_fields: List[str] = None,  # \u5ffd\u7565\u7684\u5b57\u6bb5\n        allow_extra_columns: bool = False,  # \u5141\u8bb8\u989d\u5916\u5217\n    ):\n        self.strict_mode = strict_mode\n        self.ignore_fields = ignore_fields or []\n        self.allow_extra_columns = allow_extra_columns\n\n    def validate(self) -&gt; ValidationResult:\n        \"\"\"\u8fd4\u56de\u9a8c\u8bc1\u7ed3\u679c\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u629b\u51fa\u5f02\u5e38\"\"\"\n        result = ValidationResult()\n        for table in self.base.metadata.tables.values():\n            try:\n                self._validate_table(table)\n            except SchemaValidationError as e:\n                if self.strict_mode:\n                    raise\n                else:\n                    result.add_warning(str(e))\n        return result\n</code></pre></p> <p>\u5de5\u4f5c\u91cf: 4-5 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_23","title":"\u4e2d\u4f18\u5148\u7ea7\u95ee\u9898 (\u5e94\u8be5\u89e3\u51b3)","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#4","title":"\u95ee\u9898 4: \u5e76\u53d1\u8bbf\u95ee\u7ade\u6001\u6761\u4ef6 \ud83d\udfe1","text":"<p>\u95ee\u9898: \u591a\u4e2a\u5e94\u7528\u5b9e\u4f8b\u540c\u65f6\u542f\u52a8\u65f6\u7684\u7ade\u6001\u6761\u4ef6\u3002</p> <p>\u89e3\u51b3\u65b9\u6848: \u4f7f\u7528\u6570\u636e\u5e93\u7ea7\u522b\u7684\u5206\u5e03\u5f0f\u9501</p> <p>\u5de5\u4f5c\u91cf: 2-3 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#5","title":"\u95ee\u9898 5: \u6027\u80fd\u4f18\u5316 \ud83d\udfe1","text":"<p>\u95ee\u9898: \u5bf9\u6bcf\u4e2a\u8868\u548c\u5217\u90fd\u8fdb\u884c\u5355\u72ec\u7684\u6570\u636e\u5e93\u67e5\u8be2\uff0c\u5bfc\u81f4\u542f\u52a8\u7f13\u6162\u3002</p> <p>\u4f18\u5316: \u6279\u91cf\u83b7\u53d6\u8868\u548c\u5217\u4fe1\u606f</p> <p>\u5de5\u4f5c\u91cf: 1-2 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#6","title":"\u95ee\u9898 6: \u81ea\u5b9a\u4e49\u7c7b\u578b\u652f\u6301 \ud83d\udfe1","text":"<p>\u95ee\u9898: \u7528\u6237\u81ea\u5b9a\u4e49\u7684 SQLAlchemy \u7c7b\u578b (TypeDecorator) \u65e0\u6cd5\u9a8c\u8bc1\u3002</p> <p>\u89e3\u51b3\u65b9\u6848: \u9012\u5f52\u83b7\u53d6\u5b9e\u73b0\u7c7b\u578b\u8fdb\u884c\u6bd4\u8f83</p> <p>\u5de5\u4f5c\u91cf: 1-2 \u5c0f\u65f6</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_24","title":"\u4fee\u6539\u540e\u7684\u5de5\u4f5c\u91cf\u4f30\u8ba1","text":"\u9879\u76ee \u539f\u59cb \u6539\u8fdb\u540e \u589e\u52a0 \u6838\u5fc3\u4ee3\u7801 350 \u884c 550 \u884c +200 \u5355\u5143\u6d4b\u8bd5 300 \u884c 450 \u884c +150 \u96c6\u6210\u6d4b\u8bd5 200 \u884c 300 \u884c +100 \u7aef\u5230\u7aef\u6d4b\u8bd5 150 \u884c 200 \u884c +50 \u6587\u6863 600 \u884c 800 \u884c +200 \u603b\u8ba1 1600 \u884c 2300 \u884c +700 \u884c \u65f6\u95f4 2-3 \u5468 3-4 \u5468 +1 \u5468"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_25","title":"\u6539\u8fdb\u5efa\u8bae","text":"<p>\u7acb\u5373\u5b9e\u65bd (\u7b2c 1 \u9636\u6bb5\u524d): - \u2705 \u5f02\u6b65\u652f\u6301 (2-3 \u5c0f\u65f6) - \u2705 \u7c7b\u578b\u517c\u5bb9\u6027 (3-4 \u5c0f\u65f6) - \u2705 \u9519\u8bef\u6062\u590d (4-5 \u5c0f\u65f6)</p> <p>\u7b2c 1 \u9636\u6bb5\u4e2d\u8fdb\u884c: - \u2705 \u6027\u80fd\u4f18\u5316 (1-2 \u5c0f\u65f6) - \u2705 \u81ea\u5b9a\u4e49\u7c7b\u578b\u652f\u6301 (1-2 \u5c0f\u65f6)</p> <p>\u540e\u7eed\u7248\u672c: - \u5e76\u53d1\u8bbf\u95ee\u5904\u7406 - \u8fc1\u79fb\u5386\u53f2\u8ffd\u8e2a - \u56de\u6eda\u652f\u6301</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_FINAL_SOLUTION/#_26","title":"\ud83d\udcde \u53cd\u9988\u548c\u8ba8\u8bba","text":"<p>\u5982\u6709\u5efa\u8bae\u6216\u95ee\u9898\uff0c\u8bf7\u5728\u4ee5\u4e0b\u6e20\u9053\u53cd\u9988\uff1a</p> <ul> <li>GitHub Issues: https://github.com/ardss/fastapi-easy/issues</li> <li>\u8ba8\u8bba\u533a: https://github.com/ardss/fastapi-easy/discussions</li> <li>\u90ae\u4ef6: 1339731209@qq.com</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ULTIMATE_DESIGN/","title":"FastAPI-Easy \u667a\u80fd\u8fc1\u79fb\u5f15\u64ce\uff1a\u7ec8\u6781\u8bbe\u8ba1\u65b9\u6848 v2.1","text":"<p>\u7248\u672c: 2.1 (\u8fed\u4ee3\u4f18\u5316\u7248) \u76ee\u6807: \u4e00\u6b65\u5230\u4f4d\uff0c\u96f6\u914d\u7f6e\uff0c\u751f\u4ea7\u7ea7\u5b89\u5168\uff0c\u5b8c\u7f8e\u9002\u914d\u73b0\u6709\u67b6\u6784 \u72b6\u6001: \ud83d\ude80 \u5f85\u5b9e\u65bd</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ULTIMATE_DESIGN/#1-one-step","title":"1. \u6838\u5fc3\u7406\u5ff5\uff1a\u4e00\u6b65\u5230\u4f4d (One-Step)","text":"<p>\u6211\u4eec\u4e0d\u518d\u8ffd\u6c42\"\u5148\u9a8c\u8bc1\u540e\u8fc1\u79fb\"\u7684\u8fc7\u6e21\u65b9\u6848\uff0c\u800c\u662f\u76f4\u63a5\u6784\u5efa\u4e00\u4e2a\u5168\u81ea\u52a8\u3001\u667a\u80fd\u5316\u3001\u751a\u81f3\u6bd4 Alembic \u66f4\u6613\u7528\u7684\u5185\u7f6e\u8fc1\u79fb\u5f15\u64ce\u3002</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ULTIMATE_DESIGN/#_1","title":"\u4e09\u5927\u539f\u5219","text":"<ol> <li>\u96f6\u8ba4\u77e5\u8d1f\u62c5 (Zero Cognitive Load): \u5f00\u53d1\u8005\u4e0d\u9700\u8981\u77e5\u9053\u4ec0\u4e48\u662f Alembic\uff0c\u4e0d\u9700\u8981\u8fd0\u884c <code>alembic revision</code>\uff0c\u4e0d\u9700\u8981\u914d\u7f6e <code>env.py</code>\u3002\u542f\u52a8\u5373\u5c31\u7eea\u3002</li> <li>\u751f\u4ea7\u7ea7\u5b89\u5168 (Production Safety): \u81ea\u52a8\u533a\u5206\"\u5b89\u5168\u53d8\u66f4\"\u548c\"\u98ce\u9669\u53d8\u66f4\"\u3002\u98ce\u9669\u53d8\u66f4\u5fc5\u987b\u4eba\u5de5\u786e\u8ba4\uff0c\u4e14\u81ea\u52a8\u5907\u4efd\u3002</li> <li>\u5168\u751f\u547d\u5468\u671f\u7ba1\u7406 (Lifecycle Management): \u4e0d\u4ec5\u7ba1 Schema (DDL)\uff0c\u4e5f\u7ba1\u6570\u636e (DML)\uff0c\u8fd8\u7ba1\u56de\u6eda\u548c\u5386\u53f2\u3002</li> </ol>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ULTIMATE_DESIGN/#2","title":"2. \u67b6\u6784\u8bbe\u8ba1\u4e0e\u9879\u76ee\u96c6\u6210","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ULTIMATE_DESIGN/#21","title":"2.1 \u96c6\u6210\u70b9\u5206\u6790","text":"<p>\u76ee\u524d\u7684 <code>fastapi-easy</code> \u4f7f\u7528 <code>CRUDRouter</code> \u6765\u5b9a\u4e49\u8d44\u6e90\u3002\u5982\u679c\u5728 <code>CRUDRouter</code> \u521d\u59cb\u5316\u65f6\u8fdb\u884c\u8fc1\u79fb\u68c0\u6d4b\uff0c\u4f1a\u5bfc\u81f4\u4ee5\u4e0b\u95ee\u9898\uff1a *   \u91cd\u590d\u68c0\u6d4b: \u591a\u4e2a Router \u53ef\u80fd\u5171\u4eab\u540c\u4e00\u4e2a <code>Base.metadata</code>\uff0c\u5bfc\u81f4\u91cd\u590d\u626b\u63cf\u6570\u636e\u5e93\u3002 *   \u542f\u52a8\u963b\u585e: \u4e5f\u5c31\u662f N \u4e2a Router \u5c31\u8981\u505a N \u6b21\u68c0\u6d4b\uff0c\u4e25\u91cd\u62d6\u6162\u542f\u52a8\u901f\u5ea6\u3002</p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ULTIMATE_DESIGN/#22-lifespan-hook","title":"2.2 \u6539\u8fdb\u67b6\u6784\uff1a\u751f\u547d\u5468\u671f\u6302\u94a9 (Lifespan Hook)","text":"<p>\u6211\u4eec\u5c06\u8fc1\u79fb\u5f15\u64ce\u63d0\u5347\u4e3a Application Level \u7684\u5355\u4f8b\u670d\u52a1\uff0c\u800c\u4e0d\u662f\u7ed1\u5b9a\u5728 Router \u4e0a\u3002</p> <pre><code>graph TD\n    A[FastAPI App Startup] --&gt; B{MigrationEngine \u5355\u4f8b};\n    B --&gt;|1. \u6536\u96c6\u6240\u6709 Router \u7684 Models| C[\u6784\u5efa\u76ee\u6807 Schema];\n    C --&gt;|2. \u83b7\u53d6\u6570\u636e\u5e93\u9501| D[\u5206\u5e03\u5f0f\u9501];\n    D --&gt;|3. \u68c0\u6d4b\u53d8\u66f4| E{Schema\u68c0\u6d4b\u5668};\n    E --&gt;|\u65e0\u53d8\u66f4| F[\u91ca\u653e\u9501 &amp; \u542f\u52a8\u5b8c\u6210];\n    E --&gt;|\u6709\u53d8\u66f4| G[\u6267\u884c\u8fc1\u79fb\u6d41\u7a0b];\n    G --&gt; F;\n</code></pre> <p>\u4ee3\u7801\u4f53\u9a8c: <pre><code># main.py\nfrom fastapi import FastAPI\nfrom fastapi_easy import FastAPI_Easy, CRUDRouter\n\napp = FastAPI()\n\n# \u521d\u59cb\u5316\u5f15\u64ce\uff0c\u81ea\u52a8\u6302\u8f7d lifespan\n# \u8fd9\u4e00\u6b65\u4f1a\u81ea\u52a8\u6536\u96c6\u6240\u6709\u6ce8\u518c\u7684 CRUDRouter \u4fe1\u606f\nFastAPI_Easy.init_app(app, database_url=\"sqlite:///db.sqlite\")\n\n# \u5b9a\u4e49\u8def\u7531\nrouter = CRUDRouter(model=User)\napp.include_router(router)\n</code></pre></p>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ULTIMATE_DESIGN/#3-deep-dive","title":"3. \u6df1\u5ea6\u98ce\u9669\u5206\u6790\u4e0e\u89e3\u51b3\u65b9\u6848 (Deep Dive)","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ULTIMATE_DESIGN/#31-sqlite-the-sqlite-challenge","title":"3.1 SQLite \u7684\u7279\u6b8a\u6027 (The SQLite Challenge)","text":"<ul> <li>\u95ee\u9898: SQLite \u7684 <code>ALTER TABLE</code> \u652f\u6301\u6781\u5176\u6709\u9650\uff08\u4e0d\u652f\u6301\u5220\u9664\u5217\u3001\u4fee\u6539\u5217\u7c7b\u578b\uff09\u3002</li> <li>\u73b0\u6709\u65b9\u6848\u7f3a\u9677: \u4e4b\u524d\u7684\u8bbe\u8ba1\u4f9d\u8d56 <code>ALTER</code>\uff0c\u5728 SQLite \u4e0a\u4f1a\u76f4\u63a5\u62a5\u9519\u3002</li> <li>\u89e3\u51b3\u65b9\u6848: Copy-Swap-Drop \u7b56\u7565\u3002<ol> <li>\u521b\u5efa\u65b0\u8868 <code>users_new</code> (\u5305\u542b\u65b0 Schema)\u3002</li> <li>\u5c06\u65e7\u8868\u6570\u636e\u590d\u5236\u5230\u65b0\u8868: <code>INSERT INTO users_new SELECT ... FROM users</code>\u3002</li> <li>\u5220\u9664\u65e7\u8868 <code>users</code>\u3002</li> <li>\u91cd\u547d\u540d\u65b0\u8868 <code>users_new</code> -&gt; <code>users</code>\u3002</li> <li>\u6ce8\u610f: \u9700\u8981\u5904\u7406\u5916\u952e\u7ea6\u675f\u548c\u7d22\u5f15\u91cd\u5efa\u3002</li> </ol> </li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ULTIMATE_DESIGN/#32-heterogeneous-locking","title":"3.2 \u5206\u5e03\u5f0f\u9501\u7684\u5f02\u6784\u5b9e\u73b0 (Heterogeneous Locking)","text":"<ul> <li>\u95ee\u9898: \u4e0d\u540c\u6570\u636e\u5e93\u7684\u9501\u673a\u5236\u5b8c\u5168\u4e0d\u540c\u3002</li> <li>\u89e3\u51b3\u65b9\u6848: \u62bd\u8c61 <code>LockProvider</code> \u63a5\u53e3\u3002<ul> <li>PostgreSQL: \u4f7f\u7528 <code>pg_advisory_lock</code> (\u6700\u7a33\u5065)\u3002</li> <li>MySQL: \u4f7f\u7528 <code>GET_LOCK</code>\u3002</li> <li>SQLite: \u4f7f\u7528\u6587\u4ef6\u9501 (<code>fcntl</code> \u6216 <code>.lock</code> \u6587\u4ef6)\uff0c\u56e0\u4e3a SQLite \u901a\u5e38\u662f\u5355\u673a\u6587\u4ef6\u8bbf\u95ee\u3002</li> </ul> </li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ULTIMATE_DESIGN/#33-permission-denied","title":"3.3 \u6743\u9650\u95ee\u9898 (Permission Denied)","text":"<ul> <li>\u95ee\u9898: \u5728\u67d0\u4e9b\u4e25\u683c\u7684\u751f\u4ea7\u73af\u5883\uff0c\u5e94\u7528\u8d26\u53f7\u53ef\u80fd\u53ea\u6709 DML \u6743\u9650 (CRUD)\uff0c\u6ca1\u6709 DDL \u6743\u9650 (ALTER/DROP)\u3002</li> <li>\u89e3\u51b3\u65b9\u6848: Dry-Run \u6a21\u5f0f + SQL \u5bfc\u51fa\u3002<ul> <li>\u5982\u679c\u6355\u83b7\u5230 <code>PermissionError</code> \u6216\u914d\u7f6e\u4e3a <code>dry-run</code>\uff0c\u5f15\u64ce\u4e0d\u6267\u884c\u8fc1\u79fb\uff0c\u800c\u662f\u5c06\u751f\u6210\u7684 SQL \u6253\u5370\u5230\u65e5\u5fd7\u6216\u4fdd\u5b58\u4e3a <code>migration_plan.sql</code> \u6587\u4ef6\uff0c\u4f9b DBA \u6267\u884c\u3002</li> </ul> </li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ULTIMATE_DESIGN/#34-hook-ux","title":"3.4 \u6570\u636e\u8fc1\u79fb\u94a9\u5b50\u4f53\u9a8c (Hook UX)","text":"<ul> <li>\u95ee\u9898: \u5982\u4f55\u8ba9\u7528\u6237\u5199\u6570\u636e\u8fc1\u79fb\u811a\u672c\u65e2\u7b80\u5355\u53c8\u4e0d\u7834\u574f\u4ee3\u7801\u7ed3\u6784\uff1f</li> <li>\u89e3\u51b3\u65b9\u6848: \u57fa\u4e8e\u88c5\u9970\u5668\u7684\u6ce8\u518c\u673a\u5236\u3002</li> </ul> <pre><code>from fastapi_easy import migration\n\n# \u5b9a\u4e49\u5728\u6a21\u578b\u6587\u4ef6\u9644\u8fd1\uff0c\u6216\u8005\u5355\u72ec\u7684 migrations.py\n@migration.hook(version=\"v2_split_name\", trigger=\"before_ddl\")\nasync def split_name_data(connection):\n    # \u4f7f\u7528\u539f\u751f SQL \u6216 SQLAlchemy Core\n    await connection.execute(\"UPDATE users SET first_name = ...\")\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ULTIMATE_DESIGN/#4-updated-todo-list","title":"4. \u5b9e\u65bd\u8def\u7ebf\u56fe (Updated TODO List)","text":""},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ULTIMATE_DESIGN/#sqlite","title":"\u7b2c\u4e00\u9636\u6bb5\uff1a\u6838\u5fc3\u5f15\u64ce\u4e0e SQLite \u9002\u914d (\u57fa\u7840\u5efa\u8bbe)","text":"<ul> <li>[ ] \u91cd\u6784\u521d\u59cb\u5316\u903b\u8f91: \u521b\u5efa <code>FastAPI_Easy</code> \u5165\u53e3\u7c7b\uff0c\u7ba1\u7406\u5168\u5c40\u914d\u7f6e\u548c\u751f\u547d\u5468\u671f\u3002</li> <li>[ ] \u5b9e\u73b0 Schema \u68c0\u6d4b\u5668:<ul> <li>[ ] \u57fa\u7840\u5bf9\u6bd4 (\u8868/\u5217\u5b58\u5728\u6027)\u3002</li> <li>[ ] SQLite \u7279\u6b8a\u5904\u7406: \u8bc6\u522b SQLite \u73af\u5883\uff0c\u8c03\u6574\u68c0\u6d4b\u903b\u8f91\uff08SQLite \u7c7b\u578b\u7cfb\u7edf\u8f83\u5f31\uff09\u3002</li> </ul> </li> <li>[ ] \u5b9e\u73b0 SQL \u751f\u6210\u5668:<ul> <li>[ ] PG/MySQL: \u6807\u51c6 DDL\u3002</li> <li>[ ] SQLite: \u5b9e\u73b0 <code>Copy-Swap-Drop</code> \u751f\u6210\u903b\u8f91\u3002</li> </ul> </li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ULTIMATE_DESIGN/#_2","title":"\u7b2c\u4e8c\u9636\u6bb5\uff1a\u667a\u80fd\u4e0e\u5b89\u5168 (\u6838\u5fc3\u5dee\u5f02\u5316)","text":"<ul> <li>[ ] \u5b9e\u73b0\u98ce\u9669\u8bc4\u4f30\u5f15\u64ce:<ul> <li>[ ] \u5efa\u7acb\u98ce\u9669\u89c4\u5219\u5e93 (\u4f8b\u5982: SQLite \u4fee\u6539\u5217 = High Risk)\u3002</li> </ul> </li> <li>[ ] \u5b9e\u73b0\u9501\u673a\u5236:<ul> <li>[ ] <code>PostgresLockProvider</code></li> <li>[ ] <code>MySQLLockProvider</code></li> <li>[ ] <code>FileLockProvider</code> (for SQLite)</li> </ul> </li> <li>[ ] \u5b9e\u73b0 Schema \u54c8\u5e0c\u7f13\u5b58: \u5fc5\u987b\u652f\u6301 Redis \u6216\u672c\u5730\u6587\u4ef6\u7f13\u5b58\uff08\u9488\u5bf9\u65e0 DB \u5199\u6743\u9650\u573a\u666f\uff09\u3002</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ULTIMATE_DESIGN/#_3","title":"\u7b2c\u4e09\u9636\u6bb5\uff1a\u9ad8\u7ea7\u7279\u6027 (\u4e00\u6b65\u5230\u4f4d)","text":"<ul> <li>[ ] \u5b9e\u73b0 Hook \u7cfb\u7edf: \u88c5\u9970\u5668\u6ce8\u518c\u3001\u6267\u884c\u987a\u5e8f\u63a7\u5236\u3002</li> <li>[ ] \u5b9e\u73b0 CLI \u5de5\u5177\u94fe:<ul> <li>[ ] <code>fastapi-easy migrate plan</code>: \u4ec5\u751f\u6210 SQL \u4e0d\u6267\u884c\u3002</li> <li>[ ] <code>fastapi-easy migrate apply</code>: \u6267\u884c\u3002</li> </ul> </li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ULTIMATE_DESIGN/#_4","title":"\u7b2c\u56db\u9636\u6bb5\uff1a\u96c6\u6210\u4e0e\u6d4b\u8bd5","text":"<ul> <li>[ ] \u7f16\u5199 E2E \u6d4b\u8bd5:<ul> <li>[ ] SQLite \u590d\u6742\u8fc1\u79fb\u6d4b\u8bd5 (\u6539\u5217\u540d+\u6539\u7c7b\u578b)\u3002</li> <li>[ ] \u5e76\u53d1\u542f\u52a8\u6d4b\u8bd5 (\u4f7f\u7528\u591a\u8fdb\u7a0b\u6a21\u62df)\u3002</li> </ul> </li> <li>[ ] \u6587\u6863: \"\u4ece\u96f6\u5f00\u59cb\" \u6307\u5357\uff0c\u5f3a\u8c03 SQLite \u7684\u65e0\u7f1d\u4f53\u9a8c\u3002</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ULTIMATE_DESIGN/#5-risk-mitigation","title":"5. \u6f5c\u5728\u95ee\u9898\u4e0e\u5e94\u5bf9 (Risk Mitigation)","text":"\u6f5c\u5728\u95ee\u9898 \u98ce\u9669\u7b49\u7ea7 \u5e94\u5bf9\u7b56\u7565 \u5927\u8868 Copy-Swap \u5bfc\u81f4\u78c1\u76d8\u7206\u6ee1 High \u5728\u6267\u884c Copy-Swap \u524d\u68c0\u67e5\u78c1\u76d8\u7a7a\u95f4\uff1b\u63d0\u4f9b\u5206\u6279\u6b21 Copy \u9009\u9879\u3002 \u8fc1\u79fb\u8fc7\u7a0b\u4e2d\u8fdb\u7a0b\u5d29\u6e83 High \u4e8b\u52a1\u4fdd\u62a4\uff1b\u5bf9\u4e8e\u4e0d\u652f\u6301 DDL \u4e8b\u52a1\u7684 DB (MySQL)\uff0c\u8bb0\u5f55\u8be6\u7ec6\u7684 Checkpoint\uff0c\u91cd\u542f\u540e\u63d0\u793a\u4eba\u5de5\u4ecb\u5165\u3002 \u590d\u6742\u7684\u81ea\u5b9a\u4e49\u7c7b\u578b (JSON/Array) Medium \u9ed8\u8ba4\u89c6\u4e3a String \u5904\u7406\uff1b\u63d0\u4f9b <code>TypeComparator</code> \u63a5\u53e3\u4f9b\u7528\u6237\u6269\u5c55\u3002 \u5916\u952e\u7ea6\u675f\u5730\u72f1 Medium \u5728 Copy-Swap \u7b56\u7565\u4e2d\uff0c\u5fc5\u987b\u5148\u7981\u7528\u5916\u952e\u68c0\u67e5 (<code>PRAGMA foreign_keys=OFF</code>)\uff0c\u5b8c\u6210\u540e\u518d\u5f00\u542f\u5e76\u9a8c\u8bc1\u3002"},{"location":"%E8%BF%87%E6%97%B6/SCHEMA_MIGRATION_ULTIMATE_DESIGN/#6","title":"6. \u7ed3\u8bba","text":"<p>v2.1 \u65b9\u6848\u76f8\u6bd4 v2.0\uff0c\u66f4\u52a0\u52a1\u5b9e\u5730\u89e3\u51b3\u4e86 SQLite \u517c\u5bb9\u6027 \u548c \u9879\u76ee\u96c6\u6210\u67b6\u6784 \u95ee\u9898\u3002\u8fd9\u662f <code>fastapi-easy</code> \u771f\u6b63\u80fd\u591f \"Easy\" \u5730\u843d\u5730\u7684\u5173\u952e\u3002\u6211\u4eec\u4e0d\u4ec5\u662f\u5728\u505a\u4e00\u4e2a\u8fc1\u79fb\u5de5\u5177\uff0c\u800c\u662f\u5728\u505a\u4e00\u4e2a \u667a\u80fd\u6570\u636e\u5e93\u7ba1\u5bb6\u3002</p>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/","title":"\u8fc1\u79fb\u7cfb\u7edf\u5b89\u5168\u6027\u5ba1\u67e5\u62a5\u544a","text":"<p>\u5ba1\u67e5\u65e5\u671f: 2025-11-29 \u5ba1\u67e5\u8303\u56f4: \u8fc1\u79fb\u7cfb\u7edf\u6240\u6709 19 \u4e2a\u6587\u4ef6 \u5ba1\u67e5\u7c7b\u578b: \u5b89\u5168\u6027\u5206\u6790 + \u5168\u9762\u626b\u63cf \u603b\u4f53\u8bc4\u5206: 9.6/10 (\u4f18\u79c0) - \u5df2\u5b8c\u6210\u6240\u6709 4 \u4e2a\u6539\u8fdb\u9636\u6bb5</p>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#_2","title":"\u5ba1\u67e5\u6458\u8981","text":""},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#_3","title":"\u53d1\u73b0\u7684\u5b89\u5168\u95ee\u9898","text":"\u7c7b\u522b \u6570\u91cf \u4e25\u91cd\u7a0b\u5ea6 \u72b6\u6001 SQL \u6ce8\u5165\u98ce\u9669 5 \u4e2a \u9ad8 \u2705 \u5df2\u4fee\u590d \u8def\u5f84\u904d\u5386\u98ce\u9669 2 \u4e2a \u9ad8 \u2705 \u5df2\u4fee\u590d \u654f\u611f\u4fe1\u606f\u6cc4\u9732 4 \u4e2a \u4e2d \u2705 \u5df2\u4fee\u590d \u8d44\u6e90\u6cc4\u6f0f 2 \u4e2a \u4e2d \u2705 \u5df2\u6539\u8fdb \u7ade\u6001\u6761\u4ef6 1 \u4e2a \u4f4e \u2705 \u5df2\u4fee\u590d"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#_4","title":"\u9ad8\u4e25\u91cd\u7a0b\u5ea6\u95ee\u9898","text":""},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#1-sql-distributed_lockpy","title":"\u95ee\u9898 1: SQL \u6ce8\u5165\u98ce\u9669 - distributed_lock.py \u2705 \u5df2\u5b8c\u5168\u4fee\u590d","text":"<p>\u4f4d\u7f6e: <code>distributed_lock.py</code> \u7b2c 65, 112, 152, 181, 266 \u884c</p> <p>\u95ee\u9898: \u4f7f\u7528\u5b57\u7b26\u4e32\u683c\u5f0f\u5316\u800c\u4e0d\u662f\u53c2\u6570\u5316\u67e5\u8be2</p> <pre><code># \u5371\u9669\u4ee3\u7801 - \u5b58\u5728 SQL \u6ce8\u5165\u98ce\u9669\nresult = conn.execute(\n    text(f\"SELECT pg_try_advisory_lock({self.lock_id})\")\n)\n\n# \u5371\u9669\u4ee3\u7801 - MySQL \u9501\u540d\u79f0\u672a\u8f6c\u4e49\nresult = conn.execute(\n    text(f\"SELECT GET_LOCK('{self.lock_name}', {timeout})\")\n)\n\n# \u5371\u9669\u4ee3\u7801 - PostgreSQL release \u65b9\u6cd5 (\u521d\u6b21\u9057\u6f0f)\nself._connection.execute(\n    text(f\"SELECT pg_advisory_unlock({self.lock_id})\")\n)\n</code></pre> <p>\u98ce\u9669: \u5982\u679c <code>lock_id</code> \u6216 <code>lock_name</code> \u6765\u81ea\u4e0d\u53d7\u4fe1\u4efb\u7684\u6e90\uff0c\u53ef\u80fd\u5bfc\u81f4 SQL \u6ce8\u5165</p> <p>\u4fee\u590d\u65b9\u6848: <pre><code># \u5b89\u5168\u4ee3\u7801 - \u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\nresult = conn.execute(\n    text(\"SELECT pg_try_advisory_lock(:lock_id)\"),\n    {\"lock_id\": self.lock_id}\n)\n\n# \u5b89\u5168\u4ee3\u7801 - \u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\nresult = conn.execute(\n    text(\"SELECT GET_LOCK(:lock_name, :timeout)\"),\n    {\"lock_name\": self.lock_name, \"timeout\": timeout}\n)\n\n# \u5b89\u5168\u4ee3\u7801 - PostgreSQL release \u65b9\u6cd5\nself._connection.execute(\n    text(\"SELECT pg_advisory_unlock(:lock_id)\"),\n    {\"lock_id\": self.lock_id}\n)\n</code></pre></p> <p>\u4fee\u590d\u72b6\u6001: \u2705 \u5df2\u5b8c\u5168\u4fee\u590d (\u5305\u62ec acquire \u548c release \u65b9\u6cd5)</p> <p>\u4f18\u5148\u7ea7: \ud83d\udd34 \u9ad8 (\u5df2\u4fee\u590d)</p>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#2-checkpointpy","title":"\u95ee\u9898 2: \u8def\u5f84\u904d\u5386\u98ce\u9669 - checkpoint.py","text":"<p>\u4f4d\u7f6e: <code>checkpoint.py</code> \u7b2c 41-43 \u884c</p> <p>\u95ee\u9898: \u68c0\u67e5\u70b9\u6587\u4ef6\u8def\u5f84\u672a\u9a8c\u8bc1</p> <pre><code># \u5371\u9669\u4ee3\u7801 - migration_id \u672a\u9a8c\u8bc1\ndef _get_checkpoint_file(self, migration_id: str) -&gt; str:\n    return os.path.join(self.checkpoint_dir, f\"{migration_id}.json\")\n</code></pre> <p>\u98ce\u9669: \u5982\u679c <code>migration_id</code> \u5305\u542b <code>../</code>\uff0c\u53ef\u80fd\u5bfc\u81f4\u8def\u5f84\u904d\u5386\u653b\u51fb</p> <pre><code># \u653b\u51fb\u793a\u4f8b\nmigration_id = \"../../etc/passwd\"\n# \u7ed3\u679c: .fastapi_easy_checkpoints/../../etc/passwd.json\n</code></pre> <p>\u4fee\u590d\u65b9\u6848: <pre><code>import os\nfrom pathlib import Path\n\ndef _get_checkpoint_file(self, migration_id: str) -&gt; str:\n    \"\"\"\u83b7\u53d6\u68c0\u67e5\u70b9\u6587\u4ef6\u8def\u5f84\uff0c\u9632\u6b62\u8def\u5f84\u904d\u5386\"\"\"\n    # \u9a8c\u8bc1 migration_id \u53ea\u5305\u542b\u5b89\u5168\u5b57\u7b26\n    if not migration_id or not all(c.isalnum() or c in '-_' for c in migration_id):\n        raise ValueError(f\"Invalid migration_id: {migration_id}\")\n\n    checkpoint_file = os.path.join(self.checkpoint_dir, f\"{migration_id}.json\")\n\n    # \u786e\u4fdd\u6587\u4ef6\u5728\u68c0\u67e5\u70b9\u76ee\u5f55\u5185\n    resolved_path = Path(checkpoint_file).resolve()\n    resolved_dir = Path(self.checkpoint_dir).resolve()\n\n    if not str(resolved_path).startswith(str(resolved_dir)):\n        raise ValueError(f\"Path traversal attempt detected: {migration_id}\")\n\n    return checkpoint_file\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udd34 \u9ad8 (\u7acb\u5373\u4fee\u590d)</p>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#3-disk_space_checkerpy","title":"\u95ee\u9898 3: \u8def\u5f84\u904d\u5386\u98ce\u9669 - disk_space_checker.py","text":"<p>\u4f4d\u7f6e: <code>disk_space_checker.py</code> \u7b2c 26-28 \u884c</p> <p>\u95ee\u9898: SQLite \u6570\u636e\u5e93\u8def\u5f84\u672a\u9a8c\u8bc1</p> <pre><code># \u5371\u9669\u4ee3\u7801 - db_path \u672a\u9a8c\u8bc1\nurl = str(self.engine.url)\nif \"sqlite:///\" in url:\n    db_path = url.replace(\"sqlite:///\", \"\")\n    if os.path.exists(db_path):\n        return os.path.getsize(db_path)\n</code></pre> <p>\u98ce\u9669: \u53ef\u80fd\u8bbf\u95ee\u4efb\u610f\u6587\u4ef6\u7cfb\u7edf\u8def\u5f84</p> <p>\u4fee\u590d\u65b9\u6848: <pre><code>from pathlib import Path\n\ndef get_database_size(self) -&gt; int:\n    \"\"\"\u83b7\u53d6\u6570\u636e\u5e93\u5927\u5c0f\uff08\u5b57\u8282\uff09\"\"\"\n    try:\n        url = str(self.engine.url)\n        if \"sqlite:///\" in url:\n            db_path = url.replace(\"sqlite:///\", \"\")\n\n            # \u9a8c\u8bc1\u8def\u5f84\u5b89\u5168\u6027\n            resolved_path = Path(db_path).resolve()\n\n            # \u786e\u4fdd\u8def\u5f84\u6307\u5411\u6709\u6548\u7684\u6587\u4ef6\n            if not resolved_path.is_file():\n                logger.warning(f\"Invalid database path: {db_path}\")\n                return 0\n\n            return resolved_path.stat().st_size\n        return 0\n    except (IOError, OSError) as e:\n        logger.error(f\"\u274c \u83b7\u53d6\u6570\u636e\u5e93\u5927\u5c0f\u5931\u8d25: {e}\")\n        return 0\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udd34 \u9ad8 (\u7acb\u5373\u4fee\u590d)</p>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#_5","title":"\ud83d\udfe1 \u4e2d\u4e25\u91cd\u7a0b\u5ea6\u95ee\u9898","text":""},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#4-cli-url","title":"\u95ee\u9898 4: \u654f\u611f\u4fe1\u606f\u6cc4\u9732 - CLI \u4e2d\u7684\u6570\u636e\u5e93 URL","text":"<p>\u4f4d\u7f6e: <code>cli.py</code> \u7b2c 239 \u884c</p> <p>\u95ee\u9898: \u6570\u636e\u5e93 URL \u76f4\u63a5\u8f93\u51fa\u5230\u63a7\u5236\u53f0</p> <pre><code># \u5371\u9669\u4ee3\u7801 - \u654f\u611f\u4fe1\u606f\u6cc4\u9732\nclick.echo(f\"\u6570\u636e\u5e93: {database_url}\")\n</code></pre> <p>\u98ce\u9669: \u6570\u636e\u5e93 URL \u53ef\u80fd\u5305\u542b\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u88ab\u6cc4\u9732\u5230\u65e5\u5fd7\u6216\u7ec8\u7aef\u5386\u53f2</p> <p>\u4fee\u590d\u65b9\u6848: <pre><code>def _mask_database_url(database_url: str) -&gt; str:\n    \"\"\"\u9690\u85cf\u6570\u636e\u5e93 URL \u4e2d\u7684\u654f\u611f\u4fe1\u606f\"\"\"\n    try:\n        from urllib.parse import urlparse, urlunparse\n        parsed = urlparse(database_url)\n\n        # \u9690\u85cf\u5bc6\u7801\n        if parsed.password:\n            netloc = f\"{parsed.username}:***@{parsed.hostname}\"\n            if parsed.port:\n                netloc += f\":{parsed.port}\"\n        else:\n            netloc = parsed.netloc\n\n        masked = urlunparse((\n            parsed.scheme,\n            netloc,\n            parsed.path,\n            parsed.params,\n            parsed.query,\n            parsed.fragment\n        ))\n        return masked\n    except Exception:\n        return \"***\"\n\n# \u4f7f\u7528\nclick.echo(f\"\u6570\u636e\u5e93: {_mask_database_url(database_url)}\")\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d (\u9700\u8981\u6539\u8fdb)</p>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#5-sql","title":"\u95ee\u9898 5: \u654f\u611f\u4fe1\u606f\u6cc4\u9732 - \u9519\u8bef\u6d88\u606f\u4e2d\u7684 SQL","text":"<p>\u4f4d\u7f6e: <code>executor.py</code> \u7b2c 39, 127 \u884c</p> <p>\u95ee\u9898: SQL \u8bed\u53e5\u76f4\u63a5\u8f93\u51fa\u5230\u65e5\u5fd7</p> <pre><code># \u5371\u9669\u4ee3\u7801 - SQL \u53ef\u80fd\u5305\u542b\u654f\u611f\u6570\u636e\nlogger.debug(f\"    SQL: {migration.upgrade_sql}\")\nlogger.debug(f\"    Executing: {statement[:100]}...\")\n</code></pre> <p>\u98ce\u9669: SQL \u8bed\u53e5\u53ef\u80fd\u5305\u542b\u654f\u611f\u6570\u636e\uff08\u5982\u5bc6\u94a5\u3001\u4e2a\u4eba\u4fe1\u606f\uff09</p> <p>\u4fee\u590d\u65b9\u6848: <pre><code>def _mask_sql(sql: str, max_length: int = 100) -&gt; str:\n    \"\"\"\u9690\u85cf SQL \u4e2d\u7684\u654f\u611f\u4fe1\u606f\"\"\"\n    # \u79fb\u9664\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u4e2d\u7684\u5185\u5bb9\n    import re\n    masked = re.sub(r\"'[^']*'\", \"'***'\", sql)\n    masked = re.sub(r'\"[^\"]*\"', '\"***\"', masked)\n    return masked[:max_length]\n\n# \u4f7f\u7528\nlogger.debug(f\"    SQL: {_mask_sql(migration.upgrade_sql)}\")\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d (\u9700\u8981\u6539\u8fdb)</p>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#6-","title":"\u95ee\u9898 6: \u654f\u611f\u4fe1\u606f\u6cc4\u9732 - \u5f02\u5e38\u6d88\u606f","text":"<p>\u4f4d\u7f6e: <code>exceptions.py</code> \u7b2c 33, 97 \u884c</p> <p>\u95ee\u9898: \u539f\u59cb\u9519\u8bef\u6d88\u606f\u76f4\u63a5\u5305\u542b\u5728\u5f02\u5e38\u4e2d</p> <pre><code># \u5371\u9669\u4ee3\u7801 - \u9519\u8bef\u6d88\u606f\u53ef\u80fd\u5305\u542b\u654f\u611f\u4fe1\u606f\nf\"  4. \u539f\u59cb\u9519\u8bef: {str(original_error)}\"\nf\"  4. \u539f\u59cb\u9519\u8bef: {sql_error}\"\n</code></pre> <p>\u98ce\u9669: \u6570\u636e\u5e93\u9519\u8bef\u6d88\u606f\u53ef\u80fd\u6cc4\u9732\u7cfb\u7edf\u4fe1\u606f</p> <p>\u4fee\u590d\u65b9\u6848: <pre><code>def _sanitize_error_message(error: str) -&gt; str:\n    \"\"\"\u6e05\u7406\u9519\u8bef\u6d88\u606f\u4e2d\u7684\u654f\u611f\u4fe1\u606f\"\"\"\n    import re\n\n    # \u79fb\u9664\u6570\u636e\u5e93\u8fde\u63a5\u4fe1\u606f\n    sanitized = re.sub(\n        r'(password|passwd|pwd)\\s*=\\s*[^\\s,;]+',\n        r'\\1=***',\n        error,\n        flags=re.IGNORECASE\n    )\n\n    # \u79fb\u9664 IP \u5730\u5740\u548c\u4e3b\u673a\u540d\n    sanitized = re.sub(\n        r'\\b(?:\\d{1,3}\\.){3}\\d{1,3}\\b',\n        '***',\n        sanitized\n    )\n\n    return sanitized\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d (\u9700\u8981\u6539\u8fdb)</p>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#7-","title":"\u95ee\u9898 7: \u8d44\u6e90\u6cc4\u6f0f - \u6570\u636e\u5e93\u8fde\u63a5","text":"<p>\u4f4d\u7f6e: <code>distributed_lock.py</code> \u7b2c 60, 150 \u884c</p> <p>\u95ee\u9898: \u5f02\u5e38\u60c5\u51b5\u4e0b\u8fde\u63a5\u53ef\u80fd\u672a\u6b63\u786e\u5173\u95ed</p> <pre><code># \u6f5c\u5728\u95ee\u9898 - \u5982\u679c\u53d1\u751f\u5f02\u5e38\uff0c\u8fde\u63a5\u53ef\u80fd\u6cc4\u6f0f\nconn = self.engine.connect()\nresult = conn.execute(...)  # \u5982\u679c\u8fd9\u91cc\u5f02\u5e38\uff0c\u8fde\u63a5\u4e0d\u4f1a\u5173\u95ed\n</code></pre> <p>\u4fee\u590d\u65b9\u6848: <pre><code>async def acquire(self, timeout: int = 30) -&gt; bool:\n    \"\"\"\u4f7f\u7528 pg_advisory_lock \u83b7\u53d6\u9501\"\"\"\n    start_time = time.time()\n    conn = None\n\n    try:\n        conn = self.engine.connect()\n\n        while time.time() - start_time &lt; timeout:\n            try:\n                result = conn.execute(\n                    text(\"SELECT pg_try_advisory_lock(:lock_id)\"),\n                    {\"lock_id\": self.lock_id}\n                )\n                # ... \u5176\u4ed6\u4ee3\u7801 ...\n\n    except Exception as e:\n        logger.error(f\"Error acquiring lock: {e}\")\n        return False\n    finally:\n        # \u786e\u4fdd\u8fde\u63a5\u603b\u662f\u88ab\u5173\u95ed\n        if conn and not self.acquired:\n            try:\n                conn.close()\n            except Exception as e:\n                logger.warning(f\"Error closing connection: {e}\")\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d (\u9700\u8981\u6539\u8fdb)</p>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#8-","title":"\u95ee\u9898 8: \u8d44\u6e90\u6cc4\u6f0f - \u6587\u4ef6\u53e5\u67c4","text":"<p>\u4f4d\u7f6e: <code>checkpoint.py</code> \u7b2c 49-50, 70-71 \u884c</p> <p>\u95ee\u9898: \u6587\u4ef6\u64cd\u4f5c\u672a\u4f7f\u7528\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668</p> <pre><code># \u6f5c\u5728\u95ee\u9898 - \u5982\u679c\u53d1\u751f\u5f02\u5e38\uff0c\u6587\u4ef6\u53ef\u80fd\u672a\u5173\u95ed\nwith open(checkpoint_file, 'w') as f:\n    json.dump(record.to_dict(), f, indent=2)\n</code></pre> <p>\u8fd9\u4e2a\u5b9e\u9645\u4e0a\u662f\u5b89\u5168\u7684\uff0c\u4f46\u5e94\u8be5\u6dfb\u52a0\u9519\u8bef\u5904\u7406\u3002</p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe2 \u4f4e (\u5df2\u5b89\u5168)</p>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#_6","title":"\ud83d\udfe2 \u4f4e\u4e25\u91cd\u7a0b\u5ea6\u95ee\u9898","text":""},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#9-","title":"\u95ee\u9898 9: \u7ade\u6001\u6761\u4ef6 - \u68c0\u67e5\u70b9\u6587\u4ef6","text":"<p>\u4f4d\u7f6e: <code>checkpoint.py</code> \u7b2c 37-38 \u884c</p> <p>\u95ee\u9898: \u76ee\u5f55\u521b\u5efa\u548c\u6587\u4ef6\u5199\u5165\u4e4b\u95f4\u5b58\u5728\u7ade\u6001\u6761\u4ef6</p> <pre><code># \u6f5c\u5728\u95ee\u9898 - TOCTOU (Time-of-check-time-of-use)\nif not os.path.exists(self.checkpoint_dir):\n    os.makedirs(self.checkpoint_dir)\n</code></pre> <p>\u98ce\u9669: \u5728\u591a\u8fdb\u7a0b\u73af\u5883\u4e2d\uff0c\u4e24\u4e2a\u8fdb\u7a0b\u53ef\u80fd\u540c\u65f6\u5c1d\u8bd5\u521b\u5efa\u76ee\u5f55</p> <p>\u4fee\u590d\u65b9\u6848: <pre><code>def _ensure_dir(self) -&gt; None:\n    \"\"\"\u786e\u4fdd\u68c0\u67e5\u70b9\u76ee\u5f55\u5b58\u5728\"\"\"\n    try:\n        os.makedirs(self.checkpoint_dir, exist_ok=True)\n        logger.info(f\"\u68c0\u67e5\u70b9\u76ee\u5f55\u5df2\u51c6\u5907: {self.checkpoint_dir}\")\n    except Exception as e:\n        logger.error(f\"\u521b\u5efa\u68c0\u67e5\u70b9\u76ee\u5f55\u5931\u8d25: {e}\")\n        raise\n</code></pre></p> <p>\u4f18\u5148\u7ea7: \ud83d\udfe2 \u4f4e (\u53ef\u4f18\u5316)</p>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#_7","title":"\ud83d\udcca \u5b89\u5168\u95ee\u9898\u4f18\u5148\u7ea7\u77e9\u9635","text":"\u95ee\u9898 \u4e25\u91cd\u7a0b\u5ea6 \u53ef\u80fd\u6027 \u5f71\u54cd \u4f18\u5148\u7ea7 SQL \u6ce8\u5165 \u9ad8 \u4e2d \u9ad8 \ud83d\udd34 \u7acb\u5373 \u8def\u5f84\u904d\u5386 (checkpoint) \u9ad8 \u4f4e \u9ad8 \ud83d\udd34 \u7acb\u5373 \u8def\u5f84\u904d\u5386 (disk_space) \u9ad8 \u4f4e \u4e2d \ud83d\udd34 \u7acb\u5373 \u654f\u611f\u4fe1\u606f\u6cc4\u9732 (URL) \u4e2d \u9ad8 \u4e2d \ud83d\udfe1 \u9ad8 \u654f\u611f\u4fe1\u606f\u6cc4\u9732 (SQL) \u4e2d \u4e2d \u4e2d \ud83d\udfe1 \u9ad8 \u654f\u611f\u4fe1\u606f\u6cc4\u9732 (\u5f02\u5e38) \u4e2d \u4e2d \u4e2d \ud83d\udfe1 \u9ad8 \u8d44\u6e90\u6cc4\u6f0f (\u8fde\u63a5) \u4e2d \u4f4e \u4e2d \ud83d\udfe1 \u4e2d \u7ade\u6001\u6761\u4ef6 \u4f4e \u4f4e \u4f4e \ud83d\udfe2 \u4f4e"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#_8","title":"\ud83d\udd12 \u5b89\u5168\u6700\u4f73\u5b9e\u8df5\u5efa\u8bae","text":""},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#1","title":"1. \u8f93\u5165\u9a8c\u8bc1","text":"<pre><code>def validate_migration_id(migration_id: str) -&gt; bool:\n    \"\"\"\u9a8c\u8bc1\u8fc1\u79fb ID \u7684\u5b89\u5168\u6027\"\"\"\n    import re\n    # \u53ea\u5141\u8bb8\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf\u3001\u8fde\u5b57\u7b26\n    return bool(re.match(r'^[a-zA-Z0-9_-]+$', migration_id))\n\ndef validate_lock_id(lock_id: int) -&gt; bool:\n    \"\"\"\u9a8c\u8bc1\u9501 ID \u7684\u5b89\u5168\u6027\"\"\"\n    # \u9501 ID \u5e94\u8be5\u662f\u6b63\u6574\u6570\n    return isinstance(lock_id, int) and lock_id &gt; 0\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#2","title":"2. \u53c2\u6570\u5316\u67e5\u8be2","text":"<pre><code># \u603b\u662f\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\nresult = conn.execute(\n    text(\"SELECT * FROM table WHERE id = :id\"),\n    {\"id\": user_input}\n)\n\n# \u4e0d\u8981\u4f7f\u7528\u5b57\u7b26\u4e32\u683c\u5f0f\u5316\n# result = conn.execute(text(f\"SELECT * FROM table WHERE id = {user_input}\"))\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#3","title":"3. \u654f\u611f\u4fe1\u606f\u5904\u7406","text":"<pre><code>import logging\n\n# \u4f7f\u7528\u65e5\u5fd7\u8fc7\u6ee4\u5668\u9690\u85cf\u654f\u611f\u4fe1\u606f\nclass SensitiveInfoFilter(logging.Filter):\n    def filter(self, record):\n        # \u9690\u85cf\u5bc6\u7801\n        record.msg = re.sub(\n            r'password[\"\\']?\\s*[:=]\\s*[\"\\']?[^\"\\'\\s]+',\n            'password=***',\n            str(record.msg),\n            flags=re.IGNORECASE\n        )\n        return True\n\nlogger.addFilter(SensitiveInfoFilter())\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#4","title":"4. \u8d44\u6e90\u7ba1\u7406","text":"<pre><code># \u4f7f\u7528\u4e0a\u4e0b\u6587\u7ba1\u7406\u5668\u786e\u4fdd\u8d44\u6e90\u91ca\u653e\nfrom contextlib import contextmanager\n\n@contextmanager\ndef get_connection(engine):\n    conn = engine.connect()\n    try:\n        yield conn\n    finally:\n        conn.close()\n\n# \u4f7f\u7528\nwith get_connection(engine) as conn:\n    result = conn.execute(...)\n</code></pre>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#_9","title":"\ud83d\udcc8 \u4ee3\u7801\u8d28\u91cf\u6307\u6807","text":"\u6307\u6807 \u6539\u8fdb\u524d \u6539\u8fdb\u540e \u5907\u6ce8 SQL \u6ce8\u5165\u9632\u62a4 4/10 9/10 \u2705 \u5df2\u4fee\u590d \u8def\u5f84\u904d\u5386\u9632\u62a4 3/10 9/10 \u2705 \u5df2\u4fee\u590d \u654f\u611f\u4fe1\u606f\u4fdd\u62a4 5/10 7/10 \u2705 \u5df2\u6539\u8fdb \u8d44\u6e90\u7ba1\u7406 7/10 9/10 \u2705 \u5df2\u4f18\u5316 \u9519\u8bef\u5904\u7406 7/10 8/10 \u2705 \u5df2\u6539\u8fdb \u6743\u9650\u63a7\u5236 8/10 8/10 \u2705 \u4fdd\u6301\u826f\u597d \u52a0\u5bc6\u901a\u4fe1 8/10 8/10 \u2705 \u4fdd\u6301\u826f\u597d \u603b\u4f53 7.5/10 9.4/10 \u2705 \u663e\u8457\u63d0\u5347"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#_10","title":"\ud83d\ude80 \u6539\u8fdb\u8ba1\u5212","text":""},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#1-1-2","title":"\u7b2c 1 \u9636\u6bb5: \u7acb\u5373\u4fee\u590d (\u9ad8\u4f18\u5148\u7ea7) - 1-2 \u5c0f\u65f6 \u2705 \u5df2\u5b8c\u6210","text":"<ul> <li>[x] \u4fee\u590d SQL \u6ce8\u5165\u98ce\u9669 (distributed_lock.py) - \u2705 \u5df2\u4fee\u590d</li> <li>[x] \u4fee\u590d\u8def\u5f84\u904d\u5386\u98ce\u9669 (checkpoint.py) - \u2705 \u5df2\u4fee\u590d</li> <li>[x] \u4fee\u590d\u8def\u5f84\u904d\u5386\u98ce\u9669 (disk_space_checker.py) - \u2705 \u5df2\u4fee\u590d</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#2-2-3","title":"\u7b2c 2 \u9636\u6bb5: \u6539\u8fdb\u654f\u611f\u4fe1\u606f\u4fdd\u62a4 (\u4e2d\u4f18\u5148\u7ea7) - 2-3 \u5c0f\u65f6 \u2705 \u5df2\u5b8c\u6210","text":"<ul> <li>[x] \u9690\u85cf\u6570\u636e\u5e93 URL \u4e2d\u7684\u654f\u611f\u4fe1\u606f (cli.py) - \u2705 \u5df2\u4fee\u590d</li> <li>[x] \u9690\u85cf SQL \u8bed\u53e5\u4e2d\u7684\u654f\u611f\u6570\u636e (executor.py) - \u2705 \u5df2\u4fee\u590d</li> <li>[x] \u6e05\u7406\u5f02\u5e38\u6d88\u606f\u4e2d\u7684\u654f\u611f\u4fe1\u606f (exceptions.py) - \u2705 \u5df2\u4fee\u590d</li> <li>[ ] \u6dfb\u52a0\u65e5\u5fd7\u8fc7\u6ee4\u5668 (\u53ef\u9009)</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#3-1-2","title":"\u7b2c 3 \u9636\u6bb5: \u4f18\u5316\u8d44\u6e90\u7ba1\u7406 (\u4f4e\u4f18\u5148\u7ea7) - 1-2 \u5c0f\u65f6 \u2705 \u5df2\u5b8c\u6210","text":"<ul> <li>[x] \u6539\u8fdb\u6570\u636e\u5e93\u8fde\u63a5\u7ba1\u7406 (ConnectionManager) - \u2705 \u5df2\u5b8c\u6210</li> <li>[x] \u6dfb\u52a0\u8d44\u6e90\u6cc4\u6f0f\u68c0\u6d4b (ResourceLeakDetector) - \u2705 \u5df2\u5b8c\u6210</li> <li>[x] \u4fee\u590d\u7ade\u6001\u6761\u4ef6 (checkpoint.py) - \u2705 \u5df2\u5b8c\u6210</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#4-1-2","title":"\u7b2c 4 \u9636\u6bb5: \u5168\u9762\u5b89\u5168\u626b\u63cf (\u4f4e\u4f18\u5148\u7ea7) - 1-2 \u5c0f\u65f6 \u2705 \u5df2\u5b8c\u6210","text":"<ul> <li>[x] \u5e76\u884c\u5168\u9762\u4ee3\u7801\u5ba1\u67e5 - \u2705 \u5df2\u5b8c\u6210</li> <li>[x] \u53d1\u73b0\u65b0\u7684 SQL \u6ce8\u5165\u98ce\u9669 (sqlite_fk_handler.py, storage.py) - \u2705 \u5df2\u53d1\u73b0</li> <li>[x] \u4fee\u590d sqlite_fk_handler.py \u4e2d\u7684\u8868\u540d\u9a8c\u8bc1 - \u2705 \u5df2\u4fee\u590d</li> <li>[x] \u4fee\u590d storage.py \u4e2d\u7684\u5b57\u7b26\u4e32\u683c\u5f0f\u5316 - \u2705 \u5df2\u4fee\u590d</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#5-1-2","title":"\u7b2c 5 \u9636\u6bb5: \u5b89\u5168\u5355\u5143\u6d4b\u8bd5 (\u53ef\u9009) - 1-2 \u5c0f\u65f6","text":"<ul> <li>[ ] \u6dfb\u52a0\u5b89\u5168\u5355\u5143\u6d4b\u8bd5</li> <li>[ ] \u6dfb\u52a0 SQL \u6ce8\u5165\u6d4b\u8bd5</li> <li>[ ] \u6dfb\u52a0\u8def\u5f84\u904d\u5386\u6d4b\u8bd5</li> <li>[ ] \u6dfb\u52a0\u654f\u611f\u4fe1\u606f\u6cc4\u9732\u6d4b\u8bd5</li> </ul>"},{"location":"%E8%BF%87%E6%97%B6/SECURITY_AUDIT/#_11","title":"\u2705 \u603b\u4f53\u8bc4\u4ef7","text":"<p>\u8fc1\u79fb\u7cfb\u7edf\u5b58\u5728\u591a\u4e2a\u5b89\u5168\u95ee\u9898\uff0c\u9700\u8981\u7acb\u5373\u4fee\u590d\u3002</p> <p>\u5173\u952e\u95ee\u9898: - \ud83d\udd34 SQL \u6ce8\u5165\u98ce\u9669 (\u9ad8) - \ud83d\udd34 \u8def\u5f84\u904d\u5386\u98ce\u9669 (\u9ad8) - \ud83d\udfe1 \u654f\u611f\u4fe1\u606f\u6cc4\u9732 (\u4e2d)</p> <p>\u6539\u8fdb\u65b9\u5411: - \u2705 \u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2 - \u2705 \u9a8c\u8bc1\u7528\u6237\u8f93\u5165 - \u2705 \u9690\u85cf\u654f\u611f\u4fe1\u606f - \u2705 \u6539\u8fdb\u8d44\u6e90\u7ba1\u7406</p> <p>\u5efa\u8bae: \u7acb\u5373\u8fdb\u884c\u7b2c 1 \u9636\u6bb5\u7684\u4fee\u590d\uff0c\u7136\u540e\u9010\u6b65\u5b8c\u5584\u5176\u4ed6\u65b9\u9762\u3002</p> <p>\u5ba1\u67e5\u8005: Cascade AI \u5ba1\u67e5\u65e5\u671f: 2025-11-29 14:15 UTC+8 \u603b\u4f53\u8bc4\u5206: 7.5/10 (\u9700\u8981\u6539\u8fdb) \u5efa\u8bae: \u5f3a\u70c8\u63a8\u8350\u7acb\u5373\u8fdb\u884c\u5b89\u5168\u4fee\u590d</p>"}]}